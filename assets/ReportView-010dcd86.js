import{w as $,a1 as B,a9 as w,Q as k,R as S,z as L,a2 as v,B as s,a7 as d,a8 as _,J as f,K as n,C as i,I as p,ai as O,aj as W,Z as z,L as M,M as U,U as b}from"./index-099b62a8.js";const F=u=>(M("data-v-8a9923d5"),u=u(),U(),u),P={key:0,class:"report"},j={class:"dayName"},A={class:"shifts"},E={class:"dayShift"},H={class:"shiftName"},J=["onClick"],K={key:0,class:"userScans"},Q=F(()=>i("md-divider",null,null,-1)),Y=$({__name:"ReportView",setup(u){var D;const x=B(),V=w(k(S,`/users/${(D=x.value)==null?void 0:D.uid}`)),m=I(),y=w(k(S,`/reports/${m.getDate()}-${m.getMonth()}-${m.getFullYear()}`),{once:!0}),l=L([]);function I(){const t=new Date,o=(t.getDay()+6)%7,e=new Date(t);return e.setDate(t.getDate()-o),e.setHours(0,0,0,0),e}function C(t,a){if(!document.startViewTransition){console.warn("ViewTransition API non è supportata dal browser"),g(t,a);return}document.startViewTransition(()=>{g(t,a)})}function g(t,a){const o=l.value.findIndex(e=>e.day===a&&e.username===t);o!=-1?l.value.splice(o,1):l.value.push({username:t,day:a})}const T=["lunedì","martedì","mercoledì","giovedì","venerdì"];return(t,a)=>{var o;return((o=v(V))==null?void 0:o.role)==="scanner"?(n(),s("div",P,[(n(),s(d,null,_(T,(e,Z)=>i("div",{class:"reportDay",key:e},[i("div",j,p(e),1),i("div",A,[v(y)?(n(),s(d,{key:0},_(["morning","afternoon"],(h,R)=>i("div",E,[i("div",H,p(h==="afternoon"?"Pomeriggio":"Mattina"),1),(n(!0),s(d,null,_(v(y)[e][h],(r,q)=>(n(),s("div",{class:O({userReport:!0,[`${r.status.toLowerCase()}-style`]:!0}),key:r.username,onClick:c=>C(r.username,e),style:W({"view-transition-name":"user-"+r.username.trim().replace(" ","")+e+R})},[z(p(r.username)+" ",1),l.value.some(c=>c.day===e&&c.username===r.username)?(n(),s("div",K,[i("ul",null,[(n(!0),s(d,null,_(r.scans,c=>(n(),s("li",null,p(c.timestamp.toDate().toLocaleTimeString()),1))),256))])])):f("",!0)],14,J))),128)),Q])),64)):f("",!0)])])),64))])):f("",!0)}}});const X=b(Y,[["__scopeId","data-v-8a9923d5"]]);export{X as default};
