(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Im(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const _t={},uo=[],_r=()=>{},zP=()=>!1,qP=/^on[^a-z]/,wh=t=>qP.test(t),Rm=t=>t.startsWith("onUpdate:"),Xt=Object.assign,Sm=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WP=Object.prototype.hasOwnProperty,Ze=(t,e)=>WP.call(t,e),Se=Array.isArray,ho=t=>bh(t)==="[object Map]",pw=t=>bh(t)==="[object Set]",Me=t=>typeof t=="function",$t=t=>typeof t=="string",Pm=t=>typeof t=="symbol",Ct=t=>t!==null&&typeof t=="object",mw=t=>Ct(t)&&Me(t.then)&&Me(t.catch),gw=Object.prototype.toString,bh=t=>gw.call(t),KP=t=>bh(t).slice(8,-1),_w=t=>bh(t)==="[object Object]",km=t=>$t(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,eu=Im(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ch=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},GP=/-(\w)/g,$r=Ch(t=>t.replace(GP,(e,n)=>n?n.toUpperCase():"")),QP=/\B([A-Z])/g,Go=Ch(t=>t.replace(QP,"-$1").toLowerCase()),Ah=Ch(t=>t.charAt(0).toUpperCase()+t.slice(1)),Jd=Ch(t=>t?`on${Ah(t)}`:""),rc=(t,e)=>!Object.is(t,e),tu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},yu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},H0=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Bv;const j0=()=>Bv||(Bv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dm(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=$t(r)?ZP(r):Dm(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if($t(t))return t;if(Ct(t))return t}}const YP=/;(?![^(]*\))/g,XP=/:([^]+)/,JP=/\/\*[^]*?\*\//g;function ZP(t){const e={};return t.replace(JP,"").split(YP).forEach(n=>{if(n){const r=n.split(XP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Vc(t){let e="";if($t(t))e=t;else if(Se(t))for(let n=0;n<t.length;n++){const r=Vc(t[n]);r&&(e+=r+" ")}else if(Ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ek="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tk=Im(ek);function vw(t){return!!t||t===""}const nu=t=>$t(t)?t:t==null?"":Se(t)||Ct(t)&&(t.toString===gw||!Me(t.toString))?JSON.stringify(t,yw,2):String(t),yw=(t,e)=>e&&e.__v_isRef?yw(t,e.value):ho(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:pw(e)?{[`Set(${e.size})`]:[...e.values()]}:Ct(e)&&!Se(e)&&!_w(e)?String(e):e;let Hn;class xw{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Hn,!e&&Hn&&(this.index=(Hn.scopes||(Hn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Hn;try{return Hn=this,e()}finally{Hn=n}}}on(){Hn=this}off(){Hn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Ew(t){return new xw(t)}function nk(t,e=Hn){e&&e.active&&e.effects.push(t)}function ww(){return Hn}function rk(t){Hn&&Hn.cleanups.push(t)}const Nm=t=>{const e=new Set(t);return e.w=0,e.n=0,e},bw=t=>(t.w&$i)>0,Cw=t=>(t.n&$i)>0,ik=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=$i},sk=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];bw(i)&&!Cw(i)?i.delete(t):e[n++]=i,i.w&=~$i,i.n&=~$i}e.length=n}},xu=new WeakMap;let Sa=0,$i=1;const z0=30;let hr;const ys=Symbol(""),q0=Symbol("");class Om{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,nk(this,r)}run(){if(!this.active)return this.fn();let e=hr,n=Ni;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=hr,hr=this,Ni=!0,$i=1<<++Sa,Sa<=z0?ik(this):Lv(this),this.fn()}finally{Sa<=z0&&sk(this),$i=1<<--Sa,hr=this.parent,Ni=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){hr===this?this.deferStop=!0:this.active&&(Lv(this),this.onStop&&this.onStop(),this.active=!1)}}function Lv(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Ni=!0;const Aw=[];function Qo(){Aw.push(Ni),Ni=!1}function Yo(){const t=Aw.pop();Ni=t===void 0?!0:t}function Ln(t,e,n){if(Ni&&hr){let r=xu.get(t);r||xu.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=Nm()),Tw(i)}}function Tw(t,e){let n=!1;Sa<=z0?Cw(t)||(t.n|=$i,n=!bw(t)):n=!t.has(hr),n&&(t.add(hr),hr.deps.push(t))}function oi(t,e,n,r,i,s){const o=xu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Se(t)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Se(t)?km(n)&&a.push(o.get("length")):(a.push(o.get(ys)),ho(t)&&a.push(o.get(q0)));break;case"delete":Se(t)||(a.push(o.get(ys)),ho(t)&&a.push(o.get(q0)));break;case"set":ho(t)&&a.push(o.get(ys));break}if(a.length===1)a[0]&&W0(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);W0(Nm(c))}}function W0(t,e){const n=Se(t)?t:[...t];for(const r of n)r.computed&&Vv(r);for(const r of n)r.computed||Vv(r)}function Vv(t,e){(t!==hr||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function ok(t,e){var n;return(n=xu.get(t))==null?void 0:n.get(e)}const ak=Im("__proto__,__v_isRef,__isVue"),Iw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pm)),ck=Fm(),lk=Fm(!1,!0),uk=Fm(!0),$v=hk();function hk(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=it(this);for(let s=0,o=this.length;s<o;s++)Ln(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(it)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Qo();const r=it(this)[e].apply(this,n);return Yo(),r}}),t}function dk(t){const e=it(this);return Ln(e,"has",t),e.hasOwnProperty(t)}function Fm(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?Rk:Dw:e?kw:Pw).get(r))return r;const o=Se(r);if(!t){if(o&&Ze($v,i))return Reflect.get($v,i,s);if(i==="hasOwnProperty")return dk}const a=Reflect.get(r,i,s);return(Pm(i)?Iw.has(i):ak(i))||(t||Ln(r,"get",i),e)?a:Yt(a)?o&&km(i)?a:a.value:Ct(a)?t?Ow(a):Ih(a):a}}const fk=Rw(),pk=Rw(!0);function Rw(t=!1){return function(n,r,i,s){let o=n[r];if(Co(o)&&Yt(o)&&!Yt(i))return!1;if(!t&&(!Eu(i)&&!Co(i)&&(o=it(o),i=it(i)),!Se(n)&&Yt(o)&&!Yt(i)))return o.value=i,!0;const a=Se(n)&&km(r)?Number(r)<n.length:Ze(n,r),c=Reflect.set(n,r,i,s);return n===it(s)&&(a?rc(i,o)&&oi(n,"set",r,i):oi(n,"add",r,i)),c}}function mk(t,e){const n=Ze(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&oi(t,"delete",e,void 0),r}function gk(t,e){const n=Reflect.has(t,e);return(!Pm(e)||!Iw.has(e))&&Ln(t,"has",e),n}function _k(t){return Ln(t,"iterate",Se(t)?"length":ys),Reflect.ownKeys(t)}const Sw={get:ck,set:fk,deleteProperty:mk,has:gk,ownKeys:_k},vk={get:uk,set(t,e){return!0},deleteProperty(t,e){return!0}},yk=Xt({},Sw,{get:lk,set:pk}),Mm=t=>t,Th=t=>Reflect.getPrototypeOf(t);function Sl(t,e,n=!1,r=!1){t=t.__v_raw;const i=it(t),s=it(e);n||(e!==s&&Ln(i,"get",e),Ln(i,"get",s));const{has:o}=Th(i),a=r?Mm:n?$m:ic;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Pl(t,e=!1){const n=this.__v_raw,r=it(n),i=it(t);return e||(t!==i&&Ln(r,"has",t),Ln(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function kl(t,e=!1){return t=t.__v_raw,!e&&Ln(it(t),"iterate",ys),Reflect.get(t,"size",t)}function Uv(t){t=it(t);const e=it(this);return Th(e).has.call(e,t)||(e.add(t),oi(e,"add",t,t)),this}function Hv(t,e){e=it(e);const n=it(this),{has:r,get:i}=Th(n);let s=r.call(n,t);s||(t=it(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?rc(e,o)&&oi(n,"set",t,e):oi(n,"add",t,e),this}function jv(t){const e=it(this),{has:n,get:r}=Th(e);let i=n.call(e,t);i||(t=it(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&oi(e,"delete",t,void 0),s}function zv(){const t=it(this),e=t.size!==0,n=t.clear();return e&&oi(t,"clear",void 0,void 0),n}function Dl(t,e){return function(r,i){const s=this,o=s.__v_raw,a=it(o),c=e?Mm:t?$m:ic;return!t&&Ln(a,"iterate",ys),o.forEach((l,u)=>r.call(i,c(l),c(u),s))}}function Nl(t,e,n){return function(...r){const i=this.__v_raw,s=it(i),o=ho(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...r),u=n?Mm:e?$m:ic;return!e&&Ln(s,"iterate",c?q0:ys),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function yi(t){return function(...e){return t==="delete"?!1:this}}function xk(){const t={get(s){return Sl(this,s)},get size(){return kl(this)},has:Pl,add:Uv,set:Hv,delete:jv,clear:zv,forEach:Dl(!1,!1)},e={get(s){return Sl(this,s,!1,!0)},get size(){return kl(this)},has:Pl,add:Uv,set:Hv,delete:jv,clear:zv,forEach:Dl(!1,!0)},n={get(s){return Sl(this,s,!0)},get size(){return kl(this,!0)},has(s){return Pl.call(this,s,!0)},add:yi("add"),set:yi("set"),delete:yi("delete"),clear:yi("clear"),forEach:Dl(!0,!1)},r={get(s){return Sl(this,s,!0,!0)},get size(){return kl(this,!0)},has(s){return Pl.call(this,s,!0)},add:yi("add"),set:yi("set"),delete:yi("delete"),clear:yi("clear"),forEach:Dl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Nl(s,!1,!1),n[s]=Nl(s,!0,!1),e[s]=Nl(s,!1,!0),r[s]=Nl(s,!0,!0)}),[t,n,e,r]}const[Ek,wk,bk,Ck]=xk();function Bm(t,e){const n=e?t?Ck:bk:t?wk:Ek;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ze(n,i)&&i in r?n:r,i,s)}const Ak={get:Bm(!1,!1)},Tk={get:Bm(!1,!0)},Ik={get:Bm(!0,!1)},Pw=new WeakMap,kw=new WeakMap,Dw=new WeakMap,Rk=new WeakMap;function Sk(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pk(t){return t.__v_skip||!Object.isExtensible(t)?0:Sk(KP(t))}function Ih(t){return Co(t)?t:Lm(t,!1,Sw,Ak,Pw)}function Nw(t){return Lm(t,!1,yk,Tk,kw)}function Ow(t){return Lm(t,!0,vk,Ik,Dw)}function Lm(t,e,n,r,i){if(!Ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=Pk(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function fo(t){return Co(t)?fo(t.__v_raw):!!(t&&t.__v_isReactive)}function Co(t){return!!(t&&t.__v_isReadonly)}function Eu(t){return!!(t&&t.__v_isShallow)}function Fw(t){return fo(t)||Co(t)}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function Vm(t){return yu(t,"__v_skip",!0),t}const ic=t=>Ct(t)?Ih(t):t,$m=t=>Ct(t)?Ow(t):t;function Mw(t){Ni&&hr&&(t=it(t),Tw(t.dep||(t.dep=Nm())))}function Bw(t,e){t=it(t);const n=t.dep;n&&W0(n)}function Yt(t){return!!(t&&t.__v_isRef===!0)}function ft(t){return Vw(t,!1)}function Lw(t){return Vw(t,!0)}function Vw(t,e){return Yt(t)?t:new kk(t,e)}class kk{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:it(e),this._value=n?e:ic(e)}get value(){return Mw(this),this._value}set value(e){const n=this.__v_isShallow||Eu(e)||Co(e);e=n?e:it(e),rc(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ic(e),Bw(this))}}function St(t){return Yt(t)?t.value:t}const Dk={get:(t,e,n)=>St(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Yt(i)&&!Yt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function $w(t){return fo(t)?t:new Proxy(t,Dk)}function Nk(t){const e=Se(t)?new Array(t.length):{};for(const n in t)e[n]=Fk(t,n);return e}class Ok{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ok(it(this._object),this._key)}}function Fk(t,e,n){const r=t[e];return Yt(r)?r:new Ok(t,e,n)}class Mk{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Om(e,()=>{this._dirty||(this._dirty=!0,Bw(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=it(this);return Mw(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Bk(t,e,n=!1){let r,i;const s=Me(t);return s?(r=t,i=_r):(r=t.get,i=t.set),new Mk(r,i,s||!i,n)}function Oi(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Rh(s,e,n)}return i}function vr(t,e,n,r){if(Me(t)){const s=Oi(t,e,n,r);return s&&mw(s)&&s.catch(o=>{Rh(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(vr(t[s],e,n,r));return i}function Rh(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const l=s.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){Oi(c,null,10,[t,o,a]);return}}Lk(t,n,i,r)}function Lk(t,e,n,r=!0){console.error(t)}let sc=!1,K0=!1;const mn=[];let Sr=0;const po=[];let Jr=null,ls=0;const Uw=Promise.resolve();let Um=null;function Hw(t){const e=Um||Uw;return t?e.then(this?t.bind(this):t):e}function Vk(t){let e=Sr+1,n=mn.length;for(;e<n;){const r=e+n>>>1;oc(mn[r])<t?e=r+1:n=r}return e}function Hm(t){(!mn.length||!mn.includes(t,sc&&t.allowRecurse?Sr+1:Sr))&&(t.id==null?mn.push(t):mn.splice(Vk(t.id),0,t),jw())}function jw(){!sc&&!K0&&(K0=!0,Um=Uw.then(qw))}function $k(t){const e=mn.indexOf(t);e>Sr&&mn.splice(e,1)}function Uk(t){Se(t)?po.push(...t):(!Jr||!Jr.includes(t,t.allowRecurse?ls+1:ls))&&po.push(t),jw()}function qv(t,e=sc?Sr+1:0){for(;e<mn.length;e++){const n=mn[e];n&&n.pre&&(mn.splice(e,1),e--,n())}}function zw(t){if(po.length){const e=[...new Set(po)];if(po.length=0,Jr){Jr.push(...e);return}for(Jr=e,Jr.sort((n,r)=>oc(n)-oc(r)),ls=0;ls<Jr.length;ls++)Jr[ls]();Jr=null,ls=0}}const oc=t=>t.id==null?1/0:t.id,Hk=(t,e)=>{const n=oc(t)-oc(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function qw(t){K0=!1,sc=!0,mn.sort(Hk);const e=_r;try{for(Sr=0;Sr<mn.length;Sr++){const n=mn[Sr];n&&n.active!==!1&&Oi(n,null,14)}}finally{Sr=0,mn.length=0,zw(),sc=!1,Um=null,(mn.length||po.length)&&qw()}}function jk(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||_t;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||_t;d&&(i=n.map(f=>$t(f)?f.trim():f)),h&&(i=n.map(H0))}let a,c=r[a=Jd(e)]||r[a=Jd($r(e))];!c&&s&&(c=r[a=Jd(Go(e))]),c&&vr(c,t,6,i);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,vr(l,t,6,i)}}function Ww(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Me(t)){const c=l=>{const u=Ww(l,e,!0);u&&(a=!0,Xt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!a?(Ct(t)&&r.set(t,null),null):(Se(s)?s.forEach(c=>o[c]=null):Xt(o,s),Ct(t)&&r.set(t,o),o)}function Sh(t,e){return!t||!wh(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ze(t,e[0].toLowerCase()+e.slice(1))||Ze(t,Go(e))||Ze(t,e))}let cn=null,Ph=null;function wu(t){const e=cn;return cn=t,Ph=t&&t.type.__scopeId||null,e}function zk(t){Ph=t}function qk(){Ph=null}function bu(t,e=cn,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&ny(-1);const s=wu(e);let o;try{o=t(...i)}finally{wu(s),r._d&&ny(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Zd(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:_}=t;let v,b;const x=wu(t);try{if(n.shapeFlag&4){const w=i||r;v=Rr(u.call(w,w,h,s,f,d,g)),b=c}else{const w=e;v=Rr(w.length>1?w(s,{attrs:c,slots:a,emit:l}):w(s,null)),b=e.props?c:Wk(c)}}catch(w){Ha.length=0,Rh(w,t,1),v=Vt(Ui)}let E=v;if(b&&_!==!1){const w=Object.keys(b),{shapeFlag:T}=E;w.length&&T&7&&(o&&w.some(Rm)&&(b=Kk(b,o)),E=To(E,b))}return n.dirs&&(E=To(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),v=E,wu(x),v}const Wk=t=>{let e;for(const n in t)(n==="class"||n==="style"||wh(n))&&((e||(e={}))[n]=t[n]);return e},Kk=(t,e)=>{const n={};for(const r in t)(!Rm(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Gk(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Wv(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Sh(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Wv(r,o,l):!0:!!o;return!1}function Wv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Sh(n,s))return!0}return!1}function Qk({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Yk=t=>t.__isSuspense;function Xk(t,e){e&&e.pendingBranch?Se(t)?e.effects.push(...t):e.effects.push(t):Uk(t)}const Ol={};function Mr(t,e,n){return Kw(t,e,n)}function Kw(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=_t){var a;const c=ww()===((a=Kt)==null?void 0:a.scope)?Kt:null;let l,u=!1,h=!1;if(Yt(t)?(l=()=>t.value,u=Eu(t)):fo(t)?(l=()=>t,r=!0):Se(t)?(h=!0,u=t.some(w=>fo(w)||Eu(w)),l=()=>t.map(w=>{if(Yt(w))return w.value;if(fo(w))return hs(w);if(Me(w))return Oi(w,c,2)})):Me(t)?e?l=()=>Oi(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return d&&d(),vr(t,c,3,[f])}:l=_r,e&&r){const w=l;l=()=>hs(w())}let d,f=w=>{d=x.onStop=()=>{Oi(w,c,4)}},g;if(cc)if(f=_r,e?n&&vr(e,c,3,[l(),h?[]:void 0,f]):l(),i==="sync"){const w=qD();g=w.__watcherHandles||(w.__watcherHandles=[])}else return _r;let _=h?new Array(t.length).fill(Ol):Ol;const v=()=>{if(x.active)if(e){const w=x.run();(r||u||(h?w.some((T,I)=>rc(T,_[I])):rc(w,_)))&&(d&&d(),vr(e,c,3,[w,_===Ol?void 0:h&&_[0]===Ol?[]:_,f]),_=w)}else x.run()};v.allowRecurse=!!e;let b;i==="sync"?b=v:i==="post"?b=()=>Nn(v,c&&c.suspense):(v.pre=!0,c&&(v.id=c.uid),b=()=>Hm(v));const x=new Om(l,b);e?n?v():_=x.run():i==="post"?Nn(x.run.bind(x),c&&c.suspense):x.run();const E=()=>{x.stop(),c&&c.scope&&Sm(c.scope.effects,x)};return g&&g.push(E),E}function Jk(t,e,n){const r=this.proxy,i=$t(t)?t.includes(".")?Gw(r,t):()=>r[t]:t.bind(r,r);let s;Me(e)?s=e:(s=e.handler,n=e);const o=Kt;Io(this);const a=Kw(i,s.bind(r),n);return o?Io(o):xs(),a}function Gw(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function hs(t,e){if(!Ct(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Yt(t))hs(t.value,e);else if(Se(t))for(let n=0;n<t.length;n++)hs(t[n],e);else if(pw(t)||ho(t))t.forEach(n=>{hs(n,e)});else if(_w(t))for(const n in t)hs(t[n],e);return t}function Zk(t,e){const n=cn;if(n===null)return t;const r=Oh(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,c,l=_t]=e[s];o&&(Me(o)&&(o={mounted:o,updated:o}),o.deep&&hs(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function is(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(Qo(),vr(c,n,8,[t.el,a,t,e]),Yo())}}function ir(t,e){return Me(t)?(()=>Xt({name:t.name},e,{setup:t}))():t}const $a=t=>!!t.type.__asyncLoader,Qw=t=>t.type.__isKeepAlive;function eD(t,e){Yw(t,"a",e)}function tD(t,e){Yw(t,"da",e)}function Yw(t,e,n=Kt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(kh(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Qw(i.parent.vnode)&&nD(r,e,n,i),i=i.parent}}function nD(t,e,n,r){const i=kh(e,t,r,!0);$c(()=>{Sm(r[e],i)},n)}function kh(t,e,n=Kt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Qo(),Io(n);const a=vr(e,n,t,o);return xs(),Yo(),a});return r?i.unshift(s):i.push(s),s}}const di=t=>(e,n=Kt)=>(!cc||t==="sp")&&kh(t,(...r)=>e(...r),n),rD=di("bm"),jm=di("m"),iD=di("bu"),sD=di("u"),oD=di("bum"),$c=di("um"),Xw=di("sp"),aD=di("rtg"),cD=di("rtc");function lD(t,e=Kt){kh("ec",t,e)}const Jw="components";function uD(t,e){return dD(Jw,t,!0,e)||t}const hD=Symbol.for("v-ndc");function dD(t,e,n=!0,r=!1){const i=cn||Kt;if(i){const s=i.type;if(t===Jw){const a=HD(s,!1);if(a&&(a===e||a===$r(e)||a===Ah($r(e))))return s}const o=Kv(i[t]||s[t],e)||Kv(i.appContext[t],e);return!o&&r?s:o}}function Kv(t,e){return t&&(t[e]||t[$r(e)]||t[Ah($r(e))])}function Nq(t,e,n,r){let i;const s=n&&n[r];if(Se(t)||$t(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Ct(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];i[a]=e(t[l],l,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function Zw(t,e,n={},r,i){if(cn.isCE||cn.parent&&$a(cn.parent)&&cn.parent.isCE)return e!=="default"&&(n.name=e),Vt("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),mt();const o=s&&eb(s(n)),a=Ao(Zn,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function eb(t){return t.some(e=>Tu(e)?!(e.type===Ui||e.type===Zn&&!eb(e.children)):!0)?t:null}const G0=t=>t?db(t)?Oh(t)||t.proxy:G0(t.parent):null,Ua=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>G0(t.parent),$root:t=>G0(t.root),$emit:t=>t.emit,$options:t=>zm(t),$forceUpdate:t=>t.f||(t.f=()=>Hm(t.update)),$nextTick:t=>t.n||(t.n=Hw.bind(t.proxy)),$watch:t=>Jk.bind(t)}),ef=(t,e)=>t!==_t&&!t.__isScriptSetup&&Ze(t,e),fD={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(ef(r,e))return o[e]=1,r[e];if(i!==_t&&Ze(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&Ze(l,e))return o[e]=3,s[e];if(n!==_t&&Ze(n,e))return o[e]=4,n[e];Q0&&(o[e]=0)}}const u=Ua[e];let h,d;if(u)return e==="$attrs"&&Ln(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==_t&&Ze(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Ze(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return ef(i,e)?(i[e]=n,!0):r!==_t&&Ze(r,e)?(r[e]=n,!0):Ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==_t&&Ze(t,o)||ef(e,o)||(a=s[0])&&Ze(a,o)||Ze(r,o)||Ze(Ua,o)||Ze(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gv(t){return Se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Q0=!0;function pD(t){const e=zm(t),n=t.proxy,r=t.ctx;Q0=!1,e.beforeCreate&&Qv(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:_,deactivated:v,beforeDestroy:b,beforeUnmount:x,destroyed:E,unmounted:w,render:T,renderTracked:I,renderTriggered:k,errorCaptured:O,serverPrefetch:K,expose:P,inheritAttrs:B,components:H,directives:$,filters:pe}=e;if(l&&mD(l,r,null),o)for(const Ee in o){const _e=o[Ee];Me(_e)&&(r[Ee]=_e.bind(n))}if(i){const Ee=i.call(n,n);Ct(Ee)&&(t.data=Ih(Ee))}if(Q0=!0,s)for(const Ee in s){const _e=s[Ee],Be=Me(_e)?_e.bind(n,n):Me(_e.get)?_e.get.bind(n,n):_r,Re=!Me(_e)&&Me(_e.set)?_e.set.bind(n):_r,U=Gt({get:Be,set:Re});Object.defineProperty(r,Ee,{enumerable:!0,configurable:!0,get:()=>U.value,set:W=>U.value=W})}if(a)for(const Ee in a)tb(a[Ee],r,n,Ee);if(c){const Ee=Me(c)?c.call(n):c;Reflect.ownKeys(Ee).forEach(_e=>{ru(_e,Ee[_e])})}u&&Qv(u,t,"c");function he(Ee,_e){Se(_e)?_e.forEach(Be=>Ee(Be.bind(n))):_e&&Ee(_e.bind(n))}if(he(rD,h),he(jm,d),he(iD,f),he(sD,g),he(eD,_),he(tD,v),he(lD,O),he(cD,I),he(aD,k),he(oD,x),he($c,w),he(Xw,K),Se(P))if(P.length){const Ee=t.exposed||(t.exposed={});P.forEach(_e=>{Object.defineProperty(Ee,_e,{get:()=>n[_e],set:Be=>n[_e]=Be})})}else t.exposed||(t.exposed={});T&&t.render===_r&&(t.render=T),B!=null&&(t.inheritAttrs=B),H&&(t.components=H),$&&(t.directives=$)}function mD(t,e,n=_r){Se(t)&&(t=Y0(t));for(const r in t){const i=t[r];let s;Ct(i)?"default"in i?s=qn(i.from||r,i.default,!0):s=qn(i.from||r):s=qn(i),Yt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Qv(t,e,n){vr(Se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function tb(t,e,n,r){const i=r.includes(".")?Gw(n,r):()=>n[r];if($t(t)){const s=e[t];Me(s)&&Mr(i,s)}else if(Me(t))Mr(i,t.bind(n));else if(Ct(t))if(Se(t))t.forEach(s=>tb(s,e,n,r));else{const s=Me(t.handler)?t.handler.bind(n):e[t.handler];Me(s)&&Mr(i,s,t)}}function zm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>Cu(c,l,o,!0)),Cu(c,e,o)),Ct(e)&&s.set(e,c),c}function Cu(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Cu(t,s,n,!0),i&&i.forEach(o=>Cu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=gD[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const gD={data:Yv,props:Xv,emits:Xv,methods:Pa,computed:Pa,beforeCreate:Tn,created:Tn,beforeMount:Tn,mounted:Tn,beforeUpdate:Tn,updated:Tn,beforeDestroy:Tn,beforeUnmount:Tn,destroyed:Tn,unmounted:Tn,activated:Tn,deactivated:Tn,errorCaptured:Tn,serverPrefetch:Tn,components:Pa,directives:Pa,watch:vD,provide:Yv,inject:_D};function Yv(t,e){return e?t?function(){return Xt(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function _D(t,e){return Pa(Y0(t),Y0(e))}function Y0(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Tn(t,e){return t?[...new Set([].concat(t,e))]:e}function Pa(t,e){return t?Xt(Object.create(null),t,e):e}function Xv(t,e){return t?Se(t)&&Se(e)?[...new Set([...t,...e])]:Xt(Object.create(null),Gv(t),Gv(e??{})):e}function vD(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=Tn(t[r],e[r]);return n}function nb(){return{app:null,config:{isNativeTag:zP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yD=0;function xD(t,e){return function(r,i=null){Me(r)||(r=Xt({},r)),i!=null&&!Ct(i)&&(i=null);const s=nb(),o=new Set;let a=!1;const c=s.app={_uid:yD++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:WD,get config(){return s.config},set config(l){},use(l,...u){return o.has(l)||(l&&Me(l.install)?(o.add(l),l.install(c,...u)):Me(l)&&(o.add(l),l(c,...u))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,u){return u?(s.components[l]=u,c):s.components[l]},directive(l,u){return u?(s.directives[l]=u,c):s.directives[l]},mount(l,u,h){if(!a){const d=Vt(r,i);return d.appContext=s,u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,Oh(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return s.provides[l]=u,c},runWithContext(l){Au=c;try{return l()}finally{Au=null}}};return c}}let Au=null;function ru(t,e){if(Kt){let n=Kt.provides;const r=Kt.parent&&Kt.parent.provides;r===n&&(n=Kt.provides=Object.create(r)),n[t]=e}}function qn(t,e,n=!1){const r=Kt||cn;if(r||Au){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Au._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Me(e)?e.call(r&&r.proxy):e}}function ED(t,e,n,r=!1){const i={},s={};yu(s,Nh,1),t.propsDefaults=Object.create(null),rb(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Nw(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function wD(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=it(i),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Sh(t.emitsOptions,d))continue;const f=e[d];if(c)if(Ze(s,d))f!==s[d]&&(s[d]=f,l=!0);else{const g=$r(d);i[g]=X0(c,a,g,f,t,!1)}else f!==s[d]&&(s[d]=f,l=!0)}}}else{rb(t,e,i,s)&&(l=!0);let u;for(const h in a)(!e||!Ze(e,h)&&((u=Go(h))===h||!Ze(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=X0(c,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!Ze(e,h))&&(delete s[h],l=!0)}l&&oi(t,"set","$attrs")}function rb(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(eu(c))continue;const l=e[c];let u;i&&Ze(i,u=$r(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:Sh(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=it(n),l=a||_t;for(let u=0;u<s.length;u++){const h=s[u];n[h]=X0(i,c,h,l[h],t,!Ze(l,h))}}return o}function X0(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ze(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Me(c)){const{propsDefaults:l}=i;n in l?r=l[n]:(Io(i),r=l[n]=c.call(null,e),xs())}else r=c}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Go(n))&&(r=!0))}return r}function ib(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let c=!1;if(!Me(t)){const u=h=>{c=!0;const[d,f]=ib(h,e,!0);Xt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!c)return Ct(t)&&r.set(t,uo),uo;if(Se(s))for(let u=0;u<s.length;u++){const h=$r(s[u]);Jv(h)&&(o[h]=_t)}else if(s)for(const u in s){const h=$r(u);if(Jv(h)){const d=s[u],f=o[h]=Se(d)||Me(d)?{type:d}:Xt({},d);if(f){const g=ty(Boolean,f.type),_=ty(String,f.type);f[0]=g>-1,f[1]=_<0||g<_,(g>-1||Ze(f,"default"))&&a.push(h)}}}const l=[o,a];return Ct(t)&&r.set(t,l),l}function Jv(t){return t[0]!=="$"}function Zv(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function ey(t,e){return Zv(t)===Zv(e)}function ty(t,e){return Se(e)?e.findIndex(n=>ey(n,t)):Me(e)&&ey(e,t)?0:-1}const sb=t=>t[0]==="_"||t==="$stable",qm=t=>Se(t)?t.map(Rr):[Rr(t)],bD=(t,e,n)=>{if(e._n)return e;const r=bu((...i)=>qm(e(...i)),n);return r._c=!1,r},ob=(t,e,n)=>{const r=t._ctx;for(const i in t){if(sb(i))continue;const s=t[i];if(Me(s))e[i]=bD(i,s,r);else if(s!=null){const o=qm(s);e[i]=()=>o}}},ab=(t,e)=>{const n=qm(e);t.slots.default=()=>n},CD=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=it(e),yu(e,"_",n)):ob(e,t.slots={})}else t.slots={},e&&ab(t,e);yu(t.slots,Nh,1)},AD=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=_t;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Xt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,ob(e,i)),o=e}else e&&(ab(t,e),o={default:1});if(s)for(const a in i)!sb(a)&&!(a in o)&&delete i[a]};function J0(t,e,n,r,i=!1){if(Se(t)){t.forEach((d,f)=>J0(d,e&&(Se(e)?e[f]:e),n,r,i));return}if($a(r)&&!i)return;const s=r.shapeFlag&4?Oh(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:c}=t,l=e&&e.r,u=a.refs===_t?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&($t(l)?(u[l]=null,Ze(h,l)&&(h[l]=null)):Yt(l)&&(l.value=null)),Me(c))Oi(c,a,12,[o,u]);else{const d=$t(c),f=Yt(c);if(d||f){const g=()=>{if(t.f){const _=d?Ze(h,c)?h[c]:u[c]:c.value;i?Se(_)&&Sm(_,s):Se(_)?_.includes(s)||_.push(s):d?(u[c]=[s],Ze(h,c)&&(h[c]=u[c])):(c.value=[s],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,Ze(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,Nn(g,n)):g()}}}const Nn=Xk;function TD(t){return ID(t)}function ID(t,e){const n=j0();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=_r,insertStaticContent:g}=t,_=(A,R,N,V=null,q=null,G=null,se=!1,ee=null,re=!!R.dynamicChildren)=>{if(A===R)return;A&&!va(A,R)&&(V=L(A),W(A,q,G,!0),A=null),R.patchFlag===-2&&(re=!1,R.dynamicChildren=null);const{type:Y,ref:fe,shapeFlag:le}=R;switch(Y){case Dh:v(A,R,N,V);break;case Ui:b(A,R,N,V);break;case tf:A==null&&x(R,N,V,se);break;case Zn:H(A,R,N,V,q,G,se,ee,re);break;default:le&1?T(A,R,N,V,q,G,se,ee,re):le&6?$(A,R,N,V,q,G,se,ee,re):(le&64||le&128)&&Y.process(A,R,N,V,q,G,se,ee,re,ie)}fe!=null&&q&&J0(fe,A&&A.ref,G,R||A,!R)},v=(A,R,N,V)=>{if(A==null)r(R.el=a(R.children),N,V);else{const q=R.el=A.el;R.children!==A.children&&l(q,R.children)}},b=(A,R,N,V)=>{A==null?r(R.el=c(R.children||""),N,V):R.el=A.el},x=(A,R,N,V)=>{[A.el,A.anchor]=g(A.children,R,N,V,A.el,A.anchor)},E=({el:A,anchor:R},N,V)=>{let q;for(;A&&A!==R;)q=d(A),r(A,N,V),A=q;r(R,N,V)},w=({el:A,anchor:R})=>{let N;for(;A&&A!==R;)N=d(A),i(A),A=N;i(R)},T=(A,R,N,V,q,G,se,ee,re)=>{se=se||R.type==="svg",A==null?I(R,N,V,q,G,se,ee,re):K(A,R,q,G,se,ee,re)},I=(A,R,N,V,q,G,se,ee)=>{let re,Y;const{type:fe,props:le,shapeFlag:ve,transition:Ae,dirs:De}=A;if(re=A.el=o(A.type,G,le&&le.is,le),ve&8?u(re,A.children):ve&16&&O(A.children,re,null,V,q,G&&fe!=="foreignObject",se,ee),De&&is(A,null,V,"created"),k(re,A,A.scopeId,se,V),le){for(const tt in le)tt!=="value"&&!eu(tt)&&s(re,tt,null,le[tt],G,A.children,V,q,Pe);"value"in le&&s(re,"value",null,le.value),(Y=le.onVnodeBeforeMount)&&Ir(Y,V,A)}De&&is(A,null,V,"beforeMount");const ze=(!q||q&&!q.pendingBranch)&&Ae&&!Ae.persisted;ze&&Ae.beforeEnter(re),r(re,R,N),((Y=le&&le.onVnodeMounted)||ze||De)&&Nn(()=>{Y&&Ir(Y,V,A),ze&&Ae.enter(re),De&&is(A,null,V,"mounted")},q)},k=(A,R,N,V,q)=>{if(N&&f(A,N),V)for(let G=0;G<V.length;G++)f(A,V[G]);if(q){let G=q.subTree;if(R===G){const se=q.vnode;k(A,se,se.scopeId,se.slotScopeIds,q.parent)}}},O=(A,R,N,V,q,G,se,ee,re=0)=>{for(let Y=re;Y<A.length;Y++){const fe=A[Y]=ee?wi(A[Y]):Rr(A[Y]);_(null,fe,R,N,V,q,G,se,ee)}},K=(A,R,N,V,q,G,se)=>{const ee=R.el=A.el;let{patchFlag:re,dynamicChildren:Y,dirs:fe}=R;re|=A.patchFlag&16;const le=A.props||_t,ve=R.props||_t;let Ae;N&&ss(N,!1),(Ae=ve.onVnodeBeforeUpdate)&&Ir(Ae,N,R,A),fe&&is(R,A,N,"beforeUpdate"),N&&ss(N,!0);const De=q&&R.type!=="foreignObject";if(Y?P(A.dynamicChildren,Y,ee,N,V,De,G):se||_e(A,R,ee,null,N,V,De,G,!1),re>0){if(re&16)B(ee,R,le,ve,N,V,q);else if(re&2&&le.class!==ve.class&&s(ee,"class",null,ve.class,q),re&4&&s(ee,"style",le.style,ve.style,q),re&8){const ze=R.dynamicProps;for(let tt=0;tt<ze.length;tt++){const ht=ze[tt],tn=le[ht],Mt=ve[ht];(Mt!==tn||ht==="value")&&s(ee,ht,tn,Mt,q,A.children,N,V,Pe)}}re&1&&A.children!==R.children&&u(ee,R.children)}else!se&&Y==null&&B(ee,R,le,ve,N,V,q);((Ae=ve.onVnodeUpdated)||fe)&&Nn(()=>{Ae&&Ir(Ae,N,R,A),fe&&is(R,A,N,"updated")},V)},P=(A,R,N,V,q,G,se)=>{for(let ee=0;ee<R.length;ee++){const re=A[ee],Y=R[ee],fe=re.el&&(re.type===Zn||!va(re,Y)||re.shapeFlag&70)?h(re.el):N;_(re,Y,fe,null,V,q,G,se,!0)}},B=(A,R,N,V,q,G,se)=>{if(N!==V){if(N!==_t)for(const ee in N)!eu(ee)&&!(ee in V)&&s(A,ee,N[ee],null,se,R.children,q,G,Pe);for(const ee in V){if(eu(ee))continue;const re=V[ee],Y=N[ee];re!==Y&&ee!=="value"&&s(A,ee,Y,re,se,R.children,q,G,Pe)}"value"in V&&s(A,"value",N.value,V.value)}},H=(A,R,N,V,q,G,se,ee,re)=>{const Y=R.el=A?A.el:a(""),fe=R.anchor=A?A.anchor:a("");let{patchFlag:le,dynamicChildren:ve,slotScopeIds:Ae}=R;Ae&&(ee=ee?ee.concat(Ae):Ae),A==null?(r(Y,N,V),r(fe,N,V),O(R.children,N,fe,q,G,se,ee,re)):le>0&&le&64&&ve&&A.dynamicChildren?(P(A.dynamicChildren,ve,N,q,G,se,ee),(R.key!=null||q&&R===q.subTree)&&cb(A,R,!0)):_e(A,R,N,fe,q,G,se,ee,re)},$=(A,R,N,V,q,G,se,ee,re)=>{R.slotScopeIds=ee,A==null?R.shapeFlag&512?q.ctx.activate(R,N,V,se,re):pe(R,N,V,q,G,se,re):me(A,R,re)},pe=(A,R,N,V,q,G,se)=>{const ee=A.component=BD(A,V,q);if(Qw(A)&&(ee.ctx.renderer=ie),LD(ee),ee.asyncDep){if(q&&q.registerDep(ee,he),!A.el){const re=ee.subTree=Vt(Ui);b(null,re,R,N)}return}he(ee,A,R,N,q,G,se)},me=(A,R,N)=>{const V=R.component=A.component;if(Gk(A,R,N))if(V.asyncDep&&!V.asyncResolved){Ee(V,R,N);return}else V.next=R,$k(V.update),V.update();else R.el=A.el,V.vnode=R},he=(A,R,N,V,q,G,se)=>{const ee=()=>{if(A.isMounted){let{next:fe,bu:le,u:ve,parent:Ae,vnode:De}=A,ze=fe,tt;ss(A,!1),fe?(fe.el=De.el,Ee(A,fe,se)):fe=De,le&&tu(le),(tt=fe.props&&fe.props.onVnodeBeforeUpdate)&&Ir(tt,Ae,fe,De),ss(A,!0);const ht=Zd(A),tn=A.subTree;A.subTree=ht,_(tn,ht,h(tn.el),L(tn),A,q,G),fe.el=ht.el,ze===null&&Qk(A,ht.el),ve&&Nn(ve,q),(tt=fe.props&&fe.props.onVnodeUpdated)&&Nn(()=>Ir(tt,Ae,fe,De),q)}else{let fe;const{el:le,props:ve}=R,{bm:Ae,m:De,parent:ze}=A,tt=$a(R);if(ss(A,!1),Ae&&tu(Ae),!tt&&(fe=ve&&ve.onVnodeBeforeMount)&&Ir(fe,ze,R),ss(A,!0),le&&$e){const ht=()=>{A.subTree=Zd(A),$e(le,A.subTree,A,q,null)};tt?R.type.__asyncLoader().then(()=>!A.isUnmounted&&ht()):ht()}else{const ht=A.subTree=Zd(A);_(null,ht,N,V,A,q,G),R.el=ht.el}if(De&&Nn(De,q),!tt&&(fe=ve&&ve.onVnodeMounted)){const ht=R;Nn(()=>Ir(fe,ze,ht),q)}(R.shapeFlag&256||ze&&$a(ze.vnode)&&ze.vnode.shapeFlag&256)&&A.a&&Nn(A.a,q),A.isMounted=!0,R=N=V=null}},re=A.effect=new Om(ee,()=>Hm(Y),A.scope),Y=A.update=()=>re.run();Y.id=A.uid,ss(A,!0),Y()},Ee=(A,R,N)=>{R.component=A;const V=A.vnode.props;A.vnode=R,A.next=null,wD(A,R.props,V,N),AD(A,R.children,N),Qo(),qv(),Yo()},_e=(A,R,N,V,q,G,se,ee,re=!1)=>{const Y=A&&A.children,fe=A?A.shapeFlag:0,le=R.children,{patchFlag:ve,shapeFlag:Ae}=R;if(ve>0){if(ve&128){Re(Y,le,N,V,q,G,se,ee,re);return}else if(ve&256){Be(Y,le,N,V,q,G,se,ee,re);return}}Ae&8?(fe&16&&Pe(Y,q,G),le!==Y&&u(N,le)):fe&16?Ae&16?Re(Y,le,N,V,q,G,se,ee,re):Pe(Y,q,G,!0):(fe&8&&u(N,""),Ae&16&&O(le,N,V,q,G,se,ee,re))},Be=(A,R,N,V,q,G,se,ee,re)=>{A=A||uo,R=R||uo;const Y=A.length,fe=R.length,le=Math.min(Y,fe);let ve;for(ve=0;ve<le;ve++){const Ae=R[ve]=re?wi(R[ve]):Rr(R[ve]);_(A[ve],Ae,N,null,q,G,se,ee,re)}Y>fe?Pe(A,q,G,!0,!1,le):O(R,N,V,q,G,se,ee,re,le)},Re=(A,R,N,V,q,G,se,ee,re)=>{let Y=0;const fe=R.length;let le=A.length-1,ve=fe-1;for(;Y<=le&&Y<=ve;){const Ae=A[Y],De=R[Y]=re?wi(R[Y]):Rr(R[Y]);if(va(Ae,De))_(Ae,De,N,null,q,G,se,ee,re);else break;Y++}for(;Y<=le&&Y<=ve;){const Ae=A[le],De=R[ve]=re?wi(R[ve]):Rr(R[ve]);if(va(Ae,De))_(Ae,De,N,null,q,G,se,ee,re);else break;le--,ve--}if(Y>le){if(Y<=ve){const Ae=ve+1,De=Ae<fe?R[Ae].el:V;for(;Y<=ve;)_(null,R[Y]=re?wi(R[Y]):Rr(R[Y]),N,De,q,G,se,ee,re),Y++}}else if(Y>ve)for(;Y<=le;)W(A[Y],q,G,!0),Y++;else{const Ae=Y,De=Y,ze=new Map;for(Y=De;Y<=ve;Y++){const Bt=R[Y]=re?wi(R[Y]):Rr(R[Y]);Bt.key!=null&&ze.set(Bt.key,Y)}let tt,ht=0;const tn=ve-De+1;let Mt=!1,Cn=0;const An=new Array(tn);for(Y=0;Y<tn;Y++)An[Y]=0;for(Y=Ae;Y<=le;Y++){const Bt=A[Y];if(ht>=tn){W(Bt,q,G,!0);continue}let nn;if(Bt.key!=null)nn=ze.get(Bt.key);else for(tt=De;tt<=ve;tt++)if(An[tt-De]===0&&va(Bt,R[tt])){nn=tt;break}nn===void 0?W(Bt,q,G,!0):(An[nn-De]=Y+1,nn>=Cn?Cn=nn:Mt=!0,_(Bt,R[nn],N,null,q,G,se,ee,re),ht++)}const Tr=Mt?RD(An):uo;for(tt=Tr.length-1,Y=tn-1;Y>=0;Y--){const Bt=De+Y,nn=R[Bt],Xn=Bt+1<fe?R[Bt+1].el:V;An[Y]===0?_(null,nn,N,Xn,q,G,se,ee,re):Mt&&(tt<0||Y!==Tr[tt]?U(nn,N,Xn,2):tt--)}}},U=(A,R,N,V,q=null)=>{const{el:G,type:se,transition:ee,children:re,shapeFlag:Y}=A;if(Y&6){U(A.component.subTree,R,N,V);return}if(Y&128){A.suspense.move(R,N,V);return}if(Y&64){se.move(A,R,N,ie);return}if(se===Zn){r(G,R,N);for(let le=0;le<re.length;le++)U(re[le],R,N,V);r(A.anchor,R,N);return}if(se===tf){E(A,R,N);return}if(V!==2&&Y&1&&ee)if(V===0)ee.beforeEnter(G),r(G,R,N),Nn(()=>ee.enter(G),q);else{const{leave:le,delayLeave:ve,afterLeave:Ae}=ee,De=()=>r(G,R,N),ze=()=>{le(G,()=>{De(),Ae&&Ae()})};ve?ve(G,De,ze):ze()}else r(G,R,N)},W=(A,R,N,V=!1,q=!1)=>{const{type:G,props:se,ref:ee,children:re,dynamicChildren:Y,shapeFlag:fe,patchFlag:le,dirs:ve}=A;if(ee!=null&&J0(ee,null,N,A,!0),fe&256){R.ctx.deactivate(A);return}const Ae=fe&1&&ve,De=!$a(A);let ze;if(De&&(ze=se&&se.onVnodeBeforeUnmount)&&Ir(ze,R,A),fe&6)st(A.component,N,V);else{if(fe&128){A.suspense.unmount(N,V);return}Ae&&is(A,null,R,"beforeUnmount"),fe&64?A.type.remove(A,R,N,q,ie,V):Y&&(G!==Zn||le>0&&le&64)?Pe(Y,R,N,!1,!0):(G===Zn&&le&384||!q&&fe&16)&&Pe(re,R,N),V&&J(A)}(De&&(ze=se&&se.onVnodeUnmounted)||Ae)&&Nn(()=>{ze&&Ir(ze,R,A),Ae&&is(A,null,R,"unmounted")},N)},J=A=>{const{type:R,el:N,anchor:V,transition:q}=A;if(R===Zn){Q(N,V);return}if(R===tf){w(A);return}const G=()=>{i(N),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(A.shapeFlag&1&&q&&!q.persisted){const{leave:se,delayLeave:ee}=q,re=()=>se(N,G);ee?ee(A.el,G,re):re()}else G()},Q=(A,R)=>{let N;for(;A!==R;)N=d(A),i(A),A=N;i(R)},st=(A,R,N)=>{const{bum:V,scope:q,update:G,subTree:se,um:ee}=A;V&&tu(V),q.stop(),G&&(G.active=!1,W(se,A,R,N)),ee&&Nn(ee,R),Nn(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Pe=(A,R,N,V=!1,q=!1,G=0)=>{for(let se=G;se<A.length;se++)W(A[se],R,N,V,q)},L=A=>A.shapeFlag&6?L(A.component.subTree):A.shapeFlag&128?A.suspense.next():d(A.anchor||A.el),X=(A,R,N)=>{A==null?R._vnode&&W(R._vnode,null,null,!0):_(R._vnode||null,A,R,null,null,null,N),qv(),zw(),R._vnode=A},ie={p:_,um:W,m:U,r:J,mt:pe,mc:O,pc:_e,pbc:P,n:L,o:t};let ge,$e;return e&&([ge,$e]=e(ie)),{render:X,hydrate:ge,createApp:xD(X,ge)}}function ss({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function cb(t,e,n=!1){const r=t.children,i=e.children;if(Se(r)&&Se(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=wi(i[s]),a.el=o.el),n||cb(o,a)),a.type===Dh&&(a.el=o.el)}}function RD(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<l?s=a+1:o=a;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const SD=t=>t.__isTeleport,Zn=Symbol.for("v-fgt"),Dh=Symbol.for("v-txt"),Ui=Symbol.for("v-cmt"),tf=Symbol.for("v-stc"),Ha=[];let pr=null;function mt(t=!1){Ha.push(pr=t?null:[])}function PD(){Ha.pop(),pr=Ha[Ha.length-1]||null}let ac=1;function ny(t){ac+=t}function lb(t){return t.dynamicChildren=ac>0?pr||uo:null,PD(),ac>0&&pr&&pr.push(t),t}function Pt(t,e,n,r,i,s){return lb(rt(t,e,n,r,i,s,!0))}function Ao(t,e,n,r,i){return lb(Vt(t,e,n,r,i,!0))}function Tu(t){return t?t.__v_isVNode===!0:!1}function va(t,e){return t.type===e.type&&t.key===e.key}const Nh="__vInternal",ub=({key:t})=>t??null,iu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?$t(t)||Yt(t)||Me(t)?{i:cn,r:t,k:e,f:!!n}:t:null);function rt(t,e=null,n=null,r=0,i=null,s=t===Zn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ub(e),ref:e&&iu(e),scopeId:Ph,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:cn};return a?(Wm(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=$t(n)?8:16),ac>0&&!o&&pr&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&pr.push(c),c}const Vt=kD;function kD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===hD)&&(t=Ui),Tu(t)){const a=To(t,e,!0);return n&&Wm(a,n),ac>0&&!s&&pr&&(a.shapeFlag&6?pr[pr.indexOf(t)]=a:pr.push(a)),a.patchFlag|=-2,a}if(jD(t)&&(t=t.__vccOpts),e){e=DD(e);let{class:a,style:c}=e;a&&!$t(a)&&(e.class=Vc(a)),Ct(c)&&(Fw(c)&&!Se(c)&&(c=Xt({},c)),e.style=Dm(c))}const o=$t(t)?1:Yk(t)?128:SD(t)?64:Ct(t)?4:Me(t)?2:0;return rt(t,e,n,r,i,o,s,!0)}function DD(t){return t?Fw(t)||Nh in t?Xt({},t):t:null}function To(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?OD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&ub(a),ref:e&&e.ref?n&&i?Se(i)?i.concat(iu(e)):[i,iu(e)]:iu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Zn?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&To(t.ssContent),ssFallback:t.ssFallback&&To(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ND(t=" ",e=0){return Vt(Dh,null,t,e)}function ur(t="",e=!1){return e?(mt(),Ao(Ui,null,t)):Vt(Ui,null,t)}function Rr(t){return t==null||typeof t=="boolean"?Vt(Ui):Se(t)?Vt(Zn,null,t.slice()):typeof t=="object"?wi(t):Vt(Dh,null,String(t))}function wi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:To(t)}function Wm(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Se(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Wm(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Nh in e)?e._ctx=cn:i===3&&cn&&(cn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:cn},n=32):(e=String(e),r&64?(n=16,e=[ND(e)]):n=8);t.children=e,t.shapeFlag|=n}function OD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Vc([e.class,r.class]));else if(i==="style")e.style=Dm([e.style,r.style]);else if(wh(i)){const s=e[i],o=r[i];o&&s!==o&&!(Se(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ir(t,e,n,r=null){vr(t,e,7,[n,r])}const FD=nb();let MD=0;function BD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||FD,s={uid:MD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new xw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ib(r,i),emitsOptions:Ww(r,i),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:r.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=jk.bind(null,s),t.ce&&t.ce(s),s}let Kt=null;const hb=()=>Kt||cn;let Km,Js,ry="__VUE_INSTANCE_SETTERS__";(Js=j0()[ry])||(Js=j0()[ry]=[]),Js.push(t=>Kt=t),Km=t=>{Js.length>1?Js.forEach(e=>e(t)):Js[0](t)};const Io=t=>{Km(t),t.scope.on()},xs=()=>{Kt&&Kt.scope.off(),Km(null)};function db(t){return t.vnode.shapeFlag&4}let cc=!1;function LD(t,e=!1){cc=e;const{props:n,children:r}=t.vnode,i=db(t);ED(t,n,i,e),CD(t,r);const s=i?VD(t,e):void 0;return cc=!1,s}function VD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Vm(new Proxy(t.ctx,fD));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?UD(t):null;Io(t),Qo();const s=Oi(r,t,0,[t.props,i]);if(Yo(),xs(),mw(s)){if(s.then(xs,xs),e)return s.then(o=>{iy(t,o,e)}).catch(o=>{Rh(o,t,0)});t.asyncDep=s}else iy(t,s,e)}else fb(t,e)}function iy(t,e,n){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ct(e)&&(t.setupState=$w(e)),fb(t,n)}let sy;function fb(t,e,n){const r=t.type;if(!t.render){if(!e&&sy&&!r.render){const i=r.template||zm(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Xt(Xt({isCustomElement:s,delimiters:a},o),c);r.render=sy(i,l)}}t.render=r.render||_r}Io(t),Qo(),pD(t),Yo(),xs()}function $D(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Ln(t,"get","$attrs"),e[n]}}))}function UD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return $D(t)},slots:t.slots,emit:t.emit,expose:e}}function Oh(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy($w(Vm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ua)return Ua[n](t)},has(e,n){return n in e||n in Ua}}))}function HD(t,e=!0){return Me(t)?t.displayName||t.name:t.name||e&&t.__name}function jD(t){return Me(t)&&"__vccOpts"in t}const Gt=(t,e)=>Bk(t,e,cc);function pb(t,e,n){const r=arguments.length;return r===2?Ct(e)&&!Se(e)?Tu(e)?Vt(t,null,[e]):Vt(t,e):Vt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Tu(n)&&(n=[n]),Vt(t,e,n))}const zD=Symbol.for("v-scx"),qD=()=>qn(zD),WD="3.3.4",KD="http://www.w3.org/2000/svg",us=typeof document<"u"?document:null,oy=us&&us.createElement("template"),GD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?us.createElementNS(KD,t):us.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>us.createTextNode(t),createComment:t=>us.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>us.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{oy.innerHTML=r?`<svg>${t}</svg>`:t;const a=oy.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function QD(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function YD(t,e,n){const r=t.style,i=$t(n);if(n&&!i){if(e&&!$t(e))for(const s in e)n[s]==null&&Z0(r,s,"");for(const s in n)Z0(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const ay=/\s*!important$/;function Z0(t,e,n){if(Se(n))n.forEach(r=>Z0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=XD(t,e);ay.test(n)?t.setProperty(Go(r),n.replace(ay,""),"important"):t[r]=n}}const cy=["Webkit","Moz","ms"],nf={};function XD(t,e){const n=nf[e];if(n)return n;let r=$r(e);if(r!=="filter"&&r in t)return nf[e]=r;r=Ah(r);for(let i=0;i<cy.length;i++){const s=cy[i]+r;if(s in t)return nf[e]=s}return e}const ly="http://www.w3.org/1999/xlink";function JD(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ly,e.slice(6,e.length)):t.setAttributeNS(ly,e,n);else{const s=tk(e);n==null||s&&!vw(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function ZD(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const l=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";l!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=vw(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function to(t,e,n,r){t.addEventListener(e,n,r)}function e4(t,e,n,r){t.removeEventListener(e,n,r)}function t4(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=n4(e);if(r){const l=s[e]=s4(r,i);to(t,a,l,c)}else o&&(e4(t,a,o,c),s[e]=void 0)}}const uy=/(?:Once|Passive|Capture)$/;function n4(t){let e;if(uy.test(t)){e={};let r;for(;r=t.match(uy);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Go(t.slice(2)),e]}let rf=0;const r4=Promise.resolve(),i4=()=>rf||(r4.then(()=>rf=0),rf=Date.now());function s4(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;vr(o4(r,n.value),e,5,[r])};return n.value=t,n.attached=i4(),n}function o4(t,e){if(Se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const hy=/^on[a-z]/,a4=(t,e,n,r,i=!1,s,o,a,c)=>{e==="class"?QD(t,r,i):e==="style"?YD(t,n,r):wh(e)?Rm(e)||t4(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):c4(t,e,r,i))?ZD(t,e,r,s,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),JD(t,e,r,i))};function c4(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&hy.test(e)&&Me(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||hy.test(e)&&$t(n)?!1:e in t}const dy=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Se(e)?n=>tu(e,n):e};function l4(t){t.target.composing=!0}function fy(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Oq={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=dy(i);const s=r||i.props&&i.props.type==="number";to(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=H0(a)),t._assign(a)}),n&&to(t,"change",()=>{t.value=t.value.trim()}),e||(to(t,"compositionstart",l4),to(t,"compositionend",fy),to(t,"change",fy))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=dy(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&H0(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},u4=["ctrl","shift","alt","meta"],h4={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>u4.some(n=>t[`${n}Key`]&&!e.includes(n))},Fl=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=h4[e[i]];if(s&&s(n,e))return}return t(n,...r)},d4={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ya(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ya(t,!0),r.enter(t)):r.leave(t,()=>{ya(t,!1)}):ya(t,e))},beforeUnmount(t,{value:e}){ya(t,e)}};function ya(t,e){t.style.display=e?t._vod:"none"}const f4=Xt({patchProp:a4},GD);let py;function p4(){return py||(py=TD(f4))}const m4=(...t)=>{const e=p4().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=g4(r);if(!i)return;const s=e._component;!Me(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function g4(t){return $t(t)?document.querySelector(t):t}var _4=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const v4=Symbol();var my;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(my||(my={}));function y4(){const t=Ew(!0),e=t.run(()=>ft({}));let n=[],r=[];const i=Vm({install(s){i._a=s,s.provide(v4,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!_4?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const no=typeof window<"u";function x4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ct=Object.assign;function sf(t,e){const n={};for(const r in e){const i=e[r];n[r]=Er(i)?i.map(t):t(i)}return n}const ja=()=>{},Er=Array.isArray,E4=/\/$/,w4=t=>t.replace(E4,"");function of(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=T4(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function b4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function gy(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function C4(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Ro(e.matched[r],n.matched[i])&&mb(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ro(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function mb(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!A4(t[n],e[n]))return!1;return!0}function A4(t,e){return Er(t)?_y(t,e):Er(e)?_y(e,t):t===e}function _y(t,e){return Er(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function T4(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var lc;(function(t){t.pop="pop",t.push="push"})(lc||(lc={}));var za;(function(t){t.back="back",t.forward="forward",t.unknown=""})(za||(za={}));function I4(t){if(!t)if(no){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),w4(t)}const R4=/^[^#]+#/;function S4(t,e){return t.replace(R4,"#")+e}function P4(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Fh=()=>({left:window.pageXOffset,top:window.pageYOffset});function k4(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=P4(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function vy(t,e){return(history.state?history.state.position-e:-1)+t}const ep=new Map;function D4(t,e){ep.set(t,e)}function N4(t){const e=ep.get(t);return ep.delete(t),e}let O4=()=>location.protocol+"//"+location.host;function gb(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),gy(c,"")}return gy(n,t)+r+i}function F4(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=gb(t,location),g=n.value,_=e.value;let v=0;if(d){if(n.value=f,e.value=d,o&&o===g){o=null;return}v=_?d.position-_.position:0}else r(f);i.forEach(b=>{b(n.value,g,{delta:v,type:lc.pop,direction:v?v>0?za.forward:za.back:za.unknown})})};function c(){o=n.value}function l(d){i.push(d);const f=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(ct({},d.state,{scroll:Fh()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function yy(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Fh():null}}function M4(t){const{history:e,location:n}=window,r={value:gb(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:O4()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(c,l){const u=ct({},e.state,yy(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),r.value=c}function a(c,l){const u=ct({},i.value,e.state,{forward:c,scroll:Fh()});s(u.current,u,!0);const h=ct({},yy(r.value,c,null),{position:u.position+1},l);s(c,h,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function B4(t){t=I4(t);const e=M4(t),n=F4(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=ct({location:"",base:t,go:r,createHref:S4.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function L4(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),B4(t)}function V4(t){return typeof t=="string"||t&&typeof t=="object"}function _b(t){return typeof t=="string"||typeof t=="symbol"}const xi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},vb=Symbol("");var xy;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(xy||(xy={}));function So(t,e){return ct(new Error,{type:t,[vb]:!0},e)}function Qr(t,e){return t instanceof Error&&vb in t&&(e==null||!!(t.type&e))}const Ey="[^/]+?",$4={sensitive:!1,strict:!1,start:!0,end:!0},U4=/[.+*?^${}()[\]/\\]/g;function H4(t,e){const n=ct({},$4,e),r=[];let i=n.start?"^":"";const s=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(U4,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:_,optional:v,regexp:b}=d;s.push({name:g,repeatable:_,optional:v});const x=b||Ey;if(x!==Ey){f+=10;try{new RegExp(`(${x})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${x}): `+w.message)}}let E=_?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(E=v&&l.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),i+=E,f+=20,v&&(f+=-8),_&&(f+=-20),x===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=s[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:_,optional:v}=f,b=g in l?l[g]:"";if(Er(b)&&!_)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const x=Er(b)?b.join("/"):b;if(!x)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=x}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function j4(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function z4(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=j4(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(wy(r))return 1;if(wy(i))return-1}return i.length-r.length}function wy(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const q4={type:0,value:""},W4=/[a-zA-Z0-9_]/;function K4(t){if(!t)return[[]];if(t==="/")return[[q4]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,l="",u="";function h(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:W4.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),i}function G4(t,e,n){const r=H4(K4(t.path),n),i=ct(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Q4(t,e){const n=[],r=new Map;e=Ay({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,g=Y4(u);g.aliasOf=d&&d.record;const _=Ay(e,u),v=[g];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of E)v.push(ct({},g,{components:d?d.record.components:g.components,path:w,aliasOf:d?d.record:g}))}let b,x;for(const E of v){const{path:w}=E;if(h&&w[0]!=="/"){const T=h.record.path,I=T[T.length-1]==="/"?"":"/";E.path=h.record.path+(w&&I+w)}if(b=G4(E,h,_),d?d.alias.push(b):(x=x||b,x!==b&&x.alias.push(b),f&&u.name&&!Cy(b)&&o(u.name)),g.children){const T=g.children;for(let I=0;I<T.length;I++)s(T[I],b,d&&d.children[I])}d=d||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&c(b)}return x?()=>{o(x)}:ja}function o(u){if(_b(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&z4(u,n[h])>=0&&(u.record.path!==n[h].record.path||!yb(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Cy(u)&&r.set(u.record.name,u)}function l(u,h){let d,f={},g,_;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw So(1,{location:u});_=d.record.name,f=ct(by(h.params,d.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&by(u.params,d.keys.map(x=>x.name))),g=d.stringify(f)}else if("path"in u)g=u.path,d=n.find(x=>x.re.test(g)),d&&(f=d.parse(g),_=d.record.name);else{if(d=h.name?r.get(h.name):n.find(x=>x.re.test(h.path)),!d)throw So(1,{location:u,currentLocation:h});_=d.record.name,f=ct({},h.params,u.params),g=d.stringify(f)}const v=[];let b=d;for(;b;)v.unshift(b.record),b=b.parent;return{name:_,path:g,params:f,matched:v,meta:J4(v)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function by(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Y4(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:X4(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function X4(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Cy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function J4(t){return t.reduce((e,n)=>ct(e,n.meta),{})}function Ay(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function yb(t,e){return e.children.some(n=>n===t||yb(t,n))}const xb=/#/g,Z4=/&/g,eN=/\//g,tN=/=/g,nN=/\?/g,Eb=/\+/g,rN=/%5B/g,iN=/%5D/g,wb=/%5E/g,sN=/%60/g,bb=/%7B/g,oN=/%7C/g,Cb=/%7D/g,aN=/%20/g;function Gm(t){return encodeURI(""+t).replace(oN,"|").replace(rN,"[").replace(iN,"]")}function cN(t){return Gm(t).replace(bb,"{").replace(Cb,"}").replace(wb,"^")}function tp(t){return Gm(t).replace(Eb,"%2B").replace(aN,"+").replace(xb,"%23").replace(Z4,"%26").replace(sN,"`").replace(bb,"{").replace(Cb,"}").replace(wb,"^")}function lN(t){return tp(t).replace(tN,"%3D")}function uN(t){return Gm(t).replace(xb,"%23").replace(nN,"%3F")}function hN(t){return t==null?"":uN(t).replace(eN,"%2F")}function Iu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function dN(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Eb," "),o=s.indexOf("="),a=Iu(o<0?s:s.slice(0,o)),c=o<0?null:Iu(s.slice(o+1));if(a in e){let l=e[a];Er(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function Ty(t){let e="";for(let n in t){const r=t[n];if(n=lN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Er(r)?r.map(s=>s&&tp(s)):[r&&tp(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function fN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Er(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const pN=Symbol(""),Iy=Symbol(""),Mh=Symbol(""),Qm=Symbol(""),np=Symbol("");function xa(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function bi(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(So(4,{from:n,to:e})):h instanceof Error?a(h):V4(h)?a(So(2,{from:e,to:h})):(s&&r.enterCallbacks[i]===s&&typeof h=="function"&&s.push(h),o())},l=t.call(r&&r.instances[i],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function af(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(mN(a)){const l=(a.__vccOpts||a)[e];l&&i.push(bi(l,n,r,s,o))}else{let c=a();i.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=x4(l)?l.default:l;s.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&bi(d,n,r,s,o)()}))}}return i}function mN(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ry(t){const e=qn(Mh),n=qn(Qm),r=Gt(()=>e.resolve(St(t.to))),i=Gt(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Ro.bind(null,u));if(d>-1)return d;const f=Sy(c[l-2]);return l>1&&Sy(u)===f&&h[h.length-1].path!==f?h.findIndex(Ro.bind(null,c[l-2])):d}),s=Gt(()=>i.value>-1&&yN(n.params,r.value.params)),o=Gt(()=>i.value>-1&&i.value===n.matched.length-1&&mb(n.params,r.value.params));function a(c={}){return vN(c)?e[St(t.replace)?"replace":"push"](St(t.to)).catch(ja):Promise.resolve()}return{route:r,href:Gt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const gN=ir({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ry,setup(t,{slots:e}){const n=Ih(Ry(t)),{options:r}=qn(Mh),i=Gt(()=>({[Py(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Py(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:pb("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_N=gN;function vN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function yN(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Er(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Sy(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Py=(t,e,n)=>t??e??n,xN=ir({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=qn(np),i=Gt(()=>t.route||r.value),s=qn(Iy,0),o=Gt(()=>{let l=St(s);const{matched:u}=i.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Gt(()=>i.value.matched[o.value]);ru(Iy,Gt(()=>o.value+1)),ru(pN,a),ru(np,i);const c=ft();return Mr(()=>[c.value,a.value,t.name],([l,u,h],[d,f,g])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Ro(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return ky(n.default,{Component:d,route:l});const f=h.props[u],g=f?f===!0?l.params:typeof f=="function"?f(l):f:null,v=pb(d,ct({},g,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return ky(n.default,{Component:v,route:l})||v}}});function ky(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Ab=xN;function EN(t){const e=Q4(t.routes,t),n=t.parseQuery||dN,r=t.stringifyQuery||Ty,i=t.history,s=xa(),o=xa(),a=xa(),c=Lw(xi);let l=xi;no&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=sf.bind(null,L=>""+L),h=sf.bind(null,hN),d=sf.bind(null,Iu);function f(L,X){let ie,ge;return _b(L)?(ie=e.getRecordMatcher(L),ge=X):ge=L,e.addRoute(ge,ie)}function g(L){const X=e.getRecordMatcher(L);X&&e.removeRoute(X)}function _(){return e.getRoutes().map(L=>L.record)}function v(L){return!!e.getRecordMatcher(L)}function b(L,X){if(X=ct({},X||c.value),typeof L=="string"){const N=of(n,L,X.path),V=e.resolve({path:N.path},X),q=i.createHref(N.fullPath);return ct(N,V,{params:d(V.params),hash:Iu(N.hash),redirectedFrom:void 0,href:q})}let ie;if("path"in L)ie=ct({},L,{path:of(n,L.path,X.path).path});else{const N=ct({},L.params);for(const V in N)N[V]==null&&delete N[V];ie=ct({},L,{params:h(N)}),X.params=h(X.params)}const ge=e.resolve(ie,X),$e=L.hash||"";ge.params=u(d(ge.params));const A=b4(r,ct({},L,{hash:cN($e),path:ge.path})),R=i.createHref(A);return ct({fullPath:A,hash:$e,query:r===Ty?fN(L.query):L.query||{}},ge,{redirectedFrom:void 0,href:R})}function x(L){return typeof L=="string"?of(n,L,c.value.path):ct({},L)}function E(L,X){if(l!==L)return So(8,{from:X,to:L})}function w(L){return k(L)}function T(L){return w(ct(x(L),{replace:!0}))}function I(L){const X=L.matched[L.matched.length-1];if(X&&X.redirect){const{redirect:ie}=X;let ge=typeof ie=="function"?ie(L):ie;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=x(ge):{path:ge},ge.params={}),ct({query:L.query,hash:L.hash,params:"path"in ge?{}:L.params},ge)}}function k(L,X){const ie=l=b(L),ge=c.value,$e=L.state,A=L.force,R=L.replace===!0,N=I(ie);if(N)return k(ct(x(N),{state:typeof N=="object"?ct({},$e,N.state):$e,force:A,replace:R}),X||ie);const V=ie;V.redirectedFrom=X;let q;return!A&&C4(r,ge,ie)&&(q=So(16,{to:V,from:ge}),U(ge,ge,!0,!1)),(q?Promise.resolve(q):P(V,ge)).catch(G=>Qr(G)?Qr(G,2)?G:Re(G):_e(G,V,ge)).then(G=>{if(G){if(Qr(G,2))return k(ct({replace:R},x(G.to),{state:typeof G.to=="object"?ct({},$e,G.to.state):$e,force:A}),X||V)}else G=H(V,ge,!0,R,$e);return B(V,ge,G),G})}function O(L,X){const ie=E(L,X);return ie?Promise.reject(ie):Promise.resolve()}function K(L){const X=Q.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(L):L()}function P(L,X){let ie;const[ge,$e,A]=wN(L,X);ie=af(ge.reverse(),"beforeRouteLeave",L,X);for(const N of ge)N.leaveGuards.forEach(V=>{ie.push(bi(V,L,X))});const R=O.bind(null,L,X);return ie.push(R),Pe(ie).then(()=>{ie=[];for(const N of s.list())ie.push(bi(N,L,X));return ie.push(R),Pe(ie)}).then(()=>{ie=af($e,"beforeRouteUpdate",L,X);for(const N of $e)N.updateGuards.forEach(V=>{ie.push(bi(V,L,X))});return ie.push(R),Pe(ie)}).then(()=>{ie=[];for(const N of A)if(N.beforeEnter)if(Er(N.beforeEnter))for(const V of N.beforeEnter)ie.push(bi(V,L,X));else ie.push(bi(N.beforeEnter,L,X));return ie.push(R),Pe(ie)}).then(()=>(L.matched.forEach(N=>N.enterCallbacks={}),ie=af(A,"beforeRouteEnter",L,X),ie.push(R),Pe(ie))).then(()=>{ie=[];for(const N of o.list())ie.push(bi(N,L,X));return ie.push(R),Pe(ie)}).catch(N=>Qr(N,8)?N:Promise.reject(N))}function B(L,X,ie){a.list().forEach(ge=>K(()=>ge(L,X,ie)))}function H(L,X,ie,ge,$e){const A=E(L,X);if(A)return A;const R=X===xi,N=no?history.state:{};ie&&(ge||R?i.replace(L.fullPath,ct({scroll:R&&N&&N.scroll},$e)):i.push(L.fullPath,$e)),c.value=L,U(L,X,ie,R),Re()}let $;function pe(){$||($=i.listen((L,X,ie)=>{if(!st.listening)return;const ge=b(L),$e=I(ge);if($e){k(ct($e,{replace:!0}),ge).catch(ja);return}l=ge;const A=c.value;no&&D4(vy(A.fullPath,ie.delta),Fh()),P(ge,A).catch(R=>Qr(R,12)?R:Qr(R,2)?(k(R.to,ge).then(N=>{Qr(N,20)&&!ie.delta&&ie.type===lc.pop&&i.go(-1,!1)}).catch(ja),Promise.reject()):(ie.delta&&i.go(-ie.delta,!1),_e(R,ge,A))).then(R=>{R=R||H(ge,A,!1),R&&(ie.delta&&!Qr(R,8)?i.go(-ie.delta,!1):ie.type===lc.pop&&Qr(R,20)&&i.go(-1,!1)),B(ge,A,R)}).catch(ja)}))}let me=xa(),he=xa(),Ee;function _e(L,X,ie){Re(L);const ge=he.list();return ge.length?ge.forEach($e=>$e(L,X,ie)):console.error(L),Promise.reject(L)}function Be(){return Ee&&c.value!==xi?Promise.resolve():new Promise((L,X)=>{me.add([L,X])})}function Re(L){return Ee||(Ee=!L,pe(),me.list().forEach(([X,ie])=>L?ie(L):X()),me.reset()),L}function U(L,X,ie,ge){const{scrollBehavior:$e}=t;if(!no||!$e)return Promise.resolve();const A=!ie&&N4(vy(L.fullPath,0))||(ge||!ie)&&history.state&&history.state.scroll||null;return Hw().then(()=>$e(L,X,A)).then(R=>R&&k4(R)).catch(R=>_e(R,L,X))}const W=L=>i.go(L);let J;const Q=new Set,st={currentRoute:c,listening:!0,addRoute:f,removeRoute:g,hasRoute:v,getRoutes:_,resolve:b,options:t,push:w,replace:T,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:he.add,isReady:Be,install(L){const X=this;L.component("RouterLink",_N),L.component("RouterView",Ab),L.config.globalProperties.$router=X,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>St(c)}),no&&!J&&c.value===xi&&(J=!0,w(i.location).catch($e=>{}));const ie={};for(const $e in xi)Object.defineProperty(ie,$e,{get:()=>c.value[$e],enumerable:!0});L.provide(Mh,X),L.provide(Qm,Nw(ie)),L.provide(np,c);const ge=L.unmount;Q.add(L),L.unmount=function(){Q.delete(L),Q.size<1&&(l=xi,$&&$(),$=null,c.value=xi,J=!1,Ee=!1),ge()}}};function Pe(L){return L.reduce((X,ie)=>X.then(()=>K(ie)),Promise.resolve())}return st}function wN(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(l=>Ro(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Ro(l,c))||i.push(c))}return[n,r,i]}function bN(){return qn(Mh)}function CN(){return qn(Qm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(t,e){if(!t)throw Xo(e)},Xo=function(t){return new Error("Firebase Database ("+Tb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ib(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw new TN;const d=s<<2|a>>4;if(r.push(d),l!==64){const f=a<<4&240|l>>2;if(r.push(f),h!==64){const g=l<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rb=function(t){const e=Ib(t);return Bh.encodeByteArray(e,!0)},Ru=function(t){return Rb(t).replace(/\./g,"")},Su=function(t){try{return Bh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){return Sb(void 0,t)}function Sb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!RN(n)||(t[n]=Sb(t[n],e[n]));return t}function RN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=()=>SN().__FIREBASE_DEFAULTS__,kN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Su(t[1]);return e&&JSON.parse(e)},Ym=()=>{try{return PN()||kN()||DN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pb=t=>{var e,n;return(n=(e=Ym())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NN=t=>{const e=Pb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kb=()=>{var t;return(t=Ym())===null||t===void 0?void 0:t.config},Db=t=>{var e;return(e=Ym())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ru(JSON.stringify(n)),Ru(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function Nb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ob(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FN(){const t=wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fb(){return Tb.NODE_ADMIN===!0}function Jm(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function MN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BN,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}}class Gi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sr(i,a,r)}}function LN(t,e){return t.replace(VN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){return JSON.parse(t)}function an(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=hc(Su(s[0])||""),n=hc(Su(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},$N=function(t){const e=Bb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},UN=function(t){const e=Bb(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Po(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pu(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function dc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Dy(s)&&Dy(o)){if(!dc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ka(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Da(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):h<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+l+c+u+r[h]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function jN(t,e){const n=new zN(t,e);return n.subscribe.bind(n)}class zN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cf),i.error===void 0&&(i.error=cf),i.complete===void 0&&(i.complete=cf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cf(){}function WN(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,oe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Lh=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=1e3,QN=2,YN=4*60*60*1e3,XN=.5;function Ny(t,e=GN,n=QN){const r=e*Math.pow(n,t),i=Math.round(XN*r*(Math.random()-.5)*2);return Math.min(YN,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class Pn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eO(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZN(t){return t===as?void 0:t}function eO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const nO={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},rO=et.INFO,iO={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},sO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zo{constructor(e){this.name=e,this._logLevel=rO,this._logHandler=sO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const oO=(t,e)=>e.some(n=>t instanceof n);let Oy,Fy;function aO(){return Oy||(Oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cO(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lb=new WeakMap,ip=new WeakMap,Vb=new WeakMap,lf=new WeakMap,Zm=new WeakMap;function lO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lb.set(n,t)}).catch(()=>{}),Zm.set(e,t),e}function uO(t){if(ip.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ip.set(t,e)}let sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hO(t){sp=t(sp)}function dO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(uf(this),e,...n);return Vb.set(r,e.sort?e.sort():[e]),Fi(r)}:cO().includes(t)?function(...e){return t.apply(uf(this),e),Fi(Lb.get(this))}:function(...e){return Fi(t.apply(uf(this),e))}}function fO(t){return typeof t=="function"?dO(t):(t instanceof IDBTransaction&&uO(t),oO(t,aO())?new Proxy(t,sp):t)}function Fi(t){if(t instanceof IDBRequest)return lO(t);if(lf.has(t))return lf.get(t);const e=fO(t);return e!==t&&(lf.set(t,e),Zm.set(e,t)),e}const uf=t=>Zm.get(t);function pO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Fi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fi(o.result),c.oldVersion,c.newVersion,Fi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const mO=["get","getKey","getAll","getAllKeys","count"],gO=["put","add","delete","clear"],hf=new Map;function My(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hf.get(e))return hf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mO.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return hf.set(e,s),s}hO(t=>({...t,get:(e,n,r)=>My(e,n)||t.get(e,n,r),has:(e,n)=>!!My(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",By="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Zo("@firebase/app"),yO="@firebase/app-compat",xO="@firebase/analytics-compat",EO="@firebase/analytics",wO="@firebase/app-check-compat",bO="@firebase/app-check",CO="@firebase/auth",AO="@firebase/auth-compat",TO="@firebase/database",IO="@firebase/database-compat",RO="@firebase/functions",SO="@firebase/functions-compat",PO="@firebase/installations",kO="@firebase/installations-compat",DO="@firebase/messaging",NO="@firebase/messaging-compat",OO="@firebase/performance",FO="@firebase/performance-compat",MO="@firebase/remote-config",BO="@firebase/remote-config-compat",LO="@firebase/storage",VO="@firebase/storage-compat",$O="@firebase/firestore",UO="@firebase/firestore-compat",HO="firebase",jO="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",zO={[op]:"fire-core",[yO]:"fire-core-compat",[EO]:"fire-analytics",[xO]:"fire-analytics-compat",[bO]:"fire-app-check",[wO]:"fire-app-check-compat",[CO]:"fire-auth",[AO]:"fire-auth-compat",[TO]:"fire-rtdb",[IO]:"fire-rtdb-compat",[RO]:"fire-fn",[SO]:"fire-fn-compat",[PO]:"fire-iid",[kO]:"fire-iid-compat",[DO]:"fire-fcm",[NO]:"fire-fcm-compat",[OO]:"fire-perf",[FO]:"fire-perf-compat",[MO]:"fire-rc",[BO]:"fire-rc-compat",[LO]:"fire-gcs",[VO]:"fire-gcs-compat",[$O]:"fire-fst",[UO]:"fire-fst-compat","fire-js":"fire-js",[HO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,cp=new Map;function qO(t,e){try{t.container.addComponent(e)}catch(n){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vn(t){const e=t.name;if(cp.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;cp.set(e,t);for(const n of ku.values())qO(n,t);return!0}function $s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Mi=new Gi("app","Firebase",WO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=jO;function $b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ap,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mi.create("bad-app-name",{appName:String(i)});if(n||(n=kb()),!n)throw Mi.create("no-options");const s=ku.get(i);if(s){if(dc(n,s.options)&&dc(r,s.config))return s;throw Mi.create("duplicate-app",{appName:i})}const o=new tO(i);for(const c of cp.values())o.addComponent(c);const a=new KO(n,r,o);return ku.set(i,a),a}function Vh(t=ap){const e=ku.get(t);if(!e&&t===ap&&kb())return $b();if(!e)throw Mi.create("no-app",{appName:t});return e}function ln(t,e,n){var r;let i=(r=zO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(a.join(" "));return}Vn(new Pn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="firebase-heartbeat-database",QO=1,fc="firebase-heartbeat-store";let df=null;function Ub(){return df||(df=pO(GO,QO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fc)}}}).catch(t=>{throw Mi.create("idb-open",{originalErrorMessage:t.message})})),df}async function YO(t){try{return await(await Ub()).transaction(fc).objectStore(fc).get(Hb(t))}catch(e){if(e instanceof sr)Cs.warn(e.message);else{const n=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(n.message)}}}async function Ly(t,e){try{const r=(await Ub()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,Hb(t)),await r.done}catch(n){if(n instanceof sr)Cs.warn(n.message);else{const r=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cs.warn(r.message)}}}function Hb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=1024,JO=30*24*60*60*1e3;class ZO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Vy();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=JO}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vy(),{heartbeatsToSend:n,unsentEntries:r}=eF(this._heartbeatsCache.heartbeats),i=Ru(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Vy(){return new Date().toISOString().substring(0,10)}function eF(t,e=XO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$y(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jm()?Mb().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await YO(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ly(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ly(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $y(t){return Ru(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t){Vn(new Pn("platform-logger",e=>new _O(e),"PRIVATE")),Vn(new Pn("heartbeat",e=>new ZO(e),"PRIVATE")),ln(op,By,t),ln(op,By,"esm2017"),ln("fire-js","")}nF("");function eg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function de(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Uy(t){return t!==void 0&&t.enterprise!==void 0}class rF{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function jb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iF=jb,zb=new Gi("auth","Firebase",jb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Zo("@firebase/auth");function sF(t,...e){Du.logLevel<=et.WARN&&Du.warn(`Auth (${Qi}): ${t}`,...e)}function su(t,...e){Du.logLevel<=et.ERROR&&Du.error(`Auth (${Qi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,...e){throw tg(t,...e)}function Br(t,...e){return tg(t,...e)}function qb(t,e,n){const r=Object.assign(Object.assign({},iF()),{[e]:n});return new Gi("auth","Firebase",r).create(e,{appName:t.name})}function Wb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&nr(t,"argument-error"),qb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zb.create(t,...e)}function ke(t,e,...n){if(!t)throw tg(e,...n)}function ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw su(e),new Error(e)}function ai(t,e){t||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oF(){return Hy()==="http:"||Hy()==="https:"}function Hy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oF()||Nb()||"connection"in navigator)?navigator.onLine:!0}function cF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ai(n>e,"Short delay should be less than long delay!"),this.isMobile=Xm()||Ob()}get(){return aF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){ai(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new Uc(3e4,6e4);function Us(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yi(t,e,n,r,i={}){return Gb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Jo(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),Kb.fetch()(Qb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function Gb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lF),e);try{const i=new hF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ml(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qb(t,u,l);nr(t,u)}}catch(i){if(i instanceof sr)throw i;nr(t,"network-request-failed",{message:String(i)})}}async function Hc(t,e,n,r,i={}){const s=await Yi(t,e,n,r,i);return"mfaPendingCredential"in s&&nr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Qb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ng(t.config,i):`${t.config.apiScheme}://${i}`}class hF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),uF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(t,e,r);return i.customData._tokenResponse=n,i}async function dF(t,e){return Yi(t,"GET","/v2/recaptchaConfig",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t,e){return Yi(t,"POST","/v1/accounts:delete",e)}async function pF(t,e){return Yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mF(t,e=!1){const n=At(t),r=await n.getIdToken(e),i=rg(r);ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:qa(ff(i.auth_time)),issuedAtTime:qa(ff(i.iat)),expirationTime:qa(ff(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ff(t){return Number(t)*1e3}function rg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const i=Su(n);return i?JSON.parse(i):(su("Failed to decode base64 JWT payload"),null)}catch(i){return su("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function gF(t){const e=rg(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&_F(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _F({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ko(t,pF(n,{idToken:r}));ke(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?EF(s.providerUserInfo):[],a=xF(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function yF(t){const e=At(t);await Nu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function EF(t){return t.map(e=>{var{providerId:n}=e,r=eg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e){const n=await Gb(t,{},async()=>{const r=Jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Qb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Kb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ke(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await wF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pc;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ke(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pc,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Es{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=eg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ko(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mF(this,e)}reload(){return yF(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ko(this,fF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(l=n.createdAt)!==null&&l!==void 0?l:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:w,isAnonymous:T,providerData:I,stsTokenManager:k}=n;ke(E&&k,e,"internal-error");const O=pc.fromJSON(this.name,k);ke(typeof E=="string",e,"internal-error"),Ei(h,e.name),Ei(d,e.name),ke(typeof w=="boolean",e,"internal-error"),ke(typeof T=="boolean",e,"internal-error"),Ei(f,e.name),Ei(g,e.name),Ei(_,e.name),Ei(v,e.name),Ei(b,e.name),Ei(x,e.name);const K=new Es({uid:E,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:T,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:O,createdAt:b,lastLoginAt:x});return I&&Array.isArray(I)&&(K.providerData=I.map(P=>Object.assign({},P))),v&&(K._redirectEventId=v),K}static async _fromIdTokenResponse(e,n,r=!1){const i=new pc;i.updateFromServerResponse(n);const s=new Es({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Map;function ti(t){ai(t instanceof Function,"Expected a class definition");let e=jy.get(t);return e?(ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xb.type="NONE";const zy=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t,e,n){return`firebase:${t}:${e}:${n}`}class mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ou(this.userKey,i.apiKey,s),this.fullPersistenceKey=ou("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mo(ti(zy),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||ti(zy);const o=ou(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){const h=Es._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new mo(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new mo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nC(e))return"Blackberry";if(rC(e))return"Webos";if(ig(e))return"Safari";if((e.includes("chrome/")||Zb(e))&&!e.includes("edge/"))return"Chrome";if(tC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Jb(t=wn()){return/firefox\//i.test(t)}function ig(t=wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zb(t=wn()){return/crios\//i.test(t)}function eC(t=wn()){return/iemobile/i.test(t)}function tC(t=wn()){return/android/i.test(t)}function nC(t=wn()){return/blackberry/i.test(t)}function rC(t=wn()){return/webos/i.test(t)}function $h(t=wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bF(t=wn()){var e;return $h(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CF(){return FN()&&document.documentMode===10}function iC(t=wn()){return $h(t)||tC(t)||rC(t)||nC(t)||/windows phone/i.test(t)||eC(t)}function AF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e=[]){let n;switch(t){case"Browser":n=qy(wn());break;case"Worker":n=`${qy(wn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e={}){return Yi(t,"GET","/v2/passwordPolicy",Us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=6;class SF{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:RF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wy(this),this.idTokenSubscription=new Wy(this),this.beforeStateQueue=new TF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ti(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?At(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IF(this),n=new SF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ti(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&sF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jr(t){return At(t)}class Wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=jN(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function oC(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kF().appendChild(r)})}function DF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const NF="https://www.google.com/recaptcha/enterprise.js?render=",OF="recaptcha-enterprise",FF="NO_RECAPTCHA";class MF{constructor(e){this.type=OF,this.auth=jr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new rF(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;Uy(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(FF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Uy(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}oC(NF+a).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ou(t,e,n,r=!1){const i=new MF(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e){const n=$s(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(dc(s,e??{}))return i;nr(i,"already-initialized")}return n.initialize({options:e})}function LF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VF(t,e,n){const r=jr(t);ke(r._canInitEmulator,r,"emulator-config-failed"),ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=aC(e),{host:o,port:a}=$F(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||UF()}function aC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $F(t){const e=aC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ky(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ky(o)}}}function Ky(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,n){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function HF(t,e){return Yi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(t,e){return Hc(t,"POST","/v1/accounts:signInWithPassword",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}async function zF(t,e){return Hc(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends sg{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new mc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Ou(e,r,"signInWithPassword");return pf(e,i)}else return pf(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Ou(e,r,"signInWithPassword");return pf(e,s)}else return Promise.reject(i)});case"emailLink":return jF(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return HF(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return zF(e,{idToken:n,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t,e){return Hc(t,"POST","/v1/accounts:signInWithIdp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="http://localhost";class As extends sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=eg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new As(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return go(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,go(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,go(e,n)}buildRequest(){const e={requestUri:qF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KF(t){const e=ka(Da(t)).link,n=e?ka(Da(e)).deep_link_id:null,r=ka(Da(t)).deep_link_id;return(r?ka(Da(r)).link:null)||r||n||e||t}class og{constructor(e){var n,r,i,s,o,a;const c=ka(Da(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,h=WF((i=c.mode)!==null&&i!==void 0?i:null);ke(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=KF(e);try{return new og(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.providerId=ea.PROVIDER_ID}static credential(e,n){return mc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=og.parseLink(n);return ke(r,"argument-error"),mc._fromEmailAndCode(e,r.code,r.tenantId)}}ea.PROVIDER_ID="password";ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Uh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends jc{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return As._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends jc{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends jc{constructor(){super("twitter.com")}static credential(e,n){return As._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ii.credential(n,r)}catch{return null}}}Ii.TWITTER_SIGN_IN_METHOD="twitter.com";Ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(t,e){return Hc(t,"POST","/v1/accounts:signUp",Us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Es._fromIdTokenResponse(e,r,i),o=Gy(r);return new Ts({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Gy(r);return new Ts({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Gy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends sr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fu(e,n,r,i)}}function cC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(t,s,e,r):s})}async function GF(t,e,n=!1){const r=await ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await ko(t,cC(r,i,e,t),n);ke(s.idToken,r,"internal-error");const o=rg(s.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),Ts._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&nr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(t,e,n=!1){const r="signIn",i=await cC(t,r,e),s=await Ts._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function YF(t,e){return lC(jr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t){const e=jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Fq(t,e,n){var r;const i=jr(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const l=await Ou(i,s,"signUpPassword");o=mf(i,l)}else o=mf(i,s).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Ou(i,s,"signUpPassword");return mf(i,u)}throw l});const a=await o.catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&uC(t),l}),c=await Ts._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function Mq(t,e,n){return YF(At(t),ea.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF(t,e){return Yi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bq(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=At(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ko(r,XF(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function hC(t,e,n,r){return At(t).onIdTokenChanged(e,n,r)}function JF(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function Lq(t){return At(t).signOut()}const Mu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mu,"1"),this.storage.removeItem(Mu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){const t=wn();return ig(t)||$h(t)}const e8=1e3,t8=10;class fC extends dC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ZF()&&AF(),this.fallbackToPolling=iC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);CF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,t8):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},e8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fC.type="LOCAL";const n8=fC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends dC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pC.type="SESSION";const mC=pC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),c=await r8(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=ag("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function s8(t){Lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function o8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c8(){return gC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firebaseLocalStorageDb",l8=1,Bu="firebaseLocalStorage",vC="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jh(t,e){return t.transaction([Bu],e?"readwrite":"readonly").objectStore(Bu)}function u8(){const t=indexedDB.deleteDatabase(_C);return new zc(t).toPromise()}function up(){const t=indexedDB.open(_C,l8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bu,{keyPath:vC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bu)?e(r):(r.close(),await u8(),e(await up()))})})}async function Qy(t,e,n){const r=jh(t,!0).put({[vC]:e,value:n});return new zc(r).toPromise()}async function h8(t,e){const n=jh(t,!1).get(e),r=await new zc(n).toPromise();return r===void 0?null:r.value}function Yy(t,e){const n=jh(t,!0).delete(e);return new zc(n).toPromise()}const d8=800,f8=3;class yC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>f8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(c8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o8(),!this.activeServiceWorker)return;this.sender=new i8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await Qy(e,Mu,"1"),await Yy(e,Mu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=jh(i,!1).getAll();return new zc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yC.type="LOCAL";const p8=yC;new Uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){return e?ti(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m8(t){return lC(t.auth,new lg(t),t.bypassAuthState)}function g8(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),QF(n,new lg(t),t.bypassAuthState)}async function _8(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),GF(n,new lg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m8;case"linkViaPopup":case"linkViaRedirect":return _8;case"reauthViaPopup":case"reauthViaRedirect":return g8;default:nr(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=new Uc(2e3,1e4);async function Vq(t,e,n){const r=jr(t);Wb(t,e,Uh);const i=cg(r,n);return new ds(r,"signInViaPopup",e,i).executeNotNull()}class ds extends xC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v8.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="pendingRedirect",au=new Map;class x8 extends xC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=au.get(this.auth._key());if(!e){try{const r=await E8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}au.set(this.auth._key(),e)}return this.bypassAuthState||au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E8(t,e){const n=wC(e),r=EC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function w8(t,e){return EC(t)._set(wC(e),"true")}function b8(t,e){au.set(t._key(),e)}function EC(t){return ti(t._redirectPersistence)}function wC(t){return ou(y8,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t,e,n){return C8(t,e,n)}async function C8(t,e,n){const r=jr(t);Wb(t,e,Uh),await r._initializationPromise;const i=cg(r,n);return await w8(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Uq(t,e){return await jr(t)._initializationPromise,bC(t,e,!1)}async function bC(t,e,n=!1){const r=jr(t),i=cg(r,e),o=await new x8(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=10*60*1e3;class T8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xy(e))}saveEventToCache(e){this.cachedEventUids.add(Xy(e)),this.lastProcessedEventTime=Date.now()}}function Xy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e={}){return Yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P8=/^https?/;async function k8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R8(t);for(const n of e)try{if(D8(n))return}catch{}nr(t,"unauthorized-domain")}function D8(t){const e=lp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!P8.test(n))return!1;if(S8.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=new Uc(3e4,6e4);function Jy(){const t=Lr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function O8(t){return new Promise((e,n)=>{var r,i,s;function o(){Jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jy(),n(Br(t,"network-request-failed"))},timeout:N8.get()})}if(!((i=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Lr().gapi)===null||s===void 0)&&s.load)o();else{const a=DF("iframefcb");return Lr()[a]=()=>{gapi.load?o():n(Br(t,"network-request-failed"))},oC(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw cu=null,e})}let cu=null;function F8(t){return cu=cu||O8(t),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=new Uc(5e3,15e3),B8="__/auth/iframe",L8="emulator/auth/iframe",V8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U8(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ng(e,L8):`https://${t.config.authDomain}/${B8}`,r={apiKey:e.apiKey,appName:t.name,v:Qi},i=$8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Jo(r).slice(1)}`}async function H8(t){const e=await F8(t),n=Lr().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:U8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Br(t,"network-request-failed"),a=Lr().setTimeout(()=>{s(o)},M8.get());function c(){Lr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z8=500,q8=600,W8="_blank",K8="http://localhost";class Zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G8(t,e,n,r=z8,i=q8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},j8),{width:r.toString(),height:i.toString(),top:s,left:o}),l=wn().toLowerCase();n&&(a=Zb(l)?W8:n),Jb(l)&&(e=e||K8,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(bF(l)&&a!=="_self")return Q8(e||"",a),new Zy(null);const h=window.open(e||"",a,u);ke(h,t,"popup-blocked");try{h.focus()}catch{}return new Zy(h)}function Q8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8="__/auth/handler",X8="emulator/auth/handler",J8=encodeURIComponent("fac");async function ex(t,e,n,r,i,s){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qi,eventId:i};if(e instanceof Uh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rp(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof jc){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${J8}=${encodeURIComponent(c)}`:"";return`${Z8(t)}?${Jo(a).slice(1)}${l}`}function Z8({config:t}){return t.emulator?ng(t,X8):`https://${t.authDomain}/${Y8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="webStorageSupport";class e6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mC,this._completeRedirectFn=bC,this._overrideRedirectResult=b8}async _openPopup(e,n,r,i){var s;ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ex(e,n,r,lp(),i);return G8(e,o,ag())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ex(e,n,r,lp(),i);return s8(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ai(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H8(e),r=new T8(e);return n.register("authEvent",i=>(ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gf,{type:gf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gf];o!==void 0&&n(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iC()||ig()||$h()}}const t6=e6;var tx="@firebase/auth",nx="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function i6(t){Vn(new Pn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sC(t)},l=new PF(r,i,s,c);return LF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vn(new Pn("auth-internal",e=>{const n=jr(e.getProvider("auth").getImmediate());return(r=>new n6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ln(tx,nx,r6(t)),ln(tx,nx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=5*60,o6=Db("authIdTokenMaxAge")||s6;let rx=null;const a6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>o6)return;const i=n==null?void 0:n.token;rx!==i&&(rx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function AC(t=Vh()){const e=$s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BF(t,{popupRedirectResolver:t6,persistence:[p8,n8,mC]}),r=Db("authTokenSyncURL");if(r){const s=a6(r);JF(n,s,()=>s(n.currentUser)),hC(n,o=>s(o))}const i=Pb("auth");return i&&VF(n,`http://${i}`),n}i6("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new Map,l6={activated:!1,tokenObservers:[]};function wr(t){return c6.get(t)||Object.assign({},l6)}const ix={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new uc,await h6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new uc,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function h6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Lu=new Gi("appCheck","AppCheck",d6);function TC(t){if(!wr(t).activated)throw Lu.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="firebase-app-check-database",p6=1,hp="firebase-app-check-store";let Bl=null;function m6(){return Bl||(Bl=new Promise((t,e)=>{try{const n=indexedDB.open(f6,p6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Lu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hp,{keyPath:"compositeKey"})}}}catch(n){e(Lu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Bl)}function g6(t,e){return _6(v6(t),e)}async function _6(t,e){const r=(await m6()).transaction(hp,"readwrite"),s=r.objectStore(hp).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Lu.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function v6(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new Zo("@firebase/app-check");function sx(t,e){return Jm()?g6(t,e).catch(n=>{dp.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6={error:"UNKNOWN_ERROR"};function x6(t){return Bh.encodeString(JSON.stringify(t),!1)}async function fp(t,e=!1){const n=t.app;TC(n);const r=wr(n);let i=r.token,s;if(i&&!Na(i)&&(r.token=void 0,i=void 0),!i){const c=await r.cachedTokenPromise;c&&(Na(c)?i=c:await sx(n,void 0))}if(!e&&i&&Na(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await wr(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?dp.warn(c.message):dp.error(c),s=c}let a;return i?s?Na(i)?a={token:i.token,internalError:s}:a=ax(s):(a={token:i.token},r.token=i,await sx(n,i)):a=ax(s),o&&C6(n,a),a}async function E6(t){const e=t.app;TC(e);const{provider:n}=wr(e);{const{token:r}=await n.getToken();return{token:r}}}function w6(t,e,n,r){const{app:i}=t,s=wr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Na(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),ox(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ox(t))}function IC(t,e){const n=wr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function ox(t){const{app:e}=t,n=wr(e);let r=n.tokenRefresher;r||(r=b6(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function b6(t){const{app:e}=t;return new u6(async()=>{const n=wr(e);let r;if(n.token?r=await fp(t,!0):r=await fp(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=wr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ix.RETRIAL_MIN_WAIT,ix.RETRIAL_MAX_WAIT)}function C6(t,e){const n=wr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Na(t){return t.expireTimeMillis-Date.now()>0}function ax(t){return{token:x6(y6),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=wr(this.app);for(const n of e)IC(this.app,n.next);return Promise.resolve()}}function T6(t,e){return new A6(t,e)}function I6(t){return{getToken:e=>fp(t,e),getLimitedUseToken:()=>E6(t),addTokenListener:e=>w6(t,"INTERNAL",e),removeTokenListener:e=>IC(t.app,e)}}const R6="@firebase/app-check",S6="0.8.0",P6="app-check",cx="app-check-internal";function k6(){Vn(new Pn(P6,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return T6(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(cx).initialize()})),Vn(new Pn(cx,t=>{const e=t.getProvider("app-check").getImmediate();return I6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ln(R6,S6)}k6();var D6="firebase",N6="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln(D6,N6,"app");const RC=Symbol("firebaseApp");function qc(t){return hb()&&qn(RC,null)||Vh(t)}const kr=()=>{},O6=typeof window<"u";function ug(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function F6(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function Hs(t){return!!t&&typeof t=="object"}const M6=Object.prototype;function B6(t){return Hs(t)&&Object.getPrototypeOf(t)===M6}function hg(t){return Hs(t)&&t.type==="document"}function L6(t){return Hs(t)&&t.type==="collection"}function V6(t){return hg(t)||L6(t)}function $6(t){return Hs(t)&&t.type==="query"}function U6(t){return Hs(t)&&"ref"in t}function H6(t){return Hs(t)&&typeof t.bucket=="string"}function j6(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const z6=Symbol.for("v-scx");function q6(){return!!qn(z6,0)}const Ll=new WeakMap;function W6(t,e){if(!Ll.has(t)){const n=Ew(!0);Ll.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),Ll.delete(t)}}return Ll.get(t)}const SC=new WeakMap;function zh(t){return SC.get(qc(t))}const Vl=new WeakMap;function PC(t){const e=qc(t);if(!Vl.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{Vl.set(e,s),n(s.value)}];Vl.set(e,i)}return Vl.get(e)}function K6(t){const e=PC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function G6(t,e){const n=AC(e);hC(n,r=>{const i=PC();t.value=r,Array.isArray(i)&&i[1](t)})}const lx="@firebase/database",ux="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kC="";function Q6(t){kC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),an(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:hc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return fi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y6(e)}}catch{}return new X6},fs=DC("localStorage"),pp=DC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new Zo("@firebase/database"),J6=function(){let t=1;return function(){return t++}}(),NC=function(t){const e=KN(t),n=new HN;n.update(e);const r=n.digest();return Bh.encodeByteArray(r)},Wc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Wc.apply(null,r):typeof r=="object"?e+=an(r):e+=r,e+=" "}return e};let ws=null,hx=!0;const Z6=function(t,e){oe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(_o.logLevel=et.VERBOSE,ws=_o.log.bind(_o),e&&pp.set("logging_enabled",!0)):typeof t=="function"?ws=t:(ws=null,pp.remove("logging_enabled"))},fn=function(...t){if(hx===!0&&(hx=!1,ws===null&&pp.get("logging_enabled")===!0&&Z6(!0)),ws){const e=Wc.apply(null,t);ws(e)}},Kc=function(t){return function(...e){fn(t,...e)}},mp=function(...t){const e="FIREBASE INTERNAL ERROR: "+Wc(...t);_o.error(e)},Is=function(...t){const e=`FIREBASE FATAL ERROR: ${Wc(...t)}`;throw _o.error(e),new Error(e)},Wn=function(...t){const e="FIREBASE WARNING: "+Wc(...t);_o.warn(e)},eM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},OC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},tM=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Do="[MIN_NAME]",Rs="[MAX_NAME]",ta=function(t,e){if(t===e)return 0;if(t===Do||e===Rs)return-1;if(e===Do||t===Rs)return 1;{const n=dx(t),r=dx(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},nM=function(t,e){return t===e?0:t<e?-1:1},Ea=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+an(e))},dg=function(t){if(typeof t!="object"||t===null)return an(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=an(e[r]),n+=":",n+=dg(t[e[r]]);return n+="}",n},FC=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function rr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const MC=function(t){oe(!OC(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let h="";for(c=0;c<64;c+=8){let d=parseInt(u.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},rM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},iM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},sM=new RegExp("^-?(0*)\\d{1,10}$"),oM=-2147483648,aM=2147483647,dx=function(t){if(sM.test(t)){const e=Number(t);if(e>=oM&&e<=aM)return e}return null},Gc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Wn("Exception was thrown by user callback.",n),e},Math.floor(0))}},cM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(fn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}}class gp{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}gp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="5",BC="v",LC="s",VC="r",$C="f",UC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HC="ls",jC="p",_p="ac",zC="websocket",qC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function dM(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function WC(t,e,n){oe(typeof e=="string","typeof type must == string"),oe(typeof n=="object","typeof params must == object");let r;if(e===zC)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===qC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dM(t)&&(n.ns=t.namespace);const i=[];return rr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.counters_={}}incrementCounter(e,n=1){fi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return IN(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f={},vf={};function pg(t){const e=t.toString();return _f[e]||(_f[e]=new fM),_f[e]}function pM(t,e){const n=t.toString();return vf[n]||(vf[n]=e()),vf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="start",gM="close",_M="pLPCommand",vM="pRTLPCB",KC="id",GC="pw",QC="ser",yM="cb",xM="seg",EM="ts",wM="d",bM="dframe",YC=1870,XC=30,CM=YC-XC,AM=25e3,TM=3e4;class oo{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kc(e),this.stats_=pg(n),this.urlFn=c=>(this.appCheckToken&&(c[_p]=this.appCheckToken),WC(n,qC,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new mM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(TM)),tM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mg((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===fx)this.id=a,this.password=c;else if(o===gM)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[fx]="t",r[QC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[yM]=this.scriptTagHolder.uniqueCallbackIdentifier),r[BC]=fg,this.transportSessionId&&(r[LC]=this.transportSessionId),this.lastSessionId&&(r[HC]=this.lastSessionId),this.applicationId&&(r[jC]=this.applicationId),this.appCheckToken&&(r[_p]=this.appCheckToken),typeof location<"u"&&location.hostname&&UC.test(location.hostname)&&(r[VC]=$C);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oo.forceAllow_=!0}static forceDisallow(){oo.forceDisallow_=!0}static isAvailable(){return oo.forceAllow_?!0:!oo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rM()&&!iM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=an(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Rb(n),i=FC(r,CM);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[bM]="t",r[KC]=e,r[GC]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=an(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class mg{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=J6(),window[_M+this.uniqueCallbackIdentifier]=e,window[vM+this.uniqueCallbackIdentifier]=n,this.myIFrame=mg.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){fn("frame writing exception"),a.stack&&fn(a.stack),fn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||fn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[KC]=this.myID,e[GC]=this.myPW,e[QC]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+XC+r.length<=YC;){const o=this.pendingSegs.shift();r=r+"&"+xM+i+"="+o.seg+"&"+EM+i+"="+o.ts+"&"+wM+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(AM)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{fn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=16384,RM=45e3;let Vu=null;typeof MozWebSocket<"u"?Vu=MozWebSocket:typeof WebSocket<"u"&&(Vu=WebSocket);class dr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kc(this.connId),this.stats_=pg(n),this.connURL=dr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[BC]=fg,typeof location<"u"&&location.hostname&&UC.test(location.hostname)&&(o[VC]=$C),n&&(o[LC]=n),r&&(o[HC]=r),i&&(o[_p]=i),s&&(o[jC]=s),WC(e,zC,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fs.set("previous_websocket_failure",!0);try{let r;Fb(),this.mySock=new Vu(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){dr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Vu!==null&&!dr.forceDisallow_}static previouslyFailed(){return fs.isInMemoryStorage||fs.get("previous_websocket_failure")===!0}markConnectionHealthy(){fs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=hc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=an(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=FC(n,IM);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(RM))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dr.responsesRequiredToBeHealthy=2;dr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[oo,dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=dr&&dr.isAvailable();let r=n&&!dr.previouslyFailed();if(e.webSocketOnly&&(n||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dr];else{const i=this.transports_=[];for(const s of gc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);gc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=6e4,PM=5e3,kM=10*1024,DM=100*1024,yf="t",px="d",NM="s",mx="r",OM="e",gx="o",_x="a",vx="n",yx="p",FM="h";class MM{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kc("c:"+this.id+":"),this.transportManager_=new gc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>DM?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kM?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(yf in e){const n=e[yf];n===_x?this.upgradeIfSecondaryHealthy_():n===mx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===gx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ea("t",e),r=Ea("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_x,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ea("t",e),r=Ea("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ea(yf,e);if(px in e){const r=e[px];if(n===FM){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===vx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===NM?this.onConnectionShutdown_(r):n===mx?this.onReset_(r):n===OM?mp("Server Error: "+r):n===gx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mp("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),fg!==r&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(SM))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(PM))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends ZC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $u}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=32,Ex=768;class Et{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pt(){return new Et("")}function Ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Hi(t){return t.pieces_.length-t.pieceNum_}function vt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Et(t.pieces_,e)}function eA(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function BM(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function tA(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nA(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Et(e,0)}function Qt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Et)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Et(n,0)}function He(t){return t.pieceNum_>=t.pieces_.length}function tr(t,e){const n=Ge(t),r=Ge(e);if(n===null)return e;if(n===r)return tr(vt(t),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function rA(t,e){if(Hi(t)!==Hi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Hi(t)>Hi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class LM{constructor(e,n){this.errorPrefix_=n,this.parts_=tA(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Lh(this.parts_[r]);iA(this)}}function VM(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Lh(e),iA(t)}function $M(t){const e=t.parts_.pop();t.byteLength_-=Lh(e),t.parts_.length>0&&(t.byteLength_-=1)}function iA(t){if(t.byteLength_>Ex)throw new Error(t.errorPrefix_+"has a key path longer than "+Ex+" bytes ("+t.byteLength_+").");if(t.parts_.length>xx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+xx+") or object contains a cycle "+cs(t))}function cs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends ZC{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gg}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=1e3,UM=60*5*1e3,wx=30*1e3,HM=1.3,jM=3e4,zM="server_kill",bx=3;class si extends JC{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=si.nextPersistentConnectionId_++,this.log_=Kc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wa,this.maxReconnectDelay_=UM,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Fb())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$u.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(an(s)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new uc,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;si.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&fi(e,"w")){const r=Po(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||UN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$N(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+an(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):mp("Unrecognized action received from server: "+an(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jM&&(this.reconnectDelay_=wa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HM)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+si.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(h){oe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?fn("getToken() completed but was canceled"):(fn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new MM(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Wn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(zM)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Wn(h),c())}}}interrupt(e){fn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],rp(this.interruptReasons_)&&(this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>dg(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Et(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){fn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bx&&(this.reconnectDelay_=wx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){fn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+kC.replace(/\./g,"-")]=1,Xm()?e["framework.cordova"]=1:Ob()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$u.getInstance().currentlyOnline();return rp(this.interruptReasons_)&&e}}si.nextPersistentConnectionId_=0;si.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Qe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Qe(Do,e),i=new Qe(Do,n);return this.compare(r,i)!==0}minPost(){return Qe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l;class sA extends qh{static get __EMPTY_NODE(){return $l}static set __EMPTY_NODE(e){$l=e}compare(e,n){return ta(e.name,n.name)}isDefinedOn(e){throw Xo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Qe.MIN}maxPost(){return new Qe(Rs,$l)}makePost(e,n){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new Qe(e,$l)}toString(){return".key"}}const vo=new sA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},jn=class Oa{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Oa.RED,this.left=i??Dr.EMPTY_NODE,this.right=s??Dr.EMPTY_NODE}copy(e,n,r,i,s){return new Oa(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Dr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Oa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Oa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};jn.RED=!0;jn.BLACK=!1;class qM{copy(e,n,r,i,s){return this}insert(e,n,r){return new jn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Dr=class lu{constructor(e,n=lu.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new lu(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jn.BLACK,null,null))}remove(e){return new lu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ul(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ul(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ul(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ul(this.root_,null,this.comparator_,!0,e)}};Dr.EMPTY_NODE=new qM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t,e){return ta(t.name,e.name)}function _g(t,e){return ta(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp;function KM(t){vp=t}const oA=function(t){return typeof t=="number"?"number:"+MC(t):"string:"+t},aA=function(t){if(t.isLeafNode()){const e=t.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fi(e,".sv"),"Priority must be a string or number.")}else oe(t===vp||t.isEmpty(),"priority of unexpected type.");oe(t===vp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cx;class zt{constructor(e,n=zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aA(this.priorityNode_)}static set __childrenNodeConstructor(e){Cx=e}static get __childrenNodeConstructor(){return Cx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return He(e)?this:Ge(e)===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ge(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(oe(r!==".priority"||Hi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oA(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=MC(this.value_):e+=this.value_,this.lazyHash_=NC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zt.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=zt.VALUE_TYPE_ORDER.indexOf(n),s=zt.VALUE_TYPE_ORDER.indexOf(r);return oe(i>=0,"Unknown leaf type: "+n),oe(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cA,lA;function GM(t){cA=t}function QM(t){lA=t}class YM extends qh{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ta(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Qe.MIN}maxPost(){return new Qe(Rs,new zt("[PRIORITY-POST]",lA))}makePost(e,n){const r=cA(e);return new Qe(n,new zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const _n=new YM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=Math.log(2);class JM{constructor(e){const n=s=>parseInt(Math.log(s)/XM,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Uu=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let h,d;if(u===0)return null;if(u===1)return h=t[c],d=n?n(h):h,new jn(d,h.node,jn.BLACK,null,null);{const f=parseInt(u/2,10)+c,g=i(c,f),_=i(f+1,l);return h=t[f],d=n?n(h):h,new jn(d,h.node,jn.BLACK,g,_)}},s=function(c){let l=null,u=null,h=t.length;const d=function(g,_){const v=h-g,b=h;h-=g;const x=i(v+1,b),E=t[v],w=n?n(E):E;f(new jn(w,E.node,_,null,x))},f=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){const _=c.nextBitIsOne(),v=Math.pow(2,c.count-(g+1));_?d(v,jn.BLACK):(d(v,jn.BLACK),d(v,jn.RED))}return u},o=new JM(t.length),a=s(o);return new Dr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf;const Zs={};class ni{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return oe(Zs&&_n,"ChildrenNode.ts has not been loaded"),xf=xf||new ni({".priority":Zs},{".priority":_n}),xf}get(e){const n=Po(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Dr?n:null}hasIndex(e){return fi(this.indexSet_,e.toString())}addIndex(e,n){oe(e!==vo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Qe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Uu(r,e.getCompare()):a=Zs;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new ni(u,l)}addToIndexes(e,n){const r=Pu(this.indexes_,(i,s)=>{const o=Po(this.indexSet_,s);if(oe(o,"Missing index implementation for "+s),i===Zs)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Qe.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Uu(a,o.getCompare())}else return Zs;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new Qe(e.name,a))),c.insert(e,e.node)}});return new ni(r,this.indexSet_)}removeFromIndexes(e,n){const r=Pu(this.indexes_,i=>{if(i===Zs)return i;{const s=n.get(e.name);return s?i.remove(new Qe(e.name,s)):i}});return new ni(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba;class at{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aA(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ba||(ba=new at(new Dr(_g),null,ni.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ba}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ba:n}}getChild(e){const n=Ge(e);return n===null?this:this.getImmediateChild(n).getChild(vt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Qe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ba:this.priorityNode_;return new at(i,o,s)}}updateChild(e,n){const r=Ge(e);if(r===null)return n;{oe(Ge(e)!==".priority"||Hi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(vt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(_n,(o,a)=>{n[o]=a.val(e),r++,s&&at.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oA(this.getPriority().val())+":"),this.forEachChild(_n,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":NC(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Qe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Qe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Qe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Qe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Qe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qc?-1:0}withIndex(e){if(e===vo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===vo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(_n),i=n.getIterator(_n);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===vo?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ZM extends at{constructor(){super(new Dr(_g),at.EMPTY_NODE,ni.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const Qc=new ZM;Object.defineProperties(Qe,{MIN:{value:new Qe(Do,at.EMPTY_NODE)},MAX:{value:new Qe(Rs,Qc)}});sA.__EMPTY_NODE=at.EMPTY_NODE;zt.__childrenNodeConstructor=at;KM(Qc);QM(Qc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=!0;function pn(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new zt(n,pn(e))}if(!(t instanceof Array)&&eB){const n=[];let r=!1;if(rr(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=pn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Qe(o,c)))}}),n.length===0)return at.EMPTY_NODE;const s=Uu(n,WM,o=>o.name,_g);if(r){const o=Uu(n,_n.getCompare());return new at(s,pn(e),new ni({".priority":o},{".priority":_n}))}else return new at(s,pn(e),ni.Default)}else{let n=at.EMPTY_NODE;return rr(t,(r,i)=>{if(fi(t,r)&&r.substring(0,1)!=="."){const s=pn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(pn(e))}}GM(pn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB extends qh{constructor(e){super(),this.indexPath_=e,oe(!He(e)&&Ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ta(e.name,n.name):s}makePost(e,n){const r=pn(e),i=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new Qe(n,i)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,Qc);return new Qe(Rs,e)}toString(){return tA(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB extends qh{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ta(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Qe.MIN}maxPost(){return Qe.MAX}makePost(e,n){const r=pn(e);return new Qe(n,r)}toString(){return".value"}}const rB=new nB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){return{type:"value",snapshotNode:t}}function sB(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function oB(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ax(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function aB(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_n}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Do}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_n}copy(){const e=new vg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tx(t){const e={};if(t.isDefault())return e;let n;if(t.index_===_n?n="$priority":t.index_===rB?n="$value":t.index_===vo?n="$key":(oe(t.index_ instanceof tB,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=an(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=an(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+an(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=an(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+an(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Ix(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==_n&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends JC{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Kc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Hu.getListenId_(e,r),a={};this.listens_[o]=a;const c=Tx(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(s,h,!1,r),Po(this.listens_,o)===a){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",i(d,null)}})}unlisten(e,n){const r=Hu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Tx(e._queryParams),r=e._path.toString(),i=new uc;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jo(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=hc(a.responseText)}catch{Wn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Wn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(){return{value:null,children:new Map}}function uA(t,e,n){if(He(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ge(e);t.children.has(r)||t.children.set(r,ju());const i=t.children.get(r);e=vt(e),uA(i,e,n)}}function yp(t,e,n){t.value!==null?n(e,t.value):lB(t,(r,i)=>{const s=new Et(e.toString()+"/"+r);yp(i,s,n)})}function lB(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&rr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=10*1e3,hB=30*1e3,dB=5*60*1e3;class fB{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uB(e);const r=Rx+(hB-Rx)*Math.random();Wa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;rr(e,(i,s)=>{s>0&&fi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Wa(this.reportStats_.bind(this),Math.floor(Math.random()*2*dB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Nr||(Nr={}));function hA(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dA(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fA(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Nr.ACK_USER_WRITE,this.source=hA()}operationForChild(e){if(He(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Et(e));return new zu(pt(),n,this.revert)}}else return oe(Ge(this.path)===e,"operationForChild called for unrelated child."),new zu(vt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Nr.OVERWRITE}operationForChild(e){return He(this.path)?new Ss(this.source,pt(),this.snap.getImmediateChild(e)):new Ss(this.source,vt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Nr.MERGE}operationForChild(e){if(He(this.path)){const n=this.children.subtree(new Et(e));return n.isEmpty()?null:n.value?new Ss(this.source,pt(),n.value):new _c(this.source,pt(),n)}else return oe(Ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _c(this.source,vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(He(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function pB(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(aB(o.childName,o.snapshotNode))}),Ca(t,i,"child_removed",e,r,n),Ca(t,i,"child_added",e,r,n),Ca(t,i,"child_moved",s,r,n),Ca(t,i,"child_changed",e,r,n),Ca(t,i,"value",e,r,n),i}function Ca(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>gB(t,a,c)),o.forEach(a=>{const c=mB(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function mB(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function gB(t,e,n){if(e.childName==null||n.childName==null)throw Xo("Should only compare child_ events.");const r=new Qe(e.childName,e.snapshotNode),i=new Qe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e){return{eventCache:t,serverCache:e}}function Ka(t,e,n,r){return pA(new yg(e,n,r),t.serverCache)}function mA(t,e,n,r){return pA(t.eventCache,new yg(e,n,r))}function xp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ps(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;const _B=()=>(Ef||(Ef=new Dr(nM)),Ef);class gt{constructor(e,n=_B()){this.value=e,this.children=n}static fromObject(e){let n=new gt(null);return rr(e,(r,i)=>{n=n.set(new Et(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pt(),value:this.value};if(He(e))return null;{const r=Ge(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(vt(e),n);return s!=null?{path:Qt(new Et(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(He(e))return this;{const n=Ge(e),r=this.children.get(n);return r!==null?r.subtree(vt(e)):new gt(null)}}set(e,n){if(He(e))return new gt(n,this.children);{const r=Ge(e),s=(this.children.get(r)||new gt(null)).set(vt(e),n),o=this.children.insert(r,s);return new gt(this.value,o)}}remove(e){if(He(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const n=Ge(e),r=this.children.get(n);if(r){const i=r.remove(vt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new gt(null):new gt(this.value,s)}else return this}}get(e){if(He(e))return this.value;{const n=Ge(e),r=this.children.get(n);return r?r.get(vt(e)):null}}setTree(e,n){if(He(e))return n;{const r=Ge(e),s=(this.children.get(r)||new gt(null)).setTree(vt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new gt(this.value,o)}}fold(e){return this.fold_(pt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(He(e))return null;{const s=Ge(e),o=this.children.get(s);return o?o.findOnPath_(vt(e),Qt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pt(),n)}foreachOnPath_(e,n,r){if(He(e))return this;{this.value&&r(n,this.value);const i=Ge(e),s=this.children.get(i);return s?s.foreachOnPath_(vt(e),Qt(n,i),r):new gt(null)}}foreach(e){this.foreach_(pt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.writeTree_=e}static empty(){return new yr(new gt(null))}}function Ga(t,e,n){if(He(e))return new yr(new gt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=tr(i,e);return s=s.updateChild(o,n),new yr(t.writeTree_.set(i,s))}else{const i=new gt(n),s=t.writeTree_.setTree(e,i);return new yr(s)}}}function Sx(t,e,n){let r=t;return rr(n,(i,s)=>{r=Ga(r,Qt(e,i),s)}),r}function Px(t,e){if(He(e))return yr.empty();{const n=t.writeTree_.setTree(e,new gt(null));return new yr(n)}}function Ep(t,e){return js(t,e)!=null}function js(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(tr(n.path,e)):null}function kx(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(_n,(r,i)=>{e.push(new Qe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Qe(r,i.value))}),e}function Bi(t,e){if(He(e))return t;{const n=js(t,e);return n!=null?new yr(new gt(n)):new yr(t.writeTree_.subtree(e))}}function wp(t){return t.writeTree_.isEmpty()}function No(t,e){return gA(pt(),t.writeTree_,e)}function gA(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(oe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=gA(Qt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e){return wA(e,t)}function vB(t,e,n,r,i){oe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ga(t.visibleWrites,e,n)),t.lastWriteId=r}function yB(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function xB(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);oe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&EB(a,r.path)?i=!1:mr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return wB(t),!0;if(r.snap)t.visibleWrites=Px(t.visibleWrites,r.path);else{const a=r.children;rr(a,c=>{t.visibleWrites=Px(t.visibleWrites,Qt(r.path,c))})}return!0}else return!1}function EB(t,e){if(t.snap)return mr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mr(Qt(t.path,n),e))return!0;return!1}function wB(t){t.visibleWrites=vA(t.allWrites,bB,pt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function bB(t){return t.visible}function vA(t,e,n){let r=yr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)mr(n,o)?(a=tr(n,o),r=Ga(r,a,s.snap)):mr(o,n)&&(a=tr(o,n),r=Ga(r,pt(),s.snap.getChild(a)));else if(s.children){if(mr(n,o))a=tr(n,o),r=Sx(r,a,s.children);else if(mr(o,n))if(a=tr(o,n),He(a))r=Sx(r,pt(),s.children);else{const c=Po(s.children,Ge(a));if(c){const l=c.getChild(vt(a));r=Ga(r,pt(),l)}}}else throw Xo("WriteRecord should have .snap or .children")}}return r}function yA(t,e,n,r,i){if(!r&&!i){const s=js(t.visibleWrites,e);if(s!=null)return s;{const o=Bi(t.visibleWrites,e);if(wp(o))return n;if(n==null&&!Ep(o,pt()))return null;{const a=n||at.EMPTY_NODE;return No(o,a)}}}else{const s=Bi(t.visibleWrites,e);if(!i&&wp(s))return n;if(!i&&n==null&&!Ep(s,pt()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(mr(l.path,e)||mr(e,l.path))},a=vA(t.allWrites,o,e),c=n||at.EMPTY_NODE;return No(a,c)}}}function CB(t,e,n){let r=at.EMPTY_NODE;const i=js(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_n,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Bi(t.visibleWrites,e);return n.forEachChild(_n,(o,a)=>{const c=No(Bi(s,new Et(o)),a);r=r.updateImmediateChild(o,c)}),kx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Bi(t.visibleWrites,e);return kx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function AB(t,e,n,r,i){oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Qt(e,n);if(Ep(t.visibleWrites,s))return null;{const o=Bi(t.visibleWrites,s);return wp(o)?i.getChild(n):No(o,i.getChild(n))}}function TB(t,e,n,r){const i=Qt(e,n),s=js(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Bi(t.visibleWrites,i);return No(o,r.getNode().getImmediateChild(n))}else return null}function IB(t,e){return js(t.visibleWrites,e)}function RB(t,e,n,r,i,s,o){let a;const c=Bi(t.visibleWrites,e),l=js(c,pt());if(l!=null)a=l;else if(n!=null)a=No(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function SB(){return{visibleWrites:yr.empty(),allWrites:[],lastWriteId:-1}}function bp(t,e,n,r){return yA(t.writeTree,t.treePath,e,n,r)}function xA(t,e){return CB(t.writeTree,t.treePath,e)}function Dx(t,e,n,r){return AB(t.writeTree,t.treePath,e,n,r)}function qu(t,e){return IB(t.writeTree,Qt(t.treePath,e))}function PB(t,e,n,r,i,s){return RB(t.writeTree,t.treePath,e,n,r,i,s)}function xg(t,e,n){return TB(t.writeTree,t.treePath,e,n)}function EA(t,e){return wA(Qt(t.treePath,e),t.writeTree)}function wA(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;oe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),oe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ax(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,oB(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,sB(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ax(r,e.snapshotNode,i.oldSnap));else throw Xo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const bA=new DB;class Eg{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new yg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xg(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ps(this.viewCache_),s=PB(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function NB(t,e){oe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function OB(t,e,n,r,i){const s=new kB;let o,a;if(n.type===Nr.OVERWRITE){const l=n;l.source.fromUser?o=Cp(t,e,l.path,l.snap,r,i,s):(oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!He(l.path),o=Wu(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Nr.MERGE){const l=n;l.source.fromUser?o=MB(t,e,l.path,l.children,r,i,s):(oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Ap(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Nr.ACK_USER_WRITE){const l=n;l.revert?o=VB(t,e,l.path,r,i,s):o=BB(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Nr.LISTEN_COMPLETE)o=LB(t,e,n.path,r,s);else throw Xo("Unknown operation type: "+n.type);const c=s.getChanges();return FB(e,o,c),{viewCache:o,changes:c}}function FB(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=xp(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(iB(xp(e)))}}function CA(t,e,n,r,i,s){const o=e.eventCache;if(qu(r,n)!=null)return e;{let a,c;if(He(n))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Ps(e),u=l instanceof at?l:at.EMPTY_NODE,h=xA(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const l=bp(r,Ps(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Ge(n);if(l===".priority"){oe(Hi(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const h=Dx(r,n,u,c);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=vt(n);let h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const d=Dx(r,n,o.getNode(),c);d!=null?h=o.getNode().getImmediateChild(l).updateChild(u,d):h=o.getNode().getImmediateChild(l)}else h=xg(r,l,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),l,h,u,i,s):a=o.getNode()}}return Ka(e,a,o.isFullyInitialized()||He(n),t.filter.filtersNodes())}}function Wu(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(He(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Ge(n);if(!c.isCompleteForPath(n)&&Hi(n)>1)return e;const g=vt(n),v=c.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?l=u.updatePriority(c.getNode(),v):l=u.updateChild(c.getNode(),f,v,g,bA,null)}const h=mA(e,l,c.isFullyInitialized()||He(n),u.filtersNodes()),d=new Eg(i,h,s);return CA(t,h,n,i,d,a)}function Cp(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new Eg(i,e,s);if(He(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ka(e,l,!0,t.filter.filtersNodes());else{const h=Ge(n);if(h===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ka(e,l,a.isFullyInitialized(),a.isFiltered());else{const d=vt(n),f=a.getNode().getImmediateChild(h);let g;if(He(d))g=r;else{const _=u.getCompleteChild(h);_!=null?eA(d)===".priority"&&_.getChild(nA(d)).isEmpty()?g=_:g=_.updateChild(d,r):g=at.EMPTY_NODE}if(f.equals(g))c=e;else{const _=t.filter.updateChild(a.getNode(),h,g,d,u,o);c=Ka(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Nx(t,e){return t.eventCache.isCompleteForChild(e)}function MB(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=Qt(n,c);Nx(e,Ge(u))&&(a=Cp(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=Qt(n,c);Nx(e,Ge(u))||(a=Cp(t,a,u,l,i,s,o))}),a}function Ox(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ap(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;He(n)?l=r:l=new gt(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),g=Ox(t,f,d);c=Wu(t,c,new Et(h),g,i,s,o,a)}}),l.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const g=e.serverCache.getNode().getImmediateChild(h),_=Ox(t,g,d);c=Wu(t,c,new Et(h),_,i,s,o,a)}}),c}function BB(t,e,n,r,i,s,o){if(qu(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(He(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Wu(t,e,n,c.getNode().getChild(n),i,s,a,o);if(He(n)){let l=new gt(null);return c.getNode().forEachChild(vo,(u,h)=>{l=l.set(new Et(u),h)}),Ap(t,e,n,l,i,s,a,o)}else return e}else{let l=new gt(null);return r.foreach((u,h)=>{const d=Qt(n,u);c.isCompleteForPath(d)&&(l=l.set(u,c.getNode().getChild(d)))}),Ap(t,e,n,l,i,s,a,o)}}function LB(t,e,n,r,i){const s=e.serverCache,o=mA(e,s.getNode(),s.isFullyInitialized()||He(n),s.isFiltered());return CA(t,o,n,r,bA,i)}function VB(t,e,n,r,i,s){let o;if(qu(r,n)!=null)return e;{const a=new Eg(r,e,i),c=e.eventCache.getNode();let l;if(He(n)||Ge(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=bp(r,Ps(e));else{const h=e.serverCache.getNode();oe(h instanceof at,"serverChildren would be complete if leaf node"),u=xA(r,h)}u=u,l=t.filter.updateFullNode(c,u,s)}else{const u=Ge(n);let h=xg(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=t.filter.updateChild(c,u,h,vt(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,at.EMPTY_NODE,vt(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=bp(r,Ps(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||qu(r,pt())!=null,Ka(e,l,o,t.filter.filtersNodes())}}function $B(t,e){const n=Ps(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!He(e)&&!n.getImmediateChild(Ge(e)).isEmpty())?n.getChild(e):null}function Fx(t,e,n,r){e.type===Nr.MERGE&&e.source.queryId!==null&&(oe(Ps(t.viewCache_),"We should always have a full cache before handling merges"),oe(xp(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=OB(t.processor_,i,e,n,r);return NB(t.processor_,s.viewCache),oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,UB(t,s.changes,s.viewCache.eventCache.getNode(),null)}function UB(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return pB(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mx;function HB(t){oe(!Mx,"__referenceConstructor has already been defined"),Mx=t}function wg(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return oe(s!=null,"SyncTree gave us an op for an invalid query."),Fx(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Fx(o,e,n,r));return s}}function bg(t,e){let n=null;for(const r of t.views.values())n=n||$B(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bx;function jB(t){oe(!Bx,"__referenceConstructor has already been defined"),Bx=t}class Lx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=SB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zB(t,e,n,r,i){return vB(t.pendingWriteTree_,e,n,r,i),i?Kh(t,new Ss(hA(),e,n)):[]}function ao(t,e,n=!1){const r=yB(t.pendingWriteTree_,e);if(xB(t.pendingWriteTree_,e)){let s=new gt(null);return r.snap!=null?s=s.set(pt(),!0):rr(r.children,o=>{s=s.set(new Et(o),!0)}),Kh(t,new zu(r.path,s,n))}else return[]}function Wh(t,e,n){return Kh(t,new Ss(dA(),e,n))}function qB(t,e,n){const r=gt.fromObject(n);return Kh(t,new _c(dA(),e,r))}function WB(t,e,n,r){const i=RA(t,r);if(i!=null){const s=SA(i),o=s.path,a=s.queryId,c=tr(o,e),l=new Ss(fA(a),c,n);return PA(t,o,l)}else return[]}function KB(t,e,n,r){const i=RA(t,r);if(i){const s=SA(i),o=s.path,a=s.queryId,c=tr(o,e),l=gt.fromObject(n),u=new _c(fA(a),c,l);return PA(t,o,u)}else return[]}function AA(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=tr(o,e),l=bg(a,c);if(l)return l});return yA(i,e,s,n,!0)}function Kh(t,e){return TA(e,t.syncPointTree_,null,_A(t.pendingWriteTree_,pt()))}function TA(t,e,n,r){if(He(t.path))return IA(t,e,n,r);{const i=e.get(pt());n==null&&i!=null&&(n=bg(i,pt()));let s=[];const o=Ge(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=EA(r,o);s=s.concat(TA(a,c,l,u))}return i&&(s=s.concat(wg(i,t,r,n))),s}}function IA(t,e,n,r){const i=e.get(pt());n==null&&i!=null&&(n=bg(i,pt()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=EA(r,o),u=t.operationForChild(o);u&&(s=s.concat(IA(u,a,c,l)))}),i&&(s=s.concat(wg(i,t,r,n))),s}function RA(t,e){return t.tagToQueryMap.get(e)}function SA(t){const e=t.indexOf("$");return oe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Et(t.substr(0,e))}}function PA(t,e,n){const r=t.syncPointTree_.get(e);oe(r,"Missing sync point for query tag that we're tracking");const i=_A(t.pendingWriteTree_,e);return wg(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Cg(n)}node(){return this.node_}}class Ag{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qt(this.path_,e);return new Ag(this.syncTree_,n)}node(){return AA(this.syncTree_,this.path_)}}const GB=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Vx=function(t,e,n){if(!t||typeof t!="object")return t;if(oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return QB(t[".sv"],e,n);if(typeof t[".sv"]=="object")return YB(t[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},QB=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:oe(!1,"Unexpected server value: "+t)}},YB=function(t,e,n){t.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&oe(!1,"Unexpected increment value: "+r);const i=e.node();if(oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},XB=function(t,e,n,r){return Tg(e,new Ag(n,t),r)},JB=function(t,e,n){return Tg(t,new Cg(e),n)};function Tg(t,e,n){const r=t.getPriority().val(),i=Vx(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Vx(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new zt(a,pn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new zt(i))),o.forEachChild(_n,(a,c)=>{const l=Tg(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Rg(t,e){let n=e instanceof Et?e:new Et(e),r=t,i=Ge(n);for(;i!==null;){const s=Po(r.node.children,i)||{children:{},childCount:0};r=new Ig(i,r,s),n=vt(n),i=Ge(n)}return r}function na(t){return t.node.value}function kA(t,e){t.node.value=e,Tp(t)}function DA(t){return t.node.childCount>0}function ZB(t){return na(t)===void 0&&!DA(t)}function Gh(t,e){rr(t.node.children,(n,r)=>{e(new Ig(n,t,r))})}function NA(t,e,n,r){n&&!r&&e(t),Gh(t,i=>{NA(i,e,!0,r)}),n&&r&&e(t)}function e3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Yc(t){return new Et(t.parent===null?t.name:Yc(t.parent)+"/"+t.name)}function Tp(t){t.parent!==null&&t3(t.parent,t.name,t)}function t3(t,e,n){const r=ZB(n),i=fi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Tp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Tp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=/[\[\].#$\/\u0000-\u001F\u007F]/,r3=/[\[\].#$\u0000-\u001F\u007F]/,wf=10*1024*1024,OA=function(t){return typeof t=="string"&&t.length!==0&&!n3.test(t)},i3=function(t){return typeof t=="string"&&t.length!==0&&!r3.test(t)},s3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),i3(t)},FA=function(t,e,n){const r=n instanceof Et?new LM(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cs(r));if(typeof e=="function")throw new Error(t+"contains a function "+cs(r)+" with contents = "+e.toString());if(OC(e))throw new Error(t+"contains "+e.toString()+" "+cs(r));if(typeof e=="string"&&e.length>wf/3&&Lh(e)>wf)throw new Error(t+"contains a string greater than "+wf+" utf8 bytes "+cs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(rr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!OA(o)))throw new Error(t+" contains an invalid key ("+o+") "+cs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);VM(r,o),FA(t,a,r),$M(r)}),i&&s)throw new Error(t+' contains ".value" child '+cs(r)+" in addition to actual children.")}},o3=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!OA(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!s3(n))throw new Error(WN(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function c3(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!rA(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function zs(t,e,n){c3(t,n),l3(t,r=>mr(r,e)||mr(e,r))}function l3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(u3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function u3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ws&&fn("event: "+n.toString()),Gc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3="repo_interrupt",d3=25;class f3{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new a3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ju(),this.transactionQueueTree_=new Ig,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function p3(t,e,n){if(t.stats_=pg(t.repoInfo_),t.forceRestClient_||cM())t.server_=new Hu(t.repoInfo_,(r,i,s,o)=>{$x(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ux(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{an(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new si(t.repoInfo_,e,(r,i,s,o)=>{$x(t,r,i,s,o)},r=>{Ux(t,r)},r=>{g3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=pM(t.repoInfo_,()=>new fB(t.stats_,t.server_)),t.infoData_=new cB,t.infoSyncTree_=new Lx({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Wh(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Sg(t,"connected",!1),t.serverSyncTree_=new Lx({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);zs(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function m3(t){const n=t.infoData_.getNode(new Et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function MA(t){return GB({timestamp:m3(t)})}function $x(t,e,n,r,i){t.dataUpdateCount++;const s=new Et(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Pu(n,l=>pn(l));o=KB(t.serverSyncTree_,s,c,i)}else{const c=pn(n);o=WB(t.serverSyncTree_,s,c,i)}else if(r){const c=Pu(n,l=>pn(l));o=qB(t.serverSyncTree_,s,c)}else{const c=pn(n);o=Wh(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=kg(t,s)),zs(t.eventQueue_,a,o)}function Ux(t,e){Sg(t,"connected",e),e===!1&&v3(t)}function g3(t,e){rr(e,(n,r)=>{Sg(t,n,r)})}function Sg(t,e,n){const r=new Et("/.info/"+e),i=pn(n);t.infoData_.updateSnapshot(r,i);const s=Wh(t.infoSyncTree_,r,i);zs(t.eventQueue_,r,s)}function _3(t){return t.nextWriteId_++}function v3(t){BA(t,"onDisconnectEvents");const e=MA(t),n=ju();yp(t.onDisconnect_,pt(),(i,s)=>{const o=XB(i,s,t.serverSyncTree_,e);uA(n,i,o)});let r=[];yp(n,pt(),(i,s)=>{r=r.concat(Wh(t.serverSyncTree_,i,s));const o=w3(t,i);kg(t,o)}),t.onDisconnect_=ju(),zs(t.eventQueue_,pt(),r)}function y3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(h3)}function BA(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),fn(n,...e)}function LA(t,e,n){return AA(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function Pg(t,e=t.transactionQueueTree_){if(e||Qh(t,e),na(e)){const n=$A(t,e);oe(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&x3(t,Yc(e),n)}else DA(e)&&Gh(e,n=>{Pg(t,n)})}function x3(t,e,n){const r=n.map(l=>l.currentWriteId),i=LA(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];oe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=tr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{BA(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(ao(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Qh(t,Rg(t.transactionQueueTree_,e)),Pg(t,t.transactionQueueTree_),zs(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Gc(h[d])}else{if(l==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Wn("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=l}kg(t,e)}},o)}function kg(t,e){const n=VA(t,e),r=Yc(n),i=$A(t,n);return E3(t,i,r),r}function E3(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=tr(n,c.path);let u=!1,h;if(oe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,i=i.concat(ao(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=d3)u=!0,h="maxretry",i=i.concat(ao(t.serverSyncTree_,c.currentWriteId,!0));else{const d=LA(t,c.path,o);c.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){FA("transaction failed: Data returned ",f,c.path);let g=pn(f);typeof f=="object"&&f!=null&&fi(f,".priority")||(g=g.updatePriority(d.getPriority()));const v=c.currentWriteId,b=MA(t),x=JB(g,d,b);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=x,c.currentWriteId=_3(t),o.splice(o.indexOf(v),1),i=i.concat(zB(t.serverSyncTree_,c.path,x,c.currentWriteId,c.applyLocally)),i=i.concat(ao(t.serverSyncTree_,v,!0))}else u=!0,h="nodata",i=i.concat(ao(t.serverSyncTree_,c.currentWriteId,!0))}zs(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Qh(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Gc(r[a]);Pg(t,t.transactionQueueTree_)}function VA(t,e){let n,r=t.transactionQueueTree_;for(n=Ge(e);n!==null&&na(r)===void 0;)r=Rg(r,n),e=vt(e),n=Ge(e);return r}function $A(t,e){const n=[];return UA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function UA(t,e,n){const r=na(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Gh(e,i=>{UA(t,i,n)})}function Qh(t,e){const n=na(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,kA(e,n.length>0?n:void 0)}Gh(e,r=>{Qh(t,r)})}function w3(t,e){const n=Yc(VA(t,e)),r=Rg(t.transactionQueueTree_,e);return e3(r,i=>{bf(t,i)}),bf(t,r),NA(r,i=>{bf(t,i)}),n}function bf(t,e){const n=na(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(oe(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(oe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ao(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?kA(e,void 0):n.length=s+1,zs(t.eventQueue_,Yc(e),i);for(let o=0;o<r.length;o++)Gc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function C3(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Hx=function(t,e){const n=A3(t),r=n.namespace;n.domain==="firebase.com"&&Is(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Is("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||eM();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new hM(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Et(n.pathString)}},A3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=b3(t.substring(u,h)));const d=C3(t.substring(Math.min(t.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return He(this._path)?null:eA(this._path)}get ref(){return new ra(this._repo,this._path)}get _queryIdentifier(){const e=Ix(this._queryParams),n=dg(e);return n==="{}"?"default":n}get _queryObject(){return Ix(this._queryParams)}isEqual(e){if(e=At(e),!(e instanceof Dg))return!1;const n=this._repo===e._repo,r=rA(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+BM(this._path)}}class ra extends Dg{constructor(e,n){super(e,n,new vg,!1)}get parent(){const e=nA(this._path);return e===null?null:new ra(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}HB(ra);jB(ra);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="FIREBASE_DATABASE_EMULATOR_HOST",Ip={};let I3=!1;function R3(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Is("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Hx(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[T3]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=Hx(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const u=i&&c?new gp(gp.OWNER):new uM(t.name,t.options,e);o3("Invalid Firebase Database URL",o),He(o.path)||Is("Database URL must point to the root of a Firebase Database (not including a child path).");const h=P3(a,t,u,new lM(t.name,n));return new k3(h,t)}function S3(t,e){const n=Ip[e];(!n||n[t.key]!==t)&&Is(`Database ${e}(${t.repoInfo_}) has already been deleted.`),y3(t),delete n[t.key]}function P3(t,e,n,r){let i=Ip[e.name];i||(i={},Ip[e.name]=i);let s=i[t.toURLString()];return s&&Is("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new f3(t,I3,n,r),i[t.toURLString()]=s,s}class k3{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(p3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ra(this._repo,pt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(S3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Is("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t){Q6(Qi),Vn(new Pn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return R3(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ln(lx,ux,t),ln(lx,ux,"esm2017")}si.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};si.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};D3();var N3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ce,Ng=Ng||{},Oe=N3||self;function Yh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Xc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function O3(t){return Object.prototype.hasOwnProperty.call(t,Cf)&&t[Cf]||(t[Cf]=++F3)}var Cf="closure_uid_"+(1e9*Math.random()>>>0),F3=0;function M3(t,e,n){return t.call.apply(t.bind,arguments)}function B3(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function vn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?vn=M3:vn=B3,vn.apply(null,arguments)}function Hl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Zt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Xi(){this.s=this.s,this.o=this.o}var L3=0;Xi.prototype.s=!1;Xi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),L3!=0)&&O3(this)};Xi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Og(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function jx(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Yh(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function yn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}yn.prototype.h=function(){this.defaultPrevented=!0};var V3=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Oe.addEventListener("test",()=>{},e),Oe.removeEventListener("test",()=>{},e)}catch{}return t}();function vc(t){return/^[\s\xa0]*$/.test(t)}function Xh(){var t=Oe.navigator;return t&&(t=t.userAgent)?t:""}function Pr(t){return Xh().indexOf(t)!=-1}function Fg(t){return Fg[" "](t),t}Fg[" "]=function(){};function $3(t,e){var n=D5;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var U3=Pr("Opera"),Oo=Pr("Trident")||Pr("MSIE"),jA=Pr("Edge"),Rp=jA||Oo,zA=Pr("Gecko")&&!(Xh().toLowerCase().indexOf("webkit")!=-1&&!Pr("Edge"))&&!(Pr("Trident")||Pr("MSIE"))&&!Pr("Edge"),H3=Xh().toLowerCase().indexOf("webkit")!=-1&&!Pr("Edge");function qA(){var t=Oe.document;return t?t.documentMode:void 0}var Sp;e:{var Af="",Tf=function(){var t=Xh();if(zA)return/rv:([^\);]+)(\)|;)/.exec(t);if(jA)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(H3)return/WebKit\/(\S+)/.exec(t);if(U3)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Tf&&(Af=Tf?Tf[1]:""),Oo){var If=qA();if(If!=null&&If>parseFloat(Af)){Sp=String(If);break e}}Sp=Af}var Pp;if(Oe.document&&Oo){var zx=qA();Pp=zx||parseInt(Sp,10)||void 0}else Pp=void 0;var j3=Pp;function yc(t,e){if(yn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(zA){e:{try{Fg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:z3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&yc.$.h.call(this)}}Zt(yc,yn);var z3={2:"touch",3:"pen",4:"mouse"};yc.prototype.h=function(){yc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),q3=0;function W3(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++q3,this.fa=this.ia=!1}function Jh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Mg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function K3(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function WA(t){const e={};for(const n in t)e[n]=t[n];return e}const qx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function KA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<qx.length;s++)n=qx[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Zh(t){this.src=t,this.g={},this.h=0}Zh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Dp(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new W3(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function kp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=HA(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Jh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dp(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Bg="closure_lm_"+(1e6*Math.random()|0),Rf={};function GA(t,e,n,r,i){if(r&&r.once)return YA(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)GA(t,e[s],n,r,i);return null}return n=$g(n),t&&t[Jc]?t.O(e,n,Xc(r)?!!r.capture:!!r,i):QA(t,e,n,!1,r,i)}function QA(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Xc(i)?!!i.capture:!!i,a=Vg(t);if(a||(t[Bg]=a=new Zh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=G3(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)V3||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(JA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function G3(){function t(n){return e.call(t.src,t.listener,n)}const e=Q3;return t}function YA(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)YA(t,e[s],n,r,i);return null}return n=$g(n),t&&t[Jc]?t.P(e,n,Xc(r)?!!r.capture:!!r,i):QA(t,e,n,!0,r,i)}function XA(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)XA(t,e[s],n,r,i);else r=Xc(r)?!!r.capture:!!r,n=$g(n),t&&t[Jc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Dp(s,n,r,i),-1<n&&(Jh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Vg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dp(e,n,r,i)),(n=-1<t?e[t]:null)&&Lg(n))}function Lg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Jc])kp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(JA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Vg(e))?(kp(n,t),n.h==0&&(n.src=null,e[Bg]=null)):Jh(t)}}}function JA(t){return t in Rf?Rf[t]:Rf[t]="on"+t}function Q3(t,e){if(t.fa)t=!0;else{e=new yc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Lg(t),t=n.call(r,e)}return t}function Vg(t){return t=t[Bg],t instanceof Zh?t:null}var Sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function $g(t){return typeof t=="function"?t:(t[Sf]||(t[Sf]=function(e){return t.handleEvent(e)}),t[Sf])}function Jt(){Xi.call(this),this.i=new Zh(this),this.S=this,this.J=null}Zt(Jt,Xi);Jt.prototype[Jc]=!0;Jt.prototype.removeEventListener=function(t,e,n,r){XA(this,t,e,n,r)};function un(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new yn(e,t);else if(e instanceof yn)e.target=e.target||t;else{var i=e;e=new yn(r,t),KA(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=jl(o,r,!0,e)&&i}if(o=e.g=t,i=jl(o,r,!0,e)&&i,i=jl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=jl(o,r,!1,e)&&i}Jt.prototype.N=function(){if(Jt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Jh(n[r]);delete t.g[e],t.h--}}this.J=null};Jt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Jt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function jl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&kp(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ug=Oe.JSON.stringify;class Y3{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function X3(){var t=Hg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class J3{constructor(){this.h=this.g=null}add(e,n){const r=ZA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ZA=new Y3(()=>new Z3,t=>t.reset());class Z3{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function e5(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function t5(t){Oe.setTimeout(()=>{throw t},0)}let xc,Ec=!1,Hg=new J3,eT=()=>{const t=Oe.Promise.resolve(void 0);xc=()=>{t.then(n5)}};var n5=()=>{for(var t;t=X3();){try{t.h.call(t.g)}catch(n){t5(n)}var e=ZA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ec=!1};function ed(t,e){Jt.call(this),this.h=t||1,this.g=e||Oe,this.j=vn(this.qb,this),this.l=Date.now()}Zt(ed,Jt);ce=ed.prototype;ce.ga=!1;ce.T=null;ce.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),un(this,"tick"),this.ga&&(jg(this),this.start()))}};ce.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ce.N=function(){ed.$.N.call(this),jg(this),delete this.g};function zg(t,e,n){if(typeof t=="function")n&&(t=vn(t,n));else if(t&&typeof t.handleEvent=="function")t=vn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Oe.setTimeout(t,e||0)}function tT(t){t.g=zg(()=>{t.g=null,t.i&&(t.i=!1,tT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class r5 extends Xi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tT(this)}N(){super.N(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wc(t){Xi.call(this),this.h=t,this.g={}}Zt(wc,Xi);var Wx=[];function nT(t,e,n,r){Array.isArray(n)||(n&&(Wx[0]=n.toString()),n=Wx);for(var i=0;i<n.length;i++){var s=GA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function rT(t){Mg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Lg(e)},t),t.g={}}wc.prototype.N=function(){wc.$.N.call(this),rT(this)};wc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function td(){this.g=!0}td.prototype.Ea=function(){this.g=!1};function i5(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function s5(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function co(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+a5(t,n)+(r?" "+r:"")})}function o5(t,e){t.info(function(){return"TIMEOUT: "+e})}td.prototype.info=function(){};function a5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ug(n)}catch{return e}}var qs={},Kx=null;function nd(){return Kx=Kx||new Jt}qs.Ta="serverreachability";function iT(t){yn.call(this,qs.Ta,t)}Zt(iT,yn);function bc(t){const e=nd();un(e,new iT(e))}qs.STAT_EVENT="statevent";function sT(t,e){yn.call(this,qs.STAT_EVENT,t),this.stat=e}Zt(sT,yn);function Sn(t){const e=nd();un(e,new sT(e,t))}qs.Ua="timingevent";function oT(t,e){yn.call(this,qs.Ua,t),this.size=e}Zt(oT,yn);function Zc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){t()},e)}var rd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},aT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qg(){}qg.prototype.h=null;function Gx(t){return t.h||(t.h=t.i())}function cT(){}var el={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Wg(){yn.call(this,"d")}Zt(Wg,yn);function Kg(){yn.call(this,"c")}Zt(Kg,yn);var Np;function id(){}Zt(id,qg);id.prototype.g=function(){return new XMLHttpRequest};id.prototype.i=function(){return{}};Np=new id;function tl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new wc(this),this.P=c5,t=Rp?125:void 0,this.V=new ed(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lT}function lT(){this.i=null,this.g="",this.h=!1}var c5=45e3,Op={},Ku={};ce=tl.prototype;ce.setTimeout=function(t){this.P=t};function Fp(t,e,n){t.L=1,t.v=od(ci(e)),t.s=n,t.S=!0,uT(t,null)}function uT(t,e){t.G=Date.now(),nl(t),t.A=ci(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),vT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new lT,t.g=VT(t.l,n?e:null,!t.s),0<t.O&&(t.M=new r5(vn(t.Pa,t,t.g),t.O)),nT(t.U,t.g,"readystatechange",t.nb),e=t.I?WA(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),bc(),i5(t.j,t.u,t.A,t.m,t.W,t.s)}ce.nb=function(t){t=t.target;const e=this.M;e&&Or(t)==3?e.l():this.Pa(t)};ce.Pa=function(t){try{if(t==this.g)e:{const u=Or(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Rp||this.g&&(this.h.h||this.g.ja()||Jx(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?bc(3):bc(2)),sd(this);var n=this.g.da();this.ca=n;t:if(hT(this)){var r=Jx(this.g);t="";var i=r.length,s=Or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),Qa(this);var o="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,s5(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vc(a)){var l=a;break t}}l=null}if(n=l)co(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mp(this,n);else{this.i=!1,this.o=3,Sn(12),ps(this),Qa(this);break e}}this.S?(dT(this,u,o),Rp&&this.i&&u==3&&(nT(this.U,this.V,"tick",this.mb),this.V.start())):(co(this.j,this.m,o,null),Mp(this,o)),u==4&&ps(this),this.i&&!this.J&&(u==4?FT(this.l,this):(this.i=!1,nl(this)))}else S5(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Sn(12)):(this.o=0,Sn(13)),ps(this),Qa(this)}}}catch{}finally{}};function hT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function dT(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=l5(t,n),i==Ku){e==4&&(t.o=4,Sn(14),r=!1),co(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Op){t.o=4,Sn(15),co(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else co(t.j,t.m,i,null),Mp(t,i);hT(t)&&i!=Ku&&i!=Op&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Sn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zg(e),e.M=!0,Sn(11))):(co(t.j,t.m,n,"[Invalid Chunked Response]"),ps(t),Qa(t))}ce.mb=function(){if(this.g){var t=Or(this.g),e=this.g.ja();this.C<e.length&&(sd(this),dT(this,t,e),this.i&&t!=4&&nl(this))}};function l5(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ku:(n=Number(e.substring(n,r)),isNaN(n)?Op:(r+=1,r+n>e.length?Ku:(e=e.slice(r,r+n),t.C=r+n,e)))}ce.cancel=function(){this.J=!0,ps(this)};function nl(t){t.Y=Date.now()+t.P,fT(t,t.P)}function fT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Zc(vn(t.lb,t),e)}function sd(t){t.B&&(Oe.clearTimeout(t.B),t.B=null)}ce.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(o5(this.j,this.A),this.L!=2&&(bc(),Sn(17)),ps(this),this.o=2,Qa(this)):fT(this,this.Y-t)};function Qa(t){t.l.H==0||t.J||FT(t.l,t)}function ps(t){sd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,jg(t.V),rT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Mp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Bp(n.i,t))){if(!t.K&&Bp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Yu(n),ud(n);else break e;Jg(n),Sn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Zc(vn(n.ib,n),6e3));if(1>=ET(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ms(n,11)}else if((t.K||n.g==t)&&Yu(n),!vc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Gg(s,s.h),s.h=null))}if(r.F){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,yt(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=LT(r,r.J?r.pa:null,r.Y),o.K){wT(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(sd(a),nl(a)),r.g=o}else NT(r);0<n.j.length&&hd(n)}else l[0]!="stop"&&l[0]!="close"||ms(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?ms(n,7):Xg(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}bc(4)}catch{}}function u5(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Yh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function h5(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Yh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function pT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Yh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=h5(t),r=u5(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var mT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function bs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof bs){this.h=t.h,Gu(this,t.j),this.s=t.s,this.g=t.g,Qu(this,t.m),this.l=t.l;var e=t.i,n=new Cc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Qx(this,n),this.o=t.o}else t&&(e=String(t).match(mT))?(this.h=!1,Gu(this,e[1]||"",!0),this.s=Fa(e[2]||""),this.g=Fa(e[3]||"",!0),Qu(this,e[4]),this.l=Fa(e[5]||"",!0),Qx(this,e[6]||"",!0),this.o=Fa(e[7]||"")):(this.h=!1,this.i=new Cc(null,this.h))}bs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ma(e,Yx,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ma(e,Yx,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ma(n,n.charAt(0)=="/"?m5:p5,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ma(n,_5)),t.join("")};function ci(t){return new bs(t)}function Gu(t,e,n){t.j=n?Fa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Qx(t,e,n){e instanceof Cc?(t.i=e,v5(t.i,t.h)):(n||(e=Ma(e,g5)),t.i=new Cc(e,t.h))}function yt(t,e,n){t.i.set(e,n)}function od(t){return yt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ma(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,f5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function f5(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Yx=/[#\/\?@]/g,p5=/[#\?:]/g,m5=/[#\?]/g,g5=/[#\?@]/g,_5=/#/g;function Cc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ji(t){t.g||(t.g=new Map,t.h=0,t.i&&d5(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ce=Cc.prototype;ce.add=function(t,e){Ji(this),this.i=null,t=ia(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function gT(t,e){Ji(t),e=ia(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _T(t,e){return Ji(t),e=ia(t,e),t.g.has(e)}ce.forEach=function(t,e){Ji(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ce.ta=function(){Ji(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ce.Z=function(t){Ji(this);let e=[];if(typeof t=="string")_T(this,t)&&(e=e.concat(this.g.get(ia(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ce.set=function(t,e){return Ji(this),this.i=null,t=ia(this,t),_T(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ce.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function vT(t,e,n){gT(t,e),0<n.length&&(t.i=null,t.g.set(ia(t,e),Og(n)),t.h+=n.length)}ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ia(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function v5(t,e){e&&!t.j&&(Ji(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(gT(this,r),vT(this,i,n))},t)),t.j=e}var y5=class{constructor(t,e){this.g=t,this.map=e}};function yT(t){this.l=t||x5,Oe.PerformanceNavigationTiming?(t=Oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Oe.g&&Oe.g.Ka&&Oe.g.Ka()&&Oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var x5=10;function xT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ET(t){return t.h?1:t.g?t.g.size:0}function Bp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Gg(t,e){t.g?t.g.add(e):t.h=e}function wT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}yT.prototype.cancel=function(){if(this.i=bT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function bT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Og(t.i)}var E5=class{stringify(t){return Oe.JSON.stringify(t,void 0)}parse(t){return Oe.JSON.parse(t,void 0)}};function w5(){this.g=new E5}function b5(t,e,n){const r=n||"";try{pT(t,function(i,s){let o=i;Xc(i)&&(o=Ug(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function C5(t,e){const n=new td;if(Oe.Image){const r=new Image;r.onload=Hl(zl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Hl(zl,n,r,"TestLoadImage: error",!1,e),r.onabort=Hl(zl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hl(zl,n,r,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function zl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ad(t){this.l=t.fc||null,this.j=t.ob||!1}Zt(ad,qg);ad.prototype.g=function(){return new cd(this.l,this.j)};ad.prototype.i=function(t){return function(){return t}}({});function cd(t,e){Jt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Qg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zt(cd,Jt);var Qg=0;ce=cd.prototype;ce.open=function(t,e){if(this.readyState!=Qg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ac(this)};ce.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,rl(this)),this.readyState=Qg};ce.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ac(this)),this.g&&(this.readyState=3,Ac(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function CT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ce.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?rl(this):Ac(this),this.readyState==3&&CT(this)}};ce.Za=function(t){this.g&&(this.response=this.responseText=t,rl(this))};ce.Ya=function(t){this.g&&(this.response=t,rl(this))};ce.ka=function(){this.g&&rl(this)};function rl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ac(t)}ce.setRequestHeader=function(t,e){this.v.append(t,e)};ce.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ce.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ac(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var A5=Oe.JSON.parse;function It(t){Jt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=AT,this.L=this.M=!1}Zt(It,Jt);var AT="",T5=/^https?$/i,I5=["POST","PUT"];ce=It.prototype;ce.Oa=function(t){this.M=t};ce.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Np.g(),this.C=this.u?Gx(this.u):Gx(Np),this.g.onreadystatechange=vn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Xx(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Oe.FormData&&t instanceof Oe.FormData,!(0<=HA(I5,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{RT(this),0<this.B&&((this.L=R5(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vn(this.ua,this)):this.A=zg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Xx(this,s)}};function R5(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ce.ua=function(){typeof Ng<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))};function Xx(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,TT(t),ld(t)}function TT(t){t.F||(t.F=!0,un(t,"complete"),un(t,"error"))}ce.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,un(this,"complete"),un(this,"abort"),ld(this))};ce.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ld(this,!0)),It.$.N.call(this)};ce.La=function(){this.s||(this.G||this.v||this.l?IT(this):this.kb())};ce.kb=function(){IT(this)};function IT(t){if(t.h&&typeof Ng<"u"&&(!t.C[1]||Or(t)!=4||t.da()!=2)){if(t.v&&Or(t)==4)zg(t.La,0,t);else if(un(t,"readystatechange"),Or(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(mT)[1]||null;!i&&Oe.self&&Oe.self.location&&(i=Oe.self.location.protocol.slice(0,-1)),r=!T5.test(i?i.toLowerCase():"")}n=r}if(n)un(t,"complete"),un(t,"success");else{t.m=6;try{var s=2<Or(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",TT(t)}}finally{ld(t)}}}}function ld(t,e){if(t.g){RT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||un(t,"ready");try{n.onreadystatechange=r}catch{}}}function RT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Oe.clearTimeout(t.A),t.A=null)}ce.isActive=function(){return!!this.g};function Or(t){return t.g?t.g.readyState:0}ce.da=function(){try{return 2<Or(this)?this.g.status:-1}catch{return-1}};ce.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ce.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),A5(e)}};function Jx(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case AT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function S5(t){const e={};t=(t.g&&2<=Or(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(vc(t[r]))continue;var n=e5(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}K3(e,function(r){return r.join(", ")})}ce.Ia=function(){return this.m};ce.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ST(t){let e="";return Mg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Yg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ST(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):yt(t,e,n))}function Aa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function PT(t){this.Ga=0,this.j=[],this.l=new td,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Aa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Aa("baseRetryDelayMs",5e3,t),this.hb=Aa("retryDelaySeedMs",1e4,t),this.eb=Aa("forwardChannelMaxRetries",2,t),this.xa=Aa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new yT(t&&t.concurrentRequestLimit),this.Ja=new w5,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ce=PT.prototype;ce.ra=8;ce.H=1;function Xg(t){if(kT(t),t.H==3){var e=t.W++,n=ci(t.I);if(yt(n,"SID",t.K),yt(n,"RID",e),yt(n,"TYPE","terminate"),il(t,n),e=new tl(t,t.l,e),e.L=2,e.v=od(ci(n)),n=!1,Oe.navigator&&Oe.navigator.sendBeacon)try{n=Oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=VT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),nl(e)}BT(t)}function ud(t){t.g&&(Zg(t),t.g.cancel(),t.g=null)}function kT(t){ud(t),t.u&&(Oe.clearTimeout(t.u),t.u=null),Yu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Oe.clearTimeout(t.m),t.m=null)}function hd(t){if(!xT(t.i)&&!t.m){t.m=!0;var e=t.Na;xc||eT(),Ec||(xc(),Ec=!0),Hg.add(e,t),t.C=0}}function P5(t,e){return ET(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Zc(vn(t.Na,t,e),MT(t,t.C)),t.C++,!0)}ce.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new tl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=WA(s),KA(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=DT(this,i,e),n=ci(this.I),yt(n,"RID",t),yt(n,"CVER",22),this.F&&yt(n,"X-HTTP-Session-Id",this.F),il(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(ST(s)))+"&"+e:this.o&&Yg(n,this.o,s)),Gg(this.i,i),this.bb&&yt(n,"TYPE","init"),this.P?(yt(n,"$req",e),yt(n,"SID","null"),i.aa=!0,Fp(i,n,null)):Fp(i,n,e),this.H=2}}else this.H==3&&(t?Zx(this,t):this.j.length==0||xT(this.i)||Zx(this))};function Zx(t,e){var n;e?n=e.m:n=t.W++;const r=ci(t.I);yt(r,"SID",t.K),yt(r,"RID",n),yt(r,"AID",t.V),il(t,r),t.o&&t.s&&Yg(r,t.o,t.s),n=new tl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=DT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Gg(t.i,n),Fp(n,r,e)}function il(t,e){t.na&&Mg(t.na,function(n,r){yt(e,r,n)}),t.h&&pT({},function(n,r){yt(e,r,n)})}function DT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?vn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g;const u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{b5(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function NT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;xc||eT(),Ec||(xc(),Ec=!0),Hg.add(e,t),t.A=0}}function Jg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Zc(vn(t.Ma,t),MT(t,t.A)),t.A++,!0)}ce.Ma=function(){if(this.u=null,OT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Zc(vn(this.jb,this),t)}};ce.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Sn(10),ud(this),OT(this))};function Zg(t){t.B!=null&&(Oe.clearTimeout(t.B),t.B=null)}function OT(t){t.g=new tl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ci(t.wa);yt(e,"RID","rpc"),yt(e,"SID",t.K),yt(e,"AID",t.V),yt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&yt(e,"TO",t.qa),yt(e,"TYPE","xmlhttp"),il(t,e),t.o&&t.s&&Yg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=od(ci(e)),n.s=null,n.S=!0,uT(n,t)}ce.ib=function(){this.v!=null&&(this.v=null,ud(this),Jg(this),Sn(19))};function Yu(t){t.v!=null&&(Oe.clearTimeout(t.v),t.v=null)}function FT(t,e){var n=null;if(t.g==e){Yu(t),Zg(t),t.g=null;var r=2}else if(Bp(t.i,e))n=e.F,wT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=nd(),un(r,new oT(r,n)),hd(t)}else NT(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&P5(t,e)||r==2&&Jg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ms(t,5);break;case 4:ms(t,10);break;case 3:ms(t,6);break;default:ms(t,2)}}}function MT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ms(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=vn(t.pb,t);n||(n=new bs("//www.google.com/images/cleardot.gif"),Oe.location&&Oe.location.protocol=="http"||Gu(n,"https"),od(n)),C5(n.toString(),r)}else Sn(2);t.H=0,t.h&&t.h.za(e),BT(t),kT(t)}ce.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Sn(2)):(this.l.info("Failed to ping google.com"),Sn(1))};function BT(t){if(t.H=0,t.ma=[],t.h){const e=bT(t.i);(e.length!=0||t.j.length!=0)&&(jx(t.ma,e),jx(t.ma,t.j),t.i.i.length=0,Og(t.j),t.j.length=0),t.h.ya()}}function LT(t,e,n){var r=n instanceof bs?ci(n):new bs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Qu(r,r.m);else{var i=Oe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new bs(null);r&&Gu(s,r),e&&(s.g=e),i&&Qu(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&yt(r,n,e),yt(r,"VER",t.ra),il(t,r),r}function VT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new It(new ad({ob:!0})):new It(t.va),e.Oa(t.J),e}ce.isActive=function(){return!!this.h&&this.h.isActive(this)};function $T(){}ce=$T.prototype;ce.Ba=function(){};ce.Aa=function(){};ce.za=function(){};ce.ya=function(){};ce.isActive=function(){return!0};ce.Va=function(){};function Xu(){if(Oo&&!(10<=Number(j3)))throw Error("Environmental error: no available transport.")}Xu.prototype.g=function(t,e){return new Qn(t,e)};function Qn(t,e){Jt.call(this),this.g=new PT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!vc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new sa(this)}Zt(Qn,Jt);Qn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Sn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=LT(t,null,t.Y),hd(t)};Qn.prototype.close=function(){Xg(this.g)};Qn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ug(t),t=n);e.j.push(new y5(e.fb++,t)),e.H==3&&hd(e)};Qn.prototype.N=function(){this.g.h=null,delete this.j,Xg(this.g),delete this.g,Qn.$.N.call(this)};function UT(t){Wg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Zt(UT,Wg);function HT(){Kg.call(this),this.status=1}Zt(HT,Kg);function sa(t){this.g=t}Zt(sa,$T);sa.prototype.Ba=function(){un(this.g,"a")};sa.prototype.Aa=function(t){un(this.g,new UT(t))};sa.prototype.za=function(t){un(this.g,new HT)};sa.prototype.ya=function(){un(this.g,"b")};function k5(){this.blockSize=-1}function br(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Zt(br,k5);br.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pf(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}br.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Pf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Pf(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Pf(this,r),i=0;break}}this.h=i,this.i+=e};br.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ut(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var D5={};function e_(t){return-128<=t&&128>t?$3(t,function(e){return new ut([e|0],0>e?-1:0)}):new ut([t|0],0>t?-1:0)}function Fr(t){if(isNaN(t)||!isFinite(t))return yo;if(0>t)return on(Fr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Lp;return new ut(e,0)}function jT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return on(jT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Fr(Math.pow(e,8)),r=yo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Fr(Math.pow(e,s)),r=r.R(s).add(Fr(o))):(r=r.R(n),r=r.add(Fr(o)))}return r}var Lp=4294967296,yo=e_(0),Vp=e_(1),e1=e_(16777216);ce=ut.prototype;ce.ea=function(){if(er(this))return-on(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Lp+r)*e,e*=Lp}return t};ce.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ri(this))return"0";if(er(this))return"-"+on(this).toString(t);for(var e=Fr(Math.pow(t,6)),n=this,r="";;){var i=Zu(n,e).g;n=Ju(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ri(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ce.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ri(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function er(t){return t.h==-1}ce.X=function(t){return t=Ju(this,t),er(t)?-1:ri(t)?0:1};function on(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ut(n,~t.h).add(Vp)}ce.abs=function(){return er(this)?on(this):this};ce.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ut(n,n[n.length-1]&-2147483648?-1:0)};function Ju(t,e){return t.add(on(e))}ce.R=function(t){if(ri(this)||ri(t))return yo;if(er(this))return er(t)?on(this).R(on(t)):on(on(this).R(t));if(er(t))return on(this.R(on(t)));if(0>this.X(e1)&&0>t.X(e1))return Fr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,ql(n,2*r+2*i),n[2*r+2*i+1]+=s*c,ql(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ql(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ql(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ut(n,0)};function ql(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ta(t,e){this.g=t,this.h=e}function Zu(t,e){if(ri(e))throw Error("division by zero");if(ri(t))return new Ta(yo,yo);if(er(t))return e=Zu(on(t),e),new Ta(on(e.g),on(e.h));if(er(e))return e=Zu(t,on(e)),new Ta(on(e.g),e.h);if(30<t.g.length){if(er(t)||er(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Vp,r=e;0>=r.X(t);)n=t1(n),r=t1(r);var i=eo(n,1),s=eo(r,1);for(r=eo(r,2),n=eo(n,2);!ri(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=eo(r,1),n=eo(n,1)}return e=Ju(t,i.R(e)),new Ta(i,e)}for(i=yo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Fr(n),o=s.R(e);er(o)||0<o.X(t);)n-=r,s=Fr(n),o=s.R(e);ri(s)&&(s=Vp),i=i.add(s),t=Ju(t,o)}return new Ta(i,t)}ce.gb=function(t){return Zu(this,t).h};ce.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ut(n,this.h&t.h)};ce.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ut(n,this.h|t.h)};ce.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ut(n,this.h^t.h)};function t1(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ut(n,t.h)}function eo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ut(i,t.h)}Xu.prototype.createWebChannel=Xu.prototype.g;Qn.prototype.send=Qn.prototype.u;Qn.prototype.open=Qn.prototype.m;Qn.prototype.close=Qn.prototype.close;rd.NO_ERROR=0;rd.TIMEOUT=8;rd.HTTP_ERROR=6;aT.COMPLETE="complete";cT.EventType=el;el.OPEN="a";el.CLOSE="b";el.ERROR="c";el.MESSAGE="d";Jt.prototype.listen=Jt.prototype.O;It.prototype.listenOnce=It.prototype.P;It.prototype.getLastError=It.prototype.Sa;It.prototype.getLastErrorCode=It.prototype.Ia;It.prototype.getStatus=It.prototype.da;It.prototype.getResponseJson=It.prototype.Wa;It.prototype.getResponseText=It.prototype.ja;It.prototype.send=It.prototype.ha;It.prototype.setWithCredentials=It.prototype.Oa;br.prototype.digest=br.prototype.l;br.prototype.reset=br.prototype.reset;br.prototype.update=br.prototype.j;ut.prototype.add=ut.prototype.add;ut.prototype.multiply=ut.prototype.R;ut.prototype.modulo=ut.prototype.gb;ut.prototype.compare=ut.prototype.X;ut.prototype.toNumber=ut.prototype.ea;ut.prototype.toString=ut.prototype.toString;ut.prototype.getBits=ut.prototype.D;ut.fromNumber=Fr;ut.fromString=jT;var N5=function(){return new Xu},O5=function(){return nd()},kf=rd,F5=aT,M5=qs,n1={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wl=cT,B5=It,L5=br,xo=ut;const r1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Zo("@firebase/firestore");function i1(){return ks.logLevel}function xe(t,...e){if(ks.logLevel<=et.DEBUG){const n=e.map(t_);ks.debug(`Firestore (${oa}): ${t}`,...n)}}function li(t,...e){if(ks.logLevel<=et.ERROR){const n=e.map(t_);ks.error(`Firestore (${oa}): ${t}`,...n)}}function Fo(t,...e){if(ks.logLevel<=et.WARN){const n=e.map(t_);ks.warn(`Firestore (${oa}): ${t}`,...n)}}function t_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t="Unexpected state"){const e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+t;throw li(e),new Error(e)}function lt(t,e){t||Ce()}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class $5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U5{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new zT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new dn(e)}}class H5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class j5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new H5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,xe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string"),this.R=n.token,new z5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=W5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function Mo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ae(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Ot(0,0))}static max(){return new Ie(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(),r===void 0?r=e.length-n:r>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xt extends Tc{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const K5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Tc{construct(e,n,r){return new gn(e,n,r)}static isValidIdentifier(e){return K5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ae(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ae(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ae(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(xt.fromString(e))}static fromName(e){return new we(xt.fromString(e).popFirst(5))}static empty(){return new we(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new xt(e.slice()))}}function G5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new ji(i,we.empty(),e)}function Q5(t){return new ji(t.readTime,t.key,-1)}class ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ji(Ie.min(),we.empty(),-1)}static max(){return new ji(Ie.max(),we.empty(),-1)}}function Y5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==X5)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}n_.ae=-1;function al(t){return t==null}function eh(t){return t===0&&1/t==-1/0}function Z5(t){return typeof t=="number"&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??sn.RED,this.left=i??sn.EMPTY,this.right=s??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new sn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,r,i,s){return this}insert(e,n,r){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o1(this.data.getIterator())}getIteratorFrom(e){return new o1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xn(this.comparator);return n.data=e,n}}class o1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new zn([])}unionWith(e){let n=new xn(gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KT("Invalid base64 string: "+s):s}}(e);return new bn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const e9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(t){if(lt(!!t),typeof t=="string"){let e=0;const n=e9.exec(t);if(lt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function i_(t){const e=t.mapValue.fields.__previous_value__;return r_(e)?i_(e):e}function Ic(t){const e=zi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Rc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?r_(t)?4:n9(t)?9007199254740991:10:Ce()}function Ur(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ic(t).isEqual(Ic(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zi(i.timestampValue),a=zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ds(i.bytesValue).isEqual(Ds(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Dt(i.doubleValue),a=Dt(s.doubleValue);return o===a?eh(o)===eh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mo(t.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(s1(o)!==s1(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ur(o[c],a[c])))return!1;return!0}(t,e);default:return Ce()}}function Sc(t,e){return(t.values||[]).find(n=>Ur(n,e))!==void 0}function Bo(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Dt(s.integerValue||s.doubleValue),c=Dt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return a1(t.timestampValue,e.timestampValue);case 4:return a1(Ic(t),Ic(e));case 5:return ot(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ds(s),c=Ds(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ot(a[l],c[l]);if(u!==0)return u}return ot(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ot(Dt(s.latitude),Dt(o.latitude));return a!==0?a:ot(Dt(s.longitude),Dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=Bo(a[l],c[l]);if(u)return u}return ot(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Gl.mapValue&&o===Gl.mapValue)return 0;if(s===Gl.mapValue)return 1;if(o===Gl.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const d=ot(c[h],u[h]);if(d!==0)return d;const f=Bo(a[c[h]],l[u[h]]);if(f!==0)return f}return ot(c.length,u.length)}(t.mapValue,e.mapValue);default:throw Ce()}}function a1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=zi(t),r=zi(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function Lo(t){return $p(t)}function $p(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$p(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$p(n.fields[o])}`;return i+"}"}(t.mapValue):Ce()}function c1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Up(t){return!!t&&"integerValue"in t}function s_(t){return!!t&&"arrayValue"in t}function l1(t){return!!t&&"nullValue"in t}function u1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uu(t){return!!t&&"mapValue"in t}function Ya(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ya(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ya(t.arrayValue.values[n]);return e}return Object.assign({},t)}function n9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(n)}setAll(e){let n=gn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ya(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ws(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rn(Ya(this.value))}}function GT(t){const e=[];return Ws(t.fields,(n,r)=>{const i=new gn([n]);if(uu(r)){const s=GT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Wt(e,0,Ie.min(),Ie.min(),Ie.min(),Rn.empty(),0)}static newFoundDocument(e,n,r,i){return new Wt(e,1,n,Ie.min(),r,i,0)}static newNoDocument(e,n){return new Wt(e,2,n,Ie.min(),Ie.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Ie.min(),Ie.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.position=e,this.inclusive=n}}function h1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=we.comparator(we.fromName(o.referenceValue),n.key):r=Bo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function d1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n="asc"){this.field=e,this.dir=n}}function r9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{}class Nt extends QT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new s9(e,n,r):n==="array-contains"?new c9(e,r):n==="in"?new l9(e,r):n==="not-in"?new u9(e,r):n==="array-contains-any"?new h9(e,r):new Nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new o9(e,r):new a9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bo(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cr extends QT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Cr(e,n)}matches(e){return YT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function YT(t){return t.op==="and"}function XT(t){return i9(t)&&YT(t)}function i9(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function Hp(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+Lo(t.value);if(XT(t))return t.filters.map(e=>Hp(e)).join(",");{const e=t.filters.map(n=>Hp(n)).join(",");return`${t.op}(${e})`}}function JT(t,e){return t instanceof Nt?function(r,i){return i instanceof Nt&&r.op===i.op&&r.field.isEqual(i.field)&&Ur(r.value,i.value)}(t,e):t instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JT(o,i.filters[a]),!0):!1}(t,e):void Ce()}function ZT(t){return t instanceof Nt?function(n){return`${n.field.canonicalString()} ${n.op} ${Lo(n.value)}`}(t):t instanceof Cr?function(n){return n.op.toString()+" {"+n.getFilters().map(ZT).join(" ,")+"}"}(t):"Filter"}class s9 extends Nt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class o9 extends Nt{constructor(e,n){super(e,"in",n),this.keys=eI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class a9 extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=eI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class c9 extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return s_(n)&&Sc(n.arrayValue,this.value)}}class l9 extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}}class u9 extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sc(this.value.arrayValue,n)}}class h9 extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!s_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function f1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new d9(t,e,n,r,i,s,o)}function o_(t){const e=Fe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Lo(r)).join(",")),e.he=n}return e.he}function a_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d1(t.startAt,e.startAt)&&d1(t.endAt,e.endAt)}function jp(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function f9(t,e,n,r,i,s,o,a){return new aa(t,e,n,r,i,s,o,a)}function dd(t){return new aa(t)}function p1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fd(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function tI(t){return t.collectionGroup!==null}function Xa(t){const e=Fe(t);if(e.Pe===null){e.Pe=[];const n=fd(e),r=c_(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Eo(n)),e.Pe.push(new Eo(gn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Eo(gn.keyField(),s))}}}return e.Pe}function ui(t){const e=Fe(t);return e.Ie||(e.Ie=p9(e,Xa(t))),e.Ie}function p9(t,e){if(t.limitType==="F")return f1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Eo(i.field,s)});const n=t.endAt?new th(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new th(t.startAt.position,t.startAt.inclusive):null;return f1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zp(t,e){e.getFirstInequalityField(),fd(t);const n=t.filters.concat([e]);return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nh(t,e,n){return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pd(t,e){return a_(ui(t),ui(e))&&t.limitType===e.limitType}function nI(t){return`${o_(ui(t))}|lt:${t.limitType}`}function qp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZT(i)).join(", ")}]`),al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Lo(i)).join(",")),`Target(${r})`}(ui(t))}; limitType=${t.limitType})`}function md(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const l=h1(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Xa(r),i)||r.endAt&&!function(o,a,c){const l=h1(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Xa(r),i))}(t,e)}function m9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rI(t){return(e,n)=>{let r=!1;for(const i of Xa(t)){const s=g9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function g9(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Bo(c,l):Ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return WT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new Tt(we.comparator);function hi(){return _9}const iI=new Tt(we.comparator);function Ba(...t){let e=iI;for(const n of t)e=e.insert(n.key,n);return e}function sI(t){let e=iI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Ja()}function oI(){return Ja()}function Ja(){return new ca(t=>t.toString(),(t,e)=>t.isEqual(e))}const v9=new Tt(we.comparator),y9=new xn(we.comparator);function Ue(...t){let e=y9;for(const n of t)e=e.add(n);return e}const x9=new xn(ot);function E9(){return x9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function cI(t){return{integerValue:""+t}}function w9(t,e){return Z5(e)?cI(e):aI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function b9(t,e,n){return t instanceof Pc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&r_(s)&&(s=i_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof kc?uI(t,e):t instanceof Dc?hI(t,e):function(i,s){const o=lI(i,s),a=m1(o)+m1(i.Ee);return Up(o)&&Up(i.Ee)?cI(a):aI(i.serializer,a)}(t,e)}function C9(t,e,n){return t instanceof kc?uI(t,e):t instanceof Dc?hI(t,e):n}function lI(t,e){return t instanceof rh?function(r){return Up(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Pc extends gd{}class kc extends gd{constructor(e){super(),this.elements=e}}function uI(t,e){const n=dI(e);for(const r of t.elements)n.some(i=>Ur(i,r))||n.push(r);return{arrayValue:{values:n}}}class Dc extends gd{constructor(e){super(),this.elements=e}}function hI(t,e){let n=dI(e);for(const r of t.elements)n=n.filter(i=>!Ur(i,r));return{arrayValue:{values:n}}}class rh extends gd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function m1(t){return Dt(t.integerValue||t.doubleValue)}function dI(t){return s_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e,n){this.field=e,this.transform=n}}function T9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof kc&&i instanceof kc||r instanceof Dc&&i instanceof Dc?Mo(r.elements,i.elements,Ur):r instanceof rh&&i instanceof rh?Ur(r.Ee,i.Ee):r instanceof Pc&&i instanceof Pc}(t.transform,e.transform)}class I9{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _d{}function fI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new l_(t.key,Fn.none()):new cl(t.key,t.data,Fn.none());{const n=t.data,r=Rn.empty();let i=new xn(gn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zi(t.key,r,new zn(i.toArray()),Fn.none())}}function R9(t,e,n){t instanceof cl?function(i,s,o){const a=i.value.clone(),c=_1(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zi?function(i,s,o){if(!hu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_1(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(pI(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Za(t,e,n,r){return t instanceof cl?function(s,o,a,c){if(!hu(s.precondition,o))return a;const l=s.value.clone(),u=v1(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zi?function(s,o,a,c){if(!hu(s.precondition,o))return a;const l=v1(s.fieldTransforms,c,o),u=o.data;return u.setAll(pI(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function S9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=lI(r.transform,i||null);s!=null&&(n===null&&(n=Rn.empty()),n.set(r.field,s))}return n||null}function g1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Mo(r,i,(s,o)=>T9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cl extends _d{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zi extends _d{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _1(t,e,n){const r=new Map;lt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,C9(o,a,n[i]))}return r}function v1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,b9(s,o,e))}return r}class l_ extends _d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mI extends _d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&R9(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Za(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Za(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=fI(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(n,r)=>g1(n,r))&&Mo(this.baseMutations,e.baseMutations,(n,r)=>g1(n,r))}}class u_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){lt(e.mutations.length===r.length);let i=function(){return v9}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new u_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ke;function gI(t){switch(t){default:return Ce();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function _I(t){if(t===void 0)return li("GRPC error has no .code"),z.UNKNOWN;switch(t){case kt.OK:return z.OK;case kt.CANCELLED:return z.CANCELLED;case kt.UNKNOWN:return z.UNKNOWN;case kt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case kt.INTERNAL:return z.INTERNAL;case kt.UNAVAILABLE:return z.UNAVAILABLE;case kt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case kt.NOT_FOUND:return z.NOT_FOUND;case kt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case kt.ABORTED:return z.ABORTED;case kt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case kt.DATA_LOSS:return z.DATA_LOSS;default:return Ce()}}(Ke=kt||(kt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=new xo([4294967295,4294967295],0);function y1(t){const e=N9().encode(t),n=new L5;return n.update(e),new Uint8Array(n.digest())}function x1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xo([n,r],0),new xo([i,s],0)]}class h_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new La(`Invalid padding: ${n}`);if(r<0)throw new La(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new La(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=xo.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(xo.fromNumber(r)));return i.compare(O9)===1&&(i=new xo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=y1(e),[r,i]=x1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new h_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=y1(e),[r,i]=x1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ll.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vd(Ie.min(),i,new Tt(ot),hi(),Ue())}}class ll{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ll(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class vI{constructor(e,n){this.targetId=e,this.ye=n}}class yI{constructor(e,n,r=bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class E1{constructor(){this.we=0,this.Se=b1(),this.be=bn.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=Ue(),n=Ue(),r=Ue();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce()}}),new ll(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=b1()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class F9{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=hi(),this.Ue=w1(),this.We=new Tt(ot)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(jp(s))if(r===0){const o=new we(s.path);this.je(n,o,Wt.newNoDocument(o,Ie.min()))}else lt(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),c=a?this.rt(a,e,o):1;if(c!==0){this.Ze(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,l)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ds(r).toUint8Array()}catch(c){if(c instanceof KT)return Fo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new h_(o,i,s)}catch(c){return Fo(c instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&jp(a.target)){const c=new we(a.target.path);this.$e.get(c)!==null||this.ut(o,c)||this.je(o,c,Wt.newNoDocument(c,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=Ue();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.et(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new vd(e,n,this.We,this.$e,r);return this.$e=hi(),this.Ue=w1(),this.We=new Tt(ot),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new E1,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new xn(ot),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new E1),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function w1(){return new Tt(we.comparator)}function b1(){return new Tt(we.comparator)}const M9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),B9=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),L9=(()=>({and:"AND",or:"OR"}))();class V9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wp(t,e){return t.useProto3Json||al(e)?e:{value:e}}function ih(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $9(t,e){return ih(t,e.toTimestamp())}function Kn(t){return lt(!!t),Ie.fromTimestamp(function(n){const r=zi(n);return new Ot(r.seconds,r.nanos)}(t))}function d_(t,e){return function(r){return new xt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function EI(t){const e=xt.fromString(t);return lt(TI(e)),e}function sh(t,e){return d_(t.databaseId,e.path)}function ec(t,e){const n=EI(e);if(n.get(1)!==t.databaseId.projectId)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ae(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(wI(n))}function Kp(t,e){return d_(t.databaseId,e)}function U9(t){const e=EI(t);return e.length===4?xt.emptyPath():wI(e)}function Nc(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wI(t){return lt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C1(t,e,n){return{name:sh(t,e),fields:n.value.mapValue.fields}}function H9(t,e){return"found"in e?function(r,i){lt(!!i.found),i.found.name,i.found.updateTime;const s=ec(r,i.found.name),o=Kn(i.found.updateTime),a=i.found.createTime?Kn(i.found.createTime):Ie.min(),c=new Rn({mapValue:{fields:i.found.fields}});return Wt.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){lt(!!i.missing),lt(!!i.readTime);const s=ec(r,i.missing),o=Kn(i.readTime);return Wt.newNoDocument(s,o)}(t,e):Ce()}function j9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(lt(u===void 0||typeof u=="string"),bn.fromBase64String(u||"")):(lt(u===void 0||u instanceof Uint8Array),bn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?z.UNKNOWN:_I(l.code);return new ae(u,l.message||"")}(o);n=new yI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ec(t,r.document.name),s=Kn(r.document.updateTime),o=r.document.createTime?Kn(r.document.createTime):Ie.min(),a=new Rn({mapValue:{fields:r.document.fields}}),c=Wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new du(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ec(t,r.document),s=r.readTime?Kn(r.readTime):Ie.min(),o=Wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new du([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ec(t,r.document),s=r.removedTargetIds||[];n=new du([],s,i,null)}else{if(!("filter"in e))return Ce();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new D9(i,s),a=r.targetId;n=new vI(a,o)}}return n}function bI(t,e){let n;if(e instanceof cl)n={update:C1(t,e.key,e.value)};else if(e instanceof l_)n={delete:sh(t,e.key)};else if(e instanceof Zi)n={update:C1(t,e.key,e.data),updateMask:J9(e.fieldMask)};else{if(!(e instanceof mI))return Ce();n={verify:sh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof kc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ce()}(t,e.precondition)),n}function z9(t,e){return t&&t.length>0?(lt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Kn(i.updateTime):Kn(s);return o.isEqual(Ie.min())&&(o=Kn(s)),new I9(o,i.transformResults||[])}(n,e))):[]}function q9(t,e){return{documents:[Kp(t,e.path)]}}function W9(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Kp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(c.length!==0)return AI(Cr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:ro(h.field),direction:Q9(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Wp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function K9(t){let e=U9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){lt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=CI(h);return d instanceof Cr&&XT(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(g){return new Eo(io(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,al(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){const d=!!h.before,f=h.values||[];return new th(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,f=h.values||[];return new th(f,d)}(n.endAt)),f9(e,i,o,s,a,"F",c,l)}function G9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=io(n.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=io(n.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=io(n.unaryFilter.field);return Nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=io(n.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(t):t.fieldFilter!==void 0?function(n){return Nt.create(io(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cr.create(n.compositeFilter.filters.map(r=>CI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(t):Ce()}function Q9(t){return M9[t]}function Y9(t){return B9[t]}function X9(t){return L9[t]}function ro(t){return{fieldPath:t.canonicalString()}}function io(t){return gn.fromServerFormat(t.fieldPath)}function AI(t){return t instanceof Nt?function(n){if(n.op==="=="){if(u1(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(l1(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u1(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(l1(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:Y9(n.op),value:n.value}}}(t):t instanceof Cr?function(n){const r=n.getFilters().map(i=>AI(i));return r.length===1?r[0]:{compositeFilter:{op:X9(n.op),filters:r}}}(t):Ce()}function J9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n,r,i,s=Ie.min(),o=Ie.min(),a=bn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.ht=e}}function eL(t){const e=K9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this._n=new nL}addToCollectionParentIndex(e,n){return this._n.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(ji.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class nL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xn(xt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xn(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Vo(0)}static Bn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.changes=new ca(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Za(r.mutation,i,zn.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ba();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hi();const o=Ja(),a=function(){return Ja()}();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Zi)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Za(u.mutation,l,u.mutation.getFieldMask(),Ot.now())):o.set(l.key,zn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new iL(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ja();let i=new Tt((o,a)=>o-a),s=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||zn.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(i.get(a.batchId)||Ue()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=oI();u.forEach(d=>{if(!s.has(d)){const f=fI(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return we.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ne.resolve(gs());let a=-1,c=s;return o.next(l=>ne.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ue())).next(u=>({batchId:a,changes:sI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let i=Ba();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Ba();return this.indexManager.getCollectionParents(e,i).next(o=>ne.forEach(o,a=>{const c=function(u,h){return new aa(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,c)=>{const l=c.getKey();s.get(l)===null&&(s=s.insert(l,Wt.newInvalidDocument(l)))});let o=Ba();return s.forEach((a,c)=>{const l=i.get(a);l!==void 0&&Za(l.mutation,c,zn.empty(),Ot.now()),md(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return ne.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Kn(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:eL(i.bundledQuery),readTime:Kn(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.overlays=new Tt(we.comparator),this.hr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=gs(),s=n.length+1,o=new we(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Tt((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=gs(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=gs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return ne.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new k9(n,r));let s=this.hr.get(n);s===void 0&&(s=Ue(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.Pr=new xn(qt.Ir),this.Tr=new xn(qt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new qt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new we(new xt([])),r=new qt(n,e),i=new qt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new we(new xt([])),r=new qt(n,e),i=new qt(n,e+1);let s=Ue();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return we.comparator(e.key,n.key)||ot(e.pr,n.pr)}static Er(e,n){return ot(e.pr,n.pr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new xn(qt.Ir)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new P9(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new qt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),i=new qt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xn(ot);return n.forEach(i=>{const s=new qt(i,0),o=new qt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),ne.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;we.isDocumentKey(s)||(s=s.child(""));const o=new qt(new we(s),0);let a=new xn(ot);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),ne.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){lt(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return ne.forEach(n.mutations,i=>{const s=new qt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new qt(n,0),i=this.wr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.Cr=e,this.docs=function(){return new Tt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=hi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hi();const o=n.path,a=new we(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Y5(Q5(u),r)<=0||(i.has(u.key)||md(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ce()}Fr(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uL(this)}getSize(e){return ne.resolve(this.size)}}class uL extends rL{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.persistence=e,this.Mr=new ca(n=>o_(n),a_),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Or=0,this.Nr=new f_,this.targetCount=0,this.Br=Vo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),ne.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.qn(n),ne.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n){this.Lr={},this.overlays={},this.kr=new n_(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new hL(this),this.indexManager=new tL,this.remoteDocumentCache=function(i){return new lL(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Z9(n),this.$r=new oL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new cL(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const i=new fL(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return ne.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class fL extends J5{constructor(e){super(),this.currentSequenceNumber=e}}class p_{constructor(e){this.persistence=e,this.zr=new f_,this.jr=null}static Hr(e){return new p_(e)}get Jr(){if(this.jr)return this.jr;throw Ce()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),ne.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Jr,r=>{const i=we.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Ie.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return ne.or([()=>ne.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ue(),i=Ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new m_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(p1(n))return ne.resolve(null);let r=ui(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nh(n,null,"F"),r=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ue(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.ji(n,a);return this.Hi(n,l,o,c.readTime)?this.Wi(e,nh(n,null,"F")):this.Ji(e,l,n,c)}))})))}Gi(e,n,r,i){return p1(n)||i.isEqual(Ie.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(i1()<=et.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qp(n)),this.Ji(e,o,n,G5(i,-1)))})}ji(e,n){let r=new xn(rI(e));return n.forEach((i,s)=>{md(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return i1()<=et.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",qp(n)),this.Ui.getDocumentsMatchingQuery(e,n,ji.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Tt(ot),this.Xi=new ca(s=>o_(s),a_),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sL(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function gL(t,e,n,r){return new mL(t,e,n,r)}async function II(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ue();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({rs:l,removedBatchIds:o,addedBatchIds:a}))})})}function _L(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,d=h.keys();let f=ne.resolve();return d.forEach(g=>{f=f.next(()=>u.getEntry(c,g)).next(_=>{const v=l.docVersions.get(g);lt(v!==null),_.version.compareTo(v)<0&&(h.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),u.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RI(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function vL(t,e){const n=Fe(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(bn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(_,v,b){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=hi(),l=Ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(yL(s,o,e.documentUpdates).next(u=>{c=u.ss,l=u.os})),!r.isEqual(Ie.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Zi=i,s))}function yL(t,e,n){let r=Ue(),i=Ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hi();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):xe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ss:o,os:i}})}function xL(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EL(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Pi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Gp(t,e,n){const r=Fe(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ol(o))throw o;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function A1(t,e,n){const r=Fe(t);let i=Ie.min(),s=Ue();return r.persistence.runTransaction("Execute query","readonly",o=>function(c,l,u){const h=Fe(c),d=h.Xi.get(u);return d!==void 0?ne.resolve(h.Zi.get(d)):h.Qr.getTargetData(l,u)}(r,o,ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:Ie.min(),n?s:Ue())).next(a=>(wL(r,m9(e),a),{documents:a,_s:s})))}function wL(t,e,n){let r=t.es.get(e)||Ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class T1{constructor(){this.activeTargetIds=E9()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bL{constructor(){this.Ys=new T1,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new T1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function Df(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class IL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=Df(),c=this.po(n,r);xe("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(l,s,o),this.wo(n,c,l,i).then(u=>(xe("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Fo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=AL[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=Df();return new Promise((o,a)=>{const c=new B5;c.setWithCredentials(!0),c.listenOnce(F5.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case kf.NO_ERROR:const u=c.getResponseJson();xe(hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case kf.TIMEOUT:xe(hn,`RPC '${e}' ${s} timed out`),a(new ae(z.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const h=c.getStatus();if(xe(hn,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(v){const b=v.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(b)>=0?b:z.UNKNOWN}(f.status);a(new ae(g,f.message))}else a(new ae(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ae(z.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{xe(hn,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);xe(hn,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}bo(e,n,r){const i=Df(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=N5(),a=O5(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.yo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=s.join("");xe(hn,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=o.createWebChannel(u,c);let d=!1,f=!1;const g=new TL({_o:v=>{f?xe(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(d||(xe(hn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),xe(hn,`RPC '${e}' stream ${i} sending:`,v),h.send(v))},ao:()=>h.close()}),_=(v,b,x)=>{v.listen(b,E=>{try{x(E)}catch(w){setTimeout(()=>{throw w},0)}})};return _(h,Wl.EventType.OPEN,()=>{f||xe(hn,`RPC '${e}' stream ${i} transport opened.`)}),_(h,Wl.EventType.CLOSE,()=>{f||(f=!0,xe(hn,`RPC '${e}' stream ${i} transport closed`),g.To())}),_(h,Wl.EventType.ERROR,v=>{f||(f=!0,Fo(hn,`RPC '${e}' stream ${i} transport errored:`,v),g.To(new ae(z.UNAVAILABLE,"The operation could not be completed")))}),_(h,Wl.EventType.MESSAGE,v=>{var b;if(!f){const x=v.data[0];lt(!!x);const E=x,w=E.error||((b=E[0])===null||b===void 0?void 0:b.error);if(w){xe(hn,`RPC '${e}' stream ${i} received error:`,w);const T=w.status;let I=function(K){const P=kt[K];if(P!==void 0)return _I(P)}(T),k=w.message;I===void 0&&(I=z.INTERNAL,k="Unknown error status: "+T+" with message "+w.message),f=!0,g.To(new ae(I,k)),h.close()}else xe(hn,`RPC '${e}' stream ${i} received:`,x),g.Eo(x)}}),_(a,M5.STAT_EVENT,v=>{v.stat===n1.PROXY?xe(hn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===n1.NOPROXY&&xe(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function Nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){return new V9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new g_(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new ae(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RL extends SI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=j9(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ie.min():o.readTime?Kn(o.readTime):Ie.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Nc(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=jp(c)?{documents:q9(s,c)}:{query:W9(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xI(s,o.resumeToken);const l=Wp(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ie.min())>0){a.readTime=ih(s,o.snapshotVersion.toTimestamp());const l=Wp(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=G9(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Nc(this.serializer),n.removeTarget=e,this.Yo(n)}}class SL extends SI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=z9(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.l_(r,n)}return lt(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Nc(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bI(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ae(z.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(z.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class kL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(li(n),this.R_=!1):xe("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(xe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Fe(c);l.S_.add(4),await ul(l),l.v_.set("Unknown"),l.S_.delete(4),await xd(l)}(this))})}),this.v_=new kL(r,i)}}async function xd(t){if(Ks(t))for(const e of t.b_)await e(!0)}async function ul(t){for(const e of t.b_)await e(!1)}function PI(t,e){const n=Fe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),y_(n)?v_(n):la(n).Go()&&__(n,e))}function kI(t,e){const n=Fe(t),r=la(n);n.w_.delete(e),r.Go()&&DI(n,e),n.w_.size===0&&(r.Go()?r.Ho():Ks(n)&&n.v_.set("Unknown"))}function __(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).o_(e)}function DI(t,e){t.C_.Le(e),la(t).__(e)}function v_(t){t.C_=new F9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),la(t).start(),t.v_.V_()}function y_(t){return Ks(t)&&!la(t).Wo()&&t.w_.size>0}function Ks(t){return Fe(t).S_.size===0}function NI(t){t.C_=void 0}async function NL(t){t.w_.forEach((e,n)=>{__(t,e)})}async function OL(t,e){NI(t),y_(t)?(t.v_.g_(e),v_(t)):t.v_.set("Unknown")}async function FL(t,e,n){if(t.v_.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oh(t,r)}else if(e instanceof du?t.C_.Ge(e):e instanceof vI?t.C_.Xe(e):t.C_.He(e),!n.isEqual(Ie.min()))try{const r=await RI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.w_.get(l);u&&s.w_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.w_.get(c);if(!u)return;s.w_.set(c,u.withResumeToken(bn.EMPTY_BYTE_STRING,u.snapshotVersion)),DI(s,c);const h=new Pi(u.target,c,l,u.sequenceNumber);__(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),await oh(t,r)}}async function oh(t,e,n){if(!ol(e))throw e;t.S_.add(1),await ul(t),t.v_.set("Offline"),n||(n=()=>RI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await xd(t)})}function OI(t,e){return e().catch(n=>oh(t,n,e))}async function Ed(t){const e=Fe(t),n=qi(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;ML(e);)try{const i=await xL(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,BL(e,i)}catch(i){await oh(e,i)}FI(e)&&MI(e)}function ML(t){return Ks(t)&&t.y_.length<10}function BL(t,e){t.y_.push(e);const n=qi(t);n.Go()&&n.u_&&n.c_(e.mutations)}function FI(t){return Ks(t)&&!qi(t).Wo()&&t.y_.length>0}function MI(t){qi(t).start()}async function LL(t){qi(t).P_()}async function VL(t){const e=qi(t);for(const n of t.y_)e.c_(n.mutations)}async function $L(t,e,n){const r=t.y_.shift(),i=u_.from(r,e,n);await OI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ed(t)}async function UL(t,e){e&&qi(t).u_&&await async function(r,i){if(function(o){return gI(o)&&o!==z.ABORTED}(i.code)){const s=r.y_.shift();qi(r).jo(),await OI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ed(r)}}(t,e),FI(t)&&MI(t)}async function R1(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Ks(n);n.S_.add(3),await ul(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await xd(n)}async function HL(t,e){const n=Fe(t);e?(n.S_.delete(2),await xd(n)):e||(n.S_.add(2),await ul(n),n.v_.set("Unknown"))}function la(t){return t.F_||(t.F_=function(n,r,i){const s=Fe(n);return s.T_(),new RL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:NL.bind(null,t),lo:OL.bind(null,t),s_:FL.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),y_(t)?v_(t):t.v_.set("Unknown")):(await t.F_.stop(),NI(t))})),t.F_}function qi(t){return t.M_||(t.M_=function(n,r,i){const s=Fe(n);return s.T_(),new SL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:LL.bind(null,t),lo:UL.bind(null,t),h_:VL.bind(null,t),l_:$L.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Ed(t)):(await t.M_.stop(),t.y_.length>0&&(xe("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new x_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function E_(t,e){if(li("AsyncQueue",`${e}: ${t}`),ol(t))return new ae(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=Ba(),this.sortedSet=new Tt(this.comparator)}static emptySet(e){return new wo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.x_=new Tt(we.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):Ce():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $o{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $o(e,n,wo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.N_=void 0,this.listeners=[]}}class zL{constructor(){this.queries=new ca(e=>nI(e),pd),this.onlineState="Unknown",this.B_=new Set}}async function w_(t,e){const n=Fe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new jL),i)try{s.N_=await n.onListen(r)}catch(o){const a=E_(o,`Initialization of query '${qp(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&C_(n)}async function b_(t,e){const n=Fe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function qL(t,e){const n=Fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&C_(n)}function WL(t,e,n){const r=Fe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function C_(t){t.B_.forEach(e=>{e.next()})}class A_{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.key=e}}class LI{constructor(e){this.key=e}}class KL{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=Ue(),this.mutatedKeys=Ue(),this.ia=rI(e),this.sa=new wo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new S1,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=md(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?g!==_&&(r.track({type:3,doc:f}),v=!0):this.ua(d,f)||(r.track({type:2,doc:f}),v=!0,(c&&this.ia(f,c)>0||l&&this.ia(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),v=!0):d&&!f&&(r.track({type:1,doc:d}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((l,u)=>function(d,f){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return g(d)-g(f)}(l.type,u.type)||this.ia(l.doc,u.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,c=a!==this.na;return this.na=a,s.length!==0||c?{snapshot:new $o(this.query,e.sa,i,s,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new S1,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=Ue(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new LI(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new BI(r))}),n}Ia(e){this.ta=e._s,this.ra=Ue();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return $o.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class GL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QL{constructor(e){this.key=e,this.Ea=!1}}class YL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new ca(a=>nI(a),pd),this.Ra=new Map,this.Va=new Set,this.ma=new Tt(we.comparator),this.fa=new Map,this.ga=new f_,this.pa={},this.ya=new Map,this.wa=Vo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function XL(t,e){const n=aV(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await EL(n.localStore,ui(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await JL(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&PI(n.remoteStore,o)}return i}async function JL(t,e,n,r,i){t.ba=(h,d,f)=>async function(_,v,b,x){let E=v.view._a(b);E.Hi&&(E=await A1(_.localStore,v.query,!1).then(({documents:I})=>v.view._a(I,E)));const w=x&&x.targetChanges.get(v.targetId),T=v.view.applyChanges(E,_.isPrimaryClient,w);return k1(_,v.targetId,T.ha),T.snapshot}(t,h,d,f);const s=await A1(t.localStore,e,!0),o=new KL(e,s._s),a=o._a(s.documents),c=ll.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);k1(t,n,l.ha);const u=new GL(e,n,o);return t.Aa.set(e,u),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),l.snapshot}async function ZL(t,e){const n=Fe(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!pd(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Gp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),kI(n.remoteStore,r.targetId),Qp(n,r.targetId)}).catch(sl)):(Qp(n,r.targetId),await Gp(n.localStore,r.targetId,!0))}async function eV(t,e,n){const r=cV(t);try{const i=await function(o,a){const c=Fe(o),l=Ot.now(),u=a.reduce((f,g)=>f.add(g.key),Ue());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=hi(),_=Ue();return c.ts.getEntries(f,u).next(v=>{g=v,g.forEach((b,x)=>{x.isValidDocument()||(_=_.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(v=>{h=v;const b=[];for(const x of a){const E=S9(x,h.get(x.key).overlayedDocument);E!=null&&b.push(new Zi(x.key,E,GT(E.value.mapValue),Fn.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,b,a)}).next(v=>{d=v;const b=v.applyToLocalDocumentSet(h,_);return c.documentOverlayCache.saveOverlays(f,v.batchId,b)})}).then(()=>({batchId:d.batchId,changes:sI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.pa[o.currentUser.toKey()];l||(l=new Tt(ot)),l=l.insert(a,c),o.pa[o.currentUser.toKey()]=l}(r,i.batchId,n),await hl(r,i.changes),await Ed(r.remoteStore)}catch(i){const s=E_(i,"Failed to persist write");n.reject(s)}}async function VI(t,e){const n=Fe(t);try{const r=await vL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?lt(o.Ea):i.removedDocuments.size>0&&(lt(o.Ea),o.Ea=!1))}),await hl(n,r,e)}catch(r){await sl(r)}}function P1(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Fe(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const d of h.listeners)d.L_(a)&&(l=!0)}),l&&C_(c)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tV(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new Tt(we.comparator);o=o.insert(s,Wt.newNoDocument(s,Ie.min()));const a=Ue().add(s),c=new vd(Ie.min(),new Map,new Tt(ot),o,a);await VI(r,c),r.ma=r.ma.remove(s),r.fa.delete(e),T_(r)}else await Gp(r.localStore,e,!1).then(()=>Qp(r,e,n)).catch(sl)}async function nV(t,e){const n=Fe(t),r=e.batch.batchId;try{const i=await _L(n.localStore,e);UI(n,r,null),$I(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hl(n,i)}catch(i){await sl(i)}}async function rV(t,e,n){const r=Fe(t);try{const i=await function(o,a){const c=Fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(lt(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);UI(r,e,n),$I(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hl(r,i)}catch(i){await sl(i)}}function $I(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function UI(t,e,n){const r=Fe(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function Qp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||HI(t,r)})}function HI(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(kI(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),T_(t))}function k1(t,e,n){for(const r of n)r instanceof BI?(t.ga.addReference(r.key,e),iV(t,r)):r instanceof LI?(xe("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||HI(t,r.key)):Ce()}function iV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(xe("SyncEngine","New document in limbo: "+n),t.Va.add(r),T_(t))}function T_(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new we(xt.fromString(e)),r=t.wa.next();t.fa.set(r,new QL(n)),t.ma=t.ma.insert(n,r),PI(t.remoteStore,new Pi(ui(dd(n.path)),r,"TargetPurposeLimboResolution",n_.ae))}}async function hl(t,e,n){const r=Fe(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,c)=>{o.push(r.ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const u=m_.Ki(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.da.s_(i),await async function(c,l){const u=Fe(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ne.forEach(l,d=>ne.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>ne.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!ol(h))throw h;xe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const f=u.Zi.get(d),g=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(g);u.Zi=u.Zi.insert(d,_)}}}(r.localStore,s))}async function sV(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=await II(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(c=>{c.reject(new ae(z.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hl(n,r.rs)}}function oV(t,e){const n=Fe(t),r=n.fa.get(e);if(r&&r.Ea)return Ue().add(r.key);{let i=Ue();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function aV(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tV.bind(null,e),e.da.s_=qL.bind(null,e.eventManager),e.da.Da=WL.bind(null,e.eventManager),e}function cV(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rV.bind(null,e),e}class D1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gL(this.persistence,new pL,e.initialUser,this.serializer)}createPersistence(e){return new dL(p_.Hr,this.serializer)}createSharedClientState(e){return new bL}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class lV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>P1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sV.bind(null,this.syncEngine),await HL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zL}()}createDatastore(e){const n=yd(e.databaseInfo.databaseId),r=function(s){return new IL(s)}(e.databaseInfo);return function(s,o,a,c){return new PL(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new DL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>P1(this.syncEngine,n,0),function(){return I1.v()?new I1:new CL}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){const h=new YL(i,s,o,a,c,l);return u&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Fe(n);xe("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await ul(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ae(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=Fe(i),a=Nc(o.serializer)+"/documents",c={documents:s.map(d=>sh(o.serializer,d))},l=await o.So("BatchGetDocuments",a,c,s.length),u=new Map;l.forEach(d=>{const f=H9(o.serializer,d);u.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=u.get(d.toString());lt(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new l_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=we.fromPath(r);this.mutations.push(new mI(i,this.precondition(i)))}),await async function(r,i){const s=Fe(r),o=Nc(s.serializer)+"/documents",a={writes:i.map(c=>bI(s.serializer,c))};await s.fo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ce();n=Ie.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ae(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ie.min())?Fn.exists(!1):Fn.updateTime(n):Fn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ie.min()))throw new ae(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fn.updateTime(n)}return Fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ka=r.maxAttempts,this.Uo=new g_(this.asyncQueue,"transaction_retry")}run(){this.Ka-=1,this.$a()}$a(){this.Uo.No(async()=>{const e=new uV(this.datastore),n=this.Ua(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Wa(i)}))}).catch(r=>{this.Wa(r)})})}Ua(e){try{const n=this.updateFunction(e);return!al(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Wa(e){this.Ka>0&&this.Ga(e)?(this.Ka-=1,this.asyncQueue.enqueueAndForget(()=>(this.$a(),Promise.resolve()))):this.deferred.reject(e)}Ga(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=qT.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{xe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(xe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ae(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=E_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Of(t,e){t.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await II(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function N1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pV(t);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>R1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>R1(e.remoteStore,s)),t._onlineComponents=e}function fV(t){return t.name==="FirebaseError"?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function pV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Of(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!fV(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await Of(t,new D1)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),await Of(t,new D1);return t._offlineComponents}async function R_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),await N1(t,t._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),await N1(t,new lV))),t._onlineComponents}function mV(t){return R_(t).then(e=>e.syncEngine)}function gV(t){return R_(t).then(e=>e.datastore)}async function ah(t){const e=await R_(t),n=e.eventManager;return n.onListen=XL.bind(null,e.syncEngine),n.onUnlisten=ZL.bind(null,e.syncEngine),n}function _V(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new I_({next:d=>{o.enqueueAndForget(()=>b_(s,h));const f=d.docs.has(a);!f&&d.fromCache?l.reject(new ae(z.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?l.reject(new ae(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new A_(dd(a.path),u,{includeMetadataChanges:!0,z_:!0});return w_(s,h)}(await ah(t),t.asyncQueue,e,n,r)),r.promise}function vV(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new I_({next:d=>{o.enqueueAndForget(()=>b_(s,h)),d.fromCache&&c.source==="server"?l.reject(new ae(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new A_(a,u,{includeMetadataChanges:!0,z_:!0});return w_(s,h)}(await ah(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e,n){if(!n)throw new ae(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yV(t,e,n,r){if(e===!0&&r===!0)throw new ae(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F1(t){if(!we.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function M1(t){if(we.isDocumentKey(t))throw new ae(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce()}function xr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ae(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wd(t);throw new ae(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xV(t,e){if(e<=0)throw new ae(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ae(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ae(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new V5;switch(r.type){case"firstParty":return new j5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=O1.get(n);r&&(xe("ComponentProvider","Removing Datastore"),O1.delete(n),r.terminate())}(this),Promise.resolve()}}function EV(t,e,n,r={}){var i;const s=(t=xr(t,bd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dn.MOCK_USER;else{a=ON(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ae(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dn(l)}t._authCredentials=new $5(new zT(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Li extends pi{constructor(e,n,r){super(e,n,dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new we(e))}withConverter(e){return new Li(this.firestore,e,this._path)}}function Wq(t,e,...n){if(t=At(t),zI("collection","path",e),t instanceof bd){const r=xt.fromString(e,...n);return M1(r),new Li(t,null,r)}{if(!(t instanceof En||t instanceof Li))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return M1(r),new Li(t.firestore,null,r)}}function ii(t,e,...n){if(t=At(t),arguments.length===1&&(e=qT.V()),zI("doc","path",e),t instanceof bd){const r=xt.fromString(e,...n);return F1(r),new En(t,null,new we(r))}{if(!(t instanceof En||t instanceof Li))throw new ae(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return F1(r),new En(t.firestore,t instanceof Li?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new g_(this,"async_queue_retry"),this.tu=()=>{const n=Nf();n&&xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Nf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Vr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!ol(e))throw e;xe("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw li("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=x_.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&Ce()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}function L1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Os extends bd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new wV}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qI(this),this._firestoreClient.terminate()}}function bV(t,e){const n=typeof t=="object"?t:Vh(),r=typeof t=="string"?t:e||"(default)",i=$s(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=NN("firestore");s&&EV(i,...s)}return i}function dl(t){return t._firestoreClient||qI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qI(t){var e,n,r;const i=t._freezeSettings(),s=function(a,c,l,u){return new t9(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,jI(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new dV(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fs(bn.fromBase64String(e))}catch(n){throw new ae(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fs(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ae(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ae(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ae(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=/^__.*__$/;class AV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new cl(e,this.data,n,this.fieldTransforms)}}class WI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class S_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new S_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return ch(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(KI(this.lu)&&CV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class TV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yd(e)}mu(e,n,r,i=!1){return new S_({lu:e,methodName:n,Vu:r,path:gn.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P_(t){const e=t._freezeSettings(),n=yd(t._databaseId);return new TV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GI(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);D_("Data must be an object, but it was:",o,r);const a=QI(r,o);let c,l;if(s.merge)c=new zn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Yp(e,h,n);if(!o.contains(d))throw new ae(z.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);XI(u,d)||u.push(d)}c=new zn(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new AV(new Rn(a),c,l)}class Id extends Ad{_toFieldTransform(e){if(e.lu!==2)throw e.lu===1?e.Au(`${this._methodName}() can only appear at the top level of your update data`):e.Au(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}class k_ extends Ad{_toFieldTransform(e){return new A9(e.path,new Pc)}isEqual(e){return e instanceof k_}}function IV(t,e,n,r){const i=t.mu(1,e,n);D_("Data must be an object, but it was:",i,r);const s=[],o=Rn.empty();Ws(r,(c,l)=>{const u=N_(e,c,n);l=At(l);const h=i.Eu(u);if(l instanceof Id)s.push(u);else{const d=fl(l,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new zn(s);return new WI(o,a,i.fieldTransforms)}function RV(t,e,n,r,i,s){const o=t.mu(1,e,n),a=[Yp(e,r,n)],c=[i];if(s.length%2!=0)throw new ae(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Yp(e,s[d])),c.push(s[d+1]);const l=[],u=Rn.empty();for(let d=a.length-1;d>=0;--d)if(!XI(l,a[d])){const f=a[d];let g=c[d];g=At(g);const _=o.Eu(f);if(g instanceof Id)l.push(f);else{const v=fl(g,_);v!=null&&(l.push(f),u.set(f,v))}}const h=new zn(l);return new WI(u,h,o.fieldTransforms)}function SV(t,e,n,r=!1){return fl(n,t.mu(r?4:3,e))}function fl(t,e){if(YI(t=At(t)))return D_("Unsupported field value:",e,t),QI(t,e);if(t instanceof Ad)return function(r,i){if(!KI(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=fl(a,i.du(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ot.fromDate(r);return{timestampValue:ih(i.serializer,s)}}if(r instanceof Ot){const s=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ih(i.serializer,s)}}if(r instanceof Td)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fs)return{bytesValue:xI(i.serializer,r._byteString)};if(r instanceof En){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:d_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${wd(r)}`)}(t,e)}function QI(t,e){const n={};return WT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(t,(r,i)=>{const s=fl(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Td||t instanceof Fs||t instanceof En||t instanceof Ad)}function D_(t,e,n){if(!YI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wd(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function Yp(t,e,n){if((e=At(e))instanceof Cd)return e._internalPath;if(typeof e=="string")return N_(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}const PV=new RegExp("[~\\*/\\[\\]]");function N_(t,e,n){if(e.search(PV)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cd(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ae(z.INVALID_ARGUMENT,a+t+c)}function XI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(O_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kV extends lh{data(){return super.data()}}function O_(t,e){return typeof e=="string"?N_(t,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ae(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F_{}class M_ extends F_{}function Kq(t,e,...n){let r=[];e instanceof F_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof L_).length,a=s.filter(c=>c instanceof B_).length;if(o>1||o>0&&a>0)throw new ae(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class B_ extends M_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new B_(e,n,r)}_apply(e){const n=this._parse(e);return ZI(e._query,n),new pi(e.firestore,e.converter,zp(e._query,n))}_parse(e){const n=P_(e.firestore);return function(s,o,a,c,l,u,h){let d;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ae(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){$1(h,u);const f=[];for(const g of h)f.push(V1(c,s,g));d={arrayValue:{values:f}}}else d=V1(c,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||$1(h,u),d=SV(a,o,h,u==="in"||u==="not-in");return Nt.create(l,u,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class L_ extends F_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new L_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)ZI(o,c),o=zp(o,c)}(e._query,n),new pi(e.firestore,e.converter,zp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class V_ extends M_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new V_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ae(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ae(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Eo(s,o);return function(l,u){if(c_(l)===null){const h=fd(l);h!==null&&e2(l,h,u.field)}}(i,a),a}(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new aa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Gq(t,e="asc"){const n=e,r=O_("orderBy",t);return V_._create(r,n)}class $_ extends M_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $_(e,n,r)}_apply(e){return new pi(e.firestore,e.converter,nh(e._query,this._limit,this._limitType))}}function Qq(t){return xV("limit",t),$_._create("limit",t,"F")}function V1(t,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new ae(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tI(e)&&n.indexOf("/")!==-1)throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xt.fromString(n));if(!we.isDocumentKey(r))throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return c1(t,new we(r))}if(n instanceof En)return c1(t,n._key);throw new ae(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(n)}.`)}function $1(t,e){if(!Array.isArray(t)||t.length===0)throw new ae(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZI(t,e){if(e.isInequality()){const r=fd(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new ae(z.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=c_(t);s!==null&&e2(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function e2(t,e,n){if(!n.isEqual(e))throw new ae(z.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class t2{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Td(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=i_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){const n=zi(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);lt(TI(r));const i=new Rc(r.get(1),r.get(3)),s=new we(r.popFirst(5));return i.isEqual(n)||li(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class DV extends t2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class U_ extends lh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(O_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fu extends U_{data(e={}){return super.data(e)}}class r2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new lo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fu(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ae(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new lo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:NV(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function NV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){t=xr(t,En);const e=xr(t.firestore,Os);return _V(dl(e),t._key).then(n=>s2(e,t,n))}class Rd extends t2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function OV(t){t=xr(t,pi);const e=xr(t.firestore,Os),n=dl(e),r=new Rd(e);return JI(t._query),vV(n,t._query).then(i=>new r2(e,r,t,i))}function Yq(t,e,n){t=xr(t,En);const r=xr(t.firestore,Os),i=n2(t.converter,e,n);return FV(r,[GI(P_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fn.none())])}function H_(t,...e){var n,r,i;t=At(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||L1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(L1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(t instanceof En)l=xr(t.firestore,Os),u=dd(t._key.path),c={next:h=>{e[o]&&e[o](s2(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=xr(t,pi);l=xr(h.firestore,Os),u=h._query;const d=new Rd(l);c={next:f=>{e[o]&&e[o](new r2(l,d,h,f))},error:e[o+1],complete:e[o+2]},JI(t._query)}return function(d,f,g,_){const v=new I_(_),b=new A_(f,v,g);return d.asyncQueue.enqueueAndForget(async()=>w_(await ah(d),b)),()=>{v.Ma(),d.asyncQueue.enqueueAndForget(async()=>b_(await ah(d),b))}}(dl(l),u,a,c)}function FV(t,e){return function(r,i){const s=new Vr;return r.asyncQueue.enqueueAndForget(async()=>eV(await mV(r),i,s)),s.promise}(dl(t),e)}function s2(t,e,n){const r=n.docs.get(e._key),i=new Rd(t);return new U_(t,i,e._key,r,new lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV={maxAttempts:5};function Ia(t,e){if((t=At(t)).firestore!==e)throw new ae(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=P_(n)}get(n){const r=Ia(n,this._firestore),i=new DV(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Ce();const o=s[0];if(o.isFoundDocument())return new lh(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new lh(this._firestore,i,r._key,null,r.converter);throw Ce()})}set(n,r,i){const s=Ia(n,this._firestore),o=n2(s.converter,r,i),a=GI(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ia(n,this._firestore);let a;return a=typeof(r=At(r))=="string"||r instanceof Cd?RV(this._dataReader,"Transaction.update",o._key,r,i,s):IV(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ia(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ia(e,this._firestore),r=new Rd(this._firestore);return super.get(e).then(i=>new U_(this._firestore,r,n._key,i._document,new lo(!1,!1),n.converter))}}function o2(t,e,n){t=xr(t,Os);const r=Object.assign(Object.assign({},MV),n);return function(s){if(s.maxAttempts<1)throw new ae(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Vr;return s.asyncQueue.enqueueAndForget(async()=>{const l=await gV(s);new hV(s.asyncQueue,l,a,o,c).run()}),c.promise}(dl(t),i=>e(new BV(t,i)),r)}function uh(){return new k_("serverTimestamp")}(function(e,n=!0){(function(i){oa=i})(Qi),Vn(new Pn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Os(new U5(r.getProvider("auth-internal")),new q5(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ae(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ln(r1,"4.1.2",e),ln(r1,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebasestorage.googleapis.com",LV="storageBucket",VV=2*60*1e3,$V=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends sr{constructor(e,n,r=0){super(Ff(e),`Firebase Storage: ${n} (${Ff(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ff(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hr||(Hr={}));function Ff(t){return"storage/"+t}function UV(){const t="An unknown error occurred, please check the error payload for server response.";return new zr(Hr.UNKNOWN,t)}function HV(){return new zr(Hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jV(){return new zr(Hr.CANCELED,"User canceled the upload/download.")}function zV(t){return new zr(Hr.INVALID_URL,"Invalid URL '"+t+"'.")}function qV(t){return new zr(Hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function U1(t){return new zr(Hr.INVALID_ARGUMENT,t)}function c2(){return new zr(Hr.APP_DELETED,"The Firebase app was deleted.")}function WV(t){return new zr(Hr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gr.makeFromUrl(e,n)}catch{return new gr(e,"")}if(r.path==="")return r;throw qV(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),g={bucket:1,path:3},_=n===a2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",b=new RegExp(`^https?://${_}/${i}/${v}`,"i"),E=[{regex:a,indices:c,postModify:s},{regex:f,indices:g,postModify:l},{regex:b,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<E.length;w++){const T=E[w],I=T.regex.exec(e);if(I){const k=I[T.indices.bucket];let O=I[T.indices.path];O||(O=""),r=new gr(k,O),T.postModify(r);break}}if(r==null)throw zV(e);return r}}class KV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...v){l||(l=!0,e.apply(null,v))}function h(v){i=setTimeout(()=>{i=null,t(f,c())},v)}function d(){s&&clearTimeout(s)}function f(v,...b){if(l){d();return}if(v){d(),u.call(null,v,...b);return}if(c()||o){d(),u.call(null,v,...b);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let g=!1;function _(v){g||(g=!0,d(),!l&&(i!==null?(v||(a=2),clearTimeout(i),h(0)):v||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function QV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){return t!==void 0}function H1(t,e,n,r){if(r<e)throw U1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw U1(`Invalid value for '${t}'. Expected ${n} or less.`)}function XV(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hh||(hh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,i,s,o,a,c,l,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Yl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===hh.NO_ERROR,c=s.getStatus();if(!a||JV(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===hh.ABORT;r(!1,new Yl(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new Yl(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());YV(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=UV();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?c2():jV();o(c)}else{const c=HV();o(c)}};this.canceled_?n(!1,new Yl(!1,null,!0)):this.backoffId_=GV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function e$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function t$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function r$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function i$(t,e,n,r,i,s,o=!0){const a=XV(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return n$(l,e),e$(l,n),t$(l,s),r$(l,r),new ZV(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function o$(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this._service=e,n instanceof gr?this._location=n:this._location=gr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new dh(e,n)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o$(this._location.path)}get storage(){return this._service}get parent(){const e=s$(this._location.path);if(e===null)return null;const n=new gr(this._location.bucket,e);return new dh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw WV(e)}}function j1(t,e){const n=e==null?void 0:e[LV];return n==null?null:gr.makeFromBucketSpec(n,t)}class a${constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=a2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VV,this._maxUploadRetryTime=$V,this._requests=new Set,i!=null?this._bucket=gr.makeFromBucketSpec(i,this._host):this._bucket=j1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=j1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){H1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){H1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dh(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new KV(c2());{const o=i$(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const z1="@firebase/storage",q1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="storage";function l$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new a$(n,r,i,e,Qi)}function u$(){Vn(new Pn(c$,l$,"PUBLIC").setMultipleInstances(!0)),ln(z1,q1,""),ln(z1,q1,"esm2017")}u$();const Mf=new WeakMap;function l2(t,e){return Mf.has(e)||Mf.set(e,t||{f:{},r:{},s:{},u:{}}),Mf.get(e)}function h$(t,e,n,r){if(!t)return n;const[i,s]=u2(t);if(!i)return n;const o=l2(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function d$(t,e,n,r){if(!t)return;const[i,s]=u2(t);if(!i)return;const o=l2(void 0,r)[i],a=e||s;if(a)return n.then(c=>{o[a]=c}).catch(kr),a}function u2(t){return V6(t)||$6(t)?["f",t.path]:U6(t)?["r",t.toString()]:H6(t)?["s",t.toString()]:[]}const Bf=new WeakMap;function f$(t,e,n){const r=qc();Bf.has(r)||Bf.set(r,new Map);const i=Bf.get(r),s=d$(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):kr}const p$={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function Xp(t,e,n,r){if(!B6(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,c)=>{const l=n[c];return a[l.path]=l.data(),a},{});function o(a,c,l,u){c=c||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const g=Object.getOwnPropertyDescriptor(a,f);g&&!g.enumerable&&Object.defineProperty(h,f,g)});for(const f in a){const g=a[f];if(g==null||g instanceof Date||g instanceof Ot||g instanceof Td)h[f]=g;else if(hg(g)){const _=l+f;h[f]=_ in n?c[f]:g.path,d[_]=g.converter?g:g.withConverter(r.converter)}else if(Array.isArray(g)){h[f]=Array(g.length);for(let _=0;_<g.length;_++){const v=g[_];v&&v.path in s&&(h[f][_]=s[v.path])}o(g,c[f]||h[f],l+f+".",[h[f],d])}else Hs(g)?(h[f]={},o(g,c[f],l+f+".",[h[f],d])):h[f]=g}}return o(t,e,"",i),i}const j_={reset:!1,wait:!0,maxRefDepth:2,converter:p$,snapshotOptions:{serverTimestamps:"estimate"}};function fh(t){for(const e in t)t[e].unsub()}function Jp(t,e,n,r,i,s,o,a,c){const[l,u]=Xp(r.data(t.snapshotOptions),ug(e,n),i,t);s.set(e,n,l),Zp(t,e,n,i,u,s,o,a,c)}function m$({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const c=Object.create(null);let l=kr;return a.once?i2(t).then(u=>{u.exists()?Jp(a,e,n,u,c,o,r,i,s):(o.set(e,n,null),i())}).catch(s):l=H_(t,u=>{u.exists()?Jp(a,e,n,u,c,o,r,i,s):(o.set(e,n,null),i())},s),()=>{l(),fh(c)}}function Zp(t,e,n,r,i,s,o,a,c){const l=Object.keys(i);if(Object.keys(r).filter(_=>l.indexOf(_)<0).forEach(_=>{r[_].unsub(),delete r[_]}),!l.length||++o>t.maxRefDepth)return a(n);let h=0;const d=l.length,f=Object.create(null);function g(_){_ in f&&++h>=d&&a(n)}l.forEach(_=>{const v=r[_],b=i[_],x=`${n}.${_}`;if(f[x]=!0,v)if(v.path!==b.path)v.unsub();else return;r[_]={data:()=>ug(e,x),unsub:m$({ref:b,target:e,path:x,depth:o,ops:s,resolve:g.bind(null,x),reject:c},t),path:b.path}})}function g$(t,e,n,r,i,s){const o=Object.assign({},j_,s),{snapshotListenOptions:a,snapshotOptions:c,wait:l,once:u}=o,h="value";let d=ft(l?[]:t.value);l||n.set(t,h,[]);const f=r;let g,_=kr;const v=[],b={added:({newIndex:E,doc:w})=>{v.splice(E,0,Object.create(null));const T=v[E],[I,k]=Xp(w.data(c),void 0,T,o);n.add(St(d),E,I),Zp(o,d,`${h}.${E}`,T,k,n,0,r.bind(null,w),i)},modified:({oldIndex:E,newIndex:w,doc:T})=>{const I=St(d),k=v[E],O=I[E],[K,P]=Xp(T.data(c),O,k,o);v.splice(w,0,k),n.remove(I,E),n.add(I,w,K),Zp(o,d,`${h}.${w}`,k,P,n,0,r,i)},removed:({oldIndex:E})=>{const w=St(d);n.remove(w,E),fh(v.splice(E,1)[0])}};function x(E){const w=E.docChanges(a);if(!g&&w.length){g=!0;let T=0;const I=w.length,k=Object.create(null);for(let O=0;O<I;O++)k[w[O].doc.id]=!0;r=O=>{O&&O.id in k&&++T>=I&&(l&&(n.set(t,h,St(d)),d=t),f(St(d)),r=kr)}}w.forEach(T=>{b[T.type](T)}),w.length||(l&&(n.set(t,h,St(d)),d=t),r(St(d)))}return u?OV(e).then(x).catch(i):_=H_(e,x,i),E=>{if(_(),E){const w=typeof E=="function"?E():[];n.set(t,h,w)}v.forEach(fh)}}function _$(t,e,n,r,i,s){const o=Object.assign({},j_,s),a="value",c=Object.create(null);r=j6(r,()=>ug(t,a));let l=kr;function u(h){h.exists()?Jp(o,t,a,h,c,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?i2(e).then(u).catch(i):l=H_(e,u,i),h=>{if(l(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}fh(c)}}const W1=Symbol();function h2(t,e){let n=kr;const r=Object.assign({},j_,e),i=St(t),s=r.target||ft();q6()&&(r.once=!0);const o=h$(i,r.ssrKey,W1,qc()),a=o!==W1;a&&(s.value=o);let c=!a;const l=ft(!1),u=ft(),h=Lw(),d=ww();let f=kr;function g(){let b=St(t);const x=new Promise((E,w)=>{if(n(r.reset),!b)return n=kr,E(null);l.value=c,c=!0,b.converter||(b=b.withConverter(r.converter)),n=(hg(b)?_$:g$)(s,b,v$,E,w,r)}).catch(E=>(h.value===x&&(u.value=E),Promise.reject(E))).finally(()=>{h.value===x&&(l.value=!1)});h.value=x}let _=kr;Yt(t)&&(_=Mr(t,g)),g(),i&&(f=f$(h.value,i,r.ssrKey)),hb()&&Xw(()=>h.value),d&&rk(v);function v(b=r.reset){_(),f(),n(b)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>l},promise:{get:()=>h},stop:{get:()=>v}})}const v$={set:(t,e,n)=>F6(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function Jq(t,e){return h2(t,{target:ft([]),...e})}function z_(t,e){return h2(t,e)}function y$(t){return(e,n)=>{const r=W6(e,n).run(()=>ft(t));SC.set(e,r),G6(r,e)}}function Zq(t){return O6?AC(qc(t)):null}function x$(t,{firebaseApp:e,modules:n=[]}){t.provide(RC,e);for(const r of n)r(e,t)}const E$=ir({__name:"App",setup(t){const e=zh(),n=bN(),r=CN();return Mr(e,async(i,s)=>{if(!i&&s&&r.meta.requiresAuth)return n.push({name:"login"});if(i&&typeof r.query.redirect=="string")return n.push(r.query.redirect)}),(i,s)=>(mt(),Ao(St(Ab)))}}),w$="modulepreload",b$=function(t){return"/"+t},K1={},Lf=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=b$(s),s in K1)return;K1[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":w$,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var A$=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},d2={},Yn={};let q_;const T$=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Yn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Yn.getSymbolTotalCodewords=function(e){return T$[e]};Yn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Yn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');q_=e};Yn.isKanjiModeEnabled=function(){return typeof q_<"u"};Yn.toSJIS=function(e){return q_(e)};var Sd={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(Sd);function f2(){this.buffer=[],this.length=0}f2.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var I$=f2;function pl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}pl.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};pl.prototype.get=function(t,e){return this.data[t*this.size+e]};pl.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};pl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var R$=pl,p2={};(function(t){const e=Yn.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(p2);var m2={};const S$=Yn.getSymbolSize,G1=7;m2.getPositions=function(e){const n=S$(e);return[[0,0],[n-G1,0],[0,n-G1]]};var g2={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let h=0;h<s;h++){a=c=0,l=u=null;for(let d=0;d<s;d++){let f=i.get(h,d);f===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=f,a=1),f=i.get(d,h),f===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=f,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,n(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(g2);var Pd={};const ki=Sd,Xl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Jl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Pd.getBlocksCount=function(e,n){switch(n){case ki.L:return Xl[(e-1)*4+0];case ki.M:return Xl[(e-1)*4+1];case ki.Q:return Xl[(e-1)*4+2];case ki.H:return Xl[(e-1)*4+3];default:return}};Pd.getTotalCodewordsCount=function(e,n){switch(n){case ki.L:return Jl[(e-1)*4+0];case ki.M:return Jl[(e-1)*4+1];case ki.Q:return Jl[(e-1)*4+2];case ki.H:return Jl[(e-1)*4+3];default:return}};var _2={},kd={};const tc=new Uint8Array(512),ph=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)tc[n]=e,ph[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)tc[n]=tc[n-255]})();kd.log=function(e){if(e<1)throw new Error("log("+e+")");return ph[e]};kd.exp=function(e){return tc[e]};kd.mul=function(e,n){return e===0||n===0?0:tc[ph[e]+ph[n]]};(function(t){const e=kd;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(_2);const v2=_2;function W_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}W_.prototype.initialize=function(e){this.degree=e,this.genPoly=v2.generateECPolynomial(this.degree)};W_.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=v2.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var P$=W_,y2={},es={},K_={};K_.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var qr={};const x2="[0-9]+",k$="[A-Z $%*+\\-./:]+";let Oc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Oc=Oc.replace(/u/g,"\\u");const D$="(?:(?![A-Z0-9 $%*+\\-./:]|"+Oc+`)(?:.|[\r
]))+`;qr.KANJI=new RegExp(Oc,"g");qr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");qr.BYTE=new RegExp(D$,"g");qr.NUMERIC=new RegExp(x2,"g");qr.ALPHANUMERIC=new RegExp(k$,"g");const N$=new RegExp("^"+Oc+"$"),O$=new RegExp("^"+x2+"$"),F$=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");qr.testKanji=function(e){return N$.test(e)};qr.testNumeric=function(e){return O$.test(e)};qr.testAlphanumeric=function(e){return F$.test(e)};(function(t){const e=K_,n=qr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(es);(function(t){const e=Yn,n=Pd,r=Sd,i=es,s=K_,o=7973,a=e.getBCHDigit(o);function c(d,f,g){for(let _=1;_<=40;_++)if(f<=t.getCapacity(_,g,d))return _}function l(d,f){return i.getCharCountIndicator(d,f)+4}function u(d,f){let g=0;return d.forEach(function(_){const v=l(_.mode,f);g+=v+_.getBitsLength()}),g}function h(d,f){for(let g=1;g<=40;g++)if(u(d,g)<=t.getCapacity(g,f,i.MIXED))return g}t.from=function(f,g){return s.isValid(f)?parseInt(f,10):g},t.getCapacity=function(f,g,_){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const v=e.getSymbolTotalCodewords(f),b=n.getTotalCodewordsCount(f,g),x=(v-b)*8;if(_===i.MIXED)return x;const E=x-l(_,f);switch(_){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(f,g){let _;const v=r.from(g,r.M);if(Array.isArray(f)){if(f.length>1)return h(f,v);if(f.length===0)return 1;_=f[0]}else _=f;return c(_.mode,_.getLength(),v)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let g=f<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return f<<12|g}})(y2);var E2={};const em=Yn,w2=1335,M$=21522,Q1=em.getBCHDigit(w2);E2.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;em.getBCHDigit(i)-Q1>=0;)i^=w2<<em.getBCHDigit(i)-Q1;return(r<<10|i)^M$};var b2={};const B$=es;function Uo(t){this.mode=B$.NUMERIC,this.data=t.toString()}Uo.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Uo.prototype.getLength=function(){return this.data.length};Uo.prototype.getBitsLength=function(){return Uo.getBitsLength(this.data.length)};Uo.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var L$=Uo;const V$=es,Vf=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ho(t){this.mode=V$.ALPHANUMERIC,this.data=t}Ho.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ho.prototype.getLength=function(){return this.data.length};Ho.prototype.getBitsLength=function(){return Ho.getBitsLength(this.data.length)};Ho.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Vf.indexOf(this.data[n])*45;r+=Vf.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Vf.indexOf(this.data[n]),6)};var $$=Ho,U$=function(e){for(var n=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const H$=U$,j$=es;function jo(t){this.mode=j$.BYTE,typeof t=="string"&&(t=H$(t)),this.data=new Uint8Array(t)}jo.getBitsLength=function(e){return e*8};jo.prototype.getLength=function(){return this.data.length};jo.prototype.getBitsLength=function(){return jo.getBitsLength(this.data.length)};jo.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var z$=jo;const q$=es,W$=Yn;function zo(t){this.mode=q$.KANJI,this.data=t}zo.getBitsLength=function(e){return e*13};zo.prototype.getLength=function(){return this.data.length};zo.prototype.getBitsLength=function(){return zo.getBitsLength(this.data.length)};zo.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=W$.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var K$=zo,C2={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,l,u,h,d,f,g,_,v;!a.empty();){c=a.pop(),l=c.value,h=c.cost,d=n[l]||{};for(u in d)d.hasOwnProperty(u)&&(f=d[u],g=h+f,_=o[u],v=typeof o[u]>"u",(v||_>g)&&(o[u]=g,a.push(u,g),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var b=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(b)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(C2);var G$=C2.exports;(function(t){const e=es,n=L$,r=$$,i=z$,s=K$,o=qr,a=Yn,c=G$;function l(b){return unescape(encodeURIComponent(b)).length}function u(b,x,E){const w=[];let T;for(;(T=b.exec(E))!==null;)w.push({data:T[0],index:T.index,mode:x,length:T[0].length});return w}function h(b){const x=u(o.NUMERIC,e.NUMERIC,b),E=u(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let w,T;return a.isKanjiModeEnabled()?(w=u(o.BYTE,e.BYTE,b),T=u(o.KANJI,e.KANJI,b)):(w=u(o.BYTE_KANJI,e.BYTE,b),T=[]),x.concat(E,w,T).sort(function(k,O){return k.index-O.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function d(b,x){switch(x){case e.NUMERIC:return n.getBitsLength(b);case e.ALPHANUMERIC:return r.getBitsLength(b);case e.KANJI:return s.getBitsLength(b);case e.BYTE:return i.getBitsLength(b)}}function f(b){return b.reduce(function(x,E){const w=x.length-1>=0?x[x.length-1]:null;return w&&w.mode===E.mode?(x[x.length-1].data+=E.data,x):(x.push(E),x)},[])}function g(b){const x=[];for(let E=0;E<b.length;E++){const w=b[E];switch(w.mode){case e.NUMERIC:x.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:x.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:x.push([w,{data:w.data,mode:e.BYTE,length:l(w.data)}]);break;case e.BYTE:x.push([{data:w.data,mode:e.BYTE,length:l(w.data)}])}}return x}function _(b,x){const E={},w={start:{}};let T=["start"];for(let I=0;I<b.length;I++){const k=b[I],O=[];for(let K=0;K<k.length;K++){const P=k[K],B=""+I+K;O.push(B),E[B]={node:P,lastCount:0},w[B]={};for(let H=0;H<T.length;H++){const $=T[H];E[$]&&E[$].node.mode===P.mode?(w[$][B]=d(E[$].lastCount+P.length,P.mode)-d(E[$].lastCount,P.mode),E[$].lastCount+=P.length):(E[$]&&(E[$].lastCount=P.length),w[$][B]=d(P.length,P.mode)+4+e.getCharCountIndicator(P.mode,x))}}T=O}for(let I=0;I<T.length;I++)w[T[I]].end=0;return{map:w,table:E}}function v(b,x){let E;const w=e.getBestModeForData(b);if(E=e.from(x,w),E!==e.BYTE&&E.bit<w.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(w));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new n(b);case e.ALPHANUMERIC:return new r(b);case e.KANJI:return new s(b);case e.BYTE:return new i(b)}}t.fromArray=function(x){return x.reduce(function(E,w){return typeof w=="string"?E.push(v(w,null)):w.data&&E.push(v(w.data,w.mode)),E},[])},t.fromString=function(x,E){const w=h(x,a.isKanjiModeEnabled()),T=g(w),I=_(T,E),k=c.find_path(I.map,"start","end"),O=[];for(let K=1;K<k.length-1;K++)O.push(I.table[k[K]].node);return t.fromArray(f(O))},t.rawSplit=function(x){return t.fromArray(h(x,a.isKanjiModeEnabled()))}})(b2);const Dd=Yn,$f=Sd,Q$=I$,Y$=R$,X$=p2,J$=m2,tm=g2,nm=Pd,Z$=P$,mh=y2,e7=E2,t7=es,Uf=b2;function n7(t,e){const n=t.size,r=J$.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function r7(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function i7(t,e){const n=X$.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function s7(t,e){const n=t.size,r=mh.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Hf(t,e,n){const r=t.size,i=e7.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function o7(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function a7(t,e,n){const r=new Q$;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),t7.getCharCountIndicator(c.mode,t)),c.write(r)});const i=Dd.getSymbolTotalCodewords(t),s=nm.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return c7(r,t,e)}function c7(t,e,n){const r=Dd.getSymbolTotalCodewords(e),i=nm.getTotalCodewordsCount(e,n),s=r-i,o=nm.getBlocksCount(e,n),a=r%o,c=o-a,l=Math.floor(r/o),u=Math.floor(s/o),h=u+1,d=l-u,f=new Z$(d);let g=0;const _=new Array(o),v=new Array(o);let b=0;const x=new Uint8Array(t.buffer);for(let k=0;k<o;k++){const O=k<c?u:h;_[k]=x.slice(g,g+O),v[k]=f.encode(_[k]),g+=O,b=Math.max(b,O)}const E=new Uint8Array(r);let w=0,T,I;for(T=0;T<b;T++)for(I=0;I<o;I++)T<_[I].length&&(E[w++]=_[I][T]);for(T=0;T<d;T++)for(I=0;I<o;I++)E[w++]=v[I][T];return E}function l7(t,e,n,r){let i;if(Array.isArray(t))i=Uf.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=Uf.rawSplit(t);l=mh.getBestVersionForData(u,n)}i=Uf.fromString(t,l||40)}else throw new Error("Invalid data");const s=mh.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=a7(e,n,i),a=Dd.getSymbolSize(e),c=new Y$(a);return n7(c,e),r7(c),i7(c,e),Hf(c,n,0),e>=7&&s7(c,e),o7(c,o),isNaN(r)&&(r=tm.getBestMask(c,Hf.bind(null,c,n))),tm.applyMask(r,c),Hf(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}d2.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=$f.M,i,s;return typeof n<"u"&&(r=$f.from(n.errorCorrectionLevel,$f.M),i=mh.from(n.version),s=tm.from(n.maskPattern),n.toSJISFunc&&Dd.setToSJISFunction(n.toSJISFunc)),l7(e,i,r,s)};var A2={},G_={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,h=[s.color.light,s.color.dark];for(let d=0;d<l;d++)for(let f=0;f<l;f++){let g=(d*l+f)*4,_=s.color.light;if(d>=u&&f>=u&&d<l-u&&f<l-u){const v=Math.floor((d-u)/c),b=Math.floor((f-u)/c);_=h[a[v*o+b]?1:0]}r[g++]=_.r,r[g++]=_.g,r[g++]=_.b,r[g]=_.a}}})(G_);(function(t){const e=G_;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),h=l.getContext("2d"),d=h.createImageData(u,u);return e.qrToImageData(d.data,s,c),n(h,l,u),h.putImageData(d,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return l.toDataURL(u,h.quality)}})(A2);var T2={};const u7=G_;function Y1(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function jf(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function h7(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=s?jf("M",c+n,.5+l+n):jf("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(r+=jf("h",o),o=0)):i++}return r}T2.render=function(e,n,r){const i=u7.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+Y1(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+Y1(i.color.dark,"stroke")+' d="'+h7(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,d),d};const d7=A$,rm=d2,I2=A2,f7=T2;function Q_(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!d7())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=rm.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=rm.create(n,r);i(null,t(c,e,r))}catch(c){i(c)}}rm.create;var p7=Q_.bind(null,I2.render);Q_.bind(null,I2.renderToDataURL);Q_.bind(null,function(t,e,n){return f7.render(t,n)});var R2={exports:{}};function m7(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zf={exports:{}};const g7={},_7=Object.freeze(Object.defineProperty({__proto__:null,default:g7},Symbol.toStringTag,{value:"Module"})),v7=C$(_7);var X1;function je(){return X1||(X1=1,function(t,e){(function(n,r){t.exports=r()})(Le,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Le<"u"&&Le.crypto&&(s=Le.crypto),!s&&typeof m7=="function")try{s=v7}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function x(){}return function(E){var w;return x.prototype=E,w=new x,x.prototype=null,w}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(x){var E=a(this);return x&&E.mixIn(x),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var E in x)x.hasOwnProperty(E)&&(this[E]=x[E]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=l.WordArray=u.extend({init:function(x,E){x=this.words=x||[],E!=i?this.sigBytes=E:this.sigBytes=x.length*4},toString:function(x){return(x||f).stringify(this)},concat:function(x){var E=this.words,w=x.words,T=this.sigBytes,I=x.sigBytes;if(this.clamp(),T%4)for(var k=0;k<I;k++){var O=w[k>>>2]>>>24-k%4*8&255;E[T+k>>>2]|=O<<24-(T+k)%4*8}else for(var K=0;K<I;K+=4)E[T+K>>>2]=w[K>>>2];return this.sigBytes+=I,this},clamp:function(){var x=this.words,E=this.sigBytes;x[E>>>2]&=4294967295<<32-E%4*8,x.length=r.ceil(E/4)},clone:function(){var x=u.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var E=[],w=0;w<x;w+=4)E.push(o());return new h.init(E,x)}}),d=c.enc={},f=d.Hex={stringify:function(x){for(var E=x.words,w=x.sigBytes,T=[],I=0;I<w;I++){var k=E[I>>>2]>>>24-I%4*8&255;T.push((k>>>4).toString(16)),T.push((k&15).toString(16))}return T.join("")},parse:function(x){for(var E=x.length,w=[],T=0;T<E;T+=2)w[T>>>3]|=parseInt(x.substr(T,2),16)<<24-T%8*4;return new h.init(w,E/2)}},g=d.Latin1={stringify:function(x){for(var E=x.words,w=x.sigBytes,T=[],I=0;I<w;I++){var k=E[I>>>2]>>>24-I%4*8&255;T.push(String.fromCharCode(k))}return T.join("")},parse:function(x){for(var E=x.length,w=[],T=0;T<E;T++)w[T>>>2]|=(x.charCodeAt(T)&255)<<24-T%4*8;return new h.init(w,E)}},_=d.Utf8={stringify:function(x){try{return decodeURIComponent(escape(g.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return g.parse(unescape(encodeURIComponent(x)))}},v=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=_.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var E,w=this._data,T=w.words,I=w.sigBytes,k=this.blockSize,O=k*4,K=I/O;x?K=r.ceil(K):K=r.max((K|0)-this._minBufferSize,0);var P=K*k,B=r.min(P*4,I);if(P){for(var H=0;H<P;H+=k)this._doProcessBlock(T,H);E=T.splice(0,P),w.sigBytes-=B}return new h.init(E,B)},clone:function(){var x=u.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});l.Hasher=v.extend({cfg:u.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var E=this._doFinalize();return E},blockSize:16,_createHelper:function(x){return function(E,w){return new x.init(w).finalize(E)}},_createHmacHelper:function(x){return function(E,w){return new b.HMAC.init(x,w).finalize(E)}}});var b=c.algo={};return c}(Math);return n})}(zf)),zf.exports}var qf={exports:{}},J1;function Nd(){return J1||(J1=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,c=i.x64={};c.Word=o.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=o.extend({init:function(l,u){l=this.words=l||[],u!=r?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,h=[],d=0;d<u;d++){var f=l[d];h.push(f.high),h.push(f.low)}return a.create(h,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),u=l.words=this.words.slice(0),h=u.length,d=0;d<h;d++)u[d]=u[d].clone();return l}})}(),n})}(qf)),qf.exports}var Wf={exports:{}},Z1;function y7(){return Z1||(Z1=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],h=0;h<l;h++)u[h>>>2]|=c[h]<<24-h%4*8;o.call(this,u,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(Wf)),Wf.exports}var Kf={exports:{}},eE;function x7(){return eE||(eE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,h=[],d=0;d<u;d+=2){var f=l[d>>>2]>>>16-d%4*8&65535;h.push(String.fromCharCode(f))}return h.join("")},parse:function(c){for(var l=c.length,u=[],h=0;h<l;h++)u[h>>>1]|=c.charCodeAt(h)<<16-h%2*16;return s.create(u,l*2)}},o.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,h=[],d=0;d<u;d+=2){var f=a(l[d>>>2]>>>16-d%4*8&65535);h.push(String.fromCharCode(f))}return h.join("")},parse:function(c){for(var l=c.length,u=[],h=0;h<l;h++)u[h>>>1]|=a(c.charCodeAt(h)<<16-h%2*16);return s.create(u,l*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),n.enc.Utf16})}(Kf)),Kf.exports}var Gf={exports:{}},tE;function Gs(){return tE||(tE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,h=this._map;c.clamp();for(var d=[],f=0;f<u;f+=3)for(var g=l[f>>>2]>>>24-f%4*8&255,_=l[f+1>>>2]>>>24-(f+1)%4*8&255,v=l[f+2>>>2]>>>24-(f+2)%4*8&255,b=g<<16|_<<8|v,x=0;x<4&&f+x*.75<u;x++)d.push(h.charAt(b>>>6*(3-x)&63));var E=h.charAt(64);if(E)for(;d.length%4;)d.push(E);return d.join("")},parse:function(c){var l=c.length,u=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<u.length;d++)h[u.charCodeAt(d)]=d}var f=u.charAt(64);if(f){var g=c.indexOf(f);g!==-1&&(l=g)}return a(c,l,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var h=[],d=0,f=0;f<l;f++)if(f%4){var g=u[c.charCodeAt(f-1)]<<f%4*2,_=u[c.charCodeAt(f)]>>>6-f%4*2,v=g|_;h[d>>>2]|=v<<24-d%4*8,d++}return s.create(h,d)}}(),n.enc.Base64})}(Gf)),Gf.exports}var Qf={exports:{}},nE;function E7(){return nE||(nE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,h=c.sigBytes,d=l?this._safe_map:this._map;c.clamp();for(var f=[],g=0;g<h;g+=3)for(var _=u[g>>>2]>>>24-g%4*8&255,v=u[g+1>>>2]>>>24-(g+1)%4*8&255,b=u[g+2>>>2]>>>24-(g+2)%4*8&255,x=_<<16|v<<8|b,E=0;E<4&&g+E*.75<h;E++)f.push(d.charAt(x>>>6*(3-E)&63));var w=d.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,h=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<h.length;f++)d[h.charCodeAt(f)]=f}var g=h.charAt(64);if(g){var _=c.indexOf(g);_!==-1&&(u=_)}return a(c,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var h=[],d=0,f=0;f<l;f++)if(f%4){var g=u[c.charCodeAt(f-1)]<<f%4*2,_=u[c.charCodeAt(f)]>>>6-f%4*2,v=g|_;h[d>>>2]|=v<<24-d%4*8,d++}return s.create(h,d)}}(),n.enc.Base64url})}(Qf)),Qf.exports}var Yf={exports:{}},rE;function Qs(){return rE||(rE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[];(function(){for(var _=0;_<64;_++)l[_]=r.abs(r.sin(_+1))*4294967296|0})();var u=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,v){for(var b=0;b<16;b++){var x=v+b,E=_[x];_[x]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var w=this._hash.words,T=_[v+0],I=_[v+1],k=_[v+2],O=_[v+3],K=_[v+4],P=_[v+5],B=_[v+6],H=_[v+7],$=_[v+8],pe=_[v+9],me=_[v+10],he=_[v+11],Ee=_[v+12],_e=_[v+13],Be=_[v+14],Re=_[v+15],U=w[0],W=w[1],J=w[2],Q=w[3];U=h(U,W,J,Q,T,7,l[0]),Q=h(Q,U,W,J,I,12,l[1]),J=h(J,Q,U,W,k,17,l[2]),W=h(W,J,Q,U,O,22,l[3]),U=h(U,W,J,Q,K,7,l[4]),Q=h(Q,U,W,J,P,12,l[5]),J=h(J,Q,U,W,B,17,l[6]),W=h(W,J,Q,U,H,22,l[7]),U=h(U,W,J,Q,$,7,l[8]),Q=h(Q,U,W,J,pe,12,l[9]),J=h(J,Q,U,W,me,17,l[10]),W=h(W,J,Q,U,he,22,l[11]),U=h(U,W,J,Q,Ee,7,l[12]),Q=h(Q,U,W,J,_e,12,l[13]),J=h(J,Q,U,W,Be,17,l[14]),W=h(W,J,Q,U,Re,22,l[15]),U=d(U,W,J,Q,I,5,l[16]),Q=d(Q,U,W,J,B,9,l[17]),J=d(J,Q,U,W,he,14,l[18]),W=d(W,J,Q,U,T,20,l[19]),U=d(U,W,J,Q,P,5,l[20]),Q=d(Q,U,W,J,me,9,l[21]),J=d(J,Q,U,W,Re,14,l[22]),W=d(W,J,Q,U,K,20,l[23]),U=d(U,W,J,Q,pe,5,l[24]),Q=d(Q,U,W,J,Be,9,l[25]),J=d(J,Q,U,W,O,14,l[26]),W=d(W,J,Q,U,$,20,l[27]),U=d(U,W,J,Q,_e,5,l[28]),Q=d(Q,U,W,J,k,9,l[29]),J=d(J,Q,U,W,H,14,l[30]),W=d(W,J,Q,U,Ee,20,l[31]),U=f(U,W,J,Q,P,4,l[32]),Q=f(Q,U,W,J,$,11,l[33]),J=f(J,Q,U,W,he,16,l[34]),W=f(W,J,Q,U,Be,23,l[35]),U=f(U,W,J,Q,I,4,l[36]),Q=f(Q,U,W,J,K,11,l[37]),J=f(J,Q,U,W,H,16,l[38]),W=f(W,J,Q,U,me,23,l[39]),U=f(U,W,J,Q,_e,4,l[40]),Q=f(Q,U,W,J,T,11,l[41]),J=f(J,Q,U,W,O,16,l[42]),W=f(W,J,Q,U,B,23,l[43]),U=f(U,W,J,Q,pe,4,l[44]),Q=f(Q,U,W,J,Ee,11,l[45]),J=f(J,Q,U,W,Re,16,l[46]),W=f(W,J,Q,U,k,23,l[47]),U=g(U,W,J,Q,T,6,l[48]),Q=g(Q,U,W,J,H,10,l[49]),J=g(J,Q,U,W,Be,15,l[50]),W=g(W,J,Q,U,P,21,l[51]),U=g(U,W,J,Q,Ee,6,l[52]),Q=g(Q,U,W,J,O,10,l[53]),J=g(J,Q,U,W,me,15,l[54]),W=g(W,J,Q,U,I,21,l[55]),U=g(U,W,J,Q,$,6,l[56]),Q=g(Q,U,W,J,Re,10,l[57]),J=g(J,Q,U,W,B,15,l[58]),W=g(W,J,Q,U,_e,21,l[59]),U=g(U,W,J,Q,K,6,l[60]),Q=g(Q,U,W,J,he,10,l[61]),J=g(J,Q,U,W,k,15,l[62]),W=g(W,J,Q,U,pe,21,l[63]),w[0]=w[0]+U|0,w[1]=w[1]+W|0,w[2]=w[2]+J|0,w[3]=w[3]+Q|0},_doFinalize:function(){var _=this._data,v=_.words,b=this._nDataBytes*8,x=_.sigBytes*8;v[x>>>5]|=128<<24-x%32;var E=r.floor(b/4294967296),w=b;v[(x+64>>>9<<4)+15]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,v[(x+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,_.sigBytes=(v.length+1)*4,this._process();for(var T=this._hash,I=T.words,k=0;k<4;k++){var O=I[k];I[k]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return T},clone:function(){var _=a.clone.call(this);return _._hash=this._hash.clone(),_}});function h(_,v,b,x,E,w,T){var I=_+(v&b|~v&x)+E+T;return(I<<w|I>>>32-w)+v}function d(_,v,b,x,E,w,T){var I=_+(v&x|b&~x)+E+T;return(I<<w|I>>>32-w)+v}function f(_,v,b,x,E,w,T){var I=_+(v^b^x)+E+T;return(I<<w|I>>>32-w)+v}function g(_,v,b,x,E,w,T){var I=_+(b^(v|~x))+E+T;return(I<<w|I>>>32-w)+v}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(Yf)),Yf.exports}var Xf={exports:{}},iE;function S2(){return iE||(iE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,c=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,h){for(var d=this._hash.words,f=d[0],g=d[1],_=d[2],v=d[3],b=d[4],x=0;x<80;x++){if(x<16)c[x]=u[h+x]|0;else{var E=c[x-3]^c[x-8]^c[x-14]^c[x-16];c[x]=E<<1|E>>>31}var w=(f<<5|f>>>27)+b+c[x];x<20?w+=(g&_|~g&v)+1518500249:x<40?w+=(g^_^v)+1859775393:x<60?w+=(g&_|g&v|_&v)-1894007588:w+=(g^_^v)-899497514,b=v,v=_,_=g<<30|g>>>2,g=f,f=w}d[0]=d[0]+f|0,d[1]=d[1]+g|0,d[2]=d[2]+_|0,d[3]=d[3]+v|0,d[4]=d[4]+b|0},_doFinalize:function(){var u=this._data,h=u.words,d=this._nDataBytes*8,f=u.sigBytes*8;return h[f>>>5]|=128<<24-f%32,h[(f+64>>>9<<4)+14]=Math.floor(d/4294967296),h[(f+64>>>9<<4)+15]=d,u.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(Xf)),Xf.exports}var Jf={exports:{}},sE;function Y_(){return sE||(sE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[],u=[];(function(){function f(b){for(var x=r.sqrt(b),E=2;E<=x;E++)if(!(b%E))return!1;return!0}function g(b){return(b-(b|0))*4294967296|0}for(var _=2,v=0;v<64;)f(_)&&(v<8&&(l[v]=g(r.pow(_,1/2))),u[v]=g(r.pow(_,1/3)),v++),_++})();var h=[],d=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(f,g){for(var _=this._hash.words,v=_[0],b=_[1],x=_[2],E=_[3],w=_[4],T=_[5],I=_[6],k=_[7],O=0;O<64;O++){if(O<16)h[O]=f[g+O]|0;else{var K=h[O-15],P=(K<<25|K>>>7)^(K<<14|K>>>18)^K>>>3,B=h[O-2],H=(B<<15|B>>>17)^(B<<13|B>>>19)^B>>>10;h[O]=P+h[O-7]+H+h[O-16]}var $=w&T^~w&I,pe=v&b^v&x^b&x,me=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),he=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),Ee=k+he+$+u[O]+h[O],_e=me+pe;k=I,I=T,T=w,w=E+Ee|0,E=x,x=b,b=v,v=Ee+_e|0}_[0]=_[0]+v|0,_[1]=_[1]+b|0,_[2]=_[2]+x|0,_[3]=_[3]+E|0,_[4]=_[4]+w|0,_[5]=_[5]+T|0,_[6]=_[6]+I|0,_[7]=_[7]+k|0},_doFinalize:function(){var f=this._data,g=f.words,_=this._nDataBytes*8,v=f.sigBytes*8;return g[v>>>5]|=128<<24-v%32,g[(v+64>>>9<<4)+14]=r.floor(_/4294967296),g[(v+64>>>9<<4)+15]=_,f.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var f=a.clone.call(this);return f._hash=this._hash.clone(),f}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(Jf)),Jf.exports}var Zf={exports:{}},oE;function w7(){return oE||(oE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Y_())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(c),r.HmacSHA224=a._createHmacHelper(c)}(),n.SHA224})}(Zf)),Zf.exports}var e0={exports:{}},aE;function P2(){return aE||(aE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Nd())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,c=o.WordArray,l=r.algo;function u(){return a.create.apply(a,arguments)}var h=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],d=[];(function(){for(var g=0;g<80;g++)d[g]=u()})();var f=l.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(g,_){for(var v=this._hash.words,b=v[0],x=v[1],E=v[2],w=v[3],T=v[4],I=v[5],k=v[6],O=v[7],K=b.high,P=b.low,B=x.high,H=x.low,$=E.high,pe=E.low,me=w.high,he=w.low,Ee=T.high,_e=T.low,Be=I.high,Re=I.low,U=k.high,W=k.low,J=O.high,Q=O.low,st=K,Pe=P,L=B,X=H,ie=$,ge=pe,$e=me,A=he,R=Ee,N=_e,V=Be,q=Re,G=U,se=W,ee=J,re=Q,Y=0;Y<80;Y++){var fe,le,ve=d[Y];if(Y<16)le=ve.high=g[_+Y*2]|0,fe=ve.low=g[_+Y*2+1]|0;else{var Ae=d[Y-15],De=Ae.high,ze=Ae.low,tt=(De>>>1|ze<<31)^(De>>>8|ze<<24)^De>>>7,ht=(ze>>>1|De<<31)^(ze>>>8|De<<24)^(ze>>>7|De<<25),tn=d[Y-2],Mt=tn.high,Cn=tn.low,An=(Mt>>>19|Cn<<13)^(Mt<<3|Cn>>>29)^Mt>>>6,Tr=(Cn>>>19|Mt<<13)^(Cn<<3|Mt>>>29)^(Cn>>>6|Mt<<26),Bt=d[Y-7],nn=Bt.high,Xn=Bt.low,vl=d[Y-16],$d=vl.high,Ys=vl.low;fe=ht+Xn,le=tt+nn+(fe>>>0<ht>>>0?1:0),fe=fe+Tr,le=le+An+(fe>>>0<Tr>>>0?1:0),fe=fe+Ys,le=le+$d+(fe>>>0<Ys>>>0?1:0),ve.high=le,ve.low=fe}var Ud=R&V^~R&G,ha=N&q^~N&se,Ut=st&L^st&ie^L&ie,gi=Pe&X^Pe&ge^X&ge,qe=(st>>>28|Pe<<4)^(st<<30|Pe>>>2)^(st<<25|Pe>>>7),yl=(Pe>>>28|st<<4)^(Pe<<30|st>>>2)^(Pe<<25|st>>>7),ar=(R>>>14|N<<18)^(R>>>18|N<<14)^(R<<23|N>>>9),Hd=(N>>>14|R<<18)^(N>>>18|R<<14)^(N<<23|R>>>9),xl=h[Y],jd=xl.high,Xs=xl.low,rn=re+Hd,cr=ee+ar+(rn>>>0<re>>>0?1:0),rn=rn+ha,cr=cr+Ud+(rn>>>0<ha>>>0?1:0),rn=rn+Xs,cr=cr+jd+(rn>>>0<Xs>>>0?1:0),rn=rn+fe,cr=cr+le+(rn>>>0<fe>>>0?1:0),El=yl+gi,wl=qe+Ut+(El>>>0<yl>>>0?1:0);ee=G,re=se,G=V,se=q,V=R,q=N,N=A+rn|0,R=$e+cr+(N>>>0<A>>>0?1:0)|0,$e=ie,A=ge,ie=L,ge=X,L=st,X=Pe,Pe=rn+El|0,st=cr+wl+(Pe>>>0<rn>>>0?1:0)|0}P=b.low=P+Pe,b.high=K+st+(P>>>0<Pe>>>0?1:0),H=x.low=H+X,x.high=B+L+(H>>>0<X>>>0?1:0),pe=E.low=pe+ge,E.high=$+ie+(pe>>>0<ge>>>0?1:0),he=w.low=he+A,w.high=me+$e+(he>>>0<A>>>0?1:0),_e=T.low=_e+N,T.high=Ee+R+(_e>>>0<N>>>0?1:0),Re=I.low=Re+q,I.high=Be+V+(Re>>>0<q>>>0?1:0),W=k.low=W+se,k.high=U+G+(W>>>0<se>>>0?1:0),Q=O.low=Q+re,O.high=J+ee+(Q>>>0<re>>>0?1:0)},_doFinalize:function(){var g=this._data,_=g.words,v=this._nDataBytes*8,b=g.sigBytes*8;_[b>>>5]|=128<<24-b%32,_[(b+128>>>10<<5)+30]=Math.floor(v/4294967296),_[(b+128>>>10<<5)+31]=v,g.sigBytes=_.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});r.SHA512=s._createHelper(f),r.HmacSHA512=s._createHmacHelper(f)}(),n.SHA512})}(e0)),e0.exports}var t0={exports:{}},cE;function b7(){return cE||(cE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Nd(),P2())})(Le,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l)}(),n.SHA384})}(t0)),t0.exports}var n0={exports:{}},lE;function C7(){return lE||(lE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Nd())})(Le,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.x64,l=c.Word,u=i.algo,h=[],d=[],f=[];(function(){for(var v=1,b=0,x=0;x<24;x++){h[v+5*b]=(x+1)*(x+2)/2%64;var E=b%5,w=(2*v+3*b)%5;v=E,b=w}for(var v=0;v<5;v++)for(var b=0;b<5;b++)d[v+5*b]=b+(2*v+3*b)%5*5;for(var T=1,I=0;I<24;I++){for(var k=0,O=0,K=0;K<7;K++){if(T&1){var P=(1<<K)-1;P<32?O^=1<<P:k^=1<<P-32}T&128?T=T<<1^113:T<<=1}f[I]=l.create(k,O)}})();var g=[];(function(){for(var v=0;v<25;v++)g[v]=l.create()})();var _=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],b=0;b<25;b++)v[b]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,b){for(var x=this._state,E=this.blockSize/2,w=0;w<E;w++){var T=v[b+2*w],I=v[b+2*w+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;var k=x[w];k.high^=I,k.low^=T}for(var O=0;O<24;O++){for(var K=0;K<5;K++){for(var P=0,B=0,H=0;H<5;H++){var k=x[K+5*H];P^=k.high,B^=k.low}var $=g[K];$.high=P,$.low=B}for(var K=0;K<5;K++)for(var pe=g[(K+4)%5],me=g[(K+1)%5],he=me.high,Ee=me.low,P=pe.high^(he<<1|Ee>>>31),B=pe.low^(Ee<<1|he>>>31),H=0;H<5;H++){var k=x[K+5*H];k.high^=P,k.low^=B}for(var _e=1;_e<25;_e++){var P,B,k=x[_e],Be=k.high,Re=k.low,U=h[_e];U<32?(P=Be<<U|Re>>>32-U,B=Re<<U|Be>>>32-U):(P=Re<<U-32|Be>>>64-U,B=Be<<U-32|Re>>>64-U);var W=g[d[_e]];W.high=P,W.low=B}var J=g[0],Q=x[0];J.high=Q.high,J.low=Q.low;for(var K=0;K<5;K++)for(var H=0;H<5;H++){var _e=K+5*H,k=x[_e],st=g[_e],Pe=g[(K+1)%5+5*H],L=g[(K+2)%5+5*H];k.high=st.high^~Pe.high&L.high,k.low=st.low^~Pe.low&L.low}var k=x[0],X=f[O];k.high^=X.high,k.low^=X.low}},_doFinalize:function(){var v=this._data,b=v.words;this._nDataBytes*8;var x=v.sigBytes*8,E=this.blockSize*32;b[x>>>5]|=1<<24-x%32,b[(r.ceil((x+1)/E)*E>>>5)-1]|=128,v.sigBytes=b.length*4,this._process();for(var w=this._state,T=this.cfg.outputLength/8,I=T/8,k=[],O=0;O<I;O++){var K=w[O],P=K.high,B=K.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,k.push(B),k.push(P)}return new o.init(k,T)},clone:function(){for(var v=a.clone.call(this),b=v._state=this._state.slice(0),x=0;x<25;x++)b[x]=b[x].clone();return v}});i.SHA3=a._createHelper(_),i.HmacSHA3=a._createHmacHelper(_)}(Math),n.SHA3})}(n0)),n0.exports}var r0={exports:{}},uE;function A7(){return uE||(uE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=o.create([0,1518500249,1859775393,2400959708,2840853838]),g=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,k){for(var O=0;O<16;O++){var K=k+O,P=I[K];I[K]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var B=this._hash.words,H=f.words,$=g.words,pe=l.words,me=u.words,he=h.words,Ee=d.words,_e,Be,Re,U,W,J,Q,st,Pe,L;J=_e=B[0],Q=Be=B[1],st=Re=B[2],Pe=U=B[3],L=W=B[4];for(var X,O=0;O<80;O+=1)X=_e+I[k+pe[O]]|0,O<16?X+=v(Be,Re,U)+H[0]:O<32?X+=b(Be,Re,U)+H[1]:O<48?X+=x(Be,Re,U)+H[2]:O<64?X+=E(Be,Re,U)+H[3]:X+=w(Be,Re,U)+H[4],X=X|0,X=T(X,he[O]),X=X+W|0,_e=W,W=U,U=T(Re,10),Re=Be,Be=X,X=J+I[k+me[O]]|0,O<16?X+=w(Q,st,Pe)+$[0]:O<32?X+=E(Q,st,Pe)+$[1]:O<48?X+=x(Q,st,Pe)+$[2]:O<64?X+=b(Q,st,Pe)+$[3]:X+=v(Q,st,Pe)+$[4],X=X|0,X=T(X,Ee[O]),X=X+L|0,J=L,L=Pe,Pe=T(st,10),st=Q,Q=X;X=B[1]+Re+Pe|0,B[1]=B[2]+U+L|0,B[2]=B[3]+W+J|0,B[3]=B[4]+_e+Q|0,B[4]=B[0]+Be+st|0,B[0]=X},_doFinalize:function(){var I=this._data,k=I.words,O=this._nDataBytes*8,K=I.sigBytes*8;k[K>>>5]|=128<<24-K%32,k[(K+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,I.sigBytes=(k.length+1)*4,this._process();for(var P=this._hash,B=P.words,H=0;H<5;H++){var $=B[H];B[H]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return P},clone:function(){var I=a.clone.call(this);return I._hash=this._hash.clone(),I}});function v(I,k,O){return I^k^O}function b(I,k,O){return I&k|~I&O}function x(I,k,O){return(I|~k)^O}function E(I,k,O){return I&O|k&~O}function w(I,k,O){return I^(k|~O)}function T(I,k){return I<<k|I>>>32-k}i.RIPEMD160=a._createHelper(_),i.HmacRIPEMD160=a._createHmacHelper(_)}(),n.RIPEMD160})}(r0)),r0.exports}var i0={exports:{}},hE;function X_(){return hE||(hE=1,function(t,e){(function(n,r){t.exports=r(je())})(Le,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,c=r.algo;c.HMAC=s.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=a.parse(u));var h=l.blockSize,d=h*4;u.sigBytes>d&&(u=l.finalize(u)),u.clamp();for(var f=this._oKey=u.clone(),g=this._iKey=u.clone(),_=f.words,v=g.words,b=0;b<h;b++)_[b]^=1549556828,v[b]^=909522486;f.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,h=u.finalize(l);u.reset();var d=u.finalize(this._oKey.clone().concat(h));return d}})})()})}(i0)),i0.exports}var s0={exports:{}},dE;function T7(){return dE||(dE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Y_(),X_())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,c=a.SHA256,l=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var f=this.cfg,g=l.create(f.hasher,h),_=o.create(),v=o.create([1]),b=_.words,x=v.words,E=f.keySize,w=f.iterations;b.length<E;){var T=g.update(d).finalize(v);g.reset();for(var I=T.words,k=I.length,O=T,K=1;K<w;K++){O=g.finalize(O),g.reset();for(var P=O.words,B=0;B<k;B++)I[B]^=P[B]}_.concat(T),x[0]++}return _.sigBytes=E*4,_}});r.PBKDF2=function(h,d,f){return u.create(f).compute(h,d)}}(),n.PBKDF2})}(s0)),s0.exports}var o0={exports:{}},fE;function ts(){return fE||(fE=1,function(t,e){(function(n,r,i){t.exports=r(je(),S2(),X_())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,c=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,h){for(var d,f=this.cfg,g=f.hasher.create(),_=o.create(),v=_.words,b=f.keySize,x=f.iterations;v.length<b;){d&&g.update(d),d=g.update(u).finalize(h),g.reset();for(var E=1;E<x;E++)d=g.finalize(d),g.reset();_.concat(d)}return _.sigBytes=b*4,_}});r.EvpKDF=function(u,h,d){return l.create(d).compute(u,h)}}(),n.EvpKDF})}(o0)),o0.exports}var a0={exports:{}},pE;function en(){return pE||(pE=1,function(t,e){(function(n,r,i){t.exports=r(je(),ts())})(Le,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,c=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,h=i.algo,d=h.EvpKDF,f=s.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(P,B){return this.create(this._ENC_XFORM_MODE,P,B)},createDecryptor:function(P,B){return this.create(this._DEC_XFORM_MODE,P,B)},init:function(P,B,H){this.cfg=this.cfg.extend(H),this._xformMode=P,this._key=B,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){P&&this._append(P);var B=this._doFinalize();return B},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function P(B){return typeof B=="string"?K:I}return function(B){return{encrypt:function(H,$,pe){return P($).encrypt(B,H,$,pe)},decrypt:function(H,$,pe){return P($).decrypt(B,H,$,pe)}}}}()});s.StreamCipher=f.extend({_doFinalize:function(){var P=this._process(!0);return P},blockSize:1});var g=i.mode={},_=s.BlockCipherMode=o.extend({createEncryptor:function(P,B){return this.Encryptor.create(P,B)},createDecryptor:function(P,B){return this.Decryptor.create(P,B)},init:function(P,B){this._cipher=P,this._iv=B}}),v=g.CBC=function(){var P=_.extend();P.Encryptor=P.extend({processBlock:function(H,$){var pe=this._cipher,me=pe.blockSize;B.call(this,H,$,me),pe.encryptBlock(H,$),this._prevBlock=H.slice($,$+me)}}),P.Decryptor=P.extend({processBlock:function(H,$){var pe=this._cipher,me=pe.blockSize,he=H.slice($,$+me);pe.decryptBlock(H,$),B.call(this,H,$,me),this._prevBlock=he}});function B(H,$,pe){var me,he=this._iv;he?(me=he,this._iv=r):me=this._prevBlock;for(var Ee=0;Ee<pe;Ee++)H[$+Ee]^=me[Ee]}return P}(),b=i.pad={},x=b.Pkcs7={pad:function(P,B){for(var H=B*4,$=H-P.sigBytes%H,pe=$<<24|$<<16|$<<8|$,me=[],he=0;he<$;he+=4)me.push(pe);var Ee=a.create(me,$);P.concat(Ee)},unpad:function(P){var B=P.words[P.sigBytes-1>>>2]&255;P.sigBytes-=B}};s.BlockCipher=f.extend({cfg:f.cfg.extend({mode:v,padding:x}),reset:function(){var P;f.reset.call(this);var B=this.cfg,H=B.iv,$=B.mode;this._xformMode==this._ENC_XFORM_MODE?P=$.createEncryptor:(P=$.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==P?this._mode.init(this,H&&H.words):(this._mode=P.call($,this,H&&H.words),this._mode.__creator=P)},_doProcessBlock:function(P,B){this._mode.processBlock(P,B)},_doFinalize:function(){var P,B=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(B.pad(this._data,this.blockSize),P=this._process(!0)):(P=this._process(!0),B.unpad(P)),P},blockSize:128/32});var E=s.CipherParams=o.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),w=i.format={},T=w.OpenSSL={stringify:function(P){var B,H=P.ciphertext,$=P.salt;return $?B=a.create([1398893684,1701076831]).concat($).concat(H):B=H,B.toString(u)},parse:function(P){var B,H=u.parse(P),$=H.words;return $[0]==1398893684&&$[1]==1701076831&&(B=a.create($.slice(2,4)),$.splice(0,4),H.sigBytes-=16),E.create({ciphertext:H,salt:B})}},I=s.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(P,B,H,$){$=this.cfg.extend($);var pe=P.createEncryptor(H,$),me=pe.finalize(B),he=pe.cfg;return E.create({ciphertext:me,key:H,iv:he.iv,algorithm:P,mode:he.mode,padding:he.padding,blockSize:P.blockSize,formatter:$.format})},decrypt:function(P,B,H,$){$=this.cfg.extend($),B=this._parse(B,$.format);var pe=P.createDecryptor(H,$).finalize(B.ciphertext);return pe},_parse:function(P,B){return typeof P=="string"?B.parse(P,this):P}}),k=i.kdf={},O=k.OpenSSL={execute:function(P,B,H,$,pe){if($||($=a.random(64/8)),pe)var me=d.create({keySize:B+H,hasher:pe}).compute(P,$);else var me=d.create({keySize:B+H}).compute(P,$);var he=a.create(me.words.slice(B),H*4);return me.sigBytes=B*4,E.create({key:me,iv:he,salt:$})}},K=s.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:O}),encrypt:function(P,B,H,$){$=this.cfg.extend($);var pe=$.kdf.execute(H,P.keySize,P.ivSize,$.salt,$.hasher);$.iv=pe.iv;var me=I.encrypt.call(this,P,B,pe.key,$);return me.mixIn(pe),me},decrypt:function(P,B,H,$){$=this.cfg.extend($),B=this._parse(B,$.format);var pe=$.kdf.execute(H,P.keySize,P.ivSize,B.salt,$.hasher);$.iv=pe.iv;var me=I.decrypt.call(this,P,B,pe.key,$);return me}})}()})}(a0)),a0.exports}var c0={exports:{}},mE;function I7(){return mE||(mE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize;i.call(this,s,o,c,a),this._prevBlock=s.slice(o,o+c)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=s.slice(o,o+c);i.call(this,s,o,c,a),this._prevBlock=l}});function i(s,o,a,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var h=0;h<a;h++)s[o+h]^=l[h]}return r}(),n.mode.CFB})}(c0)),c0.exports}var l0={exports:{}},gE;function R7(){return gE||(gE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var h=u.slice(0);a.encryptBlock(h,0),u[c-1]=u[c-1]+1|0;for(var d=0;d<c;d++)s[o+d]^=h[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(l0)),l0.exports}var u0={exports:{}},_E;function S7(){return _E||(_E=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var c=a>>16&255,l=a>>8&255,u=a&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,a=0,a+=c<<16,a+=l<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,c){var l=this._cipher,u=l.blockSize,h=this._iv,d=this._counter;h&&(d=this._counter=h.slice(0),this._iv=void 0),s(d);var f=d.slice(0);l.encryptBlock(f,0);for(var g=0;g<u;g++)a[c+g]^=f[g]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(u0)),u0.exports}var h0={exports:{}},vE;function P7(){return vE||(vE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var h=0;h<c;h++)s[o+h]^=u[h]}});return r.Decryptor=i,r}(),n.mode.OFB})}(h0)),h0.exports}var d0={exports:{}},yE;function k7(){return yE||(yE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(d0)),d0.exports}var f0={exports:{}},xE;function D7(){return xE||(xE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,c=s+a-1;r.clamp(),r.words[c>>>2]|=a<<24-c%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(f0)),f0.exports}var p0={exports:{}},EE;function N7(){return EE||(EE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(p0)),p0.exports}var m0={exports:{}},wE;function O7(){return wE||(wE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(m0)),m0.exports}var g0={exports:{}},bE;function F7(){return bE||(bE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(g0)),g0.exports}var _0={exports:{}},CE;function M7(){return CE||(CE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(_0)),_0.exports}var v0={exports:{}},AE;function B7(){return AE||(AE=1,function(t,e){(function(n,r,i){t.exports=r(je(),en())})(Le,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,c=a.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var h=c.parse(u);return o.create({ciphertext:h})}}}(),n.format.Hex})}(v0)),v0.exports}var y0={exports:{}},TE;function L7(){return TE||(TE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Gs(),Qs(),ts(),en())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],c=[],l=[],u=[],h=[],d=[],f=[],g=[],_=[],v=[];(function(){for(var E=[],w=0;w<256;w++)w<128?E[w]=w<<1:E[w]=w<<1^283;for(var T=0,I=0,w=0;w<256;w++){var k=I^I<<1^I<<2^I<<3^I<<4;k=k>>>8^k&255^99,a[T]=k,c[k]=T;var O=E[T],K=E[O],P=E[K],B=E[k]*257^k*16843008;l[T]=B<<24|B>>>8,u[T]=B<<16|B>>>16,h[T]=B<<8|B>>>24,d[T]=B;var B=P*16843009^K*65537^O*257^T*16843008;f[k]=B<<24|B>>>8,g[k]=B<<16|B>>>16,_[k]=B<<8|B>>>24,v[k]=B,T?(T=O^E[E[E[P^O]]],I^=E[E[I]]):T=I=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],x=o.AES=s.extend({_doReset:function(){var E;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,T=w.words,I=w.sigBytes/4,k=this._nRounds=I+6,O=(k+1)*4,K=this._keySchedule=[],P=0;P<O;P++)P<I?K[P]=T[P]:(E=K[P-1],P%I?I>6&&P%I==4&&(E=a[E>>>24]<<24|a[E>>>16&255]<<16|a[E>>>8&255]<<8|a[E&255]):(E=E<<8|E>>>24,E=a[E>>>24]<<24|a[E>>>16&255]<<16|a[E>>>8&255]<<8|a[E&255],E^=b[P/I|0]<<24),K[P]=K[P-I]^E);for(var B=this._invKeySchedule=[],H=0;H<O;H++){var P=O-H;if(H%4)var E=K[P];else var E=K[P-4];H<4||P<=4?B[H]=E:B[H]=f[a[E>>>24]]^g[a[E>>>16&255]]^_[a[E>>>8&255]]^v[a[E&255]]}}},encryptBlock:function(E,w){this._doCryptBlock(E,w,this._keySchedule,l,u,h,d,a)},decryptBlock:function(E,w){var T=E[w+1];E[w+1]=E[w+3],E[w+3]=T,this._doCryptBlock(E,w,this._invKeySchedule,f,g,_,v,c);var T=E[w+1];E[w+1]=E[w+3],E[w+3]=T},_doCryptBlock:function(E,w,T,I,k,O,K,P){for(var B=this._nRounds,H=E[w]^T[0],$=E[w+1]^T[1],pe=E[w+2]^T[2],me=E[w+3]^T[3],he=4,Ee=1;Ee<B;Ee++){var _e=I[H>>>24]^k[$>>>16&255]^O[pe>>>8&255]^K[me&255]^T[he++],Be=I[$>>>24]^k[pe>>>16&255]^O[me>>>8&255]^K[H&255]^T[he++],Re=I[pe>>>24]^k[me>>>16&255]^O[H>>>8&255]^K[$&255]^T[he++],U=I[me>>>24]^k[H>>>16&255]^O[$>>>8&255]^K[pe&255]^T[he++];H=_e,$=Be,pe=Re,me=U}var _e=(P[H>>>24]<<24|P[$>>>16&255]<<16|P[pe>>>8&255]<<8|P[me&255])^T[he++],Be=(P[$>>>24]<<24|P[pe>>>16&255]<<16|P[me>>>8&255]<<8|P[H&255])^T[he++],Re=(P[pe>>>24]<<24|P[me>>>16&255]<<16|P[H>>>8&255]<<8|P[$&255])^T[he++],U=(P[me>>>24]<<24|P[H>>>16&255]<<16|P[$>>>8&255]<<8|P[pe&255])^T[he++];E[w]=_e,E[w+1]=Be,E[w+2]=Re,E[w+3]=U},keySize:256/32});r.AES=s._createHelper(x)}(),n.AES})}(y0)),y0.exports}var x0={exports:{}},IE;function V7(){return IE||(IE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Gs(),Qs(),ts(),en())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=a.DES=o.extend({_doReset:function(){for(var b=this._key,x=b.words,E=[],w=0;w<56;w++){var T=c[w]-1;E[w]=x[T>>>5]>>>31-T%32&1}for(var I=this._subKeys=[],k=0;k<16;k++){for(var O=I[k]=[],K=u[k],w=0;w<24;w++)O[w/6|0]|=E[(l[w]-1+K)%28]<<31-w%6,O[4+(w/6|0)]|=E[28+(l[w+24]-1+K)%28]<<31-w%6;O[0]=O[0]<<1|O[0]>>>31;for(var w=1;w<7;w++)O[w]=O[w]>>>(w-1)*4+3;O[7]=O[7]<<5|O[7]>>>27}for(var P=this._invSubKeys=[],w=0;w<16;w++)P[w]=I[15-w]},encryptBlock:function(b,x){this._doCryptBlock(b,x,this._subKeys)},decryptBlock:function(b,x){this._doCryptBlock(b,x,this._invSubKeys)},_doCryptBlock:function(b,x,E){this._lBlock=b[x],this._rBlock=b[x+1],g.call(this,4,252645135),g.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),g.call(this,1,1431655765);for(var w=0;w<16;w++){for(var T=E[w],I=this._lBlock,k=this._rBlock,O=0,K=0;K<8;K++)O|=h[K][((k^T[K])&d[K])>>>0];this._lBlock=k,this._rBlock=I^O}var P=this._lBlock;this._lBlock=this._rBlock,this._rBlock=P,g.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),b[x]=this._lBlock,b[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(b,x){var E=(this._lBlock>>>b^this._rBlock)&x;this._rBlock^=E,this._lBlock^=E<<b}function _(b,x){var E=(this._rBlock>>>b^this._lBlock)&x;this._lBlock^=E,this._rBlock^=E<<b}r.DES=o._createHelper(f);var v=a.TripleDES=o.extend({_doReset:function(){var b=this._key,x=b.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var E=x.slice(0,2),w=x.length<4?x.slice(0,2):x.slice(2,4),T=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=f.createEncryptor(s.create(E)),this._des2=f.createEncryptor(s.create(w)),this._des3=f.createEncryptor(s.create(T))},encryptBlock:function(b,x){this._des1.encryptBlock(b,x),this._des2.decryptBlock(b,x),this._des3.encryptBlock(b,x)},decryptBlock:function(b,x){this._des3.decryptBlock(b,x),this._des2.encryptBlock(b,x),this._des1.decryptBlock(b,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(v)}(),n.TripleDES})}(x0)),x0.exports}var E0={exports:{}},RE;function $7(){return RE||(RE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Gs(),Qs(),ts(),en())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var u=this._key,h=u.words,d=u.sigBytes,f=this._S=[],g=0;g<256;g++)f[g]=g;for(var g=0,_=0;g<256;g++){var v=g%d,b=h[v>>>2]>>>24-v%4*8&255;_=(_+f[g]+b)%256;var x=f[g];f[g]=f[_],f[_]=x}this._i=this._j=0},_doProcessBlock:function(u,h){u[h]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,h=this._i,d=this._j,f=0,g=0;g<4;g++){h=(h+1)%256,d=(d+u[h])%256;var _=u[h];u[h]=u[d],u[d]=_,f|=u[(u[h]+u[d])%256]<<24-g*8}return this._i=h,this._j=d,f}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(E0)),E0.exports}var w0={exports:{}},SE;function U7(){return SE||(SE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Gs(),Qs(),ts(),en())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],c=[],l=[],u=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,f=this.cfg.iv,g=0;g<4;g++)d[g]=(d[g]<<8|d[g]>>>24)&16711935|(d[g]<<24|d[g]>>>8)&4278255360;var _=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],v=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)h.call(this);for(var g=0;g<8;g++)v[g]^=_[g+4&7];if(f){var b=f.words,x=b[0],E=b[1],w=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,I=w>>>16|T&4294901760,k=T<<16|w&65535;v[0]^=w,v[1]^=I,v[2]^=T,v[3]^=k,v[4]^=w,v[5]^=I,v[6]^=T,v[7]^=k;for(var g=0;g<4;g++)h.call(this)}},_doProcessBlock:function(d,f){var g=this._X;h.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,d[f+_]^=a[_]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,f=this._C,g=0;g<8;g++)c[g]=f[g];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var _=d[g]+f[g],v=_&65535,b=_>>>16,x=((v*v>>>17)+v*b>>>15)+b*b,E=((_&4294901760)*_|0)+((_&65535)*_|0);l[g]=x^E}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(u)}(),n.Rabbit})}(w0)),w0.exports}var b0={exports:{}},PE;function H7(){return PE||(PE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Gs(),Qs(),ts(),en())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],c=[],l=[],u=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,f=this.cfg.iv,g=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],_=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var v=0;v<4;v++)h.call(this);for(var v=0;v<8;v++)_[v]^=g[v+4&7];if(f){var b=f.words,x=b[0],E=b[1],w=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,I=w>>>16|T&4294901760,k=T<<16|w&65535;_[0]^=w,_[1]^=I,_[2]^=T,_[3]^=k,_[4]^=w,_[5]^=I,_[6]^=T,_[7]^=k;for(var v=0;v<4;v++)h.call(this)}},_doProcessBlock:function(d,f){var g=this._X;h.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,d[f+_]^=a[_]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,f=this._C,g=0;g<8;g++)c[g]=f[g];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var _=d[g]+f[g],v=_&65535,b=_>>>16,x=((v*v>>>17)+v*b>>>15)+b*b,E=((_&4294901760)*_|0)+((_&65535)*_|0);l[g]=x^E}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(u)}(),n.RabbitLegacy})}(b0)),b0.exports}var C0={exports:{}},kE;function j7(){return kE||(kE=1,function(t,e){(function(n,r,i){t.exports=r(je(),Gs(),Qs(),ts(),en())})(Le,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function h(v,b){let x=b>>24&255,E=b>>16&255,w=b>>8&255,T=b&255,I=v.sbox[0][x]+v.sbox[1][E];return I=I^v.sbox[2][w],I=I+v.sbox[3][T],I}function d(v,b,x){let E=b,w=x,T;for(let I=0;I<a;++I)E=E^v.pbox[I],w=h(v,E)^w,T=E,E=w,w=T;return T=E,E=w,w=T,w=w^v.pbox[a],E=E^v.pbox[a+1],{left:E,right:w}}function f(v,b,x){let E=b,w=x,T;for(let I=a+1;I>1;--I)E=E^v.pbox[I],w=h(v,E)^w,T=E,E=w,w=T;return T=E,E=w,w=T,w=w^v.pbox[1],E=E^v.pbox[0],{left:E,right:w}}function g(v,b,x){for(let k=0;k<4;k++){v.sbox[k]=[];for(let O=0;O<256;O++)v.sbox[k][O]=l[k][O]}let E=0;for(let k=0;k<a+2;k++)v.pbox[k]=c[k]^b[E],E++,E>=x&&(E=0);let w=0,T=0,I=0;for(let k=0;k<a+2;k+=2)I=d(v,w,T),w=I.left,T=I.right,v.pbox[k]=w,v.pbox[k+1]=T;for(let k=0;k<4;k++)for(let O=0;O<256;O+=2)I=d(v,w,T),w=I.left,T=I.right,v.sbox[k][O]=w,v.sbox[k][O+1]=T;return!0}var _=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,b=v.words,x=v.sigBytes/4;g(u,b,x)}},encryptBlock:function(v,b){var x=d(u,v[b],v[b+1]);v[b]=x.left,v[b+1]=x.right},decryptBlock:function(v,b){var x=f(u,v[b],v[b+1]);v[b]=x.left,v[b+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(_)}(),n.Blowfish})}(C0)),C0.exports}(function(t,e){(function(n,r,i){t.exports=r(je(),Nd(),y7(),x7(),Gs(),E7(),Qs(),S2(),Y_(),w7(),P2(),b7(),C7(),A7(),X_(),T7(),ts(),en(),I7(),R7(),S7(),P7(),k7(),D7(),N7(),O7(),F7(),M7(),B7(),L7(),V7(),$7(),U7(),H7(),j7())})(Le,function(n){return n})})(R2);var im=R2.exports;const z7={class:"qrcode"},q7=ir({__name:"QrCode",props:{codeString:{}},setup(t){const e=t,n=ft(null),r=getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-on-background"),i=getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-background"),s=()=>{const a=Math.floor(Math.random()*1e5).toString(),c=im.AES.encrypt(`${e.codeString}|${new Date().getTime()}`,a),l=btoa(`${a}|${c}`);p7(n.value,l,{color:{dark:r,light:i},scale:7})};let o;return jm(()=>{s(),o=window.setInterval(s,1e3)}),$c(()=>{clearInterval(o)}),(a,c)=>(mt(),Pt("div",z7,[rt("canvas",{ref_key:"canvas",ref:n},null,512)]))}});const k2=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},W7=k2(q7,[["__scopeId","data-v-d8afc0af"]]),K7=(t,e)=>e.some(n=>t instanceof n);let DE,NE;function G7(){return DE||(DE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q7(){return NE||(NE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D2=new WeakMap,sm=new WeakMap,N2=new WeakMap,A0=new WeakMap,J_=new WeakMap;function Y7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&D2.set(n,t)}).catch(()=>{}),J_.set(e,t),e}function X7(t){if(sm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sm.set(t,e)}let om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J7(t){om=t(om)}function Z7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(T0(this),e,...n);return N2.set(r,e.sort?e.sort():[e]),Vi(r)}:Q7().includes(t)?function(...e){return t.apply(T0(this),e),Vi(D2.get(this))}:function(...e){return Vi(t.apply(T0(this),e))}}function eU(t){return typeof t=="function"?Z7(t):(t instanceof IDBTransaction&&X7(t),K7(t,G7())?new Proxy(t,om):t)}function Vi(t){if(t instanceof IDBRequest)return Y7(t);if(A0.has(t))return A0.get(t);const e=eU(t);return e!==t&&(A0.set(t,e),J_.set(e,t)),e}const T0=t=>J_.get(t);function tU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Vi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Vi(o.result),c.oldVersion,c.newVersion,Vi(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const nU=["get","getKey","getAll","getAllKeys","count"],rU=["put","add","delete","clear"],I0=new Map;function OE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(I0.get(e))return I0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nU.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return I0.set(e,s),s}J7(t=>({...t,get:(e,n,r)=>OE(e,n)||t.get(e,n,r),has:(e,n)=>!!OE(e,n)||t.has(e,n)}));const O2="@firebase/installations",Z_="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=1e4,M2=`w:${Z_}`,B2="FIS_v2",iU="https://firebaseinstallations.googleapis.com/v1",sU=60*60*1e3,oU="installations",aU="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ms=new Gi(oU,aU,cU);function L2(t){return t instanceof sr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2({projectId:t}){return`${iU}/projects/${t}/installations`}function $2(t){return{token:t.token,requestStatus:2,expiresIn:uU(t.expiresIn),creationTime:Date.now()}}async function U2(t,e){const r=(await e.json()).error;return Ms.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function H2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function lU(t,{refreshToken:e}){const n=H2(t);return n.append("Authorization",hU(e)),n}async function j2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function uU(t){return Number(t.replace("s","000"))}function hU(t){return`${B2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=V2(t),i=H2(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={fid:n,authVersion:B2,appId:t.appId,sdkVersion:M2},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await j2(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:$2(l.authToken)}}else throw await U2("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=/^[cdef][\w-]{21}$/,am="";function mU(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=gU(t);return pU.test(n)?n:am}catch{return am}}function gU(t){return fU(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Map;function W2(t,e){const n=Od(t);K2(n,e),_U(n,e)}function K2(t,e){const n=q2.get(t);if(n)for(const r of n)r(e)}function _U(t,e){const n=vU();n&&n.postMessage({key:t,fid:e}),yU()}let _s=null;function vU(){return!_s&&"BroadcastChannel"in self&&(_s=new BroadcastChannel("[Firebase] FID Change"),_s.onmessage=t=>{K2(t.data.key,t.data.fid)}),_s}function yU(){q2.size===0&&_s&&(_s.close(),_s=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="firebase-installations-database",EU=1,Bs="firebase-installations-store";let R0=null;function ev(){return R0||(R0=tU(xU,EU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bs)}}})),R0}async function gh(t,e){const n=Od(t),i=(await ev()).transaction(Bs,"readwrite"),s=i.objectStore(Bs),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&W2(t,e.fid),e}async function G2(t){const e=Od(t),r=(await ev()).transaction(Bs,"readwrite");await r.objectStore(Bs).delete(e),await r.done}async function Fd(t,e){const n=Od(t),i=(await ev()).transaction(Bs,"readwrite"),s=i.objectStore(Bs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&W2(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(t){let e;const n=await Fd(t.appConfig,r=>{const i=wU(r),s=bU(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===am?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function wU(t){const e=t||{fid:mU(),registrationStatus:0};return Q2(e)}function bU(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ms.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=CU(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AU(t)}:{installationEntry:e}}async function CU(t,e){try{const n=await dU(t,e);return gh(t.appConfig,n)}catch(n){throw L2(n)&&n.customData.serverCode===409?await G2(t.appConfig):await gh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function AU(t){let e=await FE(t.appConfig);for(;e.registrationStatus===1;)await z2(100),e=await FE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await tv(t);return r||n}return e}function FE(t){return Fd(t,e=>{if(!e)throw Ms.create("installation-not-found");return Q2(e)})}function Q2(t){return TU(t)?{fid:t.fid,registrationStatus:0}:t}function TU(t){return t.registrationStatus===1&&t.registrationTime+F2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU({appConfig:t,heartbeatServiceProvider:e},n){const r=RU(t,n),i=lU(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={installation:{sdkVersion:M2,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await j2(()=>fetch(r,a));if(c.ok){const l=await c.json();return $2(l)}else throw await U2("Generate Auth Token",c)}function RU(t,{fid:e}){return`${V2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv(t,e=!1){let n;const r=await Fd(t.appConfig,s=>{if(!Y2(s))throw Ms.create("not-registered");const o=s.authToken;if(!e&&kU(o))return s;if(o.requestStatus===1)return n=SU(t,e),s;{if(!navigator.onLine)throw Ms.create("app-offline");const a=NU(s);return n=PU(t,a),a}});return n?await n:r.authToken}async function SU(t,e){let n=await ME(t.appConfig);for(;n.authToken.requestStatus===1;)await z2(100),n=await ME(t.appConfig);const r=n.authToken;return r.requestStatus===0?nv(t,e):r}function ME(t){return Fd(t,e=>{if(!Y2(e))throw Ms.create("not-registered");const n=e.authToken;return OU(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function PU(t,e){try{const n=await IU(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await gh(t.appConfig,r),n}catch(n){if(L2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await G2(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await gh(t.appConfig,r)}throw n}}function Y2(t){return t!==void 0&&t.registrationStatus===2}function kU(t){return t.requestStatus===2&&!DU(t)}function DU(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+sU}function NU(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OU(t){return t.requestStatus===1&&t.requestTime+F2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t){const e=t,{installationEntry:n,registrationPromise:r}=await tv(e);return r?r.catch(console.error):nv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t,e=!1){const n=t;return await BU(n),(await nv(n,e)).token}async function BU(t){const{registrationPromise:e}=await tv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){if(!t||!t.options)throw S0("App Configuration");if(!t.name)throw S0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw S0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function S0(t){return Ms.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="installations",VU="installations-internal",$U=t=>{const e=t.getProvider("app").getImmediate(),n=LU(e),r=$s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},UU=t=>{const e=t.getProvider("app").getImmediate(),n=$s(e,X2).getImmediate();return{getId:()=>FU(n),getToken:i=>MU(n,i)}};function HU(){Vn(new Pn(X2,$U,"PUBLIC")),Vn(new Pn(VU,UU,"PRIVATE"))}HU();ln(O2,Z_);ln(O2,Z_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="analytics",jU="firebase_id",zU="origin",qU=60*1e3,WU="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Zo("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gn=new Gi("analytics","Analytics",KU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){if(!t.startsWith(rv)){const e=Gn.create("invalid-gtag-resource",{gtagURL:t});return Mn.warn(e.message),""}return t}function J2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function QU(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function YU(t,e){const n=QU("firebase-js-sdk-policy",{createScriptURL:GU}),r=document.createElement("script"),i=`${rv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function XU(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function JU(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await J2(n)).find(l=>l.measurementId===i);c&&await e[c.appId]}}catch(a){Mn.error(a)}t("config",i,s)}async function ZU(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await J2(n);for(const c of o){const l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Mn.error(s)}}function eH(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await ZU(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await JU(t,e,n,r,a,c)}else if(s==="consent"){const[a]=o;t("consent","update",a)}else if(s==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Mn.error(a)}}return i}function tH(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=eH(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function nH(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(rv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=30,iH=1e3;class sH{constructor(e={},n=iH){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Z2=new sH;function oH(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function aH(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:oH(r)},s=WU.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function cH(t,e=Z2,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Gn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Gn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new hH;return setTimeout(async()=>{a.abort()},n!==void 0?n:qU),eR({appId:r,apiKey:i,measurementId:s},o,a,e)}async function eR(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Z2){var s;const{appId:o,measurementId:a}=t;try{await lH(r,e)}catch(c){if(a)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await aH(t);return i.deleteThrottleMetadata(o),c}catch(c){const l=c;if(!uH(l)){if(i.deleteThrottleMetadata(o),a)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw c}const u=Number((s=l==null?void 0:l.customData)===null||s===void 0?void 0:s.httpStatus)===503?Ny(n,i.intervalMillis,rH):Ny(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,h),Mn.debug(`Calling attemptFetch again in ${u} millis`),eR(t,h,r,i)}}function lH(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uH(t){if(!(t instanceof sr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class hH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function dH(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(){if(Jm())try{await Mb()}catch(t){return Mn.warn(Gn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Mn.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function pH(t,e,n,r,i,s,o){var a;const c=cH(t);c.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Mn.error(f)),e.push(c);const l=fH().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,l]);nH(s)||YU(s,u.measurementId),i("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[zU]="firebase",d.update=!0,h!=null&&(d[jU]=h),i("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e){this.app=e}_delete(){return delete nc[this.app.options.appId],Promise.resolve()}}let nc={},BE=[];const LE={};let P0="dataLayer",gH="gtag",VE,tR,$E=!1;function _H(){const t=[];if(Nb()&&t.push("This is a browser extension environment."),MN()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Gn.create("invalid-analytics-context",{errorInfo:e});Mn.warn(n.message)}}function vH(t,e,n){_H();const r=t.options.appId;if(!r)throw Gn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gn.create("no-api-key");if(nc[r]!=null)throw Gn.create("already-exists",{id:r});if(!$E){XU(P0);const{wrappedGtag:s,gtagCore:o}=tH(nc,BE,LE,P0,gH);tR=s,VE=o,$E=!0}return nc[r]=pH(t,BE,LE,e,VE,P0,n),new mH(t)}function yH(t=Vh()){t=At(t);const e=$s(t,_h);return e.isInitialized()?e.getImmediate():xH(t)}function xH(t,e={}){const n=$s(t,_h);if(n.isInitialized()){const i=n.getImmediate();if(dc(e,n.getOptions()))return i;throw Gn.create("already-initialized")}return n.initialize({options:e})}function EH(t,e,n,r){t=At(t),dH(tR,nc[t.app.options.appId],e,n,r).catch(i=>Mn.error(i))}const UE="@firebase/analytics",HE="0.10.0";function wH(){Vn(new Pn(_h,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return vH(r,i,n)},"PUBLIC")),Vn(new Pn("analytics-internal",t,"PRIVATE")),ln(UE,HE),ln(UE,HE,"esm2017");function t(e){try{const n=e.getProvider(_h).getImmediate();return{logEvent:(r,i,s)=>EH(n,r,i,s)}}catch(n){throw Gn.create("interop-component-reg-failed",{reason:n})}}}wH();const bH={apiKey:"AIzaSyBBi5IzyoAfCGZPdIjY_Unn13awXzMY3QQ",authDomain:"presenzapp.firebaseapp.com",projectId:"presenzapp",storageBucket:"presenzapp.appspot.com",messagingSenderId:"121965141290",appId:"1:121965141290:web:5bda310c5531b4849b9253",measurementId:"G-X4JEPSW9DH"},iv=$b(bH),fr=bV(iv);yH(iv);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ar=t=>e=>typeof e=="function"?((n,r)=>(customElements.define(n,r),r))(t,e):((n,r)=>{const{kind:i,elements:s}=r;return{kind:i,elements:s,finisher(o){customElements.define(n,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const CH=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}},AH=(t,e,n)=>{e.constructor.createProperty(n,t)};function Ve(t){return(e,n)=>n!==void 0?AH(t,e,n):CH(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ns(t){return Ve({...t,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const nR=({finisher:t,descriptor:e})=>(n,r)=>{var i;if(r===void 0){const s=(i=n.originalKey)!==null&&i!==void 0?i:n.key,o=e!=null?{kind:"method",placement:"prototype",key:s,descriptor:e(n.key)}:{...n,key:s};return t!=null&&(o.finisher=function(a){t(a,s)}),o}{const s=n.constructor;e!==void 0&&Object.defineProperty(n,r,e(r)),t==null||t(s,r)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function or(t,e){return nR({descriptor:n=>{const r={get(){var i,s;return(s=(i=this.renderRoot)===null||i===void 0?void 0:i.querySelector(t))!==null&&s!==void 0?s:null},enumerable:!0,configurable:!0};if(e){const i=typeof n=="symbol"?Symbol():"__"+n;r.get=function(){var s,o;return this[i]===void 0&&(this[i]=(o=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(t))!==null&&o!==void 0?o:null),this[i]}}return r}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var k0;const TH=((k0=window.HTMLSlotElement)===null||k0===void 0?void 0:k0.prototype.assignedElements)!=null?(t,e)=>t.assignedElements(e):(t,e)=>t.assignedNodes(e).filter(n=>n.nodeType===Node.ELEMENT_NODE);function IH(t){const{slot:e,selector:n}=t??{};return nR({descriptor:r=>({get(){var i;const s="slot"+(e?`[name=${e}]`:":not([name])"),o=(i=this.renderRoot)===null||i===void 0?void 0:i.querySelector(s),a=o!=null?TH(o,t):[];return n?a.filter(c=>c.matches(n)):a},enumerable:!0,configurable:!0})})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pu=window,sv=pu.ShadowRoot&&(pu.ShadyCSS===void 0||pu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ov=Symbol(),jE=new WeakMap;let rR=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==ov)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(sv&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=jE.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&jE.set(n,e))}return e}toString(){return this.cssText}};const RH=t=>new rR(typeof t=="string"?t:t+"",void 0,ov),$n=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new rR(n,t,ov)},SH=(t,e)=>{sv?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=pu.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},zE=sv?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return RH(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var D0;const vh=window,qE=vh.trustedTypes,PH=qE?qE.emptyScript:"",WE=vh.reactiveElementPolyfillSupport,cm={toAttribute(t,e){switch(e){case Boolean:t=t?PH:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},iR=(t,e)=>e!==t&&(e==e||t==t),N0={attribute:!0,type:String,converter:cm,reflect:!1,hasChanged:iR},lm="finalized";let so=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=N0){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const s=this[e];this[n]=i,this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||N0}static finalize(){if(this.hasOwnProperty(lm))return!1;this[lm]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(zE(i))}else e!==void 0&&n.push(zE(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return SH(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=N0){var i;const s=this.constructor._$Ep(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:cm).toAttribute(n,r.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?o.converter:cm;this._$El=s,this[s]=a.fromAttribute(n,o.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||iR)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};so[lm]=!0,so.elementProperties=new Map,so.elementStyles=[],so.shadowRootOptions={mode:"open"},WE==null||WE({ReactiveElement:so}),((D0=vh.reactiveElementVersions)!==null&&D0!==void 0?D0:vh.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var O0;const yh=window,qo=yh.trustedTypes,KE=qo?qo.createPolicy("lit-html",{createHTML:t=>t}):void 0,um="$lit$",Ri=`lit$${(Math.random()+"").slice(9)}$`,sR="?"+Ri,kH=`<${sR}>`,Ls=document,Fc=()=>Ls.createComment(""),Mc=t=>t===null||typeof t!="object"&&typeof t!="function",oR=Array.isArray,DH=t=>oR(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",F0=`[ 	
\f\r]`,Ra=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,GE=/-->/g,QE=/>/g,os=RegExp(`>|${F0}(?:([^\\s"'>=/]+)(${F0}*=${F0}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),YE=/'/g,XE=/"/g,aR=/^(?:script|style|textarea|title)$/i,NH=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),dt=NH(1),Vs=Symbol.for("lit-noChange"),Ne=Symbol.for("lit-nothing"),JE=new WeakMap,vs=Ls.createTreeWalker(Ls,129,null,!1);function cR(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return KE!==void 0?KE.createHTML(e):e}const OH=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":"",o=Ra;for(let a=0;a<n;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===Ra?u[1]==="!--"?o=GE:u[1]!==void 0?o=QE:u[2]!==void 0?(aR.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=os):u[3]!==void 0&&(o=os):o===os?u[0]===">"?(o=i??Ra,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?os:u[3]==='"'?XE:YE):o===XE||o===YE?o=os:o===GE||o===QE?o=Ra:(o=os,i=void 0);const f=o===os&&t[a+1].startsWith("/>")?" ":"";s+=o===Ra?c+kH:h>=0?(r.push(l),c.slice(0,h)+um+c.slice(h)+Ri+f):c+Ri+(h===-2?(r.push(void 0),a):f)}return[cR(t,s+(t[n]||"<?>")+(e===2?"</svg>":"")),r]};class Bc{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=OH(e,n);if(this.el=Bc.createElement(l,r),vs.currentNode=this.el.content,n===2){const h=this.el.content,d=h.firstChild;d.remove(),h.append(...d.childNodes)}for(;(i=vs.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const h=[];for(const d of i.getAttributeNames())if(d.endsWith(um)||d.startsWith(Ri)){const f=u[o++];if(h.push(d),f!==void 0){const g=i.getAttribute(f.toLowerCase()+um).split(Ri),_=/([.?@])?(.*)/.exec(f);c.push({type:1,index:s,name:_[2],strings:g,ctor:_[1]==="."?MH:_[1]==="?"?LH:_[1]==="@"?VH:Md})}else c.push({type:6,index:s})}for(const d of h)i.removeAttribute(d)}if(aR.test(i.tagName)){const h=i.textContent.split(Ri),d=h.length-1;if(d>0){i.textContent=qo?qo.emptyScript:"";for(let f=0;f<d;f++)i.append(h[f],Fc()),vs.nextNode(),c.push({type:2,index:++s});i.append(h[d],Fc())}}}else if(i.nodeType===8)if(i.data===sR)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Ri,h+1))!==-1;)c.push({type:7,index:s}),h+=Ri.length-1}s++}}static createElement(e,n){const r=Ls.createElement("template");return r.innerHTML=e,r}}function Wo(t,e,n=t,r){var i,s,o,a;if(e===Vs)return e;let c=r!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[r]:n._$Cl;const l=Mc(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==l&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,n,r)),r!==void 0?((o=(a=n)._$Co)!==null&&o!==void 0?o:a._$Co=[])[r]=c:n._$Cl=c),c!==void 0&&(e=Wo(t,c._$AS(t,e.values),c,r)),e}class FH{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var n;const{el:{content:r},parts:i}=this._$AD,s=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:Ls).importNode(r,!0);vs.currentNode=s;let o=vs.nextNode(),a=0,c=0,l=i[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new ml(o,o.nextSibling,this,e):l.type===1?u=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(u=new $H(o,this,e)),this._$AV.push(u),l=i[++c]}a!==(l==null?void 0:l.index)&&(o=vs.nextNode(),a++)}return vs.currentNode=Ls,s}v(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class ml{constructor(e,n,r,i){var s;this.type=2,this._$AH=Ne,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Wo(this,e,n),Mc(e)?e===Ne||e==null||e===""?(this._$AH!==Ne&&this._$AR(),this._$AH=Ne):e!==this._$AH&&e!==Vs&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):DH(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Ne&&Mc(this._$AH)?this._$AA.nextSibling.data=e:this.$(Ls.createTextNode(e)),this._$AH=e}g(e){var n;const{values:r,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Bc.createElement(cR(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.v(r);else{const o=new FH(s,this),a=o.u(this.options);o.v(r),this.$(a),this._$AH=o}}_$AC(e){let n=JE.get(e.strings);return n===void 0&&JE.set(e.strings,n=new Bc(e)),n}T(e){oR(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new ml(this.k(Fc()),this.k(Fc()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cp=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class Md{constructor(e,n,r,i,s){this.type=1,this._$AH=Ne,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ne}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=Wo(this,e,n,0),o=!Mc(e)||e!==this._$AH&&e!==Vs,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Wo(this,a[r+c],n,c),l===Vs&&(l=this._$AH[c]),o||(o=!Mc(l)||l!==this._$AH[c]),l===Ne?e=Ne:e!==Ne&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Ne?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class MH extends Md{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ne?void 0:e}}const BH=qo?qo.emptyScript:"";class LH extends Md{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Ne?this.element.setAttribute(this.name,BH):this.element.removeAttribute(this.name)}}class VH extends Md{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){var r;if((e=(r=Wo(this,e,n,0))!==null&&r!==void 0?r:Ne)===Vs)return;const i=this._$AH,s=e===Ne&&i!==Ne||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==Ne&&(i===Ne||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class $H{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Wo(this,e)}}const ZE=yh.litHtmlPolyfillSupport;ZE==null||ZE(Bc,ml),((O0=yh.litHtmlVersions)!==null&&O0!==void 0?O0:yh.litHtmlVersions=[]).push("2.8.0");const UH=(t,e,n)=>{var r,i;const s=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let o=s._$litPart$;if(o===void 0){const a=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new ml(e.insertBefore(Fc(),a),a,void 0,n??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var M0,B0;let Bn=class extends so{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=UH(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Vs}};Bn.finalized=!0,Bn._$litElement$=!0,(M0=globalThis.litElementHydrateSupport)===null||M0===void 0||M0.call(globalThis,{LitElement:Bn});const ew=globalThis.litElementPolyfillSupport;ew==null||ew({LitElement:Bn});((B0=globalThis.litElementVersions)!==null&&B0!==void 0?B0:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HH extends Bn{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return dt`<span class="shadow"></span>`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jH=$n`:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}:host{display:flex;pointer-events:none;transition-property:box-shadow,opacity}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hm=class extends HH{};hm.styles=[jH];hm=de([Ar("md-elevation")],hm);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lR=Symbol("attachableController");let mu;mu=new MutationObserver(t=>{var e;for(const n of t)(e=n.target[lR])==null||e.hostConnected()});class uR{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(e){e===null?this.host.removeAttribute("for"):this.host.setAttribute("for",e)}get control(){return this.host.hasAttribute("for")?!this.htmlFor||!this.host.isConnected?null:this.host.getRootNode().querySelector(`#${this.htmlFor}`):this.currentControl||this.host.parentElement}set control(e){e?this.attach(e):this.detach()}constructor(e,n){this.host=e,this.onControlChange=n,this.currentControl=null,e.addController(this),e[lR]=this,mu==null||mu.observe(e,{attributeFilter:["for"]})}attach(e){e!==this.currentControl&&(this.setCurrentControl(e),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(e){this.onControlChange(this.currentControl,e),this.currentControl=e}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zH=["focusin","focusout","pointerdown"];class av extends Bn{constructor(){super(...arguments),this.visible=!1,this.inward=!1,this.attachableController=new uR(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}handleEvent(e){var n;if(!e[tw]){switch(e.type){default:return;case"focusin":this.visible=((n=this.control)==null?void 0:n.matches(":focus-visible"))??!1;break;case"focusout":case"pointerdown":this.visible=!1;break}e[tw]=!0}}onControlChange(e,n){for(const r of zH)e==null||e.removeEventListener(r,this),n==null||n.addEventListener(r,this)}update(e){e.has("visible")&&this.dispatchEvent(new Event("visibility-changed")),super.update(e)}}de([Ve({type:Boolean,reflect:!0})],av.prototype,"visible",void 0);de([Ve({type:Boolean,reflect:!0})],av.prototype,"inward",void 0);const tw=Symbol("handledByFocusRing");/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qH=$n`:host{animation-delay:0s,calc(var(--md-focus-ring-duration, 600ms)*.25);animation-duration:calc(var(--md-focus-ring-duration, 600ms)*.25),calc(var(--md-focus-ring-duration, 600ms)*.75);animation-timing-function:cubic-bezier(0.2, 0, 0, 1);box-sizing:border-box;color:var(--md-focus-ring-color, var(--md-sys-color-secondary, #625b71));display:none;pointer-events:none;position:absolute}:host([visible]){display:flex}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));inset:calc(-1*var(--md-focus-ring-outward-offset, 2px));outline:var(--md-focus-ring-width, 3px) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border:var(--md-focus-ring-width, 3px) solid currentColor;inset:var(--md-focus-ring-inward-offset, 0px)}@keyframes outward-grow{from{outline-width:0}to{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes outward-shrink{from{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-grow{from{border-width:0}to{border-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-shrink{from{border-width:var(--md-focus-ring-active-width, 8px)}}@media(prefers-reduced-motion){:host{animation:none}}
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dm=class extends av{};dm.styles=[qH];dm=de([Ar("md-focus-ring")],dm);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const WH={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},KH=t=>(...e)=>({_$litDirective$:t,values:e});let GH=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ko=KH(class extends GH{constructor(t){var e;if(super(t),t.type!==WH.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var n,r;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((n=this.nt)===null||n===void 0)&&n.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((r=this.nt)===null||r===void 0)&&r.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return Vs}});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lc={STANDARD:"cubic-bezier(0.2, 0, 0, 1)",STANDARD_ACCELERATE:"cubic-bezier(.3,0,1,1)",STANDARD_DECELERATE:"cubic-bezier(0,0,0,1)",EMPHASIZED:"cubic-bezier(.3,0,0,1)",EMPHASIZED_ACCELERATE:"cubic-bezier(.3,0,.8,.15)",EMPHASIZED_DECELERATE:"cubic-bezier(.05,.7,.1,1)"};/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QH=450,nw=225,YH=.2,XH=10,JH=75,ZH=.35,ej="::after",tj="forwards";var In;(function(t){t[t.INACTIVE=0]="INACTIVE",t[t.TOUCH_DELAY=1]="TOUCH_DELAY",t[t.HOLDING=2]="HOLDING",t[t.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"})(In||(In={}));const nj=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],rj=150,L0=window.matchMedia("(forced-colors: active)");class gl extends Bn{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=In.INACTIVE,this.checkBoundsAfterContextMenu=!1,this.attachableController=new uR(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){const e={hovered:this.hovered,pressed:this.pressed};return dt`<div class="surface ${Ko(e)}"></div>`}update(e){e.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(e)}handlePointerenter(e){this.shouldReactToEvent(e)&&(this.hovered=!0)}handlePointerleave(e){this.shouldReactToEvent(e)&&(this.hovered=!1,this.state!==In.INACTIVE&&this.endPressAnimation())}handlePointerup(e){if(this.shouldReactToEvent(e)){if(this.state===In.HOLDING){this.state=In.WAITING_FOR_CLICK;return}if(this.state===In.TOUCH_DELAY){this.state=In.WAITING_FOR_CLICK,this.startPressAnimation(this.rippleStartEvent);return}}}async handlePointerdown(e){if(this.shouldReactToEvent(e)){if(this.rippleStartEvent=e,!this.isTouch(e)){this.state=In.WAITING_FOR_CLICK,this.startPressAnimation(e);return}this.checkBoundsAfterContextMenu&&!this.inBounds(e)||(this.checkBoundsAfterContextMenu=!1,this.state=In.TOUCH_DELAY,await new Promise(n=>{setTimeout(n,rj)}),this.state===In.TOUCH_DELAY&&(this.state=In.HOLDING,this.startPressAnimation(e)))}}handleClick(){if(!this.disabled){if(this.state===In.WAITING_FOR_CLICK){this.endPressAnimation();return}this.state===In.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation())}}handlePointercancel(e){this.shouldReactToEvent(e)&&this.endPressAnimation()}handleContextmenu(){this.disabled||(this.checkBoundsAfterContextMenu=!0,this.endPressAnimation())}determineRippleSize(){const{height:e,width:n}=this.getBoundingClientRect(),r=Math.max(e,n),i=Math.max(ZH*r,JH),s=Math.floor(r*YH),a=Math.sqrt(n**2+e**2)+XH;this.initialSize=s,this.rippleScale=`${(a+i)/s}`,this.rippleSize=`${s}px`}getNormalizedPointerEventCoords(e){const{scrollX:n,scrollY:r}=window,{left:i,top:s}=this.getBoundingClientRect(),o=n+i,a=r+s,{pageX:c,pageY:l}=e;return{x:c-o,y:l-a}}getTranslationCoordinates(e){const{height:n,width:r}=this.getBoundingClientRect(),i={x:(r-this.initialSize)/2,y:(n-this.initialSize)/2};let s;return e instanceof PointerEvent?s=this.getNormalizedPointerEventCoords(e):s={x:r/2,y:n/2},s={x:s.x-this.initialSize/2,y:s.y-this.initialSize/2},{startPoint:s,endPoint:i}}startPressAnimation(e){var o;if(!this.mdRoot)return;this.pressed=!0,(o=this.growAnimation)==null||o.cancel(),this.determineRippleSize();const{startPoint:n,endPoint:r}=this.getTranslationCoordinates(e),i=`${n.x}px, ${n.y}px`,s=`${r.x}px, ${r.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${i}) scale(1)`,`translate(${s}) scale(${this.rippleScale})`]},{pseudoElement:ej,duration:QH,easing:Lc.STANDARD,fill:tj})}async endPressAnimation(){this.rippleStartEvent=void 0,this.state=In.INACTIVE;const e=this.growAnimation;let n=1/0;if(typeof(e==null?void 0:e.currentTime)=="number"?n=e.currentTime:e!=null&&e.currentTime&&(n=e.currentTime.to("ms").value),n>=nw){this.pressed=!1;return}await new Promise(r=>{setTimeout(r,nw-n)}),this.growAnimation===e&&(this.pressed=!1)}shouldReactToEvent(e){if(this.disabled||!e.isPrimary||this.rippleStartEvent&&this.rippleStartEvent.pointerId!==e.pointerId)return!1;if(e.type==="pointerenter"||e.type==="pointerleave")return!this.isTouch(e);const n=e.buttons===1;return this.isTouch(e)||n}inBounds({x:e,y:n}){const{top:r,left:i,bottom:s,right:o}=this.getBoundingClientRect();return e>=i&&e<=o&&n>=r&&n<=s}isTouch({pointerType:e}){return e==="touch"}async handleEvent(e){if(!(L0!=null&&L0.matches))switch(e.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(e);break;case"pointerdown":await this.handlePointerdown(e);break;case"pointerenter":this.handlePointerenter(e);break;case"pointerleave":this.handlePointerleave(e);break;case"pointerup":this.handlePointerup(e);break}}onControlChange(e,n){for(const r of nj)e==null||e.removeEventListener(r,this),n==null||n.addEventListener(r,this)}}de([Ve({type:Boolean,reflect:!0})],gl.prototype,"disabled",void 0);de([ns()],gl.prototype,"hovered",void 0);de([ns()],gl.prototype,"pressed",void 0);de([or(".surface")],gl.prototype,"mdRoot",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ij=$n`:host{display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors: active){:host{display:none}}:host,.surface{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:rgba(0,0,0,0)}.surface::before,.surface::after{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side, var(--md-ripple-pressed-color, var(--md-sys-color-on-surface, #1d1b20)) max(100% - 70px, 65%), transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-ripple-hover-opacity, 0.08)}.pressed::after{opacity:var(--md-ripple-pressed-opacity, 0.12);transition-duration:105ms}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fm=class extends gl{};fm.styles=[ij];fm=de([Ar("md-ripple")],fm);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hR=["ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText"];hR.map(dR);function dR(t){return t.replace("aria","aria-").replace(/Elements?/g,"").toLowerCase()}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _l(t){for(const e of hR)t.createProperty(e,{attribute:dR(e),reflect:!0});t.addInitializer(e=>{const n={hostConnected(){e.setAttribute("role","presentation")}};e.addController(n)})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const On=Symbol("internals"),V0=Symbol("privateInternals");function cv(t){class e extends t{get[On](){return this[V0]||(this[V0]=this.attachInternals()),this[V0]}}return e}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fR(t){t.addInitializer(e=>{const n=e;n.addEventListener("click",async r=>{const{type:i,[On]:s}=n,{form:o}=s;if(!(!o||i==="button")&&(await new Promise(a=>{setTimeout(a)}),!r.defaultPrevented)){if(i==="reset"){o.reset();return}o.addEventListener("submit",a=>{Object.defineProperty(a,"submitter",{configurable:!0,enumerable:!0,get:()=>n})},{capture:!0,once:!0}),s.setFormValue(n.value),o.requestSubmit()}})})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pR(t){const e=new MouseEvent("click",{bubbles:!0});return t.dispatchEvent(e),e}function mR(t){return t.currentTarget!==t.target||t.composedPath()[0]!==t.target||t.target.disabled?!1:!sj(t)}function sj(t){const e=pm;return e&&(t.preventDefault(),t.stopImmediatePropagation()),oj(),e}let pm=!1;async function oj(){pm=!0,await null,pm=!1}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aj=cv(Bn);class kn extends aj{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[On].form}constructor(){super(),this.disabled=!1,this.href="",this.target="",this.trailingIcon=!1,this.hasIcon=!1,this.type="submit",this.value="",this.handleActivationClick=e=>{!mR(e)||!this.buttonElement||(this.focus(),pR(this.buttonElement))},this.addEventListener("click",this.handleActivationClick)}focus(){var e;(e=this.buttonElement)==null||e.focus()}blur(){var e;(e=this.buttonElement)==null||e.blur()}render(){var i;const e=this.disabled&&!this.href,n=this.href?this.renderLink():this.renderButton(),r=this.href?"link":"button";return dt`
      ${(i=this.renderElevationOrOutline)==null?void 0:i.call(this)}
      <div class="background"></div>
      <md-focus-ring part="focus-ring" for=${r}></md-focus-ring>
      <md-ripple for=${r} ?disabled="${e}"></md-ripple>
      ${n}
    `}renderButton(){const{ariaLabel:e,ariaHasPopup:n,ariaExpanded:r}=this;return dt`<button
      id="button"
      class="button"
      ?disabled=${this.disabled}
      aria-label="${e||Ne}"
      aria-haspopup="${n||Ne}"
      aria-expanded="${r||Ne}">
      ${this.renderContent()}
    </button>`}renderLink(){const{ariaLabel:e,ariaHasPopup:n,ariaExpanded:r}=this;return dt`<a
      id="link"
      class="button"
      aria-label="${e||Ne}"
      aria-haspopup="${n||Ne}"
      aria-expanded="${r||Ne}"
      href=${this.href}
      target=${this.target||Ne}
      >${this.renderContent()}
    </a>`}renderContent(){const e=dt`<slot
      name="icon"
      @slotchange="${this.handleSlotChange}"></slot>`;return dt`
      <span class="touch"></span>
      ${this.trailingIcon?Ne:e}
      <span class="label"><slot></slot></span>
      ${this.trailingIcon?e:Ne}
    `}handleSlotChange(){this.hasIcon=this.assignedIcons.length>0}}_l(kn),fR(kn);kn.formAssociated=!0;kn.shadowRootOptions={mode:"open",delegatesFocus:!0};de([Ve({type:Boolean,reflect:!0})],kn.prototype,"disabled",void 0);de([Ve()],kn.prototype,"href",void 0);de([Ve()],kn.prototype,"target",void 0);de([Ve({type:Boolean,attribute:"trailing-icon",reflect:!0})],kn.prototype,"trailingIcon",void 0);de([Ve({type:Boolean,attribute:"has-icon",reflect:!0})],kn.prototype,"hasIcon",void 0);de([Ve()],kn.prototype,"type",void 0);de([Ve({reflect:!0})],kn.prototype,"value",void 0);de([or(".button")],kn.prototype,"buttonElement",void 0);de([IH({slot:"icon",flatten:!0})],kn.prototype,"assignedIcons",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cj extends kn{renderElevationOrOutline(){return dt`<md-elevation part="elevation"></md-elevation>`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lj=$n`:host{--_container-color: var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation: var(--md-filled-tonal-button-container-elevation, 0);--_container-height: var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color: var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color: var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation: var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color: var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity: var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-font: var(--md-filled-tonal-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-tonal-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-filled-tonal-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-filled-tonal-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation: var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color: var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity: var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color: var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color: var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size: var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_container-shape-start-start: var(--md-filled-tonal-button-container-shape-start-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-filled-tonal-button-container-shape-start-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-filled-tonal-button-container-shape-end-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-filled-tonal-button-container-shape-end-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space: var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px)}
`;/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uj=$n`md-elevation{transition-duration:280ms}:host([disabled]) md-elevation{transition:none}md-elevation{--md-elevation-level: var(--_container-elevation);--md-elevation-shadow-color: var(--_container-shadow-color)}:host(:focus-within) md-elevation{--md-elevation-level: var(--_focus-container-elevation)}:host(:hover) md-elevation{--md-elevation-level: var(--_hover-container-elevation)}:host(:active) md-elevation{--md-elevation-level: var(--_pressed-container-elevation)}:host([disabled]) md-elevation{--md-elevation-level: var(--_disabled-container-elevation)}
`;/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gR=$n`:host{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end);box-sizing:border-box;cursor:pointer;display:inline-flex;gap:8px;min-height:var(--_container-height);outline:none;padding-block:calc((var(--_container-height) - max(var(--_label-text-line-height),var(--_icon-size)))/2);padding-inline-start:var(--_leading-space);padding-inline-end:var(--_trailing-space);place-content:center;place-items:center;position:relative;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-overflow:ellipsis;text-wrap:nowrap;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);vertical-align:top;--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){cursor:default;pointer-events:none}.button{border-radius:inherit;cursor:inherit;display:inline-flex;align-items:center;justify-content:center;border:none;outline:none;-webkit-appearance:none;vertical-align:middle;background:rgba(0,0,0,0);text-decoration:none;min-width:calc(64px - var(--_leading-space) - var(--_trailing-space));width:100%;z-index:0;height:100%;font:inherit;color:var(--_label-text-color);padding:0;gap:inherit;text-transform:inherit}.button::-moz-focus-inner{padding:0;border:0}:host(:hover) .button{color:var(--_hover-label-text-color)}:host(:focus-within) .button{color:var(--_focus-label-text-color)}:host(:active) .button{color:var(--_pressed-label-text-color)}.background{background-color:var(--_container-color);border-radius:inherit;inset:0;position:absolute}.label{overflow:hidden}:is(.button,.label,.label slot),.label ::slotted(*){text-overflow:inherit}:host([disabled]) .label{color:var(--_disabled-label-text-color);opacity:var(--_disabled-label-text-opacity)}:host([disabled]) .background{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}@media(forced-colors: active){.background{border:1px solid CanvasText}:host([disabled]){--_disabled-icon-color: GrayText;--_disabled-icon-opacity: 1;--_disabled-container-opacity: 1;--_disabled-label-text-color: GrayText;--_disabled-label-text-opacity: 1}}:host([has-icon]:not([trailing-icon])){padding-inline-start:var(--_with-leading-icon-leading-space);padding-inline-end:var(--_with-leading-icon-trailing-space)}:host([has-icon][trailing-icon]){padding-inline-start:var(--_with-trailing-icon-leading-space);padding-inline-end:var(--_with-trailing-icon-trailing-space)}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;flex-shrink:0;color:var(--_icon-color);font-size:var(--_icon-size);inline-size:var(--_icon-size);block-size:var(--_icon-size)}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus-within) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host([disabled]) ::slotted([slot=icon]){color:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) 0}:host([touch-target=none]) .touch{display:none}
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mm=class extends cj{};mm.styles=[gR,uj,lj];mm=de([Ar("md-filled-tonal-button")],mm);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ua extends Bn{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return dt`
      <div
        class="progress ${Ko(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${e||Ne}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?Ne:this.value}
        >${this.renderIndicator()}</div
      >
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}_l(ua);de([Ve({type:Number})],ua.prototype,"value",void 0);de([Ve({type:Number})],ua.prototype,"max",void 0);de([Ve({type:Boolean})],ua.prototype,"indeterminate",void 0);de([Ve({type:Boolean,attribute:"four-color"})],ua.prototype,"fourColor",void 0);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hj extends ua{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=(1-this.value/this.max)*100;return dt`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle
          class="active-track"
          pathLength="100"
          stroke-dashoffset=${e}></circle>
      </svg>
    `}renderIndeterminateContainer(){return dt` <div class="spinner">
      <div class="left">
        <div class="circle"></div>
      </div>
      <div class="right">
        <div class="circle"></div>
      </div>
    </div>`}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dj=$n`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gm=class extends hj{};gm.styles=[dj];gm=de([Ar("md-circular-progress")],gm);const fj={id:"remote"},pj={key:0,indeterminate:""},mj=ir({__name:"RemoteCode",props:{codeString:{}},setup(t){var a;const e=t,n=ft(!1),r=ft(!1);ft();const i=zh(),s=z_(ii(fr,`users/${(a=i.value)==null?void 0:a.uid}`));async function o(){n.value=!0,await o2(fr,async c=>{var l,u,h;c.set(ii(fr,`scans/${new Date().getTime()}`),{code:e.codeString,timestamp:uh(),username:(l=s.value)==null?void 0:l.username,userRef:ii(fr,`users/${(u=i.value)==null?void 0:u.uid}`)}),c.update(ii(fr,`users/${(h=i.value)==null?void 0:h.uid}`),{lastPunchTime:uh()})}),n.value=!1,r.value=!0}return(c,l)=>(mt(),Pt("div",fj,[n.value?(mt(),Pt("md-circular-progress",pj)):(mt(),Pt("md-filled-tonal-button",{key:1,onClick:o}," Timbra "))]))}});var _R=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},gj=(t,e,n)=>(_R(t,e,"read from private field"),n?n.call(t):e.get(t)),_j=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},vj=(t,e,n,r)=>(_R(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);const rw=["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e","unknown"];function yj(t){if(vR(t))return{width:t.naturalWidth,height:t.naturalHeight};if(yR(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(xR(t))return{width:t.videoWidth,height:t.videoHeight};if(xj(t))return{width:t.width,height:t.height};if(ER(t))return{width:t.width,height:t.height};if(Ej(t))return{width:t.width,height:t.height};if(wR(t))return{width:t.displayWidth,height:t.displayHeight};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function vR(t){try{return t instanceof HTMLImageElement}catch{return!1}}function yR(t){try{return t instanceof SVGImageElement}catch{return!1}}function xR(t){try{return t instanceof HTMLVideoElement}catch{return!1}}function xj(t){try{return t instanceof HTMLCanvasElement}catch{return!1}}function ER(t){try{return t instanceof ImageBitmap}catch{return!1}}function Ej(t){try{return t instanceof OffscreenCanvas}catch{return!1}}function wR(t){try{return t instanceof VideoFrame}catch{return!1}}function wj(t){try{return t instanceof Blob}catch{return!1}}function bj(t){try{return t instanceof ImageData}catch{return!1}}function Cj(t,e){try{const n=new OffscreenCanvas(t,e);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function bR(t){if(vR(t)&&!await Ij(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(yR(t)&&!await Rj(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(wR(t)&&Sj(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(xR(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(ER(t)&&kj(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:n}=yj(t);if(e===0||n===0)return null;const r=Cj(e,n).getContext("2d");r.drawImage(t,0,0);try{return r.getImageData(0,0,e,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Aj(t){let e;try{e=await createImageBitmap(t)}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await bR(e)}async function Tj(t){if(wj(t))return await Aj(t);if(bj(t)){if(Pj(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return await bR(t)}async function Ij(t){try{return await t.decode(),!0}catch{return!1}}async function Rj(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function Sj(t){return t.format===null}function Pj(t){return t.data.buffer.byteLength===0}function kj(t){return t.width===0&&t.height===0}function iw(t,e){return t instanceof DOMException?new DOMException(`${e}: ${t.message}`,t.name):t instanceof Error?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}const sw=t=>{let e;const n=new Set,r=(o,a)=>{const c=typeof o=="function"?o(e):o;if(!Object.is(c,e)){const l=e;e=a??typeof c!="object"?c:Object.assign({},e,c),n.forEach(u=>u(e,l))}},i=()=>e,s={setState:r,getState:i,subscribe:o=>(n.add(o),()=>n.delete(o)),destroy:()=>{n.clear()}};return e=t(r,i,s),s},Dj=t=>t?sw(t):sw,Nj={locateFile:(t,e)=>{var n;const r=(n=t.match(/_(.+?)\.wasm$/))==null?void 0:n[1];return r?`https://cdn.jsdelivr.net/npm/@sec-ant/zxing-wasm@2.1.3/dist/${r}/${t}`:e+t}},Va=Dj()(()=>({zxingModuleWeakMap:new WeakMap,zxingModuleOverrides:Nj}));function CR(t,e=Va.getState().zxingModuleOverrides){const{zxingModuleWeakMap:n}=Va.getState(),r=n.get(t);if(r&&Object.is(e,Va.getState().zxingModuleOverrides))return r;{Va.setState({zxingModuleOverrides:e});const i=t(e);return n.set(t,i),i}}const ow=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","UPC-A","UPC-E"],Di={tryHarder:!0,formats:[],maxSymbols:255};async function Oj(t,{tryHarder:e=Di.tryHarder,formats:n=Di.formats,maxSymbols:r=Di.maxSymbols}=Di,i){const s=await CR(i,Va.getState().zxingModuleOverrides),{data:o,width:a,height:c,data:{byteLength:l}}=t,u=s._malloc(l);s.HEAP8.set(o,u);const h=s.readBarcodesFromPixmap(u,a,c,e,Fj(n),r);s._free(u);const d=[];for(let f=0;f<h.size();++f){const g=h.get(f);d.push({...g,format:Mj(g.format)})}return d}function Fj(t){return t.join("|")}function Mj(t){const e=aw(t);let n=0,r=ow.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=ow[i],o=aw(s);if(o===e)return s;o<e?n=i+1:r=i-1}return"None"}function aw(t){return t.toLowerCase().replace(/_-\[\]/g,"")}var AR=(()=>{var t=import.meta.url;return function(e={}){var n=e,r,i;n.ready=new Promise((p,m)=>{r=p,i=m});var s=Object.assign({},n),o="./this.program",a=typeof window=="object",c=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var l="";function u(p){return n.locateFile?n.locateFile(p,l):l+p}var h;(a||c)&&(c?l=self.location.href:typeof document<"u"&&document.currentScript&&(l=document.currentScript.src),t&&(l=t),l.indexOf("blob:")!==0?l=l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):l="",c&&(h=p=>{var m=new XMLHttpRequest;return m.open("GET",p,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)})),n.print||console.log.bind(console);var d=n.printErr||console.error.bind(console);Object.assign(n,s),s=null,n.arguments&&n.arguments,n.thisProgram&&(o=n.thisProgram),n.quit&&n.quit;var f;n.wasmBinary&&(f=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&Q("no native wasm support detected");var g,_,v=!1,b,x,E,w,T,I,k,O;function K(){var p=g.buffer;n.HEAP8=b=new Int8Array(p),n.HEAP16=E=new Int16Array(p),n.HEAP32=T=new Int32Array(p),n.HEAPU8=x=new Uint8Array(p),n.HEAPU16=w=new Uint16Array(p),n.HEAPU32=I=new Uint32Array(p),n.HEAPF32=k=new Float32Array(p),n.HEAPF64=O=new Float64Array(p)}var P,B=[],H=[],$=[];function pe(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Ee(n.preRun.shift());R(B)}function me(){R(H)}function he(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Be(n.postRun.shift());R($)}function Ee(p){B.unshift(p)}function _e(p){H.unshift(p)}function Be(p){$.unshift(p)}var Re=0,U=null;function W(p){Re++,n.monitorRunDependencies&&n.monitorRunDependencies(Re)}function J(p){if(Re--,n.monitorRunDependencies&&n.monitorRunDependencies(Re),Re==0&&U){var m=U;U=null,m()}}function Q(p){n.onAbort&&n.onAbort(p),p="Aborted("+p+")",d(p),v=!0,p+=". Build with -sASSERTIONS for more info.";var m=new WebAssembly.RuntimeError(p);throw i(m),m}var st="data:application/octet-stream;base64,";function Pe(p){return p.startsWith(st)}var L;n.locateFile?(L="zxing_reader.wasm",Pe(L)||(L=u(L))):L=new URL("/reader/zxing_reader.wasm",self.location).href;function X(p){if(p==L&&f)return new Uint8Array(f);if(h)return h(p);throw"both async and sync fetching of the wasm failed"}function ie(p){return!f&&(a||c)&&typeof fetch=="function"?fetch(p,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw"failed to load wasm binary file at '"+p+"'";return m.arrayBuffer()}).catch(()=>X(p)):Promise.resolve().then(()=>X(p))}function ge(p,m,y){return ie(p).then(C=>WebAssembly.instantiate(C,m)).then(C=>C).then(y,C=>{d("failed to asynchronously prepare wasm: "+C),Q(C)})}function $e(p,m,y,C){return!p&&typeof WebAssembly.instantiateStreaming=="function"&&!Pe(m)&&typeof fetch=="function"?fetch(m,{credentials:"same-origin"}).then(S=>{var D=WebAssembly.instantiateStreaming(S,y);return D.then(C,function(F){return d("wasm streaming compile failed: "+F),d("falling back to ArrayBuffer instantiation"),ge(m,y,C)})}):ge(m,y,C)}function A(){var p={a:hP};function m(C,S){var D=C.exports;return _=D,g=_.qa,K(),P=_.ua,_e(_.ra),J(),D}W();function y(C){m(C.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(p,m)}catch(C){d("Module.instantiateWasm callback failed with error: "+C),i(C)}return $e(f,L,p,y).catch(i),{}}var R=p=>{for(;p.length>0;)p.shift()(n)},N=[],V=0;function q(p){var m=new ee(p);return m.get_caught()||(m.set_caught(!0),V--),m.set_rethrown(!1),N.push(m),kv(m.excPtr),m.get_exception_ptr()}var G=0;function se(){We(0,0);var p=N.pop();Pv(p.excPtr),G=0}function ee(p){this.excPtr=p,this.ptr=p-24,this.set_type=function(m){I[this.ptr+4>>2]=m},this.get_type=function(){return I[this.ptr+4>>2]},this.set_destructor=function(m){I[this.ptr+8>>2]=m},this.get_destructor=function(){return I[this.ptr+8>>2]},this.set_caught=function(m){m=m?1:0,b[this.ptr+12>>0]=m},this.get_caught=function(){return b[this.ptr+12>>0]!=0},this.set_rethrown=function(m){m=m?1:0,b[this.ptr+13>>0]=m},this.get_rethrown=function(){return b[this.ptr+13>>0]!=0},this.init=function(m,y){this.set_adjusted_ptr(0),this.set_type(m),this.set_destructor(y)},this.set_adjusted_ptr=function(m){I[this.ptr+16>>2]=m},this.get_adjusted_ptr=function(){return I[this.ptr+16>>2]},this.get_exception_ptr=function(){var m=Nv(this.get_type());if(m)return I[this.excPtr>>2];var y=this.get_adjusted_ptr();return y!==0?y:this.excPtr}}function re(p){throw G||(G=p),G}var Y=p=>{var m=G;if(!m)return _a(0),0;var y=new ee(m);y.set_adjusted_ptr(m);var C=y.get_type();if(!C)return _a(0),m;for(var S in p){var D=p[S];if(D===0||D===C)break;var F=y.ptr+16;if(Dv(D,C,F))return _a(D),m}return _a(C),m},fe=()=>Y([]),le=p=>Y([p]),ve=(p,m)=>Y([p,m]);function Ae(p){var m=new ee(p).get_exception_ptr();return m}function De(){var p=N.pop();p||Q("no exception to throw");var m=p.excPtr;throw p.get_rethrown()||(N.push(p),p.set_rethrown(!0),p.set_caught(!1),V++),G=m,G}function ze(p,m,y){var C=new ee(p);throw C.init(m,y),G=p,V++,G}function tt(){return V}var ht={};function tn(p){for(;p.length;){var m=p.pop(),y=p.pop();y(m)}}function Mt(p){return this.fromWireType(T[p>>2])}var Cn={},An={},Tr={},Bt=void 0;function nn(p){throw new Bt(p)}function Xn(p,m,y){p.forEach(function(M){Tr[M]=m});function C(M){var j=y(M);j.length!==p.length&&nn("Mismatched type converter count");for(var Z=0;Z<p.length;++Z)ar(p[Z],j[Z])}var S=new Array(m.length),D=[],F=0;m.forEach((M,j)=>{An.hasOwnProperty(M)?S[j]=An[M]:(D.push(M),Cn.hasOwnProperty(M)||(Cn[M]=[]),Cn[M].push(()=>{S[j]=An[M],++F,F===D.length&&C(S)}))}),D.length===0&&C(S)}var vl=function(p){var m=ht[p];delete ht[p];var y=m.rawConstructor,C=m.rawDestructor,S=m.fields,D=S.map(F=>F.getterReturnType).concat(S.map(F=>F.setterArgumentType));Xn([p],D,F=>{var M={};return S.forEach((j,Z)=>{var ue=j.fieldName,be=F[Z],Te=j.getter,Je=j.getterContext,wt=F[Z+S.length],Ht=j.setter,bt=j.setterContext;M[ue]={read:jt=>be.fromWireType(Te(Je,jt)),write:(jt,te)=>{var ye=[];Ht(bt,jt,wt.toWireType(ye,te)),tn(ye)}}}),[{name:m.name,fromWireType:function(j){var Z={};for(var ue in M)Z[ue]=M[ue].read(j);return C(j),Z},toWireType:function(j,Z){for(var ue in M)if(!(ue in Z))throw new TypeError(`Missing field: "${ue}"`);var be=y();for(ue in M)M[ue].write(be,Z[ue]);return j!==null&&j.push(C,be),be},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:C}]})};function $d(p,m,y,C,S){}function Ys(p){switch(p){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${p}`)}}function Ud(){for(var p=new Array(256),m=0;m<256;++m)p[m]=String.fromCharCode(m);ha=p}var ha=void 0;function Ut(p){for(var m="",y=p;x[y];)m+=ha[x[y++]];return m}var gi=void 0;function qe(p){throw new gi(p)}function yl(p,m,y={}){var C=m.name;if(p||qe(`type "${C}" must have a positive integer typeid pointer`),An.hasOwnProperty(p)){if(y.ignoreDuplicateRegistrations)return;qe(`Cannot register type '${C}' twice`)}if(An[p]=m,delete Tr[p],Cn.hasOwnProperty(p)){var S=Cn[p];delete Cn[p],S.forEach(D=>D())}}function ar(p,m,y={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return yl(p,m,y)}function Hd(p,m,y,C,S){var D=Ys(y);m=Ut(m),ar(p,{name:m,fromWireType:function(F){return!!F},toWireType:function(F,M){return M?C:S},argPackAdvance:8,readValueFromPointer:function(F){var M;if(y===1)M=b;else if(y===2)M=E;else if(y===4)M=T;else throw new TypeError("Unknown boolean type size: "+m);return this.fromWireType(M[F>>D])},destructorFunction:null})}function xl(p){if(!(this instanceof _i)||!(p instanceof _i))return!1;for(var m=this.$$.ptrType.registeredClass,y=this.$$.ptr,C=p.$$.ptrType.registeredClass,S=p.$$.ptr;m.baseClass;)y=m.upcast(y),m=m.baseClass;for(;C.baseClass;)S=C.upcast(S),C=C.baseClass;return m===C&&y===S}function jd(p){return{count:p.count,deleteScheduled:p.deleteScheduled,preservePointerOnDelete:p.preservePointerOnDelete,ptr:p.ptr,ptrType:p.ptrType,smartPtr:p.smartPtr,smartPtrType:p.smartPtrType}}function Xs(p){function m(y){return y.$$.ptrType.registeredClass.name}qe(m(p)+" instance already deleted")}var rn=!1;function cr(p){}function El(p){p.smartPtr?p.smartPtrType.rawDestructor(p.smartPtr):p.ptrType.registeredClass.rawDestructor(p.ptr)}function wl(p){p.count.value-=1;var m=p.count.value===0;m&&El(p)}function lv(p,m,y){if(m===y)return p;if(y.baseClass===void 0)return null;var C=lv(p,m,y.baseClass);return C===null?null:y.downcast(C)}var uv={};function zR(){return Object.keys(pa).length}function qR(){var p=[];for(var m in pa)pa.hasOwnProperty(m)&&p.push(pa[m]);return p}var da=[];function zd(){for(;da.length;){var p=da.pop();p.$$.deleteScheduled=!1,p.delete()}}var fa=void 0;function WR(p){fa=p,da.length&&fa&&fa(zd)}function KR(){n.getInheritedInstanceCount=zR,n.getLiveInheritedInstances=qR,n.flushPendingDeletes=zd,n.setDelayFunction=WR}var pa={};function GR(p,m){for(m===void 0&&qe("ptr should not be undefined");p.baseClass;)m=p.upcast(m),p=p.baseClass;return m}function QR(p,m){return m=GR(p,m),pa[m]}function bl(p,m){(!m.ptrType||!m.ptr)&&nn("makeClassHandle requires ptr and ptrType");var y=!!m.smartPtrType,C=!!m.smartPtr;return y!==C&&nn("Both smartPtrType and smartPtr must be specified"),m.count={value:1},ma(Object.create(p,{$$:{value:m}}))}function YR(p){var m=this.getPointee(p);if(!m)return this.destructor(p),null;var y=QR(this.registeredClass,m);if(y!==void 0){if(y.$$.count.value===0)return y.$$.ptr=m,y.$$.smartPtr=p,y.clone();var C=y.clone();return this.destructor(p),C}function S(){return this.isSmartPointer?bl(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:m,smartPtrType:this,smartPtr:p}):bl(this.registeredClass.instancePrototype,{ptrType:this,ptr:p})}var D=this.registeredClass.getActualType(m),F=uv[D];if(!F)return S.call(this);var M;this.isConst?M=F.constPointerType:M=F.pointerType;var j=lv(m,this.registeredClass,M.registeredClass);return j===null?S.call(this):this.isSmartPointer?bl(M.registeredClass.instancePrototype,{ptrType:M,ptr:j,smartPtrType:this,smartPtr:p}):bl(M.registeredClass.instancePrototype,{ptrType:M,ptr:j})}var ma=function(p){return typeof FinalizationRegistry>"u"?(ma=m=>m,p):(rn=new FinalizationRegistry(m=>{wl(m.$$)}),ma=m=>{var y=m.$$,C=!!y.smartPtr;if(C){var S={$$:y};rn.register(m,S,m)}return m},cr=m=>rn.unregister(m),ma(p))};function XR(){if(this.$$.ptr||Xs(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var p=ma(Object.create(Object.getPrototypeOf(this),{$$:{value:jd(this.$$)}}));return p.$$.count.value+=1,p.$$.deleteScheduled=!1,p}function JR(){this.$$.ptr||Xs(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&qe("Object already scheduled for deletion"),cr(this),wl(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ZR(){return!this.$$.ptr}function eS(){return this.$$.ptr||Xs(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&qe("Object already scheduled for deletion"),da.push(this),da.length===1&&fa&&fa(zd),this.$$.deleteScheduled=!0,this}function tS(){_i.prototype.isAliasOf=xl,_i.prototype.clone=XR,_i.prototype.delete=JR,_i.prototype.isDeleted=ZR,_i.prototype.deleteLater=eS}function _i(){}var nS=48,rS=57;function hv(p){if(p===void 0)return"_unknown";p=p.replace(/[^a-zA-Z0-9_]/g,"$");var m=p.charCodeAt(0);return m>=nS&&m<=rS?`_${p}`:p}function dv(p,m){return p=hv(p),{[p]:function(){return m.apply(this,arguments)}}[p]}function fv(p,m,y){if(p[m].overloadTable===void 0){var C=p[m];p[m]=function(){return p[m].overloadTable.hasOwnProperty(arguments.length)||qe(`Function '${y}' called with an invalid number of arguments (${arguments.length}) - expects one of (${p[m].overloadTable})!`),p[m].overloadTable[arguments.length].apply(this,arguments)},p[m].overloadTable=[],p[m].overloadTable[C.argCount]=C}}function pv(p,m,y){n.hasOwnProperty(p)?((y===void 0||n[p].overloadTable!==void 0&&n[p].overloadTable[y]!==void 0)&&qe(`Cannot register public name '${p}' twice`),fv(n,p,p),n.hasOwnProperty(y)&&qe(`Cannot register multiple overloads of a function with the same number of arguments (${y})!`),n[p].overloadTable[y]=m):(n[p]=m,y!==void 0&&(n[p].numArguments=y))}function iS(p,m,y,C,S,D,F,M){this.name=p,this.constructor=m,this.instancePrototype=y,this.rawDestructor=C,this.baseClass=S,this.getActualType=D,this.upcast=F,this.downcast=M,this.pureVirtualFunctions=[]}function qd(p,m,y){for(;m!==y;)m.upcast||qe(`Expected null or instance of ${y.name}, got an instance of ${m.name}`),p=m.upcast(p),m=m.baseClass;return p}function sS(p,m){if(m===null)return this.isReference&&qe(`null is not a valid ${this.name}`),0;m.$$||qe(`Cannot pass "${Gd(m)}" as a ${this.name}`),m.$$.ptr||qe(`Cannot pass deleted object as a pointer of type ${this.name}`);var y=m.$$.ptrType.registeredClass,C=qd(m.$$.ptr,y,this.registeredClass);return C}function oS(p,m){var y;if(m===null)return this.isReference&&qe(`null is not a valid ${this.name}`),this.isSmartPointer?(y=this.rawConstructor(),p!==null&&p.push(this.rawDestructor,y),y):0;m.$$||qe(`Cannot pass "${Gd(m)}" as a ${this.name}`),m.$$.ptr||qe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&m.$$.ptrType.isConst&&qe(`Cannot convert argument of type ${m.$$.smartPtrType?m.$$.smartPtrType.name:m.$$.ptrType.name} to parameter type ${this.name}`);var C=m.$$.ptrType.registeredClass;if(y=qd(m.$$.ptr,C,this.registeredClass),this.isSmartPointer)switch(m.$$.smartPtr===void 0&&qe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:m.$$.smartPtrType===this?y=m.$$.smartPtr:qe(`Cannot convert argument of type ${m.$$.smartPtrType?m.$$.smartPtrType.name:m.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:y=m.$$.smartPtr;break;case 2:if(m.$$.smartPtrType===this)y=m.$$.smartPtr;else{var S=m.clone();y=this.rawShare(y,vi.toHandle(function(){S.delete()})),p!==null&&p.push(this.rawDestructor,y)}break;default:qe("Unsupporting sharing policy")}return y}function aS(p,m){if(m===null)return this.isReference&&qe(`null is not a valid ${this.name}`),0;m.$$||qe(`Cannot pass "${Gd(m)}" as a ${this.name}`),m.$$.ptr||qe(`Cannot pass deleted object as a pointer of type ${this.name}`),m.$$.ptrType.isConst&&qe(`Cannot convert argument of type ${m.$$.ptrType.name} to parameter type ${this.name}`);var y=m.$$.ptrType.registeredClass,C=qd(m.$$.ptr,y,this.registeredClass);return C}function cS(p){return this.rawGetPointee&&(p=this.rawGetPointee(p)),p}function lS(p){this.rawDestructor&&this.rawDestructor(p)}function uS(p){p!==null&&p.delete()}function hS(){Kr.prototype.getPointee=cS,Kr.prototype.destructor=lS,Kr.prototype.argPackAdvance=8,Kr.prototype.readValueFromPointer=Mt,Kr.prototype.deleteObject=uS,Kr.prototype.fromWireType=YR}function Kr(p,m,y,C,S,D,F,M,j,Z,ue){this.name=p,this.registeredClass=m,this.isReference=y,this.isConst=C,this.isSmartPointer=S,this.pointeeType=D,this.sharingPolicy=F,this.rawGetPointee=M,this.rawConstructor=j,this.rawShare=Z,this.rawDestructor=ue,!S&&m.baseClass===void 0?C?(this.toWireType=sS,this.destructorFunction=null):(this.toWireType=aS,this.destructorFunction=null):this.toWireType=oS}function mv(p,m,y){n.hasOwnProperty(p)||nn("Replacing nonexistant public symbol"),n[p].overloadTable!==void 0&&y!==void 0?n[p].overloadTable[y]=m:(n[p]=m,n[p].argCount=y)}var dS=(p,m,y)=>{var C=n["dynCall_"+p];return y&&y.length?C.apply(null,[m].concat(y)):C.call(null,m)},Cl=[],nt=p=>{var m=Cl[p];return m||(p>=Cl.length&&(Cl.length=p+1),Cl[p]=m=P.get(p)),m},fS=(p,m,y)=>{if(p.includes("j"))return dS(p,m,y);var C=nt(m).apply(null,y);return C},pS=(p,m)=>{var y=[];return function(){return y.length=0,Object.assign(y,arguments),fS(p,m,y)}};function lr(p,m){p=Ut(p);function y(){return p.includes("j")?pS(p,m):nt(m)}var C=y();return typeof C!="function"&&qe(`unknown function pointer with signature ${p}: ${m}`),C}function mS(p,m){var y=dv(m,function(C){this.name=m,this.message=C;var S=new Error(C).stack;S!==void 0&&(this.stack=this.toString()+`
`+S.replace(/^Error(:[^\n]*)?\n/,""))});return y.prototype=Object.create(p.prototype),y.prototype.constructor=y,y.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},y}var gv=void 0;function _v(p){var m=Sv(p),y=Ut(m);return Gr(m),y}function Al(p,m){var y=[],C={};function S(D){if(!C[D]&&!An[D]){if(Tr[D]){Tr[D].forEach(S);return}y.push(D),C[D]=!0}}throw m.forEach(S),new gv(`${p}: `+y.map(_v).join([", "]))}function gS(p,m,y,C,S,D,F,M,j,Z,ue,be,Te){ue=Ut(ue),D=lr(S,D),M&&(M=lr(F,M)),Z&&(Z=lr(j,Z)),Te=lr(be,Te);var Je=hv(ue);pv(Je,function(){Al(`Cannot construct ${ue} due to unbound types`,[C])}),Xn([p,m,y],C?[C]:[],function(wt){wt=wt[0];var Ht,bt;C?(Ht=wt.registeredClass,bt=Ht.instancePrototype):bt=_i.prototype;var jt=dv(Je,function(){if(Object.getPrototypeOf(this)!==te)throw new gi("Use 'new' to construct "+ue);if(ye.constructor_body===void 0)throw new gi(ue+" has no accessible constructor");var Rl=ye.constructor_body[arguments.length];if(Rl===void 0)throw new gi(`Tried to invoke ctor of ${ue} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(ye.constructor_body).toString()}) parameters instead!`);return Rl.apply(this,arguments)}),te=Object.create(bt,{constructor:{value:jt}});jt.prototype=te;var ye=new iS(ue,jt,te,Te,Ht,D,M,Z);ye.baseClass&&(ye.baseClass.__derivedClasses===void 0&&(ye.baseClass.__derivedClasses=[]),ye.baseClass.__derivedClasses.push(ye));var Rt=new Kr(ue,ye,!0,!1,!1),Lt=new Kr(ue+"*",ye,!1,!1,!1),rs=new Kr(ue+" const*",ye,!1,!0,!1);return uv[p]={pointerType:Lt,constPointerType:rs},mv(Je,jt),[Rt,Lt,rs]})}function Wd(p,m){for(var y=[],C=0;C<p;C++)y.push(I[m+C*4>>2]);return y}function Kd(p,m,y,C,S,D){var F=m.length;F<2&&qe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var M=m[1]!==null&&y!==null,j=!1,Z=1;Z<m.length;++Z)if(m[Z]!==null&&m[Z].destructorFunction===void 0){j=!0;break}var ue=m[0].name!=="void",be=F-2,Te=new Array(be),Je=[],wt=[];return function(){arguments.length!==be&&qe(`function ${p} called with ${arguments.length} arguments, expected ${be} args!`),wt.length=0;var Ht;Je.length=M?2:1,Je[0]=S,M&&(Ht=m[1].toWireType(wt,this),Je[1]=Ht);for(var bt=0;bt<be;++bt)Te[bt]=m[bt+2].toWireType(wt,arguments[bt]),Je.push(Te[bt]);var jt=C.apply(null,Je);function te(ye){if(j)tn(wt);else for(var Rt=M?1:2;Rt<m.length;Rt++){var Lt=Rt===1?Ht:Te[Rt-2];m[Rt].destructorFunction!==null&&m[Rt].destructorFunction(Lt)}if(ue)return m[0].fromWireType(ye)}return te(jt)}}function _S(p,m,y,C,S,D){var F=Wd(m,y);S=lr(C,S),Xn([],[p],function(M){M=M[0];var j=`constructor ${M.name}`;if(M.registeredClass.constructor_body===void 0&&(M.registeredClass.constructor_body=[]),M.registeredClass.constructor_body[m-1]!==void 0)throw new gi(`Cannot register multiple constructors with identical number of parameters (${m-1}) for class '${M.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return M.registeredClass.constructor_body[m-1]=()=>{Al(`Cannot construct ${M.name} due to unbound types`,F)},Xn([],F,function(Z){return Z.splice(1,0,null),M.registeredClass.constructor_body[m-1]=Kd(j,Z,null,S,D),[]}),[]})}function vS(p,m,y,C,S,D,F,M,j){var Z=Wd(y,C);m=Ut(m),D=lr(S,D),Xn([],[p],function(ue){ue=ue[0];var be=`${ue.name}.${m}`;m.startsWith("@@")&&(m=Symbol[m.substring(2)]),M&&ue.registeredClass.pureVirtualFunctions.push(m);function Te(){Al(`Cannot call ${be} due to unbound types`,Z)}var Je=ue.registeredClass.instancePrototype,wt=Je[m];return wt===void 0||wt.overloadTable===void 0&&wt.className!==ue.name&&wt.argCount===y-2?(Te.argCount=y-2,Te.className=ue.name,Je[m]=Te):(fv(Je,m,be),Je[m].overloadTable[y-2]=Te),Xn([],Z,function(Ht){var bt=Kd(be,Ht,ue,D,F);return Je[m].overloadTable===void 0?(bt.argCount=y-2,Je[m]=bt):Je[m].overloadTable[y-2]=bt,[]}),[]})}function yS(){Object.assign(vv.prototype,{get(p){return this.allocated[p]},has(p){return this.allocated[p]!==void 0},allocate(p){var m=this.freelist.pop()||this.allocated.length;return this.allocated[m]=p,m},free(p){this.allocated[p]=void 0,this.freelist.push(p)}})}function vv(){this.allocated=[void 0],this.freelist=[]}var Jn=new vv;function yv(p){p>=Jn.reserved&&--Jn.get(p).refcount===0&&Jn.free(p)}function xS(){for(var p=0,m=Jn.reserved;m<Jn.allocated.length;++m)Jn.allocated[m]!==void 0&&++p;return p}function ES(){Jn.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Jn.reserved=Jn.allocated.length,n.count_emval_handles=xS}var vi={toValue:p=>(p||qe("Cannot use deleted val. handle = "+p),Jn.get(p).value),toHandle:p=>{switch(p){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Jn.allocate({refcount:1,value:p})}}};function wS(p,m){m=Ut(m),ar(p,{name:m,fromWireType:function(y){var C=vi.toValue(y);return yv(y),C},toWireType:function(y,C){return vi.toHandle(C)},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:null})}function Gd(p){if(p===null)return"null";var m=typeof p;return m==="object"||m==="array"||m==="function"?p.toString():""+p}function bS(p,m){switch(m){case 2:return function(y){return this.fromWireType(k[y>>2])};case 3:return function(y){return this.fromWireType(O[y>>3])};default:throw new TypeError("Unknown float type: "+p)}}function CS(p,m,y){var C=Ys(y);m=Ut(m),ar(p,{name:m,fromWireType:function(S){return S},toWireType:function(S,D){return D},argPackAdvance:8,readValueFromPointer:bS(m,C),destructorFunction:null})}function AS(p,m,y,C,S,D,F){var M=Wd(m,y);p=Ut(p),S=lr(C,S),pv(p,function(){Al(`Cannot call ${p} due to unbound types`,M)},m-1),Xn([],M,function(j){var Z=[j[0],null].concat(j.slice(1));return mv(p,Kd(p,Z,null,S,D),m-1),[]})}function TS(p,m,y){switch(m){case 0:return y?function(C){return b[C]}:function(C){return x[C]};case 1:return y?function(C){return E[C>>1]}:function(C){return w[C>>1]};case 2:return y?function(C){return T[C>>2]}:function(C){return I[C>>2]};default:throw new TypeError("Unknown integer type: "+p)}}function IS(p,m,y,C,S){m=Ut(m);var D=Ys(y),F=be=>be;if(C===0){var M=32-8*y;F=be=>be<<M>>>M}var j=m.includes("unsigned"),Z=(be,Te)=>{},ue;j?ue=function(be,Te){return Z(Te,this.name),Te>>>0}:ue=function(be,Te){return Z(Te,this.name),Te},ar(p,{name:m,fromWireType:F,toWireType:ue,argPackAdvance:8,readValueFromPointer:TS(m,D,C!==0),destructorFunction:null})}function RS(p,m,y){var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],S=C[m];function D(F){F=F>>2;var M=I,j=M[F],Z=M[F+1];return new S(M.buffer,Z,j)}y=Ut(y),ar(p,{name:y,fromWireType:D,argPackAdvance:8,readValueFromPointer:D},{ignoreDuplicateRegistrations:!0})}var xv=(p,m,y,C)=>{if(!(C>0))return 0;for(var S=y,D=y+C-1,F=0;F<p.length;++F){var M=p.charCodeAt(F);if(M>=55296&&M<=57343){var j=p.charCodeAt(++F);M=65536+((M&1023)<<10)|j&1023}if(M<=127){if(y>=D)break;m[y++]=M}else if(M<=2047){if(y+1>=D)break;m[y++]=192|M>>6,m[y++]=128|M&63}else if(M<=65535){if(y+2>=D)break;m[y++]=224|M>>12,m[y++]=128|M>>6&63,m[y++]=128|M&63}else{if(y+3>=D)break;m[y++]=240|M>>18,m[y++]=128|M>>12&63,m[y++]=128|M>>6&63,m[y++]=128|M&63}}return m[y]=0,y-S},SS=(p,m,y)=>xv(p,x,m,y),Ev=p=>{for(var m=0,y=0;y<p.length;++y){var C=p.charCodeAt(y);C<=127?m++:C<=2047?m+=2:C>=55296&&C<=57343?(m+=4,++y):m+=3}return m},wv=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,PS=(p,m,y)=>{for(var C=m+y,S=m;p[S]&&!(S>=C);)++S;if(S-m>16&&p.buffer&&wv)return wv.decode(p.subarray(m,S));for(var D="";m<S;){var F=p[m++];if(!(F&128)){D+=String.fromCharCode(F);continue}var M=p[m++]&63;if((F&224)==192){D+=String.fromCharCode((F&31)<<6|M);continue}var j=p[m++]&63;if((F&240)==224?F=(F&15)<<12|M<<6|j:F=(F&7)<<18|M<<12|j<<6|p[m++]&63,F<65536)D+=String.fromCharCode(F);else{var Z=F-65536;D+=String.fromCharCode(55296|Z>>10,56320|Z&1023)}}return D},Qd=(p,m)=>p?PS(x,p,m):"";function kS(p,m){m=Ut(m);var y=m==="std::string";ar(p,{name:m,fromWireType:function(C){var S=I[C>>2],D=C+4,F;if(y)for(var M=D,j=0;j<=S;++j){var Z=D+j;if(j==S||x[Z]==0){var ue=Z-M,be=Qd(M,ue);F===void 0?F=be:(F+=String.fromCharCode(0),F+=be),M=Z+1}}else{for(var Te=new Array(S),j=0;j<S;++j)Te[j]=String.fromCharCode(x[D+j]);F=Te.join("")}return Gr(C),F},toWireType:function(C,S){S instanceof ArrayBuffer&&(S=new Uint8Array(S));var D,F=typeof S=="string";F||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int8Array||qe("Cannot pass non-string to std::string"),y&&F?D=Ev(S):D=S.length;var M=Xd(4+D+1),j=M+4;if(I[M>>2]=D,y&&F)SS(S,j,D+1);else if(F)for(var Z=0;Z<D;++Z){var ue=S.charCodeAt(Z);ue>255&&(Gr(j),qe("String has UTF-16 code units that do not fit in 8 bits")),x[j+Z]=ue}else for(var Z=0;Z<D;++Z)x[j+Z]=S[Z];return C!==null&&C.push(Gr,M),M},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:function(C){Gr(C)}})}var bv=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,DS=(p,m)=>{for(var y=p,C=y>>1,S=C+m/2;!(C>=S)&&w[C];)++C;if(y=C<<1,y-p>32&&bv)return bv.decode(x.subarray(p,y));for(var D="",F=0;!(F>=m/2);++F){var M=E[p+F*2>>1];if(M==0)break;D+=String.fromCharCode(M)}return D},NS=(p,m,y)=>{if(y===void 0&&(y=2147483647),y<2)return 0;y-=2;for(var C=m,S=y<p.length*2?y/2:p.length,D=0;D<S;++D){var F=p.charCodeAt(D);E[m>>1]=F,m+=2}return E[m>>1]=0,m-C},OS=p=>p.length*2,FS=(p,m)=>{for(var y=0,C="";!(y>=m/4);){var S=T[p+y*4>>2];if(S==0)break;if(++y,S>=65536){var D=S-65536;C+=String.fromCharCode(55296|D>>10,56320|D&1023)}else C+=String.fromCharCode(S)}return C},MS=(p,m,y)=>{if(y===void 0&&(y=2147483647),y<4)return 0;for(var C=m,S=C+y-4,D=0;D<p.length;++D){var F=p.charCodeAt(D);if(F>=55296&&F<=57343){var M=p.charCodeAt(++D);F=65536+((F&1023)<<10)|M&1023}if(T[m>>2]=F,m+=4,m+4>S)break}return T[m>>2]=0,m-C},BS=p=>{for(var m=0,y=0;y<p.length;++y){var C=p.charCodeAt(y);C>=55296&&C<=57343&&++y,m+=4}return m},LS=function(p,m,y){y=Ut(y);var C,S,D,F,M;m===2?(C=DS,S=NS,F=OS,D=()=>w,M=1):m===4&&(C=FS,S=MS,F=BS,D=()=>I,M=2),ar(p,{name:y,fromWireType:function(j){for(var Z=I[j>>2],ue=D(),be,Te=j+4,Je=0;Je<=Z;++Je){var wt=j+4+Je*m;if(Je==Z||ue[wt>>M]==0){var Ht=wt-Te,bt=C(Te,Ht);be===void 0?be=bt:(be+=String.fromCharCode(0),be+=bt),Te=wt+m}}return Gr(j),be},toWireType:function(j,Z){typeof Z!="string"&&qe(`Cannot pass non-string to C++ string type ${y}`);var ue=F(Z),be=Xd(4+ue+m);return I[be>>2]=ue>>M,S(Z,be+4,ue+m),j!==null&&j.push(Gr,be),be},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:function(j){Gr(j)}})};function VS(p,m,y,C,S,D){ht[p]={name:Ut(m),rawConstructor:lr(y,C),rawDestructor:lr(S,D),fields:[]}}function $S(p,m,y,C,S,D,F,M,j,Z){ht[p].fields.push({fieldName:Ut(m),getterReturnType:y,getter:lr(C,S),getterContext:D,setterArgumentType:F,setter:lr(M,j),setterContext:Z})}function US(p,m){m=Ut(m),ar(p,{isVoid:!0,name:m,argPackAdvance:0,fromWireType:function(){},toWireType:function(y,C){}})}var HS={};function jS(p){var m=HS[p];return m===void 0?Ut(p):m}function Cv(){if(typeof globalThis=="object")return globalThis;function p(m){m.$$$embind_global$$$=m;var y=typeof $$$embind_global$$$=="object"&&m.$$$embind_global$$$==m;return y||delete m.$$$embind_global$$$,y}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&p(global)?$$$embind_global$$$=global:typeof self=="object"&&p(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function zS(p){return p===0?vi.toHandle(Cv()):(p=jS(p),vi.toHandle(Cv()[p]))}function qS(p){p>4&&(Jn.get(p).refcount+=1)}function Av(p,m){var y=An[p];return y===void 0&&qe(m+" has unknown type "+_v(p)),y}function WS(p){var m=new Array(p+1);return function(y,C,S){m[0]=y;for(var D=0;D<p;++D){var F=Av(I[C+D*4>>2],"parameter "+D);m[D+1]=F.readValueFromPointer(S),S+=F.argPackAdvance}var M=new(y.bind.apply(y,m));return vi.toHandle(M)}}var Tv={};function KS(p,m,y,C){p=vi.toValue(p);var S=Tv[m];return S||(S=WS(m),Tv[m]=S),S(p,y,C)}function GS(p,m){p=Av(p,"_emval_take_value");var y=p.readValueFromPointer(m);return vi.toHandle(y)}var QS=()=>{Q("")},YS=(p,m,y)=>x.copyWithin(p,m,m+y),XS=()=>2147483648,JS=p=>{var m=g.buffer,y=p-m.byteLength+65535>>>16;try{return g.grow(y),K(),1}catch{}},ZS=p=>{var m=x.length;p>>>=0;var y=XS();if(p>y)return!1;for(var C=(j,Z)=>j+(Z-j%Z)%Z,S=1;S<=4;S*=2){var D=m*(1+.2/S);D=Math.min(D,p+100663296);var F=Math.min(y,C(Math.max(p,D),65536)),M=JS(F);if(M)return!0}return!1},Yd={},eP=()=>o||"./this.program",ga=()=>{if(!ga.strings){var p=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:p,_:eP()};for(var y in Yd)Yd[y]===void 0?delete m[y]:m[y]=Yd[y];var C=[];for(var y in m)C.push(`${y}=${m[y]}`);ga.strings=C}return ga.strings},tP=(p,m)=>{for(var y=0;y<p.length;++y)b[m++>>0]=p.charCodeAt(y);b[m>>0]=0},nP=(p,m)=>{var y=0;return ga().forEach(function(C,S){var D=m+y;I[p+S*4>>2]=D,tP(C,D),y+=C.length+1}),0},rP=(p,m)=>{var y=ga();I[p>>2]=y.length;var C=0;return y.forEach(function(S){C+=S.length+1}),I[m>>2]=C,0};function iP(p){return p}var Tl=p=>p%4===0&&(p%100!==0||p%400===0),sP=(p,m)=>{for(var y=0,C=0;C<=m;y+=p[C++]);return y},Iv=[31,29,31,30,31,30,31,31,30,31,30,31],Rv=[31,28,31,30,31,30,31,31,30,31,30,31],oP=(p,m)=>{for(var y=new Date(p.getTime());m>0;){var C=Tl(y.getFullYear()),S=y.getMonth(),D=(C?Iv:Rv)[S];if(m>D-y.getDate())m-=D-y.getDate()+1,y.setDate(1),S<11?y.setMonth(S+1):(y.setMonth(0),y.setFullYear(y.getFullYear()+1));else return y.setDate(y.getDate()+m),y}return y};function aP(p,m,y){var C=y>0?y:Ev(p)+1,S=new Array(C),D=xv(p,S,0,S.length);return m&&(S.length=D),S}var cP=(p,m)=>{b.set(p,m)},lP=(p,m,y,C)=>{var S=T[C+40>>2],D={tm_sec:T[C>>2],tm_min:T[C+4>>2],tm_hour:T[C+8>>2],tm_mday:T[C+12>>2],tm_mon:T[C+16>>2],tm_year:T[C+20>>2],tm_wday:T[C+24>>2],tm_yday:T[C+28>>2],tm_isdst:T[C+32>>2],tm_gmtoff:T[C+36>>2],tm_zone:S?Qd(S):""},F=Qd(y),M={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var j in M)F=F.replace(new RegExp(j,"g"),M[j]);var Z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ue=["January","February","March","April","May","June","July","August","September","October","November","December"];function be(te,ye,Rt){for(var Lt=typeof te=="number"?te.toString():te||"";Lt.length<ye;)Lt=Rt[0]+Lt;return Lt}function Te(te,ye){return be(te,ye,"0")}function Je(te,ye){function Rt(rs){return rs<0?-1:rs>0?1:0}var Lt;return(Lt=Rt(te.getFullYear()-ye.getFullYear()))===0&&(Lt=Rt(te.getMonth()-ye.getMonth()))===0&&(Lt=Rt(te.getDate()-ye.getDate())),Lt}function wt(te){switch(te.getDay()){case 0:return new Date(te.getFullYear()-1,11,29);case 1:return te;case 2:return new Date(te.getFullYear(),0,3);case 3:return new Date(te.getFullYear(),0,2);case 4:return new Date(te.getFullYear(),0,1);case 5:return new Date(te.getFullYear()-1,11,31);case 6:return new Date(te.getFullYear()-1,11,30)}}function Ht(te){var ye=oP(new Date(te.tm_year+1900,0,1),te.tm_yday),Rt=new Date(ye.getFullYear(),0,4),Lt=new Date(ye.getFullYear()+1,0,4),rs=wt(Rt),Rl=wt(Lt);return Je(rs,ye)<=0?Je(Rl,ye)<=0?ye.getFullYear()+1:ye.getFullYear():ye.getFullYear()-1}var bt={"%a":te=>Z[te.tm_wday].substring(0,3),"%A":te=>Z[te.tm_wday],"%b":te=>ue[te.tm_mon].substring(0,3),"%B":te=>ue[te.tm_mon],"%C":te=>{var ye=te.tm_year+1900;return Te(ye/100|0,2)},"%d":te=>Te(te.tm_mday,2),"%e":te=>be(te.tm_mday,2," "),"%g":te=>Ht(te).toString().substring(2),"%G":te=>Ht(te),"%H":te=>Te(te.tm_hour,2),"%I":te=>{var ye=te.tm_hour;return ye==0?ye=12:ye>12&&(ye-=12),Te(ye,2)},"%j":te=>Te(te.tm_mday+sP(Tl(te.tm_year+1900)?Iv:Rv,te.tm_mon-1),3),"%m":te=>Te(te.tm_mon+1,2),"%M":te=>Te(te.tm_min,2),"%n":()=>`
`,"%p":te=>te.tm_hour>=0&&te.tm_hour<12?"AM":"PM","%S":te=>Te(te.tm_sec,2),"%t":()=>"	","%u":te=>te.tm_wday||7,"%U":te=>{var ye=te.tm_yday+7-te.tm_wday;return Te(Math.floor(ye/7),2)},"%V":te=>{var ye=Math.floor((te.tm_yday+7-(te.tm_wday+6)%7)/7);if((te.tm_wday+371-te.tm_yday-2)%7<=2&&ye++,ye){if(ye==53){var Rt=(te.tm_wday+371-te.tm_yday)%7;Rt!=4&&(Rt!=3||!Tl(te.tm_year))&&(ye=1)}}else{ye=52;var Lt=(te.tm_wday+7-te.tm_yday-1)%7;(Lt==4||Lt==5&&Tl(te.tm_year%400-1))&&ye++}return Te(ye,2)},"%w":te=>te.tm_wday,"%W":te=>{var ye=te.tm_yday+7-(te.tm_wday+6)%7;return Te(Math.floor(ye/7),2)},"%y":te=>(te.tm_year+1900).toString().substring(2),"%Y":te=>te.tm_year+1900,"%z":te=>{var ye=te.tm_gmtoff,Rt=ye>=0;return ye=Math.abs(ye)/60,ye=ye/60*100+ye%60,(Rt?"+":"-")+("0000"+ye).slice(-4)},"%Z":te=>te.tm_zone,"%%":()=>"%"};F=F.replace(/%%/g,"\0\0");for(var j in bt)F.includes(j)&&(F=F.replace(new RegExp(j,"g"),bt[j](D)));F=F.replace(/\0\0/g,"%");var jt=aP(F,!1);return jt.length>m?0:(cP(jt,p),jt.length-1)},uP=(p,m,y,C,S)=>lP(p,m,y,C);Bt=n.InternalError=class extends Error{constructor(p){super(p),this.name="InternalError"}},Ud(),gi=n.BindingError=class extends Error{constructor(p){super(p),this.name="BindingError"}},tS(),KR(),hS(),gv=n.UnboundTypeError=mS(Error,"UnboundTypeError"),yS(),ES();var hP={q,u:se,a:fe,h:le,l:ve,I:Ae,P:De,n:ze,ba:tt,d:re,oa:vl,Y:$d,fa:Hd,na:gS,ma:_S,D:vS,ea:wS,W:CS,J:AS,w:IS,s:RS,V:kS,L:LS,Q:VS,pa:$S,ga:US,U:yv,la:zS,R:qS,ia:KS,ka:GS,K:QS,da:YS,ca:ZS,$:nP,aa:rP,H:PP,T:VP,B:DP,p:IP,b:dP,C:SP,ha:OP,c:_P,j:yP,i:mP,x:kP,O:RP,v:AP,G:MP,N:BP,A:NP,F:$P,Z:HP,X:jP,k:vP,f:gP,e:pP,g:fP,M:LP,m:CP,o:xP,S:EP,t:bP,ja:TP,y:FP,r:wP,E:UP,z:iP,_:uP};A();var Gr=n._free=p=>(Gr=n._free=_.sa)(p),Xd=n._malloc=p=>(Xd=n._malloc=_.ta)(p),Sv=p=>(Sv=_.va)(p);n.__embind_initialize_bindings=()=>(n.__embind_initialize_bindings=_.wa)();var We=(p,m)=>(We=_.xa)(p,m),_a=p=>(_a=_.ya)(p),Ye=()=>(Ye=_.za)(),Xe=p=>(Xe=_.Aa)(p),Pv=p=>(Pv=_.Ba)(p),kv=p=>(kv=_.Ca)(p),Dv=(p,m,y)=>(Dv=_.Da)(p,m,y),Nv=p=>(Nv=_.Ea)(p);n.dynCall_viijii=(p,m,y,C,S,D,F)=>(n.dynCall_viijii=_.Fa)(p,m,y,C,S,D,F);var Ov=n.dynCall_jiii=(p,m,y,C)=>(Ov=n.dynCall_jiii=_.Ga)(p,m,y,C),Fv=n.dynCall_jiiii=(p,m,y,C,S)=>(Fv=n.dynCall_jiiii=_.Ha)(p,m,y,C,S);n.dynCall_iiiiij=(p,m,y,C,S,D,F)=>(n.dynCall_iiiiij=_.Ia)(p,m,y,C,S,D,F),n.dynCall_iiiiijj=(p,m,y,C,S,D,F,M,j)=>(n.dynCall_iiiiijj=_.Ja)(p,m,y,C,S,D,F,M,j),n.dynCall_iiiiiijj=(p,m,y,C,S,D,F,M,j,Z)=>(n.dynCall_iiiiiijj=_.Ka)(p,m,y,C,S,D,F,M,j,Z);function dP(p,m){var y=Ye();try{return nt(p)(m)}catch(C){if(Xe(y),C!==C+0)throw C;We(1,0)}}function fP(p,m,y,C){var S=Ye();try{nt(p)(m,y,C)}catch(D){if(Xe(S),D!==D+0)throw D;We(1,0)}}function pP(p,m,y){var C=Ye();try{nt(p)(m,y)}catch(S){if(Xe(C),S!==S+0)throw S;We(1,0)}}function mP(p,m,y,C,S){var D=Ye();try{return nt(p)(m,y,C,S)}catch(F){if(Xe(D),F!==F+0)throw F;We(1,0)}}function gP(p,m){var y=Ye();try{nt(p)(m)}catch(C){if(Xe(y),C!==C+0)throw C;We(1,0)}}function _P(p,m,y){var C=Ye();try{return nt(p)(m,y)}catch(S){if(Xe(C),S!==S+0)throw S;We(1,0)}}function vP(p){var m=Ye();try{nt(p)()}catch(y){if(Xe(m),y!==y+0)throw y;We(1,0)}}function yP(p,m,y,C){var S=Ye();try{return nt(p)(m,y,C)}catch(D){if(Xe(S),D!==D+0)throw D;We(1,0)}}function xP(p,m,y,C,S,D){var F=Ye();try{nt(p)(m,y,C,S,D)}catch(M){if(Xe(F),M!==M+0)throw M;We(1,0)}}function EP(p,m,y,C,S,D,F){var M=Ye();try{nt(p)(m,y,C,S,D,F)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function wP(p,m,y,C,S,D,F,M,j,Z,ue){var be=Ye();try{nt(p)(m,y,C,S,D,F,M,j,Z,ue)}catch(Te){if(Xe(be),Te!==Te+0)throw Te;We(1,0)}}function bP(p,m,y,C,S,D,F,M){var j=Ye();try{nt(p)(m,y,C,S,D,F,M)}catch(Z){if(Xe(j),Z!==Z+0)throw Z;We(1,0)}}function CP(p,m,y,C,S){var D=Ye();try{nt(p)(m,y,C,S)}catch(F){if(Xe(D),F!==F+0)throw F;We(1,0)}}function AP(p,m,y,C,S,D,F){var M=Ye();try{return nt(p)(m,y,C,S,D,F)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function TP(p,m,y,C,S,D,F,M,j){var Z=Ye();try{nt(p)(m,y,C,S,D,F,M,j)}catch(ue){if(Xe(Z),ue!==ue+0)throw ue;We(1,0)}}function IP(p){var m=Ye();try{return nt(p)()}catch(y){if(Xe(m),y!==y+0)throw y;We(1,0)}}function RP(p,m,y,C,S,D,F){var M=Ye();try{return nt(p)(m,y,C,S,D,F)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function SP(p,m,y,C){var S=Ye();try{return nt(p)(m,y,C)}catch(D){if(Xe(S),D!==D+0)throw D;We(1,0)}}function PP(p,m,y,C){var S=Ye();try{return nt(p)(m,y,C)}catch(D){if(Xe(S),D!==D+0)throw D;We(1,0)}}function kP(p,m,y,C,S,D){var F=Ye();try{return nt(p)(m,y,C,S,D)}catch(M){if(Xe(F),M!==M+0)throw M;We(1,0)}}function DP(p,m,y,C,S,D){var F=Ye();try{return nt(p)(m,y,C,S,D)}catch(M){if(Xe(F),M!==M+0)throw M;We(1,0)}}function NP(p,m,y,C,S,D,F,M,j,Z){var ue=Ye();try{return nt(p)(m,y,C,S,D,F,M,j,Z)}catch(be){if(Xe(ue),be!==be+0)throw be;We(1,0)}}function OP(p,m,y){var C=Ye();try{return nt(p)(m,y)}catch(S){if(Xe(C),S!==S+0)throw S;We(1,0)}}function FP(p,m,y,C,S,D,F,M,j,Z){var ue=Ye();try{nt(p)(m,y,C,S,D,F,M,j,Z)}catch(be){if(Xe(ue),be!==be+0)throw be;We(1,0)}}function MP(p,m,y,C,S,D,F,M){var j=Ye();try{return nt(p)(m,y,C,S,D,F,M)}catch(Z){if(Xe(j),Z!==Z+0)throw Z;We(1,0)}}function BP(p,m,y,C,S,D,F,M,j){var Z=Ye();try{return nt(p)(m,y,C,S,D,F,M,j)}catch(ue){if(Xe(Z),ue!==ue+0)throw ue;We(1,0)}}function LP(p,m,y,C,S,D,F){var M=Ye();try{nt(p)(m,y,C,S,D,F)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function VP(p,m,y,C){var S=Ye();try{return nt(p)(m,y,C)}catch(D){if(Xe(S),D!==D+0)throw D;We(1,0)}}function $P(p,m,y,C,S,D,F,M,j,Z,ue,be){var Te=Ye();try{return nt(p)(m,y,C,S,D,F,M,j,Z,ue,be)}catch(Je){if(Xe(Te),Je!==Je+0)throw Je;We(1,0)}}function UP(p,m,y,C,S,D,F,M,j,Z,ue,be,Te,Je,wt,Ht){var bt=Ye();try{nt(p)(m,y,C,S,D,F,M,j,Z,ue,be,Te,Je,wt,Ht)}catch(jt){if(Xe(bt),jt!==jt+0)throw jt;We(1,0)}}function HP(p,m,y,C){var S=Ye();try{return Ov(p,m,y,C)}catch(D){if(Xe(S),D!==D+0)throw D;We(1,0)}}function jP(p,m,y,C,S){var D=Ye();try{return Fv(p,m,y,C,S)}catch(F){if(Xe(D),F!==F+0)throw F;We(1,0)}}var Il;U=function p(){Il||Mv(),Il||(U=p)};function Mv(){if(Re>0||(pe(),Re>0))return;function p(){Il||(Il=!0,n.calledRun=!0,!v&&(me(),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),he()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),p()},1)):p()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Mv(),e.ready}})();function Bj(t){return CR(AR,t)}async function Lj(t,{tryHarder:e=Di.tryHarder,formats:n=Di.formats,maxSymbols:r=Di.maxSymbols}=Di){return Oj(t,{tryHarder:e,formats:n,maxSymbols:r},AR)}const TR=new Map([["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["data_matrix","DataMatrix"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["pdf417","PDF417"],["qr_code","QRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"]]);function Vj(t){for(const[e,n]of TR)if(t===n)return e;return"unknown"}var gu;class Bd{constructor(e={}){_j(this,gu,void 0);var n;try{const r=(n=e==null?void 0:e.formats)==null?void 0:n.filter(i=>i!=="unknown");if((r==null?void 0:r.length)===0)throw new TypeError("Hint option provided, but is empty.");r==null||r.forEach(i=>{if(!rw.includes(i))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${i}' is not a valid enum value of type BarcodeFormat.`)}),Bj().catch(()=>{}),vj(this,gu,r??[])}catch(r){throw iw(r,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return rw.filter(e=>e!=="unknown")}async detect(e){try{const n=await Tj(e);if(n===null)return[];let r;try{r=await Lj(n,{tryHarder:!0,formats:gj(this,gu).map(i=>TR.get(i))})}catch{throw new DOMException("Barcode detection service unavailable. Use 'setZXingModuleOverrides' in offline or strict CSP environments.","NotSupportedError")}return r.map(i=>{const{topLeft:{x:s,y:o},topRight:{x:a,y:c},bottomLeft:{x:l,y:u},bottomRight:{x:h,y:d}}=i.position,f=Math.min(s,a,l,h),g=Math.min(o,c,u,d),_=Math.max(s,a,l,h),v=Math.max(o,c,u,d);return{boundingBox:new DOMRectReadOnly(f,g,_-f,v-g),rawValue:new TextDecoder().decode(i.bytes),format:Vj(i.format),cornerPoints:[{x:s,y:o},{x:a,y:c},{x:h,y:d},{x:l,y:u}]}})}catch(n){throw iw(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}gu=new WeakMap;const IR=(t,e,n="error")=>{let r,i;const s=new Promise((o,a)=>{r=o,i=a,t.addEventListener(e,r),t.addEventListener(n,i)});return s.finally(()=>{t.removeEventListener(e,r),t.removeEventListener(n,i)}),s},cw=t=>new Promise(e=>setTimeout(e,t));class $j extends Error{constructor(){super("can't process cross-origin image"),this.name="DropImageFetchError"}}class RR extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Uj extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Hj extends Error{constructor(){super("Loading camera stream timed out after 3 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let _m;const jj=t=>{_m=new Bd({formats:t})},zj=async(t,{detectHandler:e,locateHandler:n,minDelay:r,formats:i})=>{_m=new Bd({formats:i});const s=o=>async a=>{if(t.readyState>1){const{lastScanned:c,contentBefore:l,lastScanHadContent:u}=o;if(a-c<r)window.requestAnimationFrame(s(o));else{const h=await _m.detect(t),d=h.some(_=>!l.includes(_.rawValue));d&&e(h);const f=h.length>0;f&&n(h),!f&&u&&n(h);const g={lastScanned:a,lastScanHadContent:f,contentBefore:d?h.map(_=>_.rawValue):l};window.requestAnimationFrame(s(g))}}};s({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())},qj=async t=>{if(t.startsWith("http")&&t.includes(location.host)===!1)throw new $j;const e=document.createElement("img");return e.src=t,await IR(e,"load"),e},SR=async(t,e=["qr_code"])=>await new Bd({formats:e}).detect(t),Wj=async(t,e=["qr_code"])=>{const n=new Bd({formats:e}),r=await qj(t);return await n.detect(r)};var PR={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.compactObject=NR;Un.deprecated=tz;var Kj=Un.detectBrowser=nz;Un.disableLog=Jj;Un.disableWarnings=Zj;Un.extractVersion=_u;Un.filterStats=rz;Un.log=ez;Un.walkStats=xh;Un.wrapPeerConnectionEvent=Xj;function Gj(t,e,n){return e=Qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qj(t){var e=Yj(t,"string");return Wi(e)==="symbol"?e:String(e)}function Yj(t,e){if(Wi(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wi(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wi(t){"@babel/helpers - typeof";return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wi(t)}var kR=!0,DR=!0;function _u(t,e,n){var r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Xj(t,e,n){if(t.RTCPeerConnection){var r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);var c=function(l){var u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};var s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);var c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get:function(){return this["_on"+e]},set:function(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}}function Jj(t){return typeof t!="boolean"?new Error("Argument type: "+Wi(t)+". Please use a boolean."):(kR=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Zj(t){return typeof t!="boolean"?new Error("Argument type: "+Wi(t)+". Please use a boolean."):(DR=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function ez(){if((typeof window>"u"?"undefined":Wi(window))==="object"){if(kR)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function tz(t,e){DR&&console.warn(t+" is deprecated, please use "+e+" instead.")}function nz(t){var e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;var n=t.navigator;if(n.mozGetUserMedia)e.browser="firefox",e.version=_u(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=_u(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=_u(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function lw(t){return Object.prototype.toString.call(t)==="[object Object]"}function NR(t){return lw(t)?Object.keys(t).reduce(function(e,n){var r=lw(t[n]),i=r?NR(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,Gj({},n,i))},{}):t}function xh(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(function(r){r.endsWith("Id")?xh(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(function(i){xh(t,t.get(i),n)})}))}function rz(t,e,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;var s=[];return t.forEach(function(o){o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(function(o){t.forEach(function(a){a.type===r&&a.trackId===o.id&&xh(t,a,i)})}),i}Object.defineProperty(PR,"__esModule",{value:!0});var iz=PR.shimGetUserMedia=az,sz=oz(Un);function OR(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(OR=function(r){return r?n:e})(t)}function oz(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||Si(t)!=="object"&&typeof t!="function")return{default:t};var n=OR(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Si(t){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Si(t)}var uw=sz.log;function az(t,e){var n=t&&t.navigator;if(n.mediaDevices){var r=function(c){if(Si(c)!=="object"||c.mandatory||c.optional)return c;var l={};return Object.keys(c).forEach(function(u){if(!(u==="require"||u==="advanced"||u==="mediaSource")){var h=Si(c[u])==="object"?c[u]:{ideal:c[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);var d=function(g,_){return g?g+_.charAt(0).toUpperCase()+_.slice(1):_==="deviceId"?"sourceId":_};if(h.ideal!==void 0){l.optional=l.optional||[];var f={};typeof h.ideal=="number"?(f[d("min",u)]=h.ideal,l.optional.push(f),f={},f[d("max",u)]=h.ideal,l.optional.push(f)):(f[d("",u)]=h.ideal,l.optional.push(f))}h.exact!==void 0&&typeof h.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",u)]=h.exact):["min","max"].forEach(function(g){h[g]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(g,u)]=h[g])})}}),c.advanced&&(l.optional=(l.optional||[]).concat(c.advanced)),l},i=function(c,l){if(e.version>=61)return l(c);if(c=JSON.parse(JSON.stringify(c)),c&&Si(c.audio)==="object"){var u=function(g,_,v){_ in g&&!(v in g)&&(g[v]=g[_],delete g[_])};c=JSON.parse(JSON.stringify(c)),u(c.audio,"autoGainControl","googAutoGainControl"),u(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=r(c.audio)}if(c&&Si(c.video)==="object"){var h=c.video.facingMode;h=h&&(Si(h)==="object"?h:{ideal:h});var d=e.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete c.video.facingMode;var f;if(h.exact==="environment"||h.ideal==="environment"?f=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(function(g){g=g.filter(function(v){return v.kind==="videoinput"});var _=g.find(function(v){return f.some(function(b){return v.label.toLowerCase().includes(b)})});return!_&&g.length&&f.includes("back")&&(_=g[g.length-1]),_&&(c.video.deviceId=h.exact?{exact:_.deviceId}:{ideal:_.deviceId}),c.video=r(c.video),uw("chrome: "+JSON.stringify(c)),l(c)})}c.video=r(c.video)}return uw("chrome: "+JSON.stringify(c)),l(c)},s=function(c){return e.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(c,l,u){i(c,function(h){n.webkitGetUserMedia(h,l,function(d){u&&u(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,function(l){return a(l).then(function(u){if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(function(h){h.stop()}),new DOMException("","NotFoundError");return u},function(u){return Promise.reject(s(u))})})}}}}var FR={};Object.defineProperty(FR,"__esModule",{value:!0});var cz=FR.shimGetUserMedia=hz,lz=uz(Un);function MR(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(MR=function(r){return r?n:e})(t)}function uz(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||bo(t)!=="object"&&typeof t!="function")return{default:t};var n=MR(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function bo(t){"@babel/helpers - typeof";return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(t)}function hz(t,e){var n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(c,l,u){lz.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(l,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(c,l,u){l in c&&!(u in c)&&(c[u]=c[l],delete c[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return bo(c)==="object"&&bo(c.audio)==="object"&&(c=JSON.parse(JSON.stringify(c)),i(c.audio,"autoGainControl","mozAutoGainControl"),i(c.audio,"noiseSuppression","mozNoiseSuppression")),s(c)},r&&r.prototype.getSettings){var o=r.prototype.getSettings;r.prototype.getSettings=function(){var c=o.apply(this,arguments);return i(c,"mozAutoGainControl","autoGainControl"),i(c,"mozNoiseSuppression","noiseSuppression"),c}}if(r&&r.prototype.applyConstraints){var a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(c){return this.kind==="audio"&&bo(c)==="object"&&(c=JSON.parse(JSON.stringify(c)),i(c,"autoGainControl","mozAutoGainControl"),i(c,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[c])}}}}var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.shimAudioContext=Ez;Wr.shimCallbacksAPI=gz;Wr.shimConstraints=VR;Wr.shimCreateOfferLegacy=xz;var dz=Wr.shimGetUserMedia=_z;Wr.shimLocalStreamsAPI=pz;Wr.shimRTCIceServerUrls=vz;Wr.shimRemoteStreamsAPI=mz;Wr.shimTrackEventTransceiver=yz;var BR=fz(Un);function LR(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(LR=function(r){return r?n:e})(t)}function fz(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||Ki(t)!=="object"&&typeof t!="function")return{default:t};var n=LR(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Ki(t){"@babel/helpers - typeof";return Ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(t)}function pz(t){if(!(Ki(t)!=="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(i){return e.call(r,i,n)}),n.getVideoTracks().forEach(function(i){return e.call(r,i,n)})},t.RTCPeerConnection.prototype.addTrack=function(n){for(var r=this,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(function(a){r._localStreams?r._localStreams.includes(a)||r._localStreams.push(a):r._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){var r=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(n);if(i!==-1){this._localStreams.splice(i,1);var s=n.getTracks();this.getSenders().forEach(function(o){s.includes(o.track)&&r.removeTrack(o)})}})}}function mz(t){if(!(Ki(t)!=="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var r=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(s){if(r._remoteStreams||(r._remoteStreams=[]),!r._remoteStreams.includes(s)){r._remoteStreams.push(s);var o=new Event("addstream");o.stream=s,r.dispatchEvent(o)}})})}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(function(i){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(i)>=0)){n._remoteStreams.push(i);var s=new Event("addstream");s.stream=i,n.dispatchEvent(s)}})}),e.apply(n,arguments)}}}function gz(t){if(!(Ki(t)!=="object"||!t.RTCPeerConnection)){var e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,l){var u=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[u]);return l?(h.then(c,l),Promise.resolve()):h},e.createAnswer=function(c,l){var u=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[u]);return l?(h.then(c,l),Promise.resolve()):h};var a=function(c,l,u){var h=i.apply(this,[c]);return u?(h.then(l,u),Promise.resolve()):h};e.setLocalDescription=a,a=function(c,l,u){var h=s.apply(this,[c]);return u?(h.then(l,u),Promise.resolve()):h},e.setRemoteDescription=a,a=function(c,l,u){var h=o.apply(this,[c]);return u?(h.then(l,u),Promise.resolve()):h},e.addIceCandidate=a}}function _z(t){var e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){var n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=function(i){return r(VR(i))}}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,s,o){e.mediaDevices.getUserMedia(i).then(s,o)}).bind(e))}function VR(t){return t&&t.video!==void 0?Object.assign({},t,{video:BR.compactObject(t.video)}):t}function vz(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,r){if(n&&n.iceServers){for(var i=[],s=0;s<n.iceServers.length;s++){var o=n.iceServers[s];o.urls===void 0&&o.url?(BR.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,i.push(o)):i.push(n.iceServers[s])}n.iceServers=i}return new e(n,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})}}function yz(t){Ki(t)==="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function xz(t){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var r=this.getTransceivers().find(function(s){return s.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var i=this.getTransceivers().find(function(s){return s.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Ez(t){Ki(t)!=="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const wz=t=>{let e=!1,n;return(...r)=>(e||(n=t(r),e=!0),n)};function Yr(t,e){if(t===!1)throw new Error(e??"assertion failure")}const bz=wz(()=>{const t=Kj(window);switch(t.browser){case"chrome":iz(window,t);break;case"firefox":cz(window,t);break;case"safari":dz(window,t);break;default:throw new RR}});let Zr={isActive:!1};function $0(){if(Zr.isActive){Zr.videoEl.src="",Zr.videoEl.srcObject=null,Zr.videoEl.load();for(const t of Zr.stream.getTracks())Zr.stream.removeTrack(t),t.stop();Zr={isActive:!1}}}async function Cz(t,{constraints:e,torch:n}){var r,i;if(window.isSecureContext!==!0)throw new Uj;if(((r=navigator==null?void 0:navigator.mediaDevices)==null?void 0:r.getUserMedia)===void 0)throw new RR;bz();const s=await navigator.mediaDevices.getUserMedia({audio:!1,video:e});if(t.srcObject!==void 0?t.srcObject=s:t.mozSrcObject!==void 0?t.mozSrcObject=s:window.URL.createObjectURL?t.src=window.URL.createObjectURL(s):window.webkitURL?t.src=window.webkitURL.createObjectURL(s):t.src=s.id,await Promise.race([IR(t,"loadeddata"),cw(3e3).then(()=>{throw new Hj})]),await cw(500),n){const[a]=s.getVideoTracks();a.getCapabilities().torch?a.applyConstraints({advanced:[{torch:!0}]}):console.warn("device does not support torch capability")}Zr={videoEl:t,stream:s,isActive:!0};const[o]=Zr.stream.getVideoTracks();return((i=o==null?void 0:o.getCapabilities)==null?void 0:i.call(o))??{}}const Az={class:"qrcode-stream-wrapper"},Tz={class:"qrcode-stream-overlay"},Iz=ir({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(t,{emit:e}){const n=t,r=ft(),i=ft(),s=ft(),o=ft(!1),a=ft(!1);jm(()=>{a.value=!0}),$c(()=>{$0()});const c=Gt(()=>({torch:n.torch,constraints:n.constraints,shouldStream:a.value&&!n.paused}));Mr(c,async f=>{const g=s.value;Yr(g!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const _=r.value;Yr(_!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const v=_.getContext("2d");if(Yr(v!==null,"if cavnas is defined, canvas 2d context should also be non-null"),f.shouldStream)try{const b=await Cz(g,f);a.value?(o.value=!0,e("camera-on",b)):$0()}catch(b){e("error",b)}else _.width=g.videoWidth,_.height=g.videoHeight,v.drawImage(g,0,0,g.videoWidth,g.videoHeight),$0(),o.value=!1,e("camera-off")},{deep:!0});const{formats:l}=Nk(n);Mr(l,f=>{a.value&&jj(f)});const u=Gt(()=>c.value.shouldStream&&o.value);Mr(u,f=>{if(f){Yr(r.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),h(r.value),Yr(i.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),h(i.value);const g=()=>n.track===void 0?500:40;Yr(s.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),zj(s.value,{detectHandler:_=>e("detect",_),formats:n.formats,locateHandler:d,minDelay:g()})}});const h=f=>{const g=f.getContext("2d");Yr(g!==null,"canvas 2d context should always be non-null"),g.clearRect(0,0,f.width,f.height)},d=f=>{const g=i.value;Yr(g!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const _=s.value;if(Yr(_!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),f.length===0||n.track===void 0)h(g);else{const v=_.offsetWidth,b=_.offsetHeight,x=_.videoWidth,E=_.videoHeight,w=Math.max(v/x,b/E),T=x*w,I=E*w,k=T/x,O=I/E,K=(v-T)/2,P=(b-I)/2,B=({x:me,y:he})=>({x:Math.floor(me*k),y:Math.floor(he*O)}),H=({x:me,y:he})=>({x:Math.floor(me+K),y:Math.floor(he+P)}),$=f.map(me=>{const{boundingBox:he,cornerPoints:Ee}=me,{x:_e,y:Be}=H(B({x:he.x,y:he.y})),{x:Re,y:U}=B({x:he.width,y:he.height});return{...me,cornerPoints:Ee.map(W=>H(B(W))),boundingBox:DOMRectReadOnly.fromRect({x:_e,y:Be,width:Re,height:U})}});g.width=_.offsetWidth,g.height=_.offsetHeight;const pe=g.getContext("2d");n.track($,pe)}};return(f,g)=>(mt(),Pt("div",Az,[rt("video",{ref_key:"videoRef",ref:s,class:Vc([{"qrcode-stream-camera--hidden":!u.value},"qrcode-stream-camera"]),autoplay:"",muted:"",playsinline:""},null,2),Zk(rt("canvas",{ref_key:"pauseFrameRef",ref:r,class:"qrcode-stream-camera"},null,512),[[d4,!u.value]]),rt("canvas",{ref_key:"trackingLayerRef",ref:i,class:"qrcode-stream-overlay"},null,512),rt("div",Tz,[Zw(f.$slots,"default",{},void 0,!0)])]))}}),Rz=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},$R=Rz(Iz,[["__scopeId","data-v-dfa4038c"]]),Sz=ir({__name:"QrcodeCapture",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect"],setup(t,{emit:e}){const n=t,r=i=>{if(!(!(i.target instanceof HTMLInputElement)||!i.target.files))for(const s of Array.from(i.target.files))SR(s,n.formats).then(o=>{e("detect",o)})};return(i,s)=>(mt(),Pt("input",{onChange:r,type:"file",name:"image",accept:"image/*",capture:"environment",multiple:""},null,32))}}),Pz=["onDrop"],kz=ir({__name:"QrcodeDropZone",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect","dragover","error"],setup(t,{emit:e}){const n=t,r=async o=>{try{const a=await o;e("detect",a)}catch(a){e("error",a)}},i=o=>{e("dragover",o)},s=({dataTransfer:o})=>{if(!o)return;i(!1);const a=[...Array.from(o.files)],c=o.getData("text/uri-list");a.forEach(l=>{r(SR(l))}),c!==""&&r(Wj(c,n.formats))};return(o,a)=>(mt(),Pt("div",{onDrop:Fl(s,["prevent","stop"]),onDragenter:a[0]||(a[0]=Fl(c=>i(!0),["prevent","stop"])),onDragleave:a[1]||(a[1]=Fl(c=>i(!1),["prevent","stop"])),onDragover:a[2]||(a[2]=Fl(()=>{},["prevent","stop"]))},[Zw(o.$slots,"default")],40,Pz))}});function Dz(t){t.component("qrcode-stream",$R),t.component("qrcode-capture",Sz),t.component("qrcode-drop-zone",kz)}const Nz={install:Dz};let Eh=null;typeof window<"u"?Eh=window.Vue:typeof global<"u"&&(Eh=global.Vue);Eh&&Eh.use(Nz);/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oz extends Bn{render(){return dt`<slot></slot>`}connectedCallback(){if(super.connectedCallback(),this.getAttribute("aria-hidden")==="false"){this.removeAttribute("aria-hidden");return}this.setAttribute("aria-hidden","true")}}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fz=$n`:host{font-size:var(--md-icon-size, 24px);width:var(--md-icon-size, 24px);height:var(--md-icon-size, 24px);color:inherit;font-variation-settings:inherit;font-weight:400;font-family:var(--md-icon-font, Material Symbols Outlined);display:inline-flex;font-style:normal;place-items:center;place-content:center;line-height:1;overflow:hidden;letter-spacing:normal;text-transform:none;user-select:none;white-space:nowrap;word-wrap:normal;flex-shrink:0;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale}::slotted(svg){fill:currentColor}::slotted(*){height:100%;width:100%}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vm=class extends Oz{};vm.styles=[Fz];vm=de([Ar("md-icon")],vm);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mz=$n`:host{--_container-color: var(--md-filled-icon-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-height: var(--md-filled-icon-button-container-height, 40px);--_container-width: var(--md-filled-icon-button-container-width, 40px);--_disabled-container-color: var(--md-filled-icon-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-icon-button-disabled-container-opacity, 0.12);--_disabled-icon-color: var(--md-filled-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-icon-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-icon-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color: var(--md-filled-icon-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color: var(--md-filled-icon-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity: var(--md-filled-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-filled-icon-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size: var(--md-filled-icon-button-icon-size, 24px);--_pressed-icon-color: var(--md-filled-icon-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color: var(--md-filled-icon-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity: var(--md-filled-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color: var(--md-filled-icon-button-selected-container-color, var(--md-sys-color-primary, #6750a4));--_toggle-selected-focus-icon-color: var(--md-filled-icon-button-toggle-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-icon-color: var(--md-filled-icon-button-toggle-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-state-layer-color: var(--md-filled-icon-button-toggle-selected-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-icon-color: var(--md-filled-icon-button-toggle-selected-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-icon-color: var(--md-filled-icon-button-toggle-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-state-layer-color: var(--md-filled-icon-button-toggle-selected-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_unselected-container-color: var(--md-filled-icon-button-unselected-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_toggle-focus-icon-color: var(--md-filled-icon-button-toggle-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-icon-color: var(--md-filled-icon-button-toggle-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-state-layer-color: var(--md-filled-icon-button-toggle-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_toggle-icon-color: var(--md-filled-icon-button-toggle-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-icon-color: var(--md-filled-icon-button-toggle-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-state-layer-color: var(--md-filled-icon-button-toggle-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var(--md-filled-icon-button-container-shape-start-start, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-filled-icon-button-container-shape-start-end, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-filled-icon-button-container-shape-end-end, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-filled-icon-button-container-shape-end-start, var(--md-filled-icon-button-container-shape, var(--md-sys-shape-corner-full, 9999px)))}.icon-button{color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.icon-button:hover{color:var(--_hover-icon-color)}.icon-button:focus{color:var(--_focus-icon-color)}.icon-button:active{color:var(--_pressed-icon-color)}.icon-button:disabled{color:var(--_disabled-icon-color)}.icon-button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute;z-index:-1}.icon-button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.icon-button:disabled .icon{opacity:var(--_disabled-icon-opacity)}.toggle-filled{--md-ripple-hover-color: var(--_toggle-hover-state-layer-color);--md-ripple-pressed-color: var(--_toggle-pressed-state-layer-color)}.toggle-filled:not(:disabled){color:var(--_toggle-icon-color)}.toggle-filled:not(:disabled):hover{color:var(--_toggle-hover-icon-color)}.toggle-filled:not(:disabled):focus{color:var(--_toggle-focus-icon-color)}.toggle-filled:not(:disabled):active{color:var(--_toggle-pressed-icon-color)}.toggle-filled:not(:disabled)::before{background-color:var(--_unselected-container-color)}.selected{--md-ripple-hover-color: var(--_toggle-selected-hover-state-layer-color);--md-ripple-pressed-color: var(--_toggle-selected-pressed-state-layer-color)}.selected:not(:disabled){color:var(--_toggle-selected-icon-color)}.selected:not(:disabled):hover{color:var(--_toggle-selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_toggle-selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_toggle-selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}
`;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UR=Symbol.for(""),Bz=t=>{if((t==null?void 0:t.r)===UR)return t==null?void 0:t._$litStatic$},hw=(t,...e)=>({_$litStatic$:e.reduce((n,r,i)=>n+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[i+1],t[0]),r:UR}),dw=new Map,Lz=t=>(e,...n)=>{const r=n.length;let i,s;const o=[],a=[];let c,l=0,u=!1;for(;l<r;){for(c=e[l];l<r&&(s=n[l],(i=Bz(s))!==void 0);)c+=i+e[++l],u=!0;l!==r&&a.push(s),o.push(c),l++}if(l===r&&o.push(e[r]),u){const h=o.join("$$lit$$");(e=dw.get(h))===void 0&&(o.raw=o,dw.set(h,e=o)),n=a}return t(e,...n)},Vz=Lz(dt);/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fw(t,e=!0){return e&&getComputedStyle(t).getPropertyValue("direction").trim()==="rtl"}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $z=cv(Bn);class Dn extends $z{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=fw(this,this.flipIconInRtl)}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[On].form}get labels(){return this[On].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const e=this.href?hw`div`:hw`button`,{ariaLabel:n,ariaHasPopup:r,ariaExpanded:i}=this,s=n&&this.ariaLabelSelected,o=this.toggle?this.selected:Ne;let a=Ne;return this.href||(a=s&&this.selected?this.ariaLabelSelected:n),Vz`<${e}
        class="icon-button ${Ko(this.getRenderClasses())}"
        id="button"
        aria-label="${a||Ne}"
        aria-haspopup="${!this.href&&r||Ne}"
        aria-expanded="${!this.href&&i||Ne}"
        aria-pressed="${o}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?Ne:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():Ne}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return dt`
      <a
        class="link"
        id="link"
        href="${this.href}"
        target="${this.target||Ne}"
        aria-label="${e||Ne}"></a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return dt`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return dt`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return dt`<span class="touch"></span>`}renderFocusRing(){return dt`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){return dt`<md-ripple
      for=${this.href?"link":Ne}
      ?disabled="${!this.href&&this.disabled}"></md-ripple>`}connectedCallback(){this.flipIcon=fw(this,this.flipIconInRtl),super.connectedCallback()}async handleClick(e){await 0,!(!this.toggle||this.disabled||e.defaultPrevented)&&(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}_l(Dn),fR(Dn);Dn.formAssociated=!0;Dn.shadowRootOptions={mode:"open",delegatesFocus:!0};de([Ve({type:Boolean,reflect:!0})],Dn.prototype,"disabled",void 0);de([Ve({type:Boolean,attribute:"flip-icon-in-rtl"})],Dn.prototype,"flipIconInRtl",void 0);de([Ve()],Dn.prototype,"href",void 0);de([Ve()],Dn.prototype,"target",void 0);de([Ve({attribute:"aria-label-selected"})],Dn.prototype,"ariaLabelSelected",void 0);de([Ve({type:Boolean})],Dn.prototype,"toggle",void 0);de([Ve({type:Boolean,reflect:!0})],Dn.prototype,"selected",void 0);de([Ve()],Dn.prototype,"type",void 0);de([Ve({reflect:!0})],Dn.prototype,"value",void 0);de([ns()],Dn.prototype,"flipIcon",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uz=$n`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:none;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host([disabled]){--_disabled-icon-opacity: 1}}
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ym=class extends Dn{getRenderClasses(){return{...super.getRenderClasses(),filled:!0,"toggle-filled":this.toggle}}};ym.styles=[Uz,Mz];ym=de([Ar("md-filled-icon-button")],ym);const Hz={class:"qrScanner"},jz=rt("md-icon",null," replay ",-1),zz=[jz],qz=ir({__name:"ScanQr",emits:["codeFound","badCodeFound"],setup(t,{emit:e}){const n=ft(!0),r=ft(!1);ft();const i="vibrate"in navigator;function s(c){const l=atob(c),[u,h]=l.split("|"),d=im.AES.decrypt(h,u).toString(im.enc.Utf8),[f,g]=d.split("|"),_=+g;return[f,_]}function o(c){if(c.length>=1){i&&navigator.vibrate(200),r.value=!0;const l=new Date().getTime(),[u,h]=s(c[0].rawValue);l-h<=3e3?e("codeFound",u):(r.value=!1,e("badCodeFound",u))}}function a(){n.value=!1}return(c,l)=>(mt(),Pt("div",Hz,[Vt(St($R),{onDetect:o,constraints:{facingMode:"environment"},onCameraOn:a,paused:r.value},{default:bu(()=>[n.value?(mt(),Pt("div",{key:0,class:"loading-indicator","on:cameraOn":a},"Caricamento...",32)):ur("",!0)]),_:1},8,["paused"]),r.value?(mt(),Pt("md-filled-icon-button",{key:0,class:"restartButton",onClick:l[0]||(l[0]=u=>r.value=!1)},zz)):ur("",!0)]))}});/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ld extends Bn{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}de([Ve({type:Boolean,reflect:!0})],Ld.prototype,"inset",void 0);de([Ve({type:Boolean,reflect:!0,attribute:"inset-start"})],Ld.prototype,"insetStart",void 0);de([Ve({type:Boolean,reflect:!0,attribute:"inset-end"})],Ld.prototype,"insetEnd",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wz=$n`:host{box-sizing:border-box;color:var(--md-divider-color, var(--md-sys-color-outline-variant, #cac4d0));display:flex;height:var(--md-divider-thickness, 1px);width:100%}:host([inset]),:host([inset-start]){padding-inline-start:16px}:host([inset]),:host([inset-end]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors: active){:host::before{background:CanvasText}}
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xm=class extends Ld{};xm.styles=[Wz];xm=de([Ar("md-divider")],xm);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HR(t,e){e.bubbles&&(!t.shadowRoot||e.composed)&&e.stopPropagation();const n=Reflect.construct(e.constructor,[e.type,e]),r=t.dispatchEvent(n);return r||e.preventDefault(),r}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kz={dialog:[[[{transform:"translateY(-50px)"},{transform:"translateY(0)"}],{duration:500,easing:Lc.EMPHASIZED}]],scrim:[[[{opacity:0},{opacity:.32}],{duration:500,easing:"linear"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}],[[{height:"35%"},{height:"100%"}],{duration:500,easing:Lc.EMPHASIZED,pseudoElement:"::before"}]],headline:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],content:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:0},{opacity:0,offset:.5},{opacity:1}],{duration:300,easing:"linear",fill:"forwards"}]]},Gz={dialog:[[[{transform:"translateY(0)"},{transform:"translateY(-50px)"}],{duration:150,easing:Lc.EMPHASIZED_ACCELERATE}]],scrim:[[[{opacity:.32},{opacity:0}],{duration:150,easing:"linear"}]],container:[[[{height:"100%"},{height:"35%"}],{duration:150,easing:Lc.EMPHASIZED_ACCELERATE,pseudoElement:"::before"}],[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]],headline:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],content:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]]};/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ft extends Bn{get open(){return this.isOpen}set open(e){e!==this.isOpen&&(this.isOpen=e,e?(this.setAttribute("open",""),this.show()):(this.removeAttribute("open"),this.close()))}constructor(){super(),this.quick=!1,this.returnValue="",this.getOpenAnimation=()=>Kz,this.getCloseAnimation=()=>Gz,this.isOpen=!1,this.isOpening=!1,this.isConnectedPromise=this.getIsConnectedPromise(),this.isAtScrollTop=!1,this.isAtScrollBottom=!1,this.nextClickIsFromContent=!1,this.hasHeadline=!1,this.hasActions=!1,this.hasIcon=!1,this.escapePressedWithoutCancel=!1,this.addEventListener("submit",this.handleSubmit),this.addEventListener("focus",()=>{var e;(e=this.dialog)==null||e.focus()}),this.addEventListener("blur",()=>{var e;(e=this.dialog)==null||e.blur()})}async show(){var r;this.isOpening=!0,await this.isConnectedPromise,await this.updateComplete;const e=this.dialog;if(e.open||!this.isOpening){this.isOpening=!1;return}if(!this.dispatchEvent(new Event("open",{cancelable:!0}))){this.open=!1;return}e.showModal(),this.open=!0,this.scroller&&(this.scroller.scrollTop=0),(r=this.querySelector("[autofocus]"))==null||r.focus(),await this.animateDialog(this.getOpenAnimation()),this.dispatchEvent(new Event("opened")),this.isOpening=!1}async close(e=this.returnValue){if(this.isOpening=!1,!this.isConnected){this.open=!1;return}await this.updateComplete;const n=this.dialog;if(!n.open||this.isOpening){this.open=!1;return}const r=this.returnValue;if(this.returnValue=e,!this.dispatchEvent(new Event("close",{cancelable:!0}))){this.returnValue=r;return}await this.animateDialog(this.getCloseAnimation()),n.close(e),this.open=!1,this.dispatchEvent(new Event("closed"))}connectedCallback(){super.connectedCallback(),this.isConnectedPromiseResolve()}disconnectedCallback(){super.disconnectedCallback(),this.isConnectedPromise=this.getIsConnectedPromise()}render(){const e=this.open&&!(this.isAtScrollTop&&this.isAtScrollBottom),n={"has-headline":this.hasHeadline,"has-actions":this.hasActions,"has-icon":this.hasIcon,scrollable:e,"show-top-divider":e&&!this.isAtScrollTop,"show-bottom-divider":e&&!this.isAtScrollBottom},{ariaLabel:r}=this;return dt`
      <div class="scrim"></div>
      <dialog
        class=${Ko(n)}
        aria-label=${r||Ne}
        aria-labelledby=${this.hasHeadline?"headline":Ne}
        role=${this.type==="alert"?"alertdialog":Ne}
        @cancel=${this.handleCancel}
        @click=${this.handleDialogClick}
        @close=${this.handleClose}
        @keydown=${this.handleKeydown}
        .returnValue=${this.returnValue||Ne}>
        <div class="container" @click=${this.handleContentClick}>
          <div class="headline">
            <div class="icon" aria-hidden="true">
              <slot name="icon" @slotchange=${this.handleIconChange}></slot>
            </div>
            <h2 id="headline" aria-hidden=${!this.hasHeadline||Ne}>
              <slot
                name="headline"
                @slotchange=${this.handleHeadlineChange}></slot>
            </h2>
            <md-divider></md-divider>
          </div>
          <div class="scroller">
            <div class="content">
              <div class="top anchor"></div>
              <slot name="content"></slot>
              <div class="bottom anchor"></div>
            </div>
          </div>
          <div class="actions">
            <md-divider></md-divider>
            <slot name="actions" @slotchange=${this.handleActionsChange}></slot>
          </div>
        </div>
      </dialog>
    `}firstUpdated(){this.intersectionObserver=new IntersectionObserver(e=>{for(const n of e)this.handleAnchorIntersection(n)},{root:this.scroller}),this.intersectionObserver.observe(this.topAnchor),this.intersectionObserver.observe(this.bottomAnchor)}handleDialogClick(){if(this.nextClickIsFromContent){this.nextClickIsFromContent=!1;return}this.dispatchEvent(new Event("cancel",{cancelable:!0}))&&this.close()}handleContentClick(){this.nextClickIsFromContent=!0}handleSubmit(e){const n=e.target,{submitter:r}=e;n.method!=="dialog"||!r||this.close(r.getAttribute("value")??this.returnValue)}handleCancel(e){if(e.target!==this.dialog)return;this.escapePressedWithoutCancel=!1;const n=!HR(this,e);e.preventDefault(),!n&&this.close()}handleClose(){var e;this.escapePressedWithoutCancel&&(this.escapePressedWithoutCancel=!1,(e=this.dialog)==null||e.dispatchEvent(new Event("cancel",{cancelable:!0})))}handleKeydown(e){e.key==="Escape"&&(this.escapePressedWithoutCancel=!0,setTimeout(()=>{this.escapePressedWithoutCancel=!1}))}async animateDialog(e){var v;if((v=this.cancelAnimations)==null||v.abort(),this.cancelAnimations=new AbortController,this.quick)return;const{dialog:n,scrim:r,container:i,headline:s,content:o,actions:a}=this;if(!n||!r||!i||!s||!o||!a)return;const{container:c,dialog:l,scrim:u,headline:h,content:d,actions:f}=e,g=[[n,l??[]],[r,u??[]],[i,c??[]],[s,h??[]],[o,d??[]],[a,f??[]]],_=[];for(const[b,x]of g)for(const E of x){const w=b.animate(...E);this.cancelAnimations.signal.addEventListener("abort",()=>{w.cancel()}),_.push(w)}await Promise.all(_.map(b=>b.finished.catch(()=>{})))}handleHeadlineChange(e){const n=e.target;this.hasHeadline=n.assignedElements().length>0}handleActionsChange(e){const n=e.target;this.hasActions=n.assignedElements().length>0}handleIconChange(e){const n=e.target;this.hasIcon=n.assignedElements().length>0}handleAnchorIntersection(e){const{target:n,isIntersecting:r}=e;n===this.topAnchor&&(this.isAtScrollTop=r),n===this.bottomAnchor&&(this.isAtScrollBottom=r)}getIsConnectedPromise(){return new Promise(e=>{this.isConnectedPromiseResolve=e})}}_l(Ft);de([Ve({type:Boolean})],Ft.prototype,"open",null);de([Ve({type:Boolean})],Ft.prototype,"quick",void 0);de([Ve({attribute:!1})],Ft.prototype,"returnValue",void 0);de([Ve()],Ft.prototype,"type",void 0);de([or("dialog")],Ft.prototype,"dialog",void 0);de([or(".scrim")],Ft.prototype,"scrim",void 0);de([or(".container")],Ft.prototype,"container",void 0);de([or(".headline")],Ft.prototype,"headline",void 0);de([or(".content")],Ft.prototype,"content",void 0);de([or(".actions")],Ft.prototype,"actions",void 0);de([ns()],Ft.prototype,"isAtScrollTop",void 0);de([ns()],Ft.prototype,"isAtScrollBottom",void 0);de([or(".scroller")],Ft.prototype,"scroller",void 0);de([or(".top.anchor")],Ft.prototype,"topAnchor",void 0);de([or(".bottom.anchor")],Ft.prototype,"bottomAnchor",void 0);de([ns()],Ft.prototype,"hasHeadline",void 0);de([ns()],Ft.prototype,"hasActions",void 0);de([ns()],Ft.prototype,"hasIcon",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qz=$n`:host{border-start-start-radius:var(--md-dialog-container-shape-start-start, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));border-start-end-radius:var(--md-dialog-container-shape-start-end, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));border-end-end-radius:var(--md-dialog-container-shape-end-end, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));border-end-start-radius:var(--md-dialog-container-shape-end-start, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));display:contents;margin:auto;max-height:min(560px,100% - 48px);max-width:min(560px,100% - 48px);min-height:140px;min-width:280px;position:fixed;height:fit-content;width:fit-content}dialog{background:rgba(0,0,0,0);border:none;border-radius:inherit;flex-direction:column;height:inherit;margin:inherit;max-height:inherit;max-width:inherit;min-height:inherit;min-width:inherit;outline:none;overflow:visible;padding:0;width:inherit}dialog[open]{display:flex}::backdrop{background:none}.scrim{background:var(--md-sys-color-scrim, #000);display:none;inset:0;opacity:32%;pointer-events:none;position:fixed;z-index:1}:host([open]) .scrim{display:flex}h2{all:unset;align-self:stretch}.headline{align-items:center;color:var(--md-dialog-headline-color, var(--md-sys-color-on-surface, #1d1b20));display:flex;flex-direction:column;font-family:var(--md-dialog-headline-font, var(--md-sys-typescale-headline-small-font, var(--md-ref-typeface-brand, Roboto)));font-size:var(--md-dialog-headline-size, var(--md-sys-typescale-headline-small-size, 1.5rem));line-height:var(--md-dialog-headline-line-height, var(--md-sys-typescale-headline-small-line-height, 2rem));font-weight:var(--md-dialog-headline-weight, var(--md-sys-typescale-headline-small-weight, var(--md-ref-typeface-weight-regular, 400)));position:relative}slot[name=headline]::slotted(*){align-items:center;align-self:stretch;box-sizing:border-box;display:flex;gap:8px;padding:24px 24px 0}.icon{display:flex}slot[name=icon]::slotted(*){color:var(--md-dialog-icon-color, var(--md-sys-color-secondary, #625b71));fill:currentColor;font-size:var(--md-dialog-icon-size, 24px);margin-top:24px;height:var(--md-dialog-icon-size, 24px);width:var(--md-dialog-icon-size, 24px)}.has-icon slot[name=headline]::slotted(*){justify-content:center;padding-top:16px}.scrollable slot[name=headline]::slotted(*){padding-bottom:16px}.scrollable.has-headline slot[name=content]::slotted(*){padding-top:8px}.container{border-radius:inherit;display:flex;flex-direction:column;flex-grow:1;overflow:hidden;position:relative;transform-origin:top}.container::before{background:var(--md-dialog-container-color, var(--md-sys-color-surface-container-high, #ece6f0));border-radius:inherit;content:"";inset:0;position:absolute}.scroller{display:flex;flex:1;flex-direction:column;overflow:hidden;z-index:1}.scrollable .scroller{overflow-y:scroll}.content{color:var(--md-dialog-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-dialog-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-dialog-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-dialog-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-dialog-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)));height:min-content;position:relative}slot[name=content]::slotted(*){box-sizing:border-box;padding:24px}.anchor{position:absolute}.top.anchor{top:0}.bottom.anchor{bottom:0}.actions{position:relative}slot[name=actions]::slotted(*){box-sizing:border-box;display:flex;gap:8px;justify-content:flex-end;padding:16px 24px 24px}.has-actions slot[name=content]::slotted(*){padding-bottom:8px}md-divider{display:none;position:absolute}.has-headline.show-top-divider .headline md-divider,.has-actions.show-bottom-divider .actions md-divider{display:flex}.headline md-divider{bottom:0}.actions md-divider{top:0}@media(forced-colors: active){dialog{outline:2px solid WindowText}}
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Em=class extends Ft{};Em.styles=[Qz];Em=de([Ar("md-dialog")],Em);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yz extends kn{}/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xz=$n`:host{--_container-height: var(--md-text-button-container-height, 40px);--_disabled-label-text-color: var(--md-text-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-text-button-disabled-label-text-opacity, 0.38);--_focus-label-text-color: var(--md-text-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color: var(--md-text-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color: var(--md-text-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity: var(--md-text-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-text-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font: var(--md-text-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-text-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-text-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-text-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-label-text-color: var(--md-text-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color: var(--md-text-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-text-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-text-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-text-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-text-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color: var(--md-text-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color: var(--md-text-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-text-button-icon-size, 18px);--_pressed-icon-color: var(--md-text-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var(--md-text-button-container-shape-start-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-text-button-container-shape-start-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-text-button-container-shape-end-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-text-button-container-shape-end-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-text-button-leading-space, 12px);--_trailing-space: var(--md-text-button-trailing-space, 12px);--_with-leading-icon-leading-space: var(--md-text-button-with-leading-icon-leading-space, 12px);--_with-leading-icon-trailing-space: var(--md-text-button-with-leading-icon-trailing-space, 16px);--_with-trailing-icon-leading-space: var(--md-text-button-with-trailing-icon-leading-space, 16px);--_with-trailing-icon-trailing-space: var(--md-text-button-with-trailing-icon-trailing-space, 12px);--_container-color: none;--_disabled-container-color: none;--_disabled-container-opacity: 0}
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wm=class extends Yz{};wm.styles=[gR,Xz];wm=de([Ar("md-text-button")],wm);const Jz=["open"],Zz=rt("div",{slot:"headline"},"Conferma identità",-1),eq={key:0,slot:"content",id:"form-id",method:"dialog"},tq=["open"],nq=rt("div",{slot:"headline"},"Codice non trovato",-1),rq={key:0,slot:"content",id:"form-id",method:"dialog"},iq={slot:"actions"},sq=["open"],oq=rt("div",{slot:"headline"},"Codice errato",-1),aq={key:0,slot:"content",id:"form-id",method:"dialog"},cq={slot:"actions"},lq=ir({__name:"Scanner",setup(t){const e=ft(),n=ft(),r=ft(!1),i=ft(!1),s=ft(!1);async function o(u){n.value=u;const h=await z_(ii(fr,`codes/${u}`),{once:!0}).promise.value;if(!h){i.value=!0;return}e.value=Gt(()=>h.user),r.value=!0}async function a(u){n.value=u,s.value=!0}async function c(){r.value=!1;const u=e.value.value;await o2(fr,async h=>{h.set(ii(fr,`scans/${new Date().getTime()}`),{code:n.value,timestamp:uh(),username:u.username,userRef:ii(fr,`users/${u.id}`)}),h.update(ii(fr,`users/${u.id}`),{lastPunchTime:uh()})})}function l(){r.value=!1}return(u,h)=>(mt(),Pt(Zn,null,[Vt(qz,{onCodeFound:o,onBadCodeFound:a}),rt("md-dialog",{onClose:h[0]||(h[0]=d=>r.value=!1),class:"removeDialog",type:"alert",open:r.value},[Zz,e.value&&e.value.value?(mt(),Pt("form",eq,[rt("div",null," Il codice corrisponde a: "+nu(e.value.value.username),1)])):ur("",!0),rt("div",{slot:"actions"},[rt("md-text-button",{form:"form-id",value:"cancel",onClick:l},"Annulla"),rt("md-text-button",{form:"form-id",value:"confirm",onClick:c},"Conferma")])],40,Jz),rt("md-dialog",{onClose:h[2]||(h[2]=d=>i.value=!1),class:"removeDialog",type:"alert",open:i.value},[nq,n.value?(mt(),Pt("form",rq,[rt("div",null," Il codice non corrisponde a nessun utente. Contatta gli sviluppatori con il seguente codice: "+nu(n.value),1)])):ur("",!0),rt("div",iq,[rt("md-text-button",{form:"form-id",value:"congirm",onClick:h[1]||(h[1]=d=>i.value=!1)},"Ok")])],40,tq),rt("md-dialog",{onClose:h[4]||(h[4]=d=>s.value=!1),class:"removeDialog",type:"alert",open:s.value},[oq,n.value?(mt(),Pt("form",aq,[rt("div",null," Il codice non è ben formattato. Controlla che l'ora e la data dei dispositivi siano corretti. Contatta gli sviluppatori e comunica il seguente codice: "+nu(n.value),1)])):ur("",!0),rt("div",cq,[rt("md-text-button",{form:"form-id",value:"congirm",onClick:h[3]||(h[3]=d=>s.value=!1)},"Ok")])],40,sq)],64))}}),uq=t=>(zk("data-v-cb6d17e7"),t=t(),qk(),t),hq=["src"],dq=uq(()=>rt("img",{class:"accountImage",src:"https://images.crunchbase.com/image/upload/c_thumb,h_170,w_170,f_auto,g_faces,z_0.7,b_white,q_auto:eco,dpr_1/llwijg0ncg0pyknjcmnk",alt:""},null,-1)),fq=ir({__name:"AccountImage",setup(t){var r;const e=zh(),n=ft((r=e.value)==null?void 0:r.providerData[0].photoURL);return(i,s)=>{const o=uD("RouterLink");return mt(),Pt("div",null,[n.value?(mt(),Ao(o,{key:0,to:"/myAccount"},{default:bu(()=>[rt("img",{class:"accountImage",src:n.value,referrerpolicy:"no-referrer",alt:""},null,8,hq)]),_:1})):(mt(),Ao(o,{key:1,to:"/myAccount"},{default:bu(()=>[dq]),_:1}))])}}});const pq=k2(fq,[["__scopeId","data-v-cb6d17e7"]]);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bm=Symbol("createValidator"),Cm=Symbol("getValidityAnchor"),U0=Symbol("privateValidator"),Xr=Symbol("privateSyncValidity"),Zl=Symbol("privateCustomValidationMessage");function mq(t){var e;class n extends t{constructor(){super(...arguments),this[e]=""}get validity(){return this[Xr](),this[On].validity}get validationMessage(){return this[Xr](),this[On].validationMessage}get willValidate(){return this[Xr](),this[On].willValidate}checkValidity(){return this[Xr](),this[On].checkValidity()}reportValidity(){return this[Xr](),this[On].reportValidity()}setCustomValidity(i){this[Zl]=i,this[Xr]()}requestUpdate(i,s,o){super.requestUpdate(i,s,o),this[Xr]()}firstUpdated(i){super.firstUpdated(i),this[Xr]()}[(e=Zl,Xr)](){this[U0]||(this[U0]=this[bm]());const{validity:i,validationMessage:s}=this[U0].getValidity(),o=!!this[Zl],a=this[Zl]||s;this[On].setValidity({...i,customError:o},a,this[Cm]()??void 0)}[bm](){throw new Error("Implement [createValidator]")}[Cm](){throw new Error("Implement [getValidityAnchor]")}}return n}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vu=Symbol("getFormValue"),Am=Symbol("getFormState");function gq(t){class e extends t{get form(){return this[On].form}get labels(){return this[On].labels}get name(){return this.getAttribute("name")??""}set name(r){this.setAttribute("name",r)}get disabled(){return this.hasAttribute("disabled")}set disabled(r){this.toggleAttribute("disabled",r)}attributeChangedCallback(r,i,s){if(r==="name"||r==="disabled"){const o=r==="disabled"?i!==null:i;this.requestUpdate(r,o);return}super.attributeChangedCallback(r,i,s)}requestUpdate(r,i,s){super.requestUpdate(r,i,s),this[On].setFormValue(this[vu](),this[Am]())}[vu](){throw new Error("Implement [getFormValue]")}[Am](){return this[vu]()}formDisabledCallback(r){this.disabled=r}}return e.formAssociated=!0,de([Ve({noAccessor:!0})],e.prototype,"name",null),de([Ve({type:Boolean,noAccessor:!0})],e.prototype,"disabled",null),e}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _q{constructor(e){this.getCurrentState=e,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const e=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,e)))return this.currentValidity;const{validity:r,validationMessage:i}=this.computeValidity(e);return this.prevState=this.copy(e),this.currentValidity={validationMessage:i,validity:{badInput:r.badInput,customError:r.customError,patternMismatch:r.patternMismatch,rangeOverflow:r.rangeOverflow,rangeUnderflow:r.rangeUnderflow,stepMismatch:r.stepMismatch,tooLong:r.tooLong,tooShort:r.tooShort,typeMismatch:r.typeMismatch,valueMissing:r.valueMissing}},this.currentValidity}}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vq extends _q{computeValidity(e){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=e.checked,this.checkboxControl.required=e.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(e,n){return e.checked===n.checked&&e.required===n.required}copy({checked:e,required:n}){return{checked:e,required:n}}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yq=mq(gq(cv(Bn)));class mi extends yq{constructor(){super(),this.selected=!1,this.icons=!1,this.showOnlySelectedIcon=!1,this.required=!1,this.value="on",this.addEventListener("click",e=>{!mR(e)||!this.input||(this.focus(),pR(this.input))})}render(){return dt`
      <div class="switch ${Ko(this.getRenderClasses())}">
        <input
          id="switch"
          class="touch"
          type="checkbox"
          role="switch"
          aria-label=${this.ariaLabel||Ne}
          ?checked=${this.selected}
          ?disabled=${this.disabled}
          ?required=${this.required}
          @input=${this.handleInput}
          @change=${this.handleChange} />

        <md-focus-ring part="focus-ring" for="switch"></md-focus-ring>
        <span class="track"> ${this.renderHandle()} </span>
      </div>
    `}getRenderClasses(){return{selected:this.selected,unselected:!this.selected,disabled:this.disabled}}renderHandle(){const e={"with-icon":this.showOnlySelectedIcon?this.selected:this.icons};return dt`
      ${this.renderTouchTarget()}
      <span class="handle-container">
        <md-ripple for="switch" ?disabled="${this.disabled}"></md-ripple>
        <span class="handle ${Ko(e)}">
          ${this.shouldShowIcons()?this.renderIcons():dt``}
        </span>
      </span>
    `}renderIcons(){return dt`
      <div class="icons">
        ${this.renderOnIcon()}
        ${this.showOnlySelectedIcon?dt``:this.renderOffIcon()}
      </div>
    `}renderOnIcon(){return dt`
      <slot class="icon icon--on" name="on-icon">
        <svg viewBox="0 0 24 24">
          <path
            d="M9.55 18.2 3.65 12.3 5.275 10.675 9.55 14.95 18.725 5.775 20.35 7.4Z" />
        </svg>
      </slot>
    `}renderOffIcon(){return dt`
      <slot class="icon icon--off" name="off-icon">
        <svg viewBox="0 0 24 24">
          <path
            d="M6.4 19.2 4.8 17.6 10.4 12 4.8 6.4 6.4 4.8 12 10.4 17.6 4.8 19.2 6.4 13.6 12 19.2 17.6 17.6 19.2 12 13.6Z" />
        </svg>
      </slot>
    `}renderTouchTarget(){return dt`<span class="touch"></span>`}shouldShowIcons(){return this.icons||this.showOnlySelectedIcon}handleInput(e){const n=e.target;this.selected=n.checked}handleChange(e){HR(this,e)}[vu](){return this.selected?this.value:null}[Am](){return String(this.selected)}formResetCallback(){this.selected=this.hasAttribute("selected")}formStateRestoreCallback(e){this.selected=e==="true"}[bm](){return new vq(()=>({checked:this.selected,required:this.required}))}[Cm](){return this.input}}_l(mi);mi.shadowRootOptions={mode:"open",delegatesFocus:!0};de([Ve({type:Boolean})],mi.prototype,"selected",void 0);de([Ve({type:Boolean})],mi.prototype,"icons",void 0);de([Ve({type:Boolean,attribute:"show-only-selected-icon"})],mi.prototype,"showOnlySelectedIcon",void 0);de([Ve({type:Boolean})],mi.prototype,"required",void 0);de([Ve()],mi.prototype,"value",void 0);de([or("input")],mi.prototype,"input",void 0);/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xq=$n`@layer styles, hcm;@layer styles{:host{display:inline-flex;outline:none;vertical-align:top;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-switch-track-height, 32px))/2) 0px}md-focus-ring{--md-focus-ring-shape-start-start: var(--md-switch-track-shape-start-start, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)));--md-focus-ring-shape-start-end: var(--md-switch-track-shape-start-end, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)));--md-focus-ring-shape-end-end: var(--md-switch-track-shape-end-end, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)));--md-focus-ring-shape-end-start: var(--md-switch-track-shape-end-start, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)))}.switch{align-items:center;display:inline-flex;flex-shrink:0;position:relative;width:var(--md-switch-track-width, 52px);height:var(--md-switch-track-height, 32px);border-start-start-radius:var(--md-switch-track-shape-start-start, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)));border-start-end-radius:var(--md-switch-track-shape-start-end, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)));border-end-end-radius:var(--md-switch-track-shape-end-end, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)));border-end-start-radius:var(--md-switch-track-shape-end-start, var(--md-switch-track-shape, var(--md-sys-shape-corner-full, 9999px)))}input{appearance:none;height:48px;outline:none;margin:0;position:absolute;width:100%;z-index:1;cursor:inherit}:host([touch-target=none]) input{display:none}}@layer styles{.track{position:absolute;width:100%;height:100%;box-sizing:border-box;border-radius:inherit;display:flex;justify-content:center;align-items:center}.track::before{content:"";display:flex;position:absolute;height:100%;width:100%;border-radius:inherit;box-sizing:border-box;transition-property:opacity,background-color;transition-timing-function:linear;transition-duration:67ms}.disabled .track{background-color:rgba(0,0,0,0);border-color:rgba(0,0,0,0)}.disabled .track::before,.disabled .track::after{transition:none;opacity:var(--md-switch-disabled-track-opacity, 0.12)}.disabled .track::before{background-clip:content-box}.selected .track::before{background-color:var(--md-switch-selected-track-color, var(--md-sys-color-primary, #6750a4))}.selected:hover .track::before{background-color:var(--md-switch-selected-hover-track-color, var(--md-sys-color-primary, #6750a4))}.selected:focus-within .track::before{background-color:var(--md-switch-selected-focus-track-color, var(--md-sys-color-primary, #6750a4))}.selected:active .track::before{background-color:var(--md-switch-selected-pressed-track-color, var(--md-sys-color-primary, #6750a4))}.selected.disabled .track{background-clip:border-box}.selected.disabled .track::before{background-color:var(--md-switch-disabled-selected-track-color, var(--md-sys-color-on-surface, #1d1b20))}.unselected .track::before{background-color:var(--md-switch-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));border-color:var(--md-switch-track-outline-color, var(--md-sys-color-outline, #79747e));border-style:solid;border-width:var(--md-switch-track-outline-width, 2px)}.unselected:hover .track::before{background-color:var(--md-switch-hover-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));border-color:var(--md-switch-hover-track-outline-color, var(--md-sys-color-outline, #79747e))}.unselected:focus-visible .track::before{background-color:var(--md-switch-focus-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));border-color:var(--md-switch-focus-track-outline-color, var(--md-sys-color-outline, #79747e))}.unselected:active .track::before{background-color:var(--md-switch-pressed-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));border-color:var(--md-switch-pressed-track-outline-color, var(--md-sys-color-outline, #79747e))}.unselected.disabled .track::before{background-color:var(--md-switch-disabled-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));border-color:var(--md-switch-disabled-track-outline-color, var(--md-sys-color-on-surface, #1d1b20))}}@layer hcm{@media(forced-colors: active){.selected .track::before{background:ButtonText;border-color:ButtonText}.disabled .track::before{border-color:GrayText;opacity:1}.disabled.selected .track::before{background:GrayText}}}@layer styles{.handle-container{display:flex;place-content:center;place-items:center;position:relative;transition:margin 300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)}.selected .handle-container{margin-inline-start:calc(var(--md-switch-track-width, 52px) - var(--md-switch-track-height, 32px))}.unselected .handle-container{margin-inline-end:calc(var(--md-switch-track-width, 52px) - var(--md-switch-track-height, 32px))}.disabled .handle-container{transition:none}.handle{border-start-start-radius:var(--md-switch-handle-shape-start-start, var(--md-switch-handle-shape, var(--md-sys-shape-corner-full, 9999px)));border-start-end-radius:var(--md-switch-handle-shape-start-end, var(--md-switch-handle-shape, var(--md-sys-shape-corner-full, 9999px)));border-end-end-radius:var(--md-switch-handle-shape-end-end, var(--md-switch-handle-shape, var(--md-sys-shape-corner-full, 9999px)));border-end-start-radius:var(--md-switch-handle-shape-end-start, var(--md-switch-handle-shape, var(--md-sys-shape-corner-full, 9999px)));height:var(--md-switch-handle-height, 16px);width:var(--md-switch-handle-width, 16px);transform-origin:center;transition-property:height,width;transition-duration:250ms,250ms;transition-timing-function:cubic-bezier(0.2, 0, 0, 1),cubic-bezier(0.2, 0, 0, 1);z-index:0}.handle::before{content:"";display:flex;inset:0;position:absolute;border-radius:inherit;box-sizing:border-box;transition:background-color 67ms linear}.disabled .handle,.disabled .handle::before{transition:none}.selected .handle{height:var(--md-switch-selected-handle-height, 24px);width:var(--md-switch-selected-handle-width, 24px)}.handle.with-icon{height:var(--md-switch-with-icon-handle-height, 24px);width:var(--md-switch-with-icon-handle-width, 24px)}.selected:not(.disabled):active .handle,.unselected:not(.disabled):active .handle{height:var(--md-switch-pressed-handle-height, 28px);width:var(--md-switch-pressed-handle-width, 28px);transition-timing-function:linear;transition-duration:100ms}.selected .handle::before{background-color:var(--md-switch-selected-handle-color, var(--md-sys-color-on-primary, #fff))}.selected:hover .handle::before{background-color:var(--md-switch-selected-hover-handle-color, var(--md-sys-color-primary-container, #eaddff))}.selected:focus-within .handle::before{background-color:var(--md-switch-selected-focus-handle-color, var(--md-sys-color-primary-container, #eaddff))}.selected:active .handle::before{background-color:var(--md-switch-selected-pressed-handle-color, var(--md-sys-color-primary-container, #eaddff))}.selected.disabled .handle::before{background-color:var(--md-switch-disabled-selected-handle-color, var(--md-sys-color-surface, #fef7ff));opacity:var(--md-switch-disabled-selected-handle-opacity, 1)}.unselected .handle::before{background-color:var(--md-switch-handle-color, var(--md-sys-color-outline, #79747e))}.unselected:hover .handle::before{background-color:var(--md-switch-hover-handle-color, var(--md-sys-color-on-surface-variant, #49454f))}.unselected:focus-within .handle::before{background-color:var(--md-switch-focus-handle-color, var(--md-sys-color-on-surface-variant, #49454f))}.unselected:active .handle::before{background-color:var(--md-switch-pressed-handle-color, var(--md-sys-color-on-surface-variant, #49454f))}.unselected.disabled .handle::before{background-color:var(--md-switch-disabled-handle-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-switch-disabled-handle-opacity, 0.38)}md-ripple{border-radius:var(--md-switch-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));height:var(--md-switch-state-layer-size, 40px);inset:unset;width:var(--md-switch-state-layer-size, 40px)}.selected md-ripple{--md-ripple-hover-color: var(--md-switch-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-color: var(--md-switch-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-switch-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-opacity: var(--md-switch-selected-pressed-state-layer-opacity, 0.12)}.unselected md-ripple{--md-ripple-hover-color: var(--md-switch-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-color: var(--md-switch-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-switch-hover-state-layer-opacity, 0.08);--md-ripple-pressed-opacity: var(--md-switch-pressed-state-layer-opacity, 0.12)}}@layer hcm{@media(forced-colors: active){.unselected .handle::before{background:ButtonText}.disabled .handle::before{opacity:1}.disabled.unselected .handle::before{background:GrayText}}}@layer styles{.icons{position:relative;height:100%;width:100%}.icon{position:absolute;inset:0;margin:auto;display:flex;align-items:center;justify-content:center;fill:currentColor;transition:fill 67ms linear,opacity 33ms linear,transform 167ms cubic-bezier(0.2, 0, 0, 1);opacity:0}.disabled .icon{transition:none}.selected .icon--on,.unselected .icon--off{opacity:1}.unselected .handle:not(.with-icon) .icon--on{transform:rotate(-45deg)}.icon--off{width:var(--md-switch-icon-size, 16px);height:var(--md-switch-icon-size, 16px);color:var(--md-switch-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9))}.unselected:hover .icon--off{color:var(--md-switch-hover-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9))}.unselected:focus-within .icon--off{color:var(--md-switch-focus-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9))}.unselected:active .icon--off{color:var(--md-switch-pressed-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9))}.unselected.disabled .icon--off{color:var(--md-switch-disabled-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9));opacity:var(--md-switch-disabled-icon-opacity, 0.38)}.icon--on{width:var(--md-switch-selected-icon-size, 16px);height:var(--md-switch-selected-icon-size, 16px);color:var(--md-switch-selected-icon-color, var(--md-sys-color-on-primary-container, #21005d))}.selected:hover .icon--on{color:var(--md-switch-selected-hover-icon-color, var(--md-sys-color-on-primary-container, #21005d))}.selected:focus-within .icon--on{color:var(--md-switch-selected-focus-icon-color, var(--md-sys-color-on-primary-container, #21005d))}.selected:active .icon--on{color:var(--md-switch-selected-pressed-icon-color, var(--md-sys-color-on-primary-container, #21005d))}.selected.disabled .icon--on{color:var(--md-switch-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-switch-disabled-selected-icon-opacity, 0.38)}}@layer hcm{@media(forced-colors: active){.icon--off{fill:Canvas}.icon--on{fill:ButtonText}.disabled.unselected .icon--off,.disabled.selected .icon--on{opacity:1}.disabled .icon--on{fill:GrayText}}}
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Tm=class extends mi{};Tm.styles=[xq];Tm=de([Ar("md-switch")],Tm);const Eq={class:"main"},wq={key:1,class:"section"},bq={key:2,class:"section"},Cq={class:"scanner"},Aq=rt("div",{class:"text"}," Scansiona un codice e conferma l'identità per timbrare ",-1),Tq={key:3,class:"section"},Iq=rt("div",{class:"text"}," Questo è il tuo codice, mostralo per timbrare ",-1),Rq={class:"code"},Sq={key:4,class:"section"},Pq={class:"remote"},kq=rt("div",{class:"text"}," Clicca sul bottone per timbrare il cartellino ",-1),Dq=ir({__name:"HomeView",setup(t){var d;const e=zh(),n=z_(ii(fr,`users/${(d=e.value)==null?void 0:d.uid}`)),r=Gt(()=>{var f;return((f=n.value)==null?void 0:f.role)==="scanner"}),i=Gt(()=>{var f;return((f=n.value)==null?void 0:f.role)==="scanned"}),s=Gt(()=>{var f;return((f=n.value)==null?void 0:f.role)==="remote"}),o=Gt(()=>{var f;return(f=n.value)==null?void 0:f.actualCode}),a=ft(window.innerWidth),c=()=>a.value=window.innerWidth;window.addEventListener("resize",c),$c(()=>window.removeEventListener("resize",c));function l(f){const g=f.getHours().toString().padStart(2,"0"),_=f.getMinutes().toString().padStart(2,"0");return`${g}:${_}`}const u=ft(!1);function h(){u.value=!0,setTimeout(()=>{u.value=!1},2e3)}return Mr(n,(f,g)=>{g&&f&&g.lastPunchTime.toDate()!=f.lastPunchTime.toDate()&&(h(),"vibrate"in navigator&&navigator.vibrate(200))}),(f,g)=>(mt(),Pt("div",Eq,[a.value<900||!St(e)?(mt(),Ao(pq,{key:0})):ur("",!0),!r.value&&!i.value&&!s.value?(mt(),Pt("div",wq," Aspetta qualche istante. Vedrai qui il tuo codice ")):ur("",!0),r.value?(mt(),Pt("div",bq,[rt("div",Cq,[Vt(lq)]),Aq])):ur("",!0),i.value&&o.value?(mt(),Pt("div",Tq,[Iq,rt("div",Rq,[Vt(W7,{codeString:o.value},null,8,["codeString"])])])):ur("",!0),s.value&&o.value?(mt(),Pt("div",Sq,[rt("div",Pq,[kq,Vt(mj,{class:"remoteBtn",codeString:o.value},null,8,["codeString"])])])):ur("",!0),St(n)&&(i.value||s.value)&&St(n).lastPunchTime?(mt(),Pt("div",{key:5,class:Vc({highlight:u.value,lastPunchTime:!0,"display-small":!0})}," Ultima timbratura: "+nu(l(St(n).lastPunchTime.toDate())),3)):ur("",!0)]))}});const jR=EN({history:L4("/"),routes:[{path:"/",name:"home",meta:{requiresAuth:!0},component:Dq},{path:"/login",name:"login",component:()=>Lf(()=>import("./LoginView-47199419.js"),["assets/LoginView-47199419.js","assets/filled-button-852068fe.js","assets/LoginView-82260fdb.css"])},{path:"/myAccount",name:"myAccount",meta:{requiresAuth:!0},component:()=>Lf(()=>import("./UserView-d384e3f0.js"),["assets/UserView-d384e3f0.js","assets/filled-button-852068fe.js","assets/UserView-bf51ce51.css"])},{path:"/schedules",name:"schedules",meta:{requiresAuth:!0},component:()=>Lf(()=>import("./ScheduleView-eabf7695.js"),["assets/ScheduleView-eabf7695.js","assets/ScheduleView-819c9987.css"])}]});jR.beforeEach(async t=>{if(t.meta.requiresAuth&&!await K6())return{path:"/login",query:{redirect:t.fullPath}}});const Vd=m4(E$);Vd.use(y4());Vd.use(jR);Vd.use(x$,{firebaseApp:iv,modules:[y$()]});Vd.mount("#app");export{Vq as $,Ne as A,Pt as B,rt as C,UH as D,Lc as E,Zk as F,Oq as G,Fl as H,nu as I,ur as J,mt as K,zk as L,qk as M,Fq as N,Bq as O,Yq as P,ii as Q,fr as R,Mq as S,Vs as T,k2 as U,_q as V,Ai as W,jm as X,Uq as Y,ND as Z,de as _,$n as a,$q as a0,zh as a1,St as a2,Vt as a3,kn as a4,gR as a5,Gt as a6,Zn as a7,Nq as a8,z_ as a9,Kq as aa,Qq as ab,Gq as ac,Wq as ad,Jq as ae,Ao as af,Lq as ag,uj as ah,Vc as ai,Dm as aj,KH as b,GH as c,WH as d,Ar as e,On as f,gq as g,Vz as h,or as i,HR as j,vu as k,IH as l,mq as m,Ve as n,Ko as o,bm as p,Cm as q,_l as r,Bn as s,ns as t,cv as u,hw as v,ir as w,dt as x,Zq as y,ft as z};
