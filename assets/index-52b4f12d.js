(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function pm(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const gt={},oo=[],gr=()=>{},yk=()=>!1,wk=/^on[^a-z]/,_h=t=>wk.test(t),mm=t=>t.startsWith("onUpdate:"),Xt=Object.assign,gm=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},bk=Object.prototype.hasOwnProperty,Ze=(t,e)=>bk.call(t,e),Se=Array.isArray,ao=t=>vh(t)==="[object Map]",Hb=t=>vh(t)==="[object Set]",Le=t=>typeof t=="function",Bt=t=>typeof t=="string",_m=t=>typeof t=="symbol",Tt=t=>t!==null&&typeof t=="object",jb=t=>Tt(t)&&Le(t.then)&&Le(t.catch),zb=Object.prototype.toString,vh=t=>zb.call(t),Ek=t=>vh(t).slice(8,-1),Wb=t=>vh(t)==="[object Object]",vm=t=>Bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Yl=pm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},xk=/-(\w)/g,Fr=yh(t=>t.replace(xk,(e,n)=>n?n.toUpperCase():"")),Tk=/\B([A-Z])/g,jo=yh(t=>t.replace(Tk,"-$1").toLowerCase()),wh=yh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Kd=yh(t=>t?`on${wh(t)}`:""),ec=(t,e)=>!Object.is(t,e),Xl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},pu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},N0=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let mv;const D0=()=>mv||(mv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ym(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Bt(r)?Rk(r):ym(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(Bt(t))return t;if(Tt(t))return t}}const Ik=/;(?![^(]*\))/g,Ck=/:([^]+)/,Ak=/\/\*[^]*?\*\//g;function Rk(t){const e={};return t.replace(Ak,"").split(Ik).forEach(n=>{if(n){const r=n.split(Ck);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Lc(t){let e="";if(Bt(t))e=t;else if(Se(t))for(let n=0;n<t.length;n++){const r=Lc(t[n]);r&&(e+=r+" ")}else if(Tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Sk="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Pk=pm(Sk);function qb(t){return!!t||t===""}const Jl=t=>Bt(t)?t:t==null?"":Se(t)||Tt(t)&&(t.toString===zb||!Le(t.toString))?JSON.stringify(t,Kb,2):String(t),Kb=(t,e)=>e&&e.__v_isRef?Kb(t,e.value):ao(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Hb(e)?{[`Set(${e.size})`]:[...e.values()]}:Tt(e)&&!Se(e)&&!Wb(e)?String(e):e;let Un;class Gb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Un,!e&&Un&&(this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Un;try{return Un=this,e()}finally{Un=n}}}on(){Un=this}off(){Un=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Qb(t){return new Gb(t)}function kk(t,e=Un){e&&e.active&&e.effects.push(t)}function Yb(){return Un}function Nk(t){Un&&Un.cleanups.push(t)}const wm=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Xb=t=>(t.w&$i)>0,Jb=t=>(t.n&$i)>0,Dk=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=$i},Ok=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Xb(i)&&!Jb(i)?i.delete(t):e[n++]=i,i.w&=~$i,i.n&=~$i}e.length=n}},mu=new WeakMap;let Ia=0,$i=1;const O0=30;let ur;const ms=Symbol(""),M0=Symbol("");class bm{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,kk(this,r)}run(){if(!this.active)return this.fn();let e=ur,n=Pi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ur,ur=this,Pi=!0,$i=1<<++Ia,Ia<=O0?Dk(this):gv(this),this.fn()}finally{Ia<=O0&&Ok(this),$i=1<<--Ia,ur=this.parent,Pi=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ur===this?this.deferStop=!0:this.active&&(gv(this),this.onStop&&this.onStop(),this.active=!1)}}function gv(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Pi=!0;const Zb=[];function zo(){Zb.push(Pi),Pi=!1}function Wo(){const t=Zb.pop();Pi=t===void 0?!0:t}function Fn(t,e,n){if(Pi&&ur){let r=mu.get(t);r||mu.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=wm()),eE(i)}}function eE(t,e){let n=!1;Ia<=O0?Jb(t)||(t.n|=$i,n=!Xb(t)):n=!t.has(ur),n&&(t.add(ur),ur.deps.push(t))}function si(t,e,n,r,i,s){const o=mu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Se(t)){const c=Number(r);o.forEach((l,u)=>{(u==="length"||u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Se(t)?vm(n)&&a.push(o.get("length")):(a.push(o.get(ms)),ao(t)&&a.push(o.get(M0)));break;case"delete":Se(t)||(a.push(o.get(ms)),ao(t)&&a.push(o.get(M0)));break;case"set":ao(t)&&a.push(o.get(ms));break}if(a.length===1)a[0]&&L0(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);L0(wm(c))}}function L0(t,e){const n=Se(t)?t:[...t];for(const r of n)r.computed&&_v(r);for(const r of n)r.computed||_v(r)}function _v(t,e){(t!==ur||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Mk(t,e){var n;return(n=mu.get(t))==null?void 0:n.get(e)}const Lk=pm("__proto__,__v_isRef,__isVue"),tE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_m)),$k=Em(),Fk=Em(!1,!0),Vk=Em(!0),vv=Bk();function Bk(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=it(this);for(let s=0,o=this.length;s<o;s++)Fn(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(it)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){zo();const r=it(this)[e].apply(this,n);return Wo(),r}}),t}function Uk(t){const e=it(this);return Fn(e,"has",t),e.hasOwnProperty(t)}function Em(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?r2:oE:e?sE:iE).get(r))return r;const o=Se(r);if(!t){if(o&&Ze(vv,i))return Reflect.get(vv,i,s);if(i==="hasOwnProperty")return Uk}const a=Reflect.get(r,i,s);return(_m(i)?tE.has(i):Lk(i))||(t||Fn(r,"get",i),e)?a:Yt(a)?o&&vm(i)?a:a.value:Tt(a)?t?cE(a):Eh(a):a}}const Hk=nE(),jk=nE(!0);function nE(t=!1){return function(n,r,i,s){let o=n[r];if(yo(o)&&Yt(o)&&!Yt(i))return!1;if(!t&&(!gu(i)&&!yo(i)&&(o=it(o),i=it(i)),!Se(n)&&Yt(o)&&!Yt(i)))return o.value=i,!0;const a=Se(n)&&vm(r)?Number(r)<n.length:Ze(n,r),c=Reflect.set(n,r,i,s);return n===it(s)&&(a?ec(i,o)&&si(n,"set",r,i):si(n,"add",r,i)),c}}function zk(t,e){const n=Ze(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&si(t,"delete",e,void 0),r}function Wk(t,e){const n=Reflect.has(t,e);return(!_m(e)||!tE.has(e))&&Fn(t,"has",e),n}function qk(t){return Fn(t,"iterate",Se(t)?"length":ms),Reflect.ownKeys(t)}const rE={get:$k,set:Hk,deleteProperty:zk,has:Wk,ownKeys:qk},Kk={get:Vk,set(t,e){return!0},deleteProperty(t,e){return!0}},Gk=Xt({},rE,{get:Fk,set:jk}),xm=t=>t,bh=t=>Reflect.getPrototypeOf(t);function Cl(t,e,n=!1,r=!1){t=t.__v_raw;const i=it(t),s=it(e);n||(e!==s&&Fn(i,"get",e),Fn(i,"get",s));const{has:o}=bh(i),a=r?xm:n?Am:tc;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Al(t,e=!1){const n=this.__v_raw,r=it(n),i=it(t);return e||(t!==i&&Fn(r,"has",t),Fn(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Rl(t,e=!1){return t=t.__v_raw,!e&&Fn(it(t),"iterate",ms),Reflect.get(t,"size",t)}function yv(t){t=it(t);const e=it(this);return bh(e).has.call(e,t)||(e.add(t),si(e,"add",t,t)),this}function wv(t,e){e=it(e);const n=it(this),{has:r,get:i}=bh(n);let s=r.call(n,t);s||(t=it(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?ec(e,o)&&si(n,"set",t,e):si(n,"add",t,e),this}function bv(t){const e=it(this),{has:n,get:r}=bh(e);let i=n.call(e,t);i||(t=it(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&si(e,"delete",t,void 0),s}function Ev(){const t=it(this),e=t.size!==0,n=t.clear();return e&&si(t,"clear",void 0,void 0),n}function Sl(t,e){return function(r,i){const s=this,o=s.__v_raw,a=it(o),c=e?xm:t?Am:tc;return!t&&Fn(a,"iterate",ms),o.forEach((l,u)=>r.call(i,c(l),c(u),s))}}function Pl(t,e,n){return function(...r){const i=this.__v_raw,s=it(i),o=ao(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=i[t](...r),u=n?xm:e?Am:tc;return!e&&Fn(s,"iterate",c?M0:ms),{next(){const{value:h,done:d}=l.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function gi(t){return function(...e){return t==="delete"?!1:this}}function Qk(){const t={get(s){return Cl(this,s)},get size(){return Rl(this)},has:Al,add:yv,set:wv,delete:bv,clear:Ev,forEach:Sl(!1,!1)},e={get(s){return Cl(this,s,!1,!0)},get size(){return Rl(this)},has:Al,add:yv,set:wv,delete:bv,clear:Ev,forEach:Sl(!1,!0)},n={get(s){return Cl(this,s,!0)},get size(){return Rl(this,!0)},has(s){return Al.call(this,s,!0)},add:gi("add"),set:gi("set"),delete:gi("delete"),clear:gi("clear"),forEach:Sl(!0,!1)},r={get(s){return Cl(this,s,!0,!0)},get size(){return Rl(this,!0)},has(s){return Al.call(this,s,!0)},add:gi("add"),set:gi("set"),delete:gi("delete"),clear:gi("clear"),forEach:Sl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Pl(s,!1,!1),n[s]=Pl(s,!0,!1),e[s]=Pl(s,!1,!0),r[s]=Pl(s,!0,!0)}),[t,n,e,r]}const[Yk,Xk,Jk,Zk]=Qk();function Tm(t,e){const n=e?t?Zk:Jk:t?Xk:Yk;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ze(n,i)&&i in r?n:r,i,s)}const e2={get:Tm(!1,!1)},t2={get:Tm(!1,!0)},n2={get:Tm(!0,!1)},iE=new WeakMap,sE=new WeakMap,oE=new WeakMap,r2=new WeakMap;function i2(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function s2(t){return t.__v_skip||!Object.isExtensible(t)?0:i2(Ek(t))}function Eh(t){return yo(t)?t:Im(t,!1,rE,e2,iE)}function aE(t){return Im(t,!1,Gk,t2,sE)}function cE(t){return Im(t,!0,Kk,n2,oE)}function Im(t,e,n,r,i){if(!Tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=s2(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function co(t){return yo(t)?co(t.__v_raw):!!(t&&t.__v_isReactive)}function yo(t){return!!(t&&t.__v_isReadonly)}function gu(t){return!!(t&&t.__v_isShallow)}function lE(t){return co(t)||yo(t)}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function Cm(t){return pu(t,"__v_skip",!0),t}const tc=t=>Tt(t)?Eh(t):t,Am=t=>Tt(t)?cE(t):t;function uE(t){Pi&&ur&&(t=it(t),eE(t.dep||(t.dep=wm())))}function hE(t,e){t=it(t);const n=t.dep;n&&L0(n)}function Yt(t){return!!(t&&t.__v_isRef===!0)}function dt(t){return fE(t,!1)}function dE(t){return fE(t,!0)}function fE(t,e){return Yt(t)?t:new o2(t,e)}class o2{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:it(e),this._value=n?e:tc(e)}get value(){return uE(this),this._value}set value(e){const n=this.__v_isShallow||gu(e)||yo(e);e=n?e:it(e),ec(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:tc(e),hE(this))}}function St(t){return Yt(t)?t.value:t}const a2={get:(t,e,n)=>St(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Yt(i)&&!Yt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function pE(t){return co(t)?t:new Proxy(t,a2)}function c2(t){const e=Se(t)?new Array(t.length):{};for(const n in t)e[n]=u2(t,n);return e}class l2{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Mk(it(this._object),this._key)}}function u2(t,e,n){const r=t[e];return Yt(r)?r:new l2(t,e,n)}class h2{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new bm(e,()=>{this._dirty||(this._dirty=!0,hE(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=it(this);return uE(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function d2(t,e,n=!1){let r,i;const s=Le(t);return s?(r=t,i=gr):(r=t.get,i=t.set),new h2(r,i,s||!i,n)}function ki(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){xh(s,e,n)}return i}function _r(t,e,n,r){if(Le(t)){const s=ki(t,e,n,r);return s&&jb(s)&&s.catch(o=>{xh(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(_r(t[s],e,n,r));return i}function xh(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const l=s.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){ki(c,null,10,[t,o,a]);return}}f2(t,n,i,r)}function f2(t,e,n,r=!0){console.error(t)}let nc=!1,$0=!1;const mn=[];let Ar=0;const lo=[];let Xr=null,ss=0;const mE=Promise.resolve();let Rm=null;function gE(t){const e=Rm||mE;return t?e.then(this?t.bind(this):t):e}function p2(t){let e=Ar+1,n=mn.length;for(;e<n;){const r=e+n>>>1;rc(mn[r])<t?e=r+1:n=r}return e}function Sm(t){(!mn.length||!mn.includes(t,nc&&t.allowRecurse?Ar+1:Ar))&&(t.id==null?mn.push(t):mn.splice(p2(t.id),0,t),_E())}function _E(){!nc&&!$0&&($0=!0,Rm=mE.then(yE))}function m2(t){const e=mn.indexOf(t);e>Ar&&mn.splice(e,1)}function g2(t){Se(t)?lo.push(...t):(!Xr||!Xr.includes(t,t.allowRecurse?ss+1:ss))&&lo.push(t),_E()}function xv(t,e=nc?Ar+1:0){for(;e<mn.length;e++){const n=mn[e];n&&n.pre&&(mn.splice(e,1),e--,n())}}function vE(t){if(lo.length){const e=[...new Set(lo)];if(lo.length=0,Xr){Xr.push(...e);return}for(Xr=e,Xr.sort((n,r)=>rc(n)-rc(r)),ss=0;ss<Xr.length;ss++)Xr[ss]();Xr=null,ss=0}}const rc=t=>t.id==null?1/0:t.id,_2=(t,e)=>{const n=rc(t)-rc(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function yE(t){$0=!1,nc=!0,mn.sort(_2);const e=gr;try{for(Ar=0;Ar<mn.length;Ar++){const n=mn[Ar];n&&n.active!==!1&&ki(n,null,14)}}finally{Ar=0,mn.length=0,vE(),nc=!1,Rm=null,(mn.length||lo.length)&&yE()}}function v2(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||gt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||gt;d&&(i=n.map(f=>Bt(f)?f.trim():f)),h&&(i=n.map(N0))}let a,c=r[a=Kd(e)]||r[a=Kd(Fr(e))];!c&&s&&(c=r[a=Kd(jo(e))]),c&&_r(c,t,6,i);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,_r(l,t,6,i)}}function wE(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Le(t)){const c=l=>{const u=wE(l,e,!0);u&&(a=!0,Xt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!a?(Tt(t)&&r.set(t,null),null):(Se(s)?s.forEach(c=>o[c]=null):Xt(o,s),Tt(t)&&r.set(t,o),o)}function Th(t,e){return!t||!_h(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ze(t,e[0].toLowerCase()+e.slice(1))||Ze(t,jo(e))||Ze(t,e))}let an=null,Ih=null;function _u(t){const e=an;return an=t,Ih=t&&t.type.__scopeId||null,e}function y2(t){Ih=t}function w2(){Ih=null}function vu(t,e=an,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Ov(-1);const s=_u(e);let o;try{o=t(...i)}finally{_u(s),r._d&&Ov(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Gd(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:_}=t;let w,x;const y=_u(t);try{if(n.shapeFlag&4){const E=i||r;w=Cr(u.call(E,E,h,s,f,d,g)),x=c}else{const E=e;w=Cr(E.length>1?E(s,{attrs:c,slots:a,emit:l}):E(s,null)),x=e.props?c:b2(c)}}catch(E){Fa.length=0,xh(E,t,1),w=Vt(Fi)}let b=w;if(x&&_!==!1){const E=Object.keys(x),{shapeFlag:A}=b;E.length&&A&7&&(o&&E.some(mm)&&(x=E2(x,o)),b=bo(b,x))}return n.dirs&&(b=bo(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),w=b,_u(y),w}const b2=t=>{let e;for(const n in t)(n==="class"||n==="style"||_h(n))&&((e||(e={}))[n]=t[n]);return e},E2=(t,e)=>{const n={};for(const r in t)(!mm(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function x2(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Tv(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Th(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Tv(r,o,l):!0:!!o;return!1}function Tv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Th(n,s))return!0}return!1}function T2({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const I2=t=>t.__isSuspense;function C2(t,e){e&&e.pendingBranch?Se(t)?e.effects.push(...t):e.effects.push(t):g2(t)}const kl={};function Or(t,e,n){return bE(t,e,n)}function bE(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=gt){var a;const c=Yb()===((a=Kt)==null?void 0:a.scope)?Kt:null;let l,u=!1,h=!1;if(Yt(t)?(l=()=>t.value,u=gu(t)):co(t)?(l=()=>t,r=!0):Se(t)?(h=!0,u=t.some(E=>co(E)||gu(E)),l=()=>t.map(E=>{if(Yt(E))return E.value;if(co(E))return as(E);if(Le(E))return ki(E,c,2)})):Le(t)?e?l=()=>ki(t,c,2):l=()=>{if(!(c&&c.isUnmounted))return d&&d(),_r(t,c,3,[f])}:l=gr,e&&r){const E=l;l=()=>as(E())}let d,f=E=>{d=y.onStop=()=>{ki(E,c,4)}},g;if(sc)if(f=gr,e?n&&_r(e,c,3,[l(),h?[]:void 0,f]):l(),i==="sync"){const E=wN();g=E.__watcherHandles||(E.__watcherHandles=[])}else return gr;let _=h?new Array(t.length).fill(kl):kl;const w=()=>{if(y.active)if(e){const E=y.run();(r||u||(h?E.some((A,R)=>ec(A,_[R])):ec(E,_)))&&(d&&d(),_r(e,c,3,[E,_===kl?void 0:h&&_[0]===kl?[]:_,f]),_=E)}else y.run()};w.allowRecurse=!!e;let x;i==="sync"?x=w:i==="post"?x=()=>Mn(w,c&&c.suspense):(w.pre=!0,c&&(w.id=c.uid),x=()=>Sm(w));const y=new bm(l,x);e?n?w():_=y.run():i==="post"?Mn(y.run.bind(y),c&&c.suspense):y.run();const b=()=>{y.stop(),c&&c.scope&&gm(c.scope.effects,y)};return g&&g.push(b),b}function A2(t,e,n){const r=this.proxy,i=Bt(t)?t.includes(".")?EE(r,t):()=>r[t]:t.bind(r,r);let s;Le(e)?s=e:(s=e.handler,n=e);const o=Kt;Eo(this);const a=bE(i,s.bind(r),n);return o?Eo(o):gs(),a}function EE(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function as(t,e){if(!Tt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Yt(t))as(t.value,e);else if(Se(t))for(let n=0;n<t.length;n++)as(t[n],e);else if(Hb(t)||ao(t))t.forEach(n=>{as(n,e)});else if(Wb(t))for(const n in t)as(t[n],e);return t}function R2(t,e){const n=an;if(n===null)return t;const r=Sh(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,c,l=gt]=e[s];o&&(Le(o)&&(o={mounted:o,updated:o}),o.deep&&as(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function es(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(zo(),_r(c,n,8,[t.el,a,t,e]),Wo())}}function rr(t,e){return Le(t)?(()=>Xt({name:t.name},e,{setup:t}))():t}const La=t=>!!t.type.__asyncLoader,xE=t=>t.type.__isKeepAlive;function S2(t,e){TE(t,"a",e)}function P2(t,e){TE(t,"da",e)}function TE(t,e,n=Kt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ch(e,r,n),n){let i=n.parent;for(;i&&i.parent;)xE(i.parent.vnode)&&k2(r,e,n,i),i=i.parent}}function k2(t,e,n,r){const i=Ch(e,t,r,!0);$c(()=>{gm(r[e],i)},n)}function Ch(t,e,n=Kt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;zo(),Eo(n);const a=_r(e,n,t,o);return gs(),Wo(),a});return r?i.unshift(s):i.push(s),s}}const hi=t=>(e,n=Kt)=>(!sc||t==="sp")&&Ch(t,(...r)=>e(...r),n),N2=hi("bm"),Pm=hi("m"),D2=hi("bu"),O2=hi("u"),M2=hi("bum"),$c=hi("um"),IE=hi("sp"),L2=hi("rtg"),$2=hi("rtc");function F2(t,e=Kt){Ch("ec",t,e)}const CE="components";function V2(t,e){return U2(CE,t,!0,e)||t}const B2=Symbol.for("v-ndc");function U2(t,e,n=!0,r=!1){const i=an||Kt;if(i){const s=i.type;if(t===CE){const a=_N(s,!1);if(a&&(a===e||a===Fr(e)||a===wh(Fr(e))))return s}const o=Iv(i[t]||s[t],e)||Iv(i.appContext[t],e);return!o&&r?s:o}}function Iv(t,e){return t&&(t[e]||t[Fr(e)]||t[wh(Fr(e))])}function tW(t,e,n,r){let i;const s=n&&n[r];if(Se(t)||Bt(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Tt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];i[a]=e(t[l],l,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function AE(t,e,n={},r,i){if(an.isCE||an.parent&&La(an.parent)&&an.parent.isCE)return e!=="default"&&(n.name=e),Vt("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),pt();const o=s&&RE(s(n)),a=wo(Jn,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function RE(t){return t.some(e=>bu(e)?!(e.type===Fi||e.type===Jn&&!RE(e.children)):!0)?t:null}const F0=t=>t?BE(t)?Sh(t)||t.proxy:F0(t.parent):null,$a=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>F0(t.parent),$root:t=>F0(t.root),$emit:t=>t.emit,$options:t=>km(t),$forceUpdate:t=>t.f||(t.f=()=>Sm(t.update)),$nextTick:t=>t.n||(t.n=gE.bind(t.proxy)),$watch:t=>A2.bind(t)}),Qd=(t,e)=>t!==gt&&!t.__isScriptSetup&&Ze(t,e),H2={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Qd(r,e))return o[e]=1,r[e];if(i!==gt&&Ze(i,e))return o[e]=2,i[e];if((l=t.propsOptions[0])&&Ze(l,e))return o[e]=3,s[e];if(n!==gt&&Ze(n,e))return o[e]=4,n[e];V0&&(o[e]=0)}}const u=$a[e];let h,d;if(u)return e==="$attrs"&&Fn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==gt&&Ze(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,Ze(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Qd(i,e)?(i[e]=n,!0):r!==gt&&Ze(r,e)?(r[e]=n,!0):Ze(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==gt&&Ze(t,o)||Qd(e,o)||(a=s[0])&&Ze(a,o)||Ze(r,o)||Ze($a,o)||Ze(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ze(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Cv(t){return Se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let V0=!0;function j2(t){const e=km(t),n=t.proxy,r=t.ctx;V0=!1,e.beforeCreate&&Av(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:_,deactivated:w,beforeDestroy:x,beforeUnmount:y,destroyed:b,unmounted:E,render:A,renderTracked:R,renderTriggered:D,errorCaptured:$,serverPrefetch:q,expose:P,inheritAttrs:L,components:H,directives:U,filters:de}=e;if(l&&z2(l,r,null),o)for(const be in o){const me=o[be];Le(me)&&(r[be]=me.bind(n))}if(i){const be=i.call(n,n);Tt(be)&&(t.data=Eh(be))}if(V0=!0,s)for(const be in s){const me=s[be],$e=Le(me)?me.bind(n,n):Le(me.get)?me.get.bind(n,n):gr,Re=!Le(me)&&Le(me.set)?me.set.bind(n):gr,B=Gt({get:$e,set:Re});Object.defineProperty(r,be,{enumerable:!0,configurable:!0,get:()=>B.value,set:W=>B.value=W})}if(a)for(const be in a)SE(a[be],r,n,be);if(c){const be=Le(c)?c.call(n):c;Reflect.ownKeys(be).forEach(me=>{Zl(me,be[me])})}u&&Av(u,t,"c");function he(be,me){Se(me)?me.forEach($e=>be($e.bind(n))):me&&be(me.bind(n))}if(he(N2,h),he(Pm,d),he(D2,f),he(O2,g),he(S2,_),he(P2,w),he(F2,$),he($2,R),he(L2,D),he(M2,y),he($c,E),he(IE,q),Se(P))if(P.length){const be=t.exposed||(t.exposed={});P.forEach(me=>{Object.defineProperty(be,me,{get:()=>n[me],set:$e=>n[me]=$e})})}else t.exposed||(t.exposed={});A&&t.render===gr&&(t.render=A),L!=null&&(t.inheritAttrs=L),H&&(t.components=H),U&&(t.directives=U)}function z2(t,e,n=gr){Se(t)&&(t=B0(t));for(const r in t){const i=t[r];let s;Tt(i)?"default"in i?s=zn(i.from||r,i.default,!0):s=zn(i.from||r):s=zn(i),Yt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Av(t,e,n){_r(Se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function SE(t,e,n,r){const i=r.includes(".")?EE(n,r):()=>n[r];if(Bt(t)){const s=e[t];Le(s)&&Or(i,s)}else if(Le(t))Or(i,t.bind(n));else if(Tt(t))if(Se(t))t.forEach(s=>SE(s,e,n,r));else{const s=Le(t.handler)?t.handler.bind(n):e[t.handler];Le(s)&&Or(i,s,t)}}function km(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(l=>yu(c,l,o,!0)),yu(c,e,o)),Tt(e)&&s.set(e,c),c}function yu(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&yu(t,s,n,!0),i&&i.forEach(o=>yu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=W2[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const W2={data:Rv,props:Sv,emits:Sv,methods:Ca,computed:Ca,beforeCreate:In,created:In,beforeMount:In,mounted:In,beforeUpdate:In,updated:In,beforeDestroy:In,beforeUnmount:In,destroyed:In,unmounted:In,activated:In,deactivated:In,errorCaptured:In,serverPrefetch:In,components:Ca,directives:Ca,watch:K2,provide:Rv,inject:q2};function Rv(t,e){return e?t?function(){return Xt(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function q2(t,e){return Ca(B0(t),B0(e))}function B0(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function In(t,e){return t?[...new Set([].concat(t,e))]:e}function Ca(t,e){return t?Xt(Object.create(null),t,e):e}function Sv(t,e){return t?Se(t)&&Se(e)?[...new Set([...t,...e])]:Xt(Object.create(null),Cv(t),Cv(e??{})):e}function K2(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=In(t[r],e[r]);return n}function PE(){return{app:null,config:{isNativeTag:yk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let G2=0;function Q2(t,e){return function(r,i=null){Le(r)||(r=Xt({},r)),i!=null&&!Tt(i)&&(i=null);const s=PE(),o=new Set;let a=!1;const c=s.app={_uid:G2++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:bN,get config(){return s.config},set config(l){},use(l,...u){return o.has(l)||(l&&Le(l.install)?(o.add(l),l.install(c,...u)):Le(l)&&(o.add(l),l(c,...u))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,u){return u?(s.components[l]=u,c):s.components[l]},directive(l,u){return u?(s.directives[l]=u,c):s.directives[l]},mount(l,u,h){if(!a){const d=Vt(r,i);return d.appContext=s,u&&e?e(d,l):t(d,l,h),a=!0,c._container=l,l.__vue_app__=c,Sh(d.component)||d.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return s.provides[l]=u,c},runWithContext(l){wu=c;try{return l()}finally{wu=null}}};return c}}let wu=null;function Zl(t,e){if(Kt){let n=Kt.provides;const r=Kt.parent&&Kt.parent.provides;r===n&&(n=Kt.provides=Object.create(r)),n[t]=e}}function zn(t,e,n=!1){const r=Kt||an;if(r||wu){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:wu._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Le(e)?e.call(r&&r.proxy):e}}function Y2(t,e,n,r=!1){const i={},s={};pu(s,Rh,1),t.propsDefaults=Object.create(null),kE(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:aE(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function X2(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=it(i),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Th(t.emitsOptions,d))continue;const f=e[d];if(c)if(Ze(s,d))f!==s[d]&&(s[d]=f,l=!0);else{const g=Fr(d);i[g]=U0(c,a,g,f,t,!1)}else f!==s[d]&&(s[d]=f,l=!0)}}}else{kE(t,e,i,s)&&(l=!0);let u;for(const h in a)(!e||!Ze(e,h)&&((u=jo(h))===h||!Ze(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=U0(c,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!Ze(e,h))&&(delete s[h],l=!0)}l&&si(t,"set","$attrs")}function kE(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Yl(c))continue;const l=e[c];let u;i&&Ze(i,u=Fr(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:Th(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=it(n),l=a||gt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=U0(i,c,h,l[h],t,!Ze(l,h))}}return o}function U0(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ze(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Le(c)){const{propsDefaults:l}=i;n in l?r=l[n]:(Eo(i),r=l[n]=c.call(null,e),gs())}else r=c}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===jo(n))&&(r=!0))}return r}function NE(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let c=!1;if(!Le(t)){const u=h=>{c=!0;const[d,f]=NE(h,e,!0);Xt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!c)return Tt(t)&&r.set(t,oo),oo;if(Se(s))for(let u=0;u<s.length;u++){const h=Fr(s[u]);Pv(h)&&(o[h]=gt)}else if(s)for(const u in s){const h=Fr(u);if(Pv(h)){const d=s[u],f=o[h]=Se(d)||Le(d)?{type:d}:Xt({},d);if(f){const g=Dv(Boolean,f.type),_=Dv(String,f.type);f[0]=g>-1,f[1]=_<0||g<_,(g>-1||Ze(f,"default"))&&a.push(h)}}}const l=[o,a];return Tt(t)&&r.set(t,l),l}function Pv(t){return t[0]!=="$"}function kv(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Nv(t,e){return kv(t)===kv(e)}function Dv(t,e){return Se(e)?e.findIndex(n=>Nv(n,t)):Le(e)&&Nv(e,t)?0:-1}const DE=t=>t[0]==="_"||t==="$stable",Nm=t=>Se(t)?t.map(Cr):[Cr(t)],J2=(t,e,n)=>{if(e._n)return e;const r=vu((...i)=>Nm(e(...i)),n);return r._c=!1,r},OE=(t,e,n)=>{const r=t._ctx;for(const i in t){if(DE(i))continue;const s=t[i];if(Le(s))e[i]=J2(i,s,r);else if(s!=null){const o=Nm(s);e[i]=()=>o}}},ME=(t,e)=>{const n=Nm(e);t.slots.default=()=>n},Z2=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=it(e),pu(e,"_",n)):OE(e,t.slots={})}else t.slots={},e&&ME(t,e);pu(t.slots,Rh,1)},eN=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=gt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Xt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,OE(e,i)),o=e}else e&&(ME(t,e),o={default:1});if(s)for(const a in i)!DE(a)&&!(a in o)&&delete i[a]};function H0(t,e,n,r,i=!1){if(Se(t)){t.forEach((d,f)=>H0(d,e&&(Se(e)?e[f]:e),n,r,i));return}if(La(r)&&!i)return;const s=r.shapeFlag&4?Sh(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:c}=t,l=e&&e.r,u=a.refs===gt?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Bt(l)?(u[l]=null,Ze(h,l)&&(h[l]=null)):Yt(l)&&(l.value=null)),Le(c))ki(c,a,12,[o,u]);else{const d=Bt(c),f=Yt(c);if(d||f){const g=()=>{if(t.f){const _=d?Ze(h,c)?h[c]:u[c]:c.value;i?Se(_)&&gm(_,s):Se(_)?_.includes(s)||_.push(s):d?(u[c]=[s],Ze(h,c)&&(h[c]=u[c])):(c.value=[s],t.k&&(u[t.k]=c.value))}else d?(u[c]=o,Ze(h,c)&&(h[c]=o)):f&&(c.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,Mn(g,n)):g()}}}const Mn=C2;function tN(t){return nN(t)}function nN(t,e){const n=D0();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=gr,insertStaticContent:g}=t,_=(I,C,N,V=null,z=null,K=null,se=!1,ee=null,re=!!C.dynamicChildren)=>{if(I===C)return;I&&!pa(I,C)&&(V=F(I),W(I,z,K,!0),I=null),C.patchFlag===-2&&(re=!1,C.dynamicChildren=null);const{type:Q,ref:ue,shapeFlag:ce}=C;switch(Q){case Ah:w(I,C,N,V);break;case Fi:x(I,C,N,V);break;case Yd:I==null&&y(C,N,V,se);break;case Jn:H(I,C,N,V,z,K,se,ee,re);break;default:ce&1?A(I,C,N,V,z,K,se,ee,re):ce&6?U(I,C,N,V,z,K,se,ee,re):(ce&64||ce&128)&&Q.process(I,C,N,V,z,K,se,ee,re,ie)}ue!=null&&z&&H0(ue,I&&I.ref,K,C||I,!C)},w=(I,C,N,V)=>{if(I==null)r(C.el=a(C.children),N,V);else{const z=C.el=I.el;C.children!==I.children&&l(z,C.children)}},x=(I,C,N,V)=>{I==null?r(C.el=c(C.children||""),N,V):C.el=I.el},y=(I,C,N,V)=>{[I.el,I.anchor]=g(I.children,C,N,V,I.el,I.anchor)},b=({el:I,anchor:C},N,V)=>{let z;for(;I&&I!==C;)z=d(I),r(I,N,V),I=z;r(C,N,V)},E=({el:I,anchor:C})=>{let N;for(;I&&I!==C;)N=d(I),i(I),I=N;i(C)},A=(I,C,N,V,z,K,se,ee,re)=>{se=se||C.type==="svg",I==null?R(C,N,V,z,K,se,ee,re):q(I,C,z,K,se,ee,re)},R=(I,C,N,V,z,K,se,ee)=>{let re,Q;const{type:ue,props:ce,shapeFlag:ve,transition:Ie,dirs:Ne}=I;if(re=I.el=o(I.type,K,ce&&ce.is,ce),ve&8?u(re,I.children):ve&16&&$(I.children,re,null,V,z,K&&ue!=="foreignObject",se,ee),Ne&&es(I,null,V,"created"),D(re,I,I.scopeId,se,V),ce){for(const tt in ce)tt!=="value"&&!Yl(tt)&&s(re,tt,null,ce[tt],K,I.children,V,z,Pe);"value"in ce&&s(re,"value",null,ce.value),(Q=ce.onVnodeBeforeMount)&&Ir(Q,V,I)}Ne&&es(I,null,V,"beforeMount");const je=(!z||z&&!z.pendingBranch)&&Ie&&!Ie.persisted;je&&Ie.beforeEnter(re),r(re,C,N),((Q=ce&&ce.onVnodeMounted)||je||Ne)&&Mn(()=>{Q&&Ir(Q,V,I),je&&Ie.enter(re),Ne&&es(I,null,V,"mounted")},z)},D=(I,C,N,V,z)=>{if(N&&f(I,N),V)for(let K=0;K<V.length;K++)f(I,V[K]);if(z){let K=z.subTree;if(C===K){const se=z.vnode;D(I,se,se.scopeId,se.slotScopeIds,z.parent)}}},$=(I,C,N,V,z,K,se,ee,re=0)=>{for(let Q=re;Q<I.length;Q++){const ue=I[Q]=ee?yi(I[Q]):Cr(I[Q]);_(null,ue,C,N,V,z,K,se,ee)}},q=(I,C,N,V,z,K,se)=>{const ee=C.el=I.el;let{patchFlag:re,dynamicChildren:Q,dirs:ue}=C;re|=I.patchFlag&16;const ce=I.props||gt,ve=C.props||gt;let Ie;N&&ts(N,!1),(Ie=ve.onVnodeBeforeUpdate)&&Ir(Ie,N,C,I),ue&&es(C,I,N,"beforeUpdate"),N&&ts(N,!0);const Ne=z&&C.type!=="foreignObject";if(Q?P(I.dynamicChildren,Q,ee,N,V,Ne,K):se||me(I,C,ee,null,N,V,Ne,K,!1),re>0){if(re&16)L(ee,C,ce,ve,N,V,z);else if(re&2&&ce.class!==ve.class&&s(ee,"class",null,ve.class,z),re&4&&s(ee,"style",ce.style,ve.style,z),re&8){const je=C.dynamicProps;for(let tt=0;tt<je.length;tt++){const ht=je[tt],en=ce[ht],Mt=ve[ht];(Mt!==en||ht==="value")&&s(ee,ht,en,Mt,z,I.children,N,V,Pe)}}re&1&&I.children!==C.children&&u(ee,C.children)}else!se&&Q==null&&L(ee,C,ce,ve,N,V,z);((Ie=ve.onVnodeUpdated)||ue)&&Mn(()=>{Ie&&Ir(Ie,N,C,I),ue&&es(C,I,N,"updated")},V)},P=(I,C,N,V,z,K,se)=>{for(let ee=0;ee<C.length;ee++){const re=I[ee],Q=C[ee],ue=re.el&&(re.type===Jn||!pa(re,Q)||re.shapeFlag&70)?h(re.el):N;_(re,Q,ue,null,V,z,K,se,!0)}},L=(I,C,N,V,z,K,se)=>{if(N!==V){if(N!==gt)for(const ee in N)!Yl(ee)&&!(ee in V)&&s(I,ee,N[ee],null,se,C.children,z,K,Pe);for(const ee in V){if(Yl(ee))continue;const re=V[ee],Q=N[ee];re!==Q&&ee!=="value"&&s(I,ee,Q,re,se,C.children,z,K,Pe)}"value"in V&&s(I,"value",N.value,V.value)}},H=(I,C,N,V,z,K,se,ee,re)=>{const Q=C.el=I?I.el:a(""),ue=C.anchor=I?I.anchor:a("");let{patchFlag:ce,dynamicChildren:ve,slotScopeIds:Ie}=C;Ie&&(ee=ee?ee.concat(Ie):Ie),I==null?(r(Q,N,V),r(ue,N,V),$(C.children,N,ue,z,K,se,ee,re)):ce>0&&ce&64&&ve&&I.dynamicChildren?(P(I.dynamicChildren,ve,N,z,K,se,ee),(C.key!=null||z&&C===z.subTree)&&LE(I,C,!0)):me(I,C,N,ue,z,K,se,ee,re)},U=(I,C,N,V,z,K,se,ee,re)=>{C.slotScopeIds=ee,I==null?C.shapeFlag&512?z.ctx.activate(C,N,V,se,re):de(C,N,V,z,K,se,re):ge(I,C,re)},de=(I,C,N,V,z,K,se)=>{const ee=I.component=dN(I,V,z);if(xE(I)&&(ee.ctx.renderer=ie),fN(ee),ee.asyncDep){if(z&&z.registerDep(ee,he),!I.el){const re=ee.subTree=Vt(Fi);x(null,re,C,N)}return}he(ee,I,C,N,z,K,se)},ge=(I,C,N)=>{const V=C.component=I.component;if(x2(I,C,N))if(V.asyncDep&&!V.asyncResolved){be(V,C,N);return}else V.next=C,m2(V.update),V.update();else C.el=I.el,V.vnode=C},he=(I,C,N,V,z,K,se)=>{const ee=()=>{if(I.isMounted){let{next:ue,bu:ce,u:ve,parent:Ie,vnode:Ne}=I,je=ue,tt;ts(I,!1),ue?(ue.el=Ne.el,be(I,ue,se)):ue=Ne,ce&&Xl(ce),(tt=ue.props&&ue.props.onVnodeBeforeUpdate)&&Ir(tt,Ie,ue,Ne),ts(I,!0);const ht=Gd(I),en=I.subTree;I.subTree=ht,_(en,ht,h(en.el),F(en),I,z,K),ue.el=ht.el,je===null&&T2(I,ht.el),ve&&Mn(ve,z),(tt=ue.props&&ue.props.onVnodeUpdated)&&Mn(()=>Ir(tt,Ie,ue,Ne),z)}else{let ue;const{el:ce,props:ve}=C,{bm:Ie,m:Ne,parent:je}=I,tt=La(C);if(ts(I,!1),Ie&&Xl(Ie),!tt&&(ue=ve&&ve.onVnodeBeforeMount)&&Ir(ue,je,C),ts(I,!0),ce&&Ve){const ht=()=>{I.subTree=Gd(I),Ve(ce,I.subTree,I,z,null)};tt?C.type.__asyncLoader().then(()=>!I.isUnmounted&&ht()):ht()}else{const ht=I.subTree=Gd(I);_(null,ht,N,V,I,z,K),C.el=ht.el}if(Ne&&Mn(Ne,z),!tt&&(ue=ve&&ve.onVnodeMounted)){const ht=C;Mn(()=>Ir(ue,je,ht),z)}(C.shapeFlag&256||je&&La(je.vnode)&&je.vnode.shapeFlag&256)&&I.a&&Mn(I.a,z),I.isMounted=!0,C=N=V=null}},re=I.effect=new bm(ee,()=>Sm(Q),I.scope),Q=I.update=()=>re.run();Q.id=I.uid,ts(I,!0),Q()},be=(I,C,N)=>{C.component=I;const V=I.vnode.props;I.vnode=C,I.next=null,X2(I,C.props,V,N),eN(I,C.children,N),zo(),xv(),Wo()},me=(I,C,N,V,z,K,se,ee,re=!1)=>{const Q=I&&I.children,ue=I?I.shapeFlag:0,ce=C.children,{patchFlag:ve,shapeFlag:Ie}=C;if(ve>0){if(ve&128){Re(Q,ce,N,V,z,K,se,ee,re);return}else if(ve&256){$e(Q,ce,N,V,z,K,se,ee,re);return}}Ie&8?(ue&16&&Pe(Q,z,K),ce!==Q&&u(N,ce)):ue&16?Ie&16?Re(Q,ce,N,V,z,K,se,ee,re):Pe(Q,z,K,!0):(ue&8&&u(N,""),Ie&16&&$(ce,N,V,z,K,se,ee,re))},$e=(I,C,N,V,z,K,se,ee,re)=>{I=I||oo,C=C||oo;const Q=I.length,ue=C.length,ce=Math.min(Q,ue);let ve;for(ve=0;ve<ce;ve++){const Ie=C[ve]=re?yi(C[ve]):Cr(C[ve]);_(I[ve],Ie,N,null,z,K,se,ee,re)}Q>ue?Pe(I,z,K,!0,!1,ce):$(C,N,V,z,K,se,ee,re,ce)},Re=(I,C,N,V,z,K,se,ee,re)=>{let Q=0;const ue=C.length;let ce=I.length-1,ve=ue-1;for(;Q<=ce&&Q<=ve;){const Ie=I[Q],Ne=C[Q]=re?yi(C[Q]):Cr(C[Q]);if(pa(Ie,Ne))_(Ie,Ne,N,null,z,K,se,ee,re);else break;Q++}for(;Q<=ce&&Q<=ve;){const Ie=I[ce],Ne=C[ve]=re?yi(C[ve]):Cr(C[ve]);if(pa(Ie,Ne))_(Ie,Ne,N,null,z,K,se,ee,re);else break;ce--,ve--}if(Q>ce){if(Q<=ve){const Ie=ve+1,Ne=Ie<ue?C[Ie].el:V;for(;Q<=ve;)_(null,C[Q]=re?yi(C[Q]):Cr(C[Q]),N,Ne,z,K,se,ee,re),Q++}}else if(Q>ve)for(;Q<=ce;)W(I[Q],z,K,!0),Q++;else{const Ie=Q,Ne=Q,je=new Map;for(Q=Ne;Q<=ve;Q++){const Lt=C[Q]=re?yi(C[Q]):Cr(C[Q]);Lt.key!=null&&je.set(Lt.key,Q)}let tt,ht=0;const en=ve-Ne+1;let Mt=!1,xn=0;const Tn=new Array(en);for(Q=0;Q<en;Q++)Tn[Q]=0;for(Q=Ie;Q<=ce;Q++){const Lt=I[Q];if(ht>=en){W(Lt,z,K,!0);continue}let tn;if(Lt.key!=null)tn=je.get(Lt.key);else for(tt=Ne;tt<=ve;tt++)if(Tn[tt-Ne]===0&&pa(Lt,C[tt])){tn=tt;break}tn===void 0?W(Lt,z,K,!0):(Tn[tn-Ne]=Q+1,tn>=xn?xn=tn:Mt=!0,_(Lt,C[tn],N,null,z,K,se,ee,re),ht++)}const Tr=Mt?rN(Tn):oo;for(tt=Tr.length-1,Q=en-1;Q>=0;Q--){const Lt=Ne+Q,tn=C[Lt],Yn=Lt+1<ue?C[Lt+1].el:V;Tn[Q]===0?_(null,tn,N,Yn,z,K,se,ee,re):Mt&&(tt<0||Q!==Tr[tt]?B(tn,N,Yn,2):tt--)}}},B=(I,C,N,V,z=null)=>{const{el:K,type:se,transition:ee,children:re,shapeFlag:Q}=I;if(Q&6){B(I.component.subTree,C,N,V);return}if(Q&128){I.suspense.move(C,N,V);return}if(Q&64){se.move(I,C,N,ie);return}if(se===Jn){r(K,C,N);for(let ce=0;ce<re.length;ce++)B(re[ce],C,N,V);r(I.anchor,C,N);return}if(se===Yd){b(I,C,N);return}if(V!==2&&Q&1&&ee)if(V===0)ee.beforeEnter(K),r(K,C,N),Mn(()=>ee.enter(K),z);else{const{leave:ce,delayLeave:ve,afterLeave:Ie}=ee,Ne=()=>r(K,C,N),je=()=>{ce(K,()=>{Ne(),Ie&&Ie()})};ve?ve(K,Ne,je):je()}else r(K,C,N)},W=(I,C,N,V=!1,z=!1)=>{const{type:K,props:se,ref:ee,children:re,dynamicChildren:Q,shapeFlag:ue,patchFlag:ce,dirs:ve}=I;if(ee!=null&&H0(ee,null,N,I,!0),ue&256){C.ctx.deactivate(I);return}const Ie=ue&1&&ve,Ne=!La(I);let je;if(Ne&&(je=se&&se.onVnodeBeforeUnmount)&&Ir(je,C,I),ue&6)st(I.component,N,V);else{if(ue&128){I.suspense.unmount(N,V);return}Ie&&es(I,null,C,"beforeUnmount"),ue&64?I.type.remove(I,C,N,z,ie,V):Q&&(K!==Jn||ce>0&&ce&64)?Pe(Q,C,N,!1,!0):(K===Jn&&ce&384||!z&&ue&16)&&Pe(re,C,N),V&&J(I)}(Ne&&(je=se&&se.onVnodeUnmounted)||Ie)&&Mn(()=>{je&&Ir(je,C,I),Ie&&es(I,null,C,"unmounted")},N)},J=I=>{const{type:C,el:N,anchor:V,transition:z}=I;if(C===Jn){G(N,V);return}if(C===Yd){E(I);return}const K=()=>{i(N),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(I.shapeFlag&1&&z&&!z.persisted){const{leave:se,delayLeave:ee}=z,re=()=>se(N,K);ee?ee(I.el,K,re):re()}else K()},G=(I,C)=>{let N;for(;I!==C;)N=d(I),i(I),I=N;i(C)},st=(I,C,N)=>{const{bum:V,scope:z,update:K,subTree:se,um:ee}=I;V&&Xl(V),z.stop(),K&&(K.active=!1,W(se,I,C,N)),ee&&Mn(ee,C),Mn(()=>{I.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Pe=(I,C,N,V=!1,z=!1,K=0)=>{for(let se=K;se<I.length;se++)W(I[se],C,N,V,z)},F=I=>I.shapeFlag&6?F(I.component.subTree):I.shapeFlag&128?I.suspense.next():d(I.anchor||I.el),Y=(I,C,N)=>{I==null?C._vnode&&W(C._vnode,null,null,!0):_(C._vnode||null,I,C,null,null,null,N),xv(),vE(),C._vnode=I},ie={p:_,um:W,m:B,r:J,mt:de,mc:$,pc:me,pbc:P,n:F,o:t};let pe,Ve;return e&&([pe,Ve]=e(ie)),{render:Y,hydrate:pe,createApp:Q2(Y,pe)}}function ts({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function LE(t,e,n=!1){const r=t.children,i=e.children;if(Se(r)&&Se(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=yi(i[s]),a.el=o.el),n||LE(o,a)),a.type===Ah&&(a.el=o.el)}}function rN(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<l?s=a+1:o=a;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const iN=t=>t.__isTeleport,Jn=Symbol.for("v-fgt"),Ah=Symbol.for("v-txt"),Fi=Symbol.for("v-cmt"),Yd=Symbol.for("v-stc"),Fa=[];let fr=null;function pt(t=!1){Fa.push(fr=t?null:[])}function sN(){Fa.pop(),fr=Fa[Fa.length-1]||null}let ic=1;function Ov(t){ic+=t}function $E(t){return t.dynamicChildren=ic>0?fr||oo:null,sN(),ic>0&&fr&&fr.push(t),t}function Pt(t,e,n,r,i,s){return $E(rt(t,e,n,r,i,s,!0))}function wo(t,e,n,r,i){return $E(Vt(t,e,n,r,i,!0))}function bu(t){return t?t.__v_isVNode===!0:!1}function pa(t,e){return t.type===e.type&&t.key===e.key}const Rh="__vInternal",FE=({key:t})=>t??null,eu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Bt(t)||Yt(t)||Le(t)?{i:an,r:t,k:e,f:!!n}:t:null);function rt(t,e=null,n=null,r=0,i=null,s=t===Jn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&FE(e),ref:e&&eu(e),scopeId:Ih,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:an};return a?(Dm(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=Bt(n)?8:16),ic>0&&!o&&fr&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&fr.push(c),c}const Vt=oN;function oN(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===B2)&&(t=Fi),bu(t)){const a=bo(t,e,!0);return n&&Dm(a,n),ic>0&&!s&&fr&&(a.shapeFlag&6?fr[fr.indexOf(t)]=a:fr.push(a)),a.patchFlag|=-2,a}if(vN(t)&&(t=t.__vccOpts),e){e=aN(e);let{class:a,style:c}=e;a&&!Bt(a)&&(e.class=Lc(a)),Tt(c)&&(lE(c)&&!Se(c)&&(c=Xt({},c)),e.style=ym(c))}const o=Bt(t)?1:I2(t)?128:iN(t)?64:Tt(t)?4:Le(t)?2:0;return rt(t,e,n,r,i,o,s,!0)}function aN(t){return t?lE(t)||Rh in t?Xt({},t):t:null}function bo(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?lN(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&FE(a),ref:e&&e.ref?n&&i?Se(i)?i.concat(eu(e)):[i,eu(e)]:eu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Jn?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&bo(t.ssContent),ssFallback:t.ssFallback&&bo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function cN(t=" ",e=0){return Vt(Ah,null,t,e)}function lr(t="",e=!1){return e?(pt(),wo(Fi,null,t)):Vt(Fi,null,t)}function Cr(t){return t==null||typeof t=="boolean"?Vt(Fi):Se(t)?Vt(Jn,null,t.slice()):typeof t=="object"?yi(t):Vt(Ah,null,String(t))}function yi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:bo(t)}function Dm(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Se(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Dm(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Rh in e)?e._ctx=an:i===3&&an&&(an.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:an},n=32):(e=String(e),r&64?(n=16,e=[cN(e)]):n=8);t.children=e,t.shapeFlag|=n}function lN(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Lc([e.class,r.class]));else if(i==="style")e.style=ym([e.style,r.style]);else if(_h(i)){const s=e[i],o=r[i];o&&s!==o&&!(Se(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ir(t,e,n,r=null){_r(t,e,7,[n,r])}const uN=PE();let hN=0;function dN(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||uN,s={uid:hN++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Gb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:NE(r,i),emitsOptions:wE(r,i),emit:null,emitted:null,propsDefaults:gt,inheritAttrs:r.inheritAttrs,ctx:gt,data:gt,props:gt,attrs:gt,slots:gt,refs:gt,setupState:gt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=v2.bind(null,s),t.ce&&t.ce(s),s}let Kt=null;const VE=()=>Kt||an;let Om,Gs,Mv="__VUE_INSTANCE_SETTERS__";(Gs=D0()[Mv])||(Gs=D0()[Mv]=[]),Gs.push(t=>Kt=t),Om=t=>{Gs.length>1?Gs.forEach(e=>e(t)):Gs[0](t)};const Eo=t=>{Om(t),t.scope.on()},gs=()=>{Kt&&Kt.scope.off(),Om(null)};function BE(t){return t.vnode.shapeFlag&4}let sc=!1;function fN(t,e=!1){sc=e;const{props:n,children:r}=t.vnode,i=BE(t);Y2(t,n,i,e),Z2(t,r);const s=i?pN(t,e):void 0;return sc=!1,s}function pN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Cm(new Proxy(t.ctx,H2));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?gN(t):null;Eo(t),zo();const s=ki(r,t,0,[t.props,i]);if(Wo(),gs(),jb(s)){if(s.then(gs,gs),e)return s.then(o=>{Lv(t,o,e)}).catch(o=>{xh(o,t,0)});t.asyncDep=s}else Lv(t,s,e)}else UE(t,e)}function Lv(t,e,n){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Tt(e)&&(t.setupState=pE(e)),UE(t,n)}let $v;function UE(t,e,n){const r=t.type;if(!t.render){if(!e&&$v&&!r.render){const i=r.template||km(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,l=Xt(Xt({isCustomElement:s,delimiters:a},o),c);r.render=$v(i,l)}}t.render=r.render||gr}Eo(t),zo(),j2(t),Wo(),gs()}function mN(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Fn(t,"get","$attrs"),e[n]}}))}function gN(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return mN(t)},slots:t.slots,emit:t.emit,expose:e}}function Sh(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(pE(Cm(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in $a)return $a[n](t)},has(e,n){return n in e||n in $a}}))}function _N(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function vN(t){return Le(t)&&"__vccOpts"in t}const Gt=(t,e)=>d2(t,e,sc);function HE(t,e,n){const r=arguments.length;return r===2?Tt(e)&&!Se(e)?bu(e)?Vt(t,null,[e]):Vt(t,e):Vt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&bu(n)&&(n=[n]),Vt(t,e,n))}const yN=Symbol.for("v-scx"),wN=()=>zn(yN),bN="3.3.4",EN="http://www.w3.org/2000/svg",os=typeof document<"u"?document:null,Fv=os&&os.createElement("template"),xN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?os.createElementNS(EN,t):os.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>os.createTextNode(t),createComment:t=>os.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>os.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Fv.innerHTML=r?`<svg>${t}</svg>`:t;const a=Fv.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function TN(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function IN(t,e,n){const r=t.style,i=Bt(n);if(n&&!i){if(e&&!Bt(e))for(const s in e)n[s]==null&&j0(r,s,"");for(const s in n)j0(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const Vv=/\s*!important$/;function j0(t,e,n){if(Se(n))n.forEach(r=>j0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=CN(t,e);Vv.test(n)?t.setProperty(jo(r),n.replace(Vv,""),"important"):t[r]=n}}const Bv=["Webkit","Moz","ms"],Xd={};function CN(t,e){const n=Xd[e];if(n)return n;let r=Fr(e);if(r!=="filter"&&r in t)return Xd[e]=r;r=wh(r);for(let i=0;i<Bv.length;i++){const s=Bv[i]+r;if(s in t)return Xd[e]=s}return e}const Uv="http://www.w3.org/1999/xlink";function AN(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Uv,e.slice(6,e.length)):t.setAttributeNS(Uv,e,n);else{const s=Pk(e);n==null||s&&!qb(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function RN(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const l=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";l!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let c=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=qb(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Xs(t,e,n,r){t.addEventListener(e,n,r)}function SN(t,e,n,r){t.removeEventListener(e,n,r)}function PN(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=kN(e);if(r){const l=s[e]=ON(r,i);Xs(t,a,l,c)}else o&&(SN(t,a,o,c),s[e]=void 0)}}const Hv=/(?:Once|Passive|Capture)$/;function kN(t){let e;if(Hv.test(t)){e={};let r;for(;r=t.match(Hv);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):jo(t.slice(2)),e]}let Jd=0;const NN=Promise.resolve(),DN=()=>Jd||(NN.then(()=>Jd=0),Jd=Date.now());function ON(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;_r(MN(r,n.value),e,5,[r])};return n.value=t,n.attached=DN(),n}function MN(t,e){if(Se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const jv=/^on[a-z]/,LN=(t,e,n,r,i=!1,s,o,a,c)=>{e==="class"?TN(t,r,i):e==="style"?IN(t,n,r):_h(e)?mm(e)||PN(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$N(t,e,r,i))?RN(t,e,r,s,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),AN(t,e,r,i))};function $N(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&jv.test(e)&&Le(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||jv.test(e)&&Bt(n)?!1:e in t}const zv=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Se(e)?n=>Xl(e,n):e};function FN(t){t.target.composing=!0}function Wv(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const nW={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=zv(i);const s=r||i.props&&i.props.type==="number";Xs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=N0(a)),t._assign(a)}),n&&Xs(t,"change",()=>{t.value=t.value.trim()}),e||(Xs(t,"compositionstart",FN),Xs(t,"compositionend",Wv),Xs(t,"change",Wv))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=zv(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&N0(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},VN=["ctrl","shift","alt","meta"],BN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>VN.some(n=>t[`${n}Key`]&&!e.includes(n))},Nl=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=BN[e[i]];if(s&&s(n,e))return}return t(n,...r)},UN={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ma(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ma(t,!0),r.enter(t)):r.leave(t,()=>{ma(t,!1)}):ma(t,e))},beforeUnmount(t,{value:e}){ma(t,e)}};function ma(t,e){t.style.display=e?t._vod:"none"}const HN=Xt({patchProp:LN},xN);let qv;function jN(){return qv||(qv=tN(HN))}const zN=(...t)=>{const e=jN().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=WN(r);if(!i)return;const s=e._component;!Le(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function WN(t){return Bt(t)?document.querySelector(t):t}var qN=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const KN=Symbol();var Kv;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Kv||(Kv={}));function GN(){const t=Qb(!0),e=t.run(()=>dt({}));let n=[],r=[];const i=Cm({install(s){i._a=s,s.provide(KN,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!qN?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Js=typeof window<"u";function QN(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ct=Object.assign;function Zd(t,e){const n={};for(const r in e){const i=e[r];n[r]=wr(i)?i.map(t):t(i)}return n}const Va=()=>{},wr=Array.isArray,YN=/\/$/,XN=t=>t.replace(YN,"");function ef(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=tD(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function JN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Gv(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ZN(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&xo(e.matched[r],n.matched[i])&&jE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function xo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function jE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!eD(t[n],e[n]))return!1;return!0}function eD(t,e){return wr(t)?Qv(t,e):wr(e)?Qv(e,t):t===e}function Qv(t,e){return wr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function tD(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var oc;(function(t){t.pop="pop",t.push="push"})(oc||(oc={}));var Ba;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ba||(Ba={}));function nD(t){if(!t)if(Js){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),XN(t)}const rD=/^[^#]+#/;function iD(t,e){return t.replace(rD,"#")+e}function sD(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ph=()=>({left:window.pageXOffset,top:window.pageYOffset});function oD(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=sD(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Yv(t,e){return(history.state?history.state.position-e:-1)+t}const z0=new Map;function aD(t,e){z0.set(t,e)}function cD(t){const e=z0.get(t);return z0.delete(t),e}let lD=()=>location.protocol+"//"+location.host;function zE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),Gv(c,"")}return Gv(n,t)+r+i}function uD(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=zE(t,location),g=n.value,_=e.value;let w=0;if(d){if(n.value=f,e.value=d,o&&o===g){o=null;return}w=_?d.position-_.position:0}else r(f);i.forEach(x=>{x(n.value,g,{delta:w,type:oc.pop,direction:w?w>0?Ba.forward:Ba.back:Ba.unknown})})};function c(){o=n.value}function l(d){i.push(d);const f=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(ct({},d.state,{scroll:Ph()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:h}}function Xv(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Ph():null}}function hD(t){const{history:e,location:n}=window,r={value:zE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+c:lD()+t+c;try{e[u?"replaceState":"pushState"](l,"",d),i.value=l}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(c,l){const u=ct({},e.state,Xv(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),r.value=c}function a(c,l){const u=ct({},i.value,e.state,{forward:c,scroll:Ph()});s(u.current,u,!0);const h=ct({},Xv(r.value,c,null),{position:u.position+1},l);s(c,h,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function dD(t){t=nD(t);const e=hD(t),n=uD(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=ct({location:"",base:t,go:r,createHref:iD.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function fD(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),dD(t)}function pD(t){return typeof t=="string"||t&&typeof t=="object"}function WE(t){return typeof t=="string"||typeof t=="symbol"}const _i={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},qE=Symbol("");var Jv;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Jv||(Jv={}));function To(t,e){return ct(new Error,{type:t,[qE]:!0},e)}function Qr(t,e){return t instanceof Error&&qE in t&&(e==null||!!(t.type&e))}const Zv="[^/]+?",mD={sensitive:!1,strict:!1,start:!0,end:!0},gD=/[.+*?^${}()[\]/\\]/g;function _D(t,e){const n=ct({},mD,e),r=[];let i=n.start?"^":"";const s=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let h=0;h<l.length;h++){const d=l[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(gD,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:_,optional:w,regexp:x}=d;s.push({name:g,repeatable:_,optional:w});const y=x||Zv;if(y!==Zv){f+=10;try{new RegExp(`(${y})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+E.message)}}let b=_?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;h||(b=w&&l.length<2?`(?:/${b})`:"/"+b),w&&(b+="?"),i+=b,f+=20,w&&(f+=-8),_&&(f+=-20),y===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=s[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function c(l){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:_,optional:w}=f,x=g in l?l[g]:"";if(wr(x)&&!_)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=wr(x)?x.join("/"):x;if(!y)if(w)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function vD(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function yD(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=vD(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(ey(r))return 1;if(ey(i))return-1}return i.length-r.length}function ey(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const wD={type:0,value:""},bD=/[a-zA-Z0-9_]/;function ED(t){if(!t)return[[]];if(t==="/")return[[wD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,l="",u="";function h(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&h(),o()):c===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:c==="("?n=2:bD.test(c)?d():(h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:h(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),i}function xD(t,e,n){const r=_D(ED(t.path),n),i=ct(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function TD(t,e){const n=[],r=new Map;e=ry({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,g=ID(u);g.aliasOf=d&&d.record;const _=ry(e,u),w=[g];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of b)w.push(ct({},g,{components:d?d.record.components:g.components,path:E,aliasOf:d?d.record:g}))}let x,y;for(const b of w){const{path:E}=b;if(h&&E[0]!=="/"){const A=h.record.path,R=A[A.length-1]==="/"?"":"/";b.path=h.record.path+(E&&R+E)}if(x=xD(b,h,_),d?d.alias.push(x):(y=y||x,y!==x&&y.alias.push(x),f&&u.name&&!ny(x)&&o(u.name)),g.children){const A=g.children;for(let R=0;R<A.length;R++)s(A[R],x,d&&d.children[R])}d=d||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&c(x)}return y?()=>{o(y)}:Va}function o(u){if(WE(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function c(u){let h=0;for(;h<n.length&&yD(u,n[h])>=0&&(u.record.path!==n[h].record.path||!KE(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!ny(u)&&r.set(u.record.name,u)}function l(u,h){let d,f={},g,_;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw To(1,{location:u});_=d.record.name,f=ct(ty(h.params,d.keys.filter(y=>!y.optional).map(y=>y.name)),u.params&&ty(u.params,d.keys.map(y=>y.name))),g=d.stringify(f)}else if("path"in u)g=u.path,d=n.find(y=>y.re.test(g)),d&&(f=d.parse(g),_=d.record.name);else{if(d=h.name?r.get(h.name):n.find(y=>y.re.test(h.path)),!d)throw To(1,{location:u,currentLocation:h});_=d.record.name,f=ct({},h.params,u.params),g=d.stringify(f)}const w=[];let x=d;for(;x;)w.unshift(x.record),x=x.parent;return{name:_,path:g,params:f,matched:w,meta:AD(w)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:l,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function ty(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function ID(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:CD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function CD(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function ny(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function AD(t){return t.reduce((e,n)=>ct(e,n.meta),{})}function ry(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function KE(t,e){return e.children.some(n=>n===t||KE(t,n))}const GE=/#/g,RD=/&/g,SD=/\//g,PD=/=/g,kD=/\?/g,QE=/\+/g,ND=/%5B/g,DD=/%5D/g,YE=/%5E/g,OD=/%60/g,XE=/%7B/g,MD=/%7C/g,JE=/%7D/g,LD=/%20/g;function Mm(t){return encodeURI(""+t).replace(MD,"|").replace(ND,"[").replace(DD,"]")}function $D(t){return Mm(t).replace(XE,"{").replace(JE,"}").replace(YE,"^")}function W0(t){return Mm(t).replace(QE,"%2B").replace(LD,"+").replace(GE,"%23").replace(RD,"%26").replace(OD,"`").replace(XE,"{").replace(JE,"}").replace(YE,"^")}function FD(t){return W0(t).replace(PD,"%3D")}function VD(t){return Mm(t).replace(GE,"%23").replace(kD,"%3F")}function BD(t){return t==null?"":VD(t).replace(SD,"%2F")}function Eu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function UD(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(QE," "),o=s.indexOf("="),a=Eu(o<0?s:s.slice(0,o)),c=o<0?null:Eu(s.slice(o+1));if(a in e){let l=e[a];wr(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function iy(t){let e="";for(let n in t){const r=t[n];if(n=FD(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(wr(r)?r.map(s=>s&&W0(s)):[r&&W0(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function HD(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=wr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const jD=Symbol(""),sy=Symbol(""),kh=Symbol(""),Lm=Symbol(""),q0=Symbol("");function ga(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function wi(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const c=h=>{h===!1?a(To(4,{from:n,to:e})):h instanceof Error?a(h):pD(h)?a(To(2,{from:e,to:h})):(s&&r.enterCallbacks[i]===s&&typeof h=="function"&&s.push(h),o())},l=t.call(r&&r.instances[i],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch(h=>a(h))})}function tf(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(zD(a)){const l=(a.__vccOpts||a)[e];l&&i.push(wi(l,n,r,s,o))}else{let c=a();i.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=QN(l)?l.default:l;s.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&wi(d,n,r,s,o)()}))}}return i}function zD(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function oy(t){const e=zn(kh),n=zn(Lm),r=Gt(()=>e.resolve(St(t.to))),i=Gt(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(xo.bind(null,u));if(d>-1)return d;const f=ay(c[l-2]);return l>1&&ay(u)===f&&h[h.length-1].path!==f?h.findIndex(xo.bind(null,c[l-2])):d}),s=Gt(()=>i.value>-1&&GD(n.params,r.value.params)),o=Gt(()=>i.value>-1&&i.value===n.matched.length-1&&jE(n.params,r.value.params));function a(c={}){return KD(c)?e[St(t.replace)?"replace":"push"](St(t.to)).catch(Va):Promise.resolve()}return{route:r,href:Gt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const WD=rr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:oy,setup(t,{slots:e}){const n=Eh(oy(t)),{options:r}=zn(kh),i=Gt(()=>({[cy(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[cy(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:HE("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),qD=WD;function KD(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function GD(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!wr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function ay(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const cy=(t,e,n)=>t??e??n,QD=rr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=zn(q0),i=Gt(()=>t.route||r.value),s=zn(sy,0),o=Gt(()=>{let l=St(s);const{matched:u}=i.value;let h;for(;(h=u[l])&&!h.components;)l++;return l}),a=Gt(()=>i.value.matched[o.value]);Zl(sy,Gt(()=>o.value+1)),Zl(jD,a),Zl(q0,i);const c=dt();return Or(()=>[c.value,a.value,t.name],([l,u,h],[d,f,g])=>{u&&(u.instances[h]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!xo(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(_=>_(l))},{flush:"post"}),()=>{const l=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return ly(n.default,{Component:d,route:l});const f=h.props[u],g=f?f===!0?l.params:typeof f=="function"?f(l):f:null,w=HE(d,ct({},g,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[u]=null)},ref:c}));return ly(n.default,{Component:w,route:l})||w}}});function ly(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const ZE=QD;function YD(t){const e=TD(t.routes,t),n=t.parseQuery||UD,r=t.stringifyQuery||iy,i=t.history,s=ga(),o=ga(),a=ga(),c=dE(_i);let l=_i;Js&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Zd.bind(null,F=>""+F),h=Zd.bind(null,BD),d=Zd.bind(null,Eu);function f(F,Y){let ie,pe;return WE(F)?(ie=e.getRecordMatcher(F),pe=Y):pe=F,e.addRoute(pe,ie)}function g(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function _(){return e.getRoutes().map(F=>F.record)}function w(F){return!!e.getRecordMatcher(F)}function x(F,Y){if(Y=ct({},Y||c.value),typeof F=="string"){const N=ef(n,F,Y.path),V=e.resolve({path:N.path},Y),z=i.createHref(N.fullPath);return ct(N,V,{params:d(V.params),hash:Eu(N.hash),redirectedFrom:void 0,href:z})}let ie;if("path"in F)ie=ct({},F,{path:ef(n,F.path,Y.path).path});else{const N=ct({},F.params);for(const V in N)N[V]==null&&delete N[V];ie=ct({},F,{params:h(N)}),Y.params=h(Y.params)}const pe=e.resolve(ie,Y),Ve=F.hash||"";pe.params=u(d(pe.params));const I=JN(r,ct({},F,{hash:$D(Ve),path:pe.path})),C=i.createHref(I);return ct({fullPath:I,hash:Ve,query:r===iy?HD(F.query):F.query||{}},pe,{redirectedFrom:void 0,href:C})}function y(F){return typeof F=="string"?ef(n,F,c.value.path):ct({},F)}function b(F,Y){if(l!==F)return To(8,{from:Y,to:F})}function E(F){return D(F)}function A(F){return E(ct(y(F),{replace:!0}))}function R(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:ie}=Y;let pe=typeof ie=="function"?ie(F):ie;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=y(pe):{path:pe},pe.params={}),ct({query:F.query,hash:F.hash,params:"path"in pe?{}:F.params},pe)}}function D(F,Y){const ie=l=x(F),pe=c.value,Ve=F.state,I=F.force,C=F.replace===!0,N=R(ie);if(N)return D(ct(y(N),{state:typeof N=="object"?ct({},Ve,N.state):Ve,force:I,replace:C}),Y||ie);const V=ie;V.redirectedFrom=Y;let z;return!I&&ZN(r,pe,ie)&&(z=To(16,{to:V,from:pe}),B(pe,pe,!0,!1)),(z?Promise.resolve(z):P(V,pe)).catch(K=>Qr(K)?Qr(K,2)?K:Re(K):me(K,V,pe)).then(K=>{if(K){if(Qr(K,2))return D(ct({replace:C},y(K.to),{state:typeof K.to=="object"?ct({},Ve,K.to.state):Ve,force:I}),Y||V)}else K=H(V,pe,!0,C,Ve);return L(V,pe,K),K})}function $(F,Y){const ie=b(F,Y);return ie?Promise.reject(ie):Promise.resolve()}function q(F){const Y=G.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function P(F,Y){let ie;const[pe,Ve,I]=XD(F,Y);ie=tf(pe.reverse(),"beforeRouteLeave",F,Y);for(const N of pe)N.leaveGuards.forEach(V=>{ie.push(wi(V,F,Y))});const C=$.bind(null,F,Y);return ie.push(C),Pe(ie).then(()=>{ie=[];for(const N of s.list())ie.push(wi(N,F,Y));return ie.push(C),Pe(ie)}).then(()=>{ie=tf(Ve,"beforeRouteUpdate",F,Y);for(const N of Ve)N.updateGuards.forEach(V=>{ie.push(wi(V,F,Y))});return ie.push(C),Pe(ie)}).then(()=>{ie=[];for(const N of I)if(N.beforeEnter)if(wr(N.beforeEnter))for(const V of N.beforeEnter)ie.push(wi(V,F,Y));else ie.push(wi(N.beforeEnter,F,Y));return ie.push(C),Pe(ie)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),ie=tf(I,"beforeRouteEnter",F,Y),ie.push(C),Pe(ie))).then(()=>{ie=[];for(const N of o.list())ie.push(wi(N,F,Y));return ie.push(C),Pe(ie)}).catch(N=>Qr(N,8)?N:Promise.reject(N))}function L(F,Y,ie){a.list().forEach(pe=>q(()=>pe(F,Y,ie)))}function H(F,Y,ie,pe,Ve){const I=b(F,Y);if(I)return I;const C=Y===_i,N=Js?history.state:{};ie&&(pe||C?i.replace(F.fullPath,ct({scroll:C&&N&&N.scroll},Ve)):i.push(F.fullPath,Ve)),c.value=F,B(F,Y,ie,C),Re()}let U;function de(){U||(U=i.listen((F,Y,ie)=>{if(!st.listening)return;const pe=x(F),Ve=R(pe);if(Ve){D(ct(Ve,{replace:!0}),pe).catch(Va);return}l=pe;const I=c.value;Js&&aD(Yv(I.fullPath,ie.delta),Ph()),P(pe,I).catch(C=>Qr(C,12)?C:Qr(C,2)?(D(C.to,pe).then(N=>{Qr(N,20)&&!ie.delta&&ie.type===oc.pop&&i.go(-1,!1)}).catch(Va),Promise.reject()):(ie.delta&&i.go(-ie.delta,!1),me(C,pe,I))).then(C=>{C=C||H(pe,I,!1),C&&(ie.delta&&!Qr(C,8)?i.go(-ie.delta,!1):ie.type===oc.pop&&Qr(C,20)&&i.go(-1,!1)),L(pe,I,C)}).catch(Va)}))}let ge=ga(),he=ga(),be;function me(F,Y,ie){Re(F);const pe=he.list();return pe.length?pe.forEach(Ve=>Ve(F,Y,ie)):console.error(F),Promise.reject(F)}function $e(){return be&&c.value!==_i?Promise.resolve():new Promise((F,Y)=>{ge.add([F,Y])})}function Re(F){return be||(be=!F,de(),ge.list().forEach(([Y,ie])=>F?ie(F):Y()),ge.reset()),F}function B(F,Y,ie,pe){const{scrollBehavior:Ve}=t;if(!Js||!Ve)return Promise.resolve();const I=!ie&&cD(Yv(F.fullPath,0))||(pe||!ie)&&history.state&&history.state.scroll||null;return gE().then(()=>Ve(F,Y,I)).then(C=>C&&oD(C)).catch(C=>me(C,F,Y))}const W=F=>i.go(F);let J;const G=new Set,st={currentRoute:c,listening:!0,addRoute:f,removeRoute:g,hasRoute:w,getRoutes:_,resolve:x,options:t,push:E,replace:A,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:he.add,isReady:$e,install(F){const Y=this;F.component("RouterLink",qD),F.component("RouterView",ZE),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>St(c)}),Js&&!J&&c.value===_i&&(J=!0,E(i.location).catch(Ve=>{}));const ie={};for(const Ve in _i)Object.defineProperty(ie,Ve,{get:()=>c.value[Ve],enumerable:!0});F.provide(kh,Y),F.provide(Lm,aE(ie)),F.provide(q0,c);const pe=F.unmount;G.add(F),F.unmount=function(){G.delete(F),G.size<1&&(l=_i,U&&U(),U=null,c.value=_i,J=!1,be=!1),pe()}}};function Pe(F){return F.reduce((Y,ie)=>Y.then(()=>q(ie)),Promise.resolve())}return st}function XD(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(l=>xo(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>xo(l,c))||i.push(c))}return[n,r,i]}function JD(){return zn(kh)}function ZD(){return zn(Lm)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(t,e){if(!t)throw qo(e)},qo=function(t){return new Error("Firebase Database ("+ex.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Nh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||h==null)throw new tO;const d=s<<2|a>>4;if(r.push(d),l!==64){const f=a<<4&240|l>>2;if(r.push(f),h!==64){const g=l<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nx=function(t){const e=tx(t);return Nh.encodeByteArray(e,!0)},xu=function(t){return nx(t).replace(/\./g,"")},Tu=function(t){try{return Nh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){return rx(void 0,t)}function rx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!rO(n)||(t[n]=rx(t[n],e[n]));return t}function rO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=()=>iO().__FIREBASE_DEFAULTS__,oO=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tu(t[1]);return e&&JSON.parse(e)},$m=()=>{try{return sO()||oO()||aO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ix=t=>{var e,n;return(n=(e=$m())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cO=t=>{const e=ix(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sx=()=>{var t;return(t=$m())===null||t===void 0?void 0:t.config},ox=t=>{var e;return(e=$m())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[xu(JSON.stringify(n)),xu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function ax(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uO(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lx(){return ex.NODE_ADMIN===!0}function Vm(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function hO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="FirebaseError";class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dO,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wi.prototype.create)}}class Wi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?fO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ir(i,a,r)}}function fO(t,e){return t.replace(pO,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const pO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){return JSON.parse(t)}function on(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=cc(Tu(s[0])||""),n=cc(Tu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},mO=function(t){const e=hx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},gO=function(t){const e=hx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Io(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function K0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Iu(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function lc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(uy(s)&&uy(o)){if(!lc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Aa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ra(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let h=0;h<80;h++){h<40?h<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):h<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+l+c+u+r[h]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function vO(t,e){const n=new yO(t,e);return n.subscribe.bind(n)}class yO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=nf),i.error===void 0&&(i.error=nf),i.complete===void 0&&(i.complete=nf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nf(){}function bO(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,oe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Dh=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=1e3,TO=2,IO=4*60*60*1e3,CO=.5;function hy(t,e=xO,n=TO){const r=e*Math.pow(n,t),i=Math.round(CO*r*(Math.random()-.5)*2);return Math.min(IO,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class kn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ac;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SO(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RO(t){return t===rs?void 0:t}function SO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const kO={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},NO=et.INFO,DO={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},OO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Go{constructor(e){this.name=e,this._logLevel=NO,this._logHandler=OO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const MO=(t,e)=>e.some(n=>t instanceof n);let dy,fy;function LO(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $O(){return fy||(fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dx=new WeakMap,G0=new WeakMap,fx=new WeakMap,rf=new WeakMap,Bm=new WeakMap;function FO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ni(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dx.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function VO(t){if(G0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});G0.set(t,e)}let Q0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return G0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BO(t){Q0=t(Q0)}function UO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sf(this),e,...n);return fx.set(r,e.sort?e.sort():[e]),Ni(r)}:$O().includes(t)?function(...e){return t.apply(sf(this),e),Ni(dx.get(this))}:function(...e){return Ni(t.apply(sf(this),e))}}function HO(t){return typeof t=="function"?UO(t):(t instanceof IDBTransaction&&VO(t),MO(t,LO())?new Proxy(t,Q0):t)}function Ni(t){if(t instanceof IDBRequest)return FO(t);if(rf.has(t))return rf.get(t);const e=HO(t);return e!==t&&(rf.set(t,e),Bm.set(e,t)),e}const sf=t=>Bm.get(t);function jO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ni(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ni(o.result),c.oldVersion,c.newVersion,Ni(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const zO=["get","getKey","getAll","getAllKeys","count"],WO=["put","add","delete","clear"],of=new Map;function py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(of.get(e))return of.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=WO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zO.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return of.set(e,s),s}BO(t=>({...t,get:(e,n,r)=>py(e,n)||t.get(e,n,r),has:(e,n)=>!!py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Y0="@firebase/app",my="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Go("@firebase/app"),GO="@firebase/app-compat",QO="@firebase/analytics-compat",YO="@firebase/analytics",XO="@firebase/app-check-compat",JO="@firebase/app-check",ZO="@firebase/auth",e4="@firebase/auth-compat",t4="@firebase/database",n4="@firebase/database-compat",r4="@firebase/functions",i4="@firebase/functions-compat",s4="@firebase/installations",o4="@firebase/installations-compat",a4="@firebase/messaging",c4="@firebase/messaging-compat",l4="@firebase/performance",u4="@firebase/performance-compat",h4="@firebase/remote-config",d4="@firebase/remote-config-compat",f4="@firebase/storage",p4="@firebase/storage-compat",m4="@firebase/firestore",g4="@firebase/firestore-compat",_4="firebase",v4="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="[DEFAULT]",y4={[Y0]:"fire-core",[GO]:"fire-core-compat",[YO]:"fire-analytics",[QO]:"fire-analytics-compat",[JO]:"fire-app-check",[XO]:"fire-app-check-compat",[ZO]:"fire-auth",[e4]:"fire-auth-compat",[t4]:"fire-rtdb",[n4]:"fire-rtdb-compat",[r4]:"fire-fn",[i4]:"fire-fn-compat",[s4]:"fire-iid",[o4]:"fire-iid-compat",[a4]:"fire-fcm",[c4]:"fire-fcm-compat",[l4]:"fire-perf",[u4]:"fire-perf-compat",[h4]:"fire-rc",[d4]:"fire-rc-compat",[f4]:"fire-gcs",[p4]:"fire-gcs-compat",[m4]:"fire-fst",[g4]:"fire-fst-compat","fire-js":"fire-js",[_4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Map,J0=new Map;function w4(t,e){try{t.container.addComponent(e)}catch(n){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vn(t){const e=t.name;if(J0.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;J0.set(e,t);for(const n of Cu.values())w4(n,t);return!0}function $s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Di=new Wi("app","Firebase",b4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=v4;function px(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:X0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Di.create("bad-app-name",{appName:String(i)});if(n||(n=sx()),!n)throw Di.create("no-options");const s=Cu.get(i);if(s){if(lc(n,s.options)&&lc(r,s.config))return s;throw Di.create("duplicate-app",{appName:i})}const o=new PO(i);for(const c of J0.values())o.addComponent(c);const a=new E4(n,r,o);return Cu.set(i,a),a}function Oh(t=X0){const e=Cu.get(t);if(!e&&t===X0&&sx())return px();if(!e)throw Di.create("no-app",{appName:t});return e}function cn(t,e,n){var r;let i=(r=y4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(a.join(" "));return}Vn(new kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firebase-heartbeat-database",T4=1,uc="firebase-heartbeat-store";let af=null;function mx(){return af||(af=jO(x4,T4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(uc)}}}).catch(t=>{throw Di.create("idb-open",{originalErrorMessage:t.message})})),af}async function I4(t){try{return await(await mx()).transaction(uc).objectStore(uc).get(gx(t))}catch(e){if(e instanceof ir)ws.warn(e.message);else{const n=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(n.message)}}}async function gy(t,e){try{const r=(await mx()).transaction(uc,"readwrite");await r.objectStore(uc).put(e,gx(t)),await r.done}catch(n){if(n instanceof ir)ws.warn(n.message);else{const r=Di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ws.warn(r.message)}}}function gx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=1024,A4=30*24*60*60*1e3;class R4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_y();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=A4}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_y(),{heartbeatsToSend:n,unsentEntries:r}=S4(this._heartbeatsCache.heartbeats),i=xu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function _y(){return new Date().toISOString().substring(0,10)}function S4(t,e=C4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class P4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vm()?ux().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await I4(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vy(t){return xu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){Vn(new kn("platform-logger",e=>new qO(e),"PRIVATE")),Vn(new kn("heartbeat",e=>new R4(e),"PRIVATE")),cn(Y0,my,t),cn(Y0,my,"esm2017"),cn("fire-js","")}k4("");function Um(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fe(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function yy(t){return t!==void 0&&t.enterprise!==void 0}class N4{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function _x(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D4=_x,vx=new Wi("auth","Firebase",_x());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Go("@firebase/auth");function O4(t,...e){Au.logLevel<=et.WARN&&Au.warn(`Auth (${qi}): ${t}`,...e)}function tu(t,...e){Au.logLevel<=et.ERROR&&Au.error(`Auth (${qi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,...e){throw Hm(t,...e)}function Mr(t,...e){return Hm(t,...e)}function yx(t,e,n){const r=Object.assign(Object.assign({},D4()),{[e]:n});return new Wi("auth","Firebase",r).create(e,{appName:t.name})}function wx(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tr(t,"argument-error"),yx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vx.create(t,...e)}function ke(t,e,...n){if(!t)throw Hm(e,...n)}function Zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tu(e),new Error(e)}function oi(t,e){t||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function M4(){return wy()==="http:"||wy()==="https:"}function wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M4()||ax()||"connection"in navigator)?navigator.onLine:!0}function $4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=Fm()||cx()}get(){return L4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){oi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new Fc(3e4,6e4);function Fs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ki(t,e,n,r,i={}){return Ex(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ko(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),bx.fetch()(xx(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function Ex(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},F4),e);try{const i=new B4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Dl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dl(t,"user-disabled",o);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw yx(t,u,l);tr(t,u)}}catch(i){if(i instanceof ir)throw i;tr(t,"network-request-failed",{message:String(i)})}}async function Vc(t,e,n,r,i={}){const s=await Ki(t,e,n,r,i);return"mfaPendingCredential"in s&&tr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function xx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?jm(t.config,i):`${t.config.apiScheme}://${i}`}class B4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mr(this.auth,"network-request-failed")),V4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mr(t,e,r);return i.customData._tokenResponse=n,i}async function U4(t,e){return Ki(t,"GET","/v2/recaptchaConfig",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H4(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function j4(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z4(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),i=zm(r);ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ua(cf(i.auth_time)),issuedAtTime:Ua(cf(i.iat)),expirationTime:Ua(cf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cf(t){return Number(t)*1e3}function zm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Tu(n);return i?JSON.parse(i):(tu("Failed to decode base64 JWT payload"),null)}catch(i){return tu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function W4(t){const e=zm(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ir&&q4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function q4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ua(this.lastLoginAt),this.creationTime=Ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Co(t,j4(n,{idToken:r}));ke(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Y4(s.providerUserInfo):[],a=Q4(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tx(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function G4(t){const e=Ct(t);await Ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Y4(t){return t.map(e=>{var{providerId:n}=e,r=Um(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(t,e){const n=await Ex(t,{},async()=>{const r=Ko({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=xx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ke(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await X4(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new hc;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ke(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hc,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _s{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new K4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Co(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z4(this,e)}reload(){return G4(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ru(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Co(this,H4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,y=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:E,isAnonymous:A,providerData:R,stsTokenManager:D}=n;ke(b&&D,e,"internal-error");const $=hc.fromJSON(this.name,D);ke(typeof b=="string",e,"internal-error"),vi(h,e.name),vi(d,e.name),ke(typeof E=="boolean",e,"internal-error"),ke(typeof A=="boolean",e,"internal-error"),vi(f,e.name),vi(g,e.name),vi(_,e.name),vi(w,e.name),vi(x,e.name),vi(y,e.name);const q=new _s({uid:b,auth:e,email:d,emailVerified:E,displayName:h,isAnonymous:A,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:$,createdAt:x,lastLoginAt:y});return R&&Array.isArray(R)&&(q.providerData=R.map(P=>Object.assign({},P))),w&&(q._redirectEventId=w),q}static async _fromIdTokenResponse(e,n,r=!1){const i=new hc;i.updateFromServerResponse(n);const s=new _s({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ru(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;function ei(t){oi(t instanceof Function,"Expected a class definition");let e=by.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,by.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ix.type="NONE";const Ey=Ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t,e,n){return`firebase:${t}:${e}:${n}`}class uo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=nu(this.userKey,i.apiKey,s),this.fullPersistenceKey=nu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new uo(ei(Ey),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||ei(Ey);const o=nu(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const u=await l._get(o);if(u){const h=_s._fromJSON(e,u);l!==s&&(a=h),s=l;break}}catch{}const c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new uo(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new uo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Px(e))return"Blackberry";if(kx(e))return"Webos";if(Wm(e))return"Safari";if((e.includes("chrome/")||Ax(e))&&!e.includes("edge/"))return"Chrome";if(Sx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Cx(t=bn()){return/firefox\//i.test(t)}function Wm(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ax(t=bn()){return/crios\//i.test(t)}function Rx(t=bn()){return/iemobile/i.test(t)}function Sx(t=bn()){return/android/i.test(t)}function Px(t=bn()){return/blackberry/i.test(t)}function kx(t=bn()){return/webos/i.test(t)}function Mh(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function J4(t=bn()){var e;return Mh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z4(){return uO()&&document.documentMode===10}function Nx(t=bn()){return Mh(t)||Sx(t)||kx(t)||Px(t)||/windows phone/i.test(t)||Rx(t)}function eM(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e=[]){let n;switch(t){case"Browser":n=xy(bn());break;case"Worker":n=`${xy(bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",Fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=6;class iM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ty(this),this.idTokenSubscription=new Ty(this),this.beforeStateQueue=new tM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ei(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await uo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ct(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nM(this),n=new iM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ei(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&O4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hr(t){return Ct(t)}class Ty{constructor(e){this.auth=e,this.observer=null,this.addObserver=vO(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Ox(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Mr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",oM().appendChild(r)})}function aM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const cM="https://www.google.com/recaptcha/enterprise.js?render=",lM="recaptcha-enterprise",uM="NO_RECAPTCHA";class hM{constructor(e){this.type=lM,this.auth=Hr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{U4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new N4(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;yy(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(uM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&yy(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}Ox(cM+a).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Su(t,e,n,r=!1){const i=new hM(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t,e){const n=$s(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(lc(s,e??{}))return i;tr(i,"already-initialized")}return n.initialize({options:e})}function fM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ei);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pM(t,e,n){const r=Hr(t);ke(r._canInitEmulator,r,"emulator-config-failed"),ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Mx(e),{host:o,port:a}=mM(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||gM()}function Mx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mM(t){const e=Mx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Iy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Iy(o)}}}function Iy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function _M(t,e){return Ki(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(t,e){return Vc(t,"POST","/v1/accounts:signInWithPassword",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}async function yM(t,e){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends qm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new dc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Su(e,r,"signInWithPassword");return lf(e,i)}else return lf(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Su(e,r,"signInWithPassword");return lf(e,s)}else return Promise.reject(i)});case"emailLink":return vM(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return _M(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return yM(e,{idToken:n,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(t,e){return Vc(t,"POST","/v1/accounts:signInWithIdp",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="http://localhost";class bs extends qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Um(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ho(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ho(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ho(e,n)}buildRequest(){const e={requestUri:wM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ko(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EM(t){const e=Aa(Ra(t)).link,n=e?Aa(Ra(e)).deep_link_id:null,r=Aa(Ra(t)).deep_link_id;return(r?Aa(Ra(r)).link:null)||r||n||e||t}class Km{constructor(e){var n,r,i,s,o,a;const c=Aa(Ra(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,h=bM((i=c.mode)!==null&&i!==void 0?i:null);ke(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=EM(e);try{return new Km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Km.parseLink(n);return ke(r,"argument-error"),dc._fromEmailAndCode(e,r.code,r.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Lh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Bc{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ei.credential(n,r)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Bc{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.GITHUB_SIGN_IN_METHOD="github.com";xi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Bc{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ti.credential(n,r)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uf(t,e){return Vc(t,"POST","/v1/accounts:signUp",Fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await _s._fromIdTokenResponse(e,r,i),o=Cy(r);return new Es({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Cy(r);return new Es({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Cy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends ir{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pu(e,n,r,i)}}function Lx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pu._fromErrorAndOperation(t,s,e,r):s})}async function xM(t,e,n=!1){const r=await Co(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Co(t,Lx(r,i,e,t),n);ke(s.idToken,r,"internal-error");const o=zm(s.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),Es._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&tr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(t,e,n=!1){const r="signIn",i=await Lx(t,r,e),s=await Es._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function IM(t,e){return $x(Hr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(t){const e=Hr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rW(t,e,n){var r;const i=Hr(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const l=await Su(i,s,"signUpPassword");o=uf(i,l)}else o=uf(i,s).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Su(i,s,"signUpPassword");return uf(i,u)}throw l});const a=await o.catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Fx(t),l}),c=await Es._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function iW(t,e,n){return IM(Ct(t),Qo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fx(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e){return Ki(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ct(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Co(r,CM(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Vx(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function AM(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function oW(t){return Ct(t).signOut()}const ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(){const t=bn();return Wm(t)||Mh(t)}const SM=1e3,PM=10;class Ux extends Bx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=RM()&&eM(),this.fallbackToPolling=Nx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Z4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},SM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ux.type="LOCAL";const kM=Ux;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends Bx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Hx.type="SESSION";const jx=Hx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),c=await NM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const l=Gm("",20);i.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function OM(t){Lr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function MM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $M(){return zx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="firebaseLocalStorageDb",FM=1,Nu="firebaseLocalStorage",qx="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fh(t,e){return t.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function VM(){const t=indexedDB.deleteDatabase(Wx);return new Uc(t).toPromise()}function ep(){const t=indexedDB.open(Wx,FM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nu,{keyPath:qx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nu)?e(r):(r.close(),await VM(),e(await ep()))})})}async function Ay(t,e,n){const r=Fh(t,!0).put({[qx]:e,value:n});return new Uc(r).toPromise()}async function BM(t,e){const n=Fh(t,!1).get(e),r=await new Uc(n).toPromise();return r===void 0?null:r.value}function Ry(t,e){const n=Fh(t,!0).delete(e);return new Uc(n).toPromise()}const UM=800,HM=3;class Kx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance($M()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await MM(),!this.activeServiceWorker)return;this.sender=new DM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ep();return await Ay(e,ku,"1"),await Ry(e,ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ay(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fh(i,!1).getAll();return new Uc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kx.type="LOCAL";const jM=Kx;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t,e){return e?ei(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zM(t){return $x(t.auth,new Ym(t),t.bypassAuthState)}function WM(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),TM(n,new Ym(t),t.bypassAuthState)}async function qM(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),xM(n,new Ym(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zM;case"linkViaPopup":case"linkViaRedirect":return qM;case"reauthViaPopup":case"reauthViaRedirect":return WM;default:tr(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=new Fc(2e3,1e4);async function aW(t,e,n){const r=Hr(t);wx(t,e,Lh);const i=Qm(r,n);return new cs(r,"signInViaPopup",e,i).executeNotNull()}class cs extends Gx{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KM.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="pendingRedirect",ru=new Map;class QM extends Gx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ru.get(this.auth._key());if(!e){try{const r=await YM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ru.set(this.auth._key(),e)}return this.bypassAuthState||ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YM(t,e){const n=Yx(e),r=Qx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function XM(t,e){return Qx(t)._set(Yx(e),"true")}function JM(t,e){ru.set(t._key(),e)}function Qx(t){return ei(t._redirectPersistence)}function Yx(t){return nu(GM,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t,e,n){return ZM(t,e,n)}async function ZM(t,e,n){const r=Hr(t);wx(t,e,Lh),await r._initializationPromise;const i=Qm(r,n);return await XM(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function lW(t,e){return await Hr(t)._initializationPromise,Xx(t,e,!1)}async function Xx(t,e,n=!1){const r=Hr(t),i=Qm(r,e),o=await new QM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=10*60*1e3;class tL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Jx(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Jx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e={}){return Ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sL=/^https?/;async function oL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rL(t);for(const n of e)try{if(aL(n))return}catch{}tr(t,"unauthorized-domain")}function aL(t){const e=Z0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sL.test(n))return!1;if(iL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Fc(3e4,6e4);function Py(){const t=Lr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lL(t){return new Promise((e,n)=>{var r,i,s;function o(){Py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Py(),n(Mr(t,"network-request-failed"))},timeout:cL.get()})}if(!((i=(r=Lr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Lr().gapi)===null||s===void 0)&&s.load)o();else{const a=aM("iframefcb");return Lr()[a]=()=>{gapi.load?o():n(Mr(t,"network-request-failed"))},Ox(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw iu=null,e})}let iu=null;function uL(t){return iu=iu||lL(t),iu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new Fc(5e3,15e3),dL="__/auth/iframe",fL="emulator/auth/iframe",pL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gL(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jm(e,fL):`https://${t.config.authDomain}/${dL}`,r={apiKey:e.apiKey,appName:t.name,v:qi},i=mL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ko(r).slice(1)}`}async function _L(t){const e=await uL(t),n=Lr().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:gL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Mr(t,"network-request-failed"),a=Lr().setTimeout(()=>{s(o)},hL.get());function c(){Lr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yL=500,wL=600,bL="_blank",EL="http://localhost";class ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xL(t,e,n,r=yL,i=wL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},vL),{width:r.toString(),height:i.toString(),top:s,left:o}),l=bn().toLowerCase();n&&(a=Ax(l)?bL:n),Cx(l)&&(e=e||EL,c.scrollbars="yes");const u=Object.entries(c).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(J4(l)&&a!=="_self")return TL(e||"",a),new ky(null);const h=window.open(e||"",a,u);ke(h,t,"popup-blocked");try{h.focus()}catch{}return new ky(h)}function TL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="__/auth/handler",CL="emulator/auth/handler",AL=encodeURIComponent("fac");async function Ny(t,e,n,r,i,s){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qi,eventId:i};if(e instanceof Lh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",K0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Bc){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const c=await t._getAppCheckToken(),l=c?`#${AL}=${encodeURIComponent(c)}`:"";return`${RL(t)}?${Ko(a).slice(1)}${l}`}function RL({config:t}){return t.emulator?jm(t,CL):`https://${t.authDomain}/${IL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="webStorageSupport";class SL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jx,this._completeRedirectFn=Xx,this._overrideRedirectResult=JM}async _openPopup(e,n,r,i){var s;oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ny(e,n,r,Z0(),i);return xL(e,o,Gm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ny(e,n,r,Z0(),i);return OM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(oi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _L(e),r=new tL(e);return n.register("authEvent",i=>(ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hf,{type:hf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[hf];o!==void 0&&n(!!o),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nx()||Wm()||Mh()}}const PL=SL;var Dy="@firebase/auth",Oy="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function DL(t){Vn(new kn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dx(t)},l=new sM(r,i,s,c);return fM(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vn(new kn("auth-internal",e=>{const n=Hr(e.getProvider("auth").getImmediate());return(r=>new kL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(Dy,Oy,NL(t)),cn(Dy,Oy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=5*60,ML=ox("authIdTokenMaxAge")||OL;let My=null;const LL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ML)return;const i=n==null?void 0:n.token;My!==i&&(My=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zx(t=Oh()){const e=$s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dM(t,{popupRedirectResolver:PL,persistence:[jM,kM,jx]}),r=ox("authTokenSyncURL");if(r){const s=LL(r);AM(n,s,()=>s(n.currentUser)),Vx(n,o=>s(o))}const i=ix("auth");return i&&pM(n,`http://${i}`),n}DL("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new Map,FL={activated:!1,tokenObservers:[]};function br(t){return $L.get(t)||Object.assign({},FL)}const Ly={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ac,await BL(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ac,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function BL(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Du=new Wi("appCheck","AppCheck",UL);function eT(t){if(!br(t).activated)throw Du.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="firebase-app-check-database",jL=1,tp="firebase-app-check-store";let Ol=null;function zL(){return Ol||(Ol=new Promise((t,e)=>{try{const n=indexedDB.open(HL,jL);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Du.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(tp,{keyPath:"compositeKey"})}}}catch(n){e(Du.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Ol)}function WL(t,e){return qL(KL(t),e)}async function qL(t,e){const r=(await zL()).transaction(tp,"readwrite"),s=r.objectStore(tp).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Du.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})}function KL(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=new Go("@firebase/app-check");function $y(t,e){return Vm()?WL(t,e).catch(n=>{np.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={error:"UNKNOWN_ERROR"};function QL(t){return Nh.encodeString(JSON.stringify(t),!1)}async function rp(t,e=!1){const n=t.app;eT(n);const r=br(n);let i=r.token,s;if(i&&!Sa(i)&&(r.token=void 0,i=void 0),!i){const c=await r.cachedTokenPromise;c&&(Sa(c)?i=c:await $y(n,void 0))}if(!e&&i&&Sa(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await br(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?np.warn(c.message):np.error(c),s=c}let a;return i?s?Sa(i)?a={token:i.token,internalError:s}:a=Vy(s):(a={token:i.token},r.token=i,await $y(n,i)):a=Vy(s),o&&ZL(n,a),a}async function YL(t){const e=t.app;eT(e);const{provider:n}=br(e);{const{token:r}=await n.getToken();return{token:r}}}function XL(t,e,n,r){const{app:i}=t,s=br(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Sa(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Fy(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Fy(t))}function tT(t,e){const n=br(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Fy(t){const{app:e}=t,n=br(e);let r=n.tokenRefresher;r||(r=JL(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function JL(t){const{app:e}=t;return new VL(async()=>{const n=br(e);let r;if(n.token?r=await rp(t,!0):r=await rp(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=br(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Ly.RETRIAL_MIN_WAIT,Ly.RETRIAL_MAX_WAIT)}function ZL(t,e){const n=br(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Sa(t){return t.expireTimeMillis-Date.now()>0}function Vy(t){return{token:QL(GL),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=br(this.app);for(const n of e)tT(this.app,n.next);return Promise.resolve()}}function t8(t,e){return new e8(t,e)}function n8(t){return{getToken:e=>rp(t,e),getLimitedUseToken:()=>YL(t),addTokenListener:e=>XL(t,"INTERNAL",e),removeTokenListener:e=>tT(t.app,e)}}const r8="@firebase/app-check",i8="0.8.0",s8="app-check",By="app-check-internal";function o8(){Vn(new kn(s8,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return t8(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(By).initialize()})),Vn(new kn(By,t=>{const e=t.getProvider("app-check").getImmediate();return n8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),cn(r8,i8)}o8();var a8="firebase",c8="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(a8,c8,"app");const nT=Symbol("firebaseApp");function Hc(t){return VE()&&zn(nT,null)||Oh(t)}const Sr=()=>{},l8=typeof window<"u";function Xm(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function u8(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function Vs(t){return!!t&&typeof t=="object"}const h8=Object.prototype;function d8(t){return Vs(t)&&Object.getPrototypeOf(t)===h8}function Jm(t){return Vs(t)&&t.type==="document"}function f8(t){return Vs(t)&&t.type==="collection"}function p8(t){return Jm(t)||f8(t)}function m8(t){return Vs(t)&&t.type==="query"}function g8(t){return Vs(t)&&"ref"in t}function _8(t){return Vs(t)&&typeof t.bucket=="string"}function v8(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const y8=Symbol.for("v-scx");function w8(){return!!zn(y8,0)}const Ml=new WeakMap;function b8(t,e){if(!Ml.has(t)){const n=Qb(!0);Ml.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),Ml.delete(t)}}return Ml.get(t)}const rT=new WeakMap;function Vh(t){return rT.get(Hc(t))}const Ll=new WeakMap;function iT(t){const e=Hc(t);if(!Ll.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{Ll.set(e,s),n(s.value)}];Ll.set(e,i)}return Ll.get(e)}function E8(t){const e=iT(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function x8(t,e){const n=Zx(e);Vx(n,r=>{const i=iT();t.value=r,Array.isArray(i)&&i[1](t)})}const Uy="@firebase/database",Hy="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sT="";function T8(t){sT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),on(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return di(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new I8(e)}}catch{}return new C8},ls=oT("localStorage"),ip=oT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new Go("@firebase/database"),A8=function(){let t=1;return function(){return t++}}(),aT=function(t){const e=EO(t),n=new _O;n.update(e);const r=n.digest();return Nh.encodeByteArray(r)},jc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=jc.apply(null,r):typeof r=="object"?e+=on(r):e+=r,e+=" "}return e};let vs=null,jy=!0;const R8=function(t,e){oe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(fo.logLevel=et.VERBOSE,vs=fo.log.bind(fo),e&&ip.set("logging_enabled",!0)):typeof t=="function"?vs=t:(vs=null,ip.remove("logging_enabled"))},fn=function(...t){if(jy===!0&&(jy=!1,vs===null&&ip.get("logging_enabled")===!0&&R8(!0)),vs){const e=jc.apply(null,t);vs(e)}},zc=function(t){return function(...e){fn(t,...e)}},sp=function(...t){const e="FIREBASE INTERNAL ERROR: "+jc(...t);fo.error(e)},xs=function(...t){const e=`FIREBASE FATAL ERROR: ${jc(...t)}`;throw fo.error(e),new Error(e)},Wn=function(...t){const e="FIREBASE WARNING: "+jc(...t);fo.warn(e)},S8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},cT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},P8=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ao="[MIN_NAME]",Ts="[MAX_NAME]",Yo=function(t,e){if(t===e)return 0;if(t===Ao||e===Ts)return-1;if(e===Ao||t===Ts)return 1;{const n=zy(t),r=zy(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},k8=function(t,e){return t===e?0:t<e?-1:1},_a=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+on(e))},Zm=function(t){if(typeof t!="object"||t===null)return on(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=on(e[r]),n+=":",n+=Zm(t[e[r]]);return n+="}",n},lT=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function nr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const uT=function(t){oe(!cT(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const u=l.join("");let h="";for(c=0;c<64;c+=8){let d=parseInt(u.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},N8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},D8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},O8=new RegExp("^-?(0*)\\d{1,10}$"),M8=-2147483648,L8=2147483647,zy=function(t){if(O8.test(t)){const e=Number(t);if(e>=M8&&e<=L8)return e}return null},Wc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Wn("Exception was thrown by user callback.",n),e},Math.floor(0))}},$8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ha=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(fn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}}class op{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}op.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="5",hT="v",dT="s",fT="r",pT="f",mT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gT="ls",_T="p",ap="ac",vT="websocket",yT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ls.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ls.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function U8(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function wT(t,e,n){oe(typeof e=="string","typeof type must == string"),oe(typeof n=="object","typeof params must == object");let r;if(e===vT)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);U8(t)&&(n.ns=t.namespace);const i=[];return nr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this.counters_={}}incrementCounter(e,n=1){di(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df={},ff={};function tg(t){const e=t.toString();return df[e]||(df[e]=new H8),df[e]}function j8(t,e){const n=t.toString();return ff[n]||(ff[n]=e()),ff[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="start",W8="close",q8="pLPCommand",K8="pRTLPCB",bT="id",ET="pw",xT="ser",G8="cb",Q8="seg",Y8="ts",X8="d",J8="dframe",TT=1870,IT=30,Z8=TT-IT,e$=25e3,t$=3e4;class no{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zc(e),this.stats_=tg(n),this.urlFn=c=>(this.appCheckToken&&(c[ap]=this.appCheckToken),wT(n,yT,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new z8(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t$)),P8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ng((...s)=>{const[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Wy)this.id=a,this.password=c;else if(o===W8)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Wy]="t",r[xT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[G8]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hT]=eg,this.transportSessionId&&(r[dT]=this.transportSessionId),this.lastSessionId&&(r[gT]=this.lastSessionId),this.applicationId&&(r[_T]=this.applicationId),this.appCheckToken&&(r[ap]=this.appCheckToken),typeof location<"u"&&location.hostname&&mT.test(location.hostname)&&(r[fT]=pT);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){no.forceAllow_=!0}static forceDisallow(){no.forceDisallow_=!0}static isAvailable(){return no.forceAllow_?!0:!no.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!N8()&&!D8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=on(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=nx(n),i=lT(r,Z8);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[J8]="t",r[bT]=e,r[ET]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=on(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ng{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=A8(),window[q8+this.uniqueCallbackIdentifier]=e,window[K8+this.uniqueCallbackIdentifier]=n,this.myIFrame=ng.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){fn("frame writing exception"),a.stack&&fn(a.stack),fn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||fn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[bT]=this.myID,e[ET]=this.myPW,e[xT]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+IT+r.length<=TT;){const o=this.pendingSegs.shift();r=r+"&"+Q8+i+"="+o.seg+"&"+Y8+i+"="+o.ts+"&"+X8+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(e$)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{fn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=16384,r$=45e3;let Ou=null;typeof MozWebSocket<"u"?Ou=MozWebSocket:typeof WebSocket<"u"&&(Ou=WebSocket);class hr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zc(this.connId),this.stats_=tg(n),this.connURL=hr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[hT]=eg,typeof location<"u"&&location.hostname&&mT.test(location.hostname)&&(o[fT]=pT),n&&(o[dT]=n),r&&(o[gT]=r),i&&(o[ap]=i),s&&(o[_T]=s),wT(e,vT,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ls.set("previous_websocket_failure",!0);try{let r;lx(),this.mySock=new Ou(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){hr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ou!==null&&!hr.forceDisallow_}static previouslyFailed(){return ls.isInMemoryStorage||ls.get("previous_websocket_failure")===!0}markConnectionHealthy(){ls.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=cc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=on(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lT(n,n$);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(r$))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hr.responsesRequiredToBeHealthy=2;hr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[no,hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=hr&&hr.isAvailable();let r=n&&!hr.previouslyFailed();if(e.webSocketOnly&&(n||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hr];else{const i=this.transports_=[];for(const s of fc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);fc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=6e4,s$=5e3,o$=10*1024,a$=100*1024,pf="t",qy="d",c$="s",Ky="r",l$="e",Gy="o",Qy="a",Yy="n",Xy="p",u$="h";class h${constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zc("c:"+this.id+":"),this.transportManager_=new fc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ha(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a$?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>o$?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(pf in e){const n=e[pf];n===Qy?this.upgradeIfSecondaryHealthy_():n===Ky?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Gy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=_a("t",e),r=_a("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Xy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Qy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Yy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=_a("t",e),r=_a("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=_a(pf,e);if(qy in e){const r=e[qy];if(n===u$){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Yy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===c$?this.onConnectionShutdown_(r):n===Ky?this.onReset_(r):n===l$?sp("Server Error: "+r):n===Gy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sp("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),eg!==r&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ha(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(i$))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ha(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(s$))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Xy,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ls.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends AT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Mu}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=32,Zy=768;class wt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ft(){return new wt("")}function Ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Vi(t){return t.pieces_.length-t.pieceNum_}function _t(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new wt(t.pieces_,e)}function RT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function d$(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ST(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function PT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new wt(e,0)}function Qt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof wt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new wt(n,0)}function Ue(t){return t.pieceNum_>=t.pieces_.length}function er(t,e){const n=Ke(t),r=Ke(e);if(n===null)return e;if(n===r)return er(_t(t),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kT(t,e){if(Vi(t)!==Vi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function pr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Vi(t)>Vi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class f${constructor(e,n){this.errorPrefix_=n,this.parts_=ST(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Dh(this.parts_[r]);NT(this)}}function p$(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Dh(e),NT(t)}function m$(t){const e=t.parts_.pop();t.byteLength_-=Dh(e),t.parts_.length>0&&(t.byteLength_-=1)}function NT(t){if(t.byteLength_>Zy)throw new Error(t.errorPrefix_+"has a key path longer than "+Zy+" bytes ("+t.byteLength_+").");if(t.parts_.length>Jy)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Jy+") or object contains a cycle "+is(t))}function is(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends AT{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new rg}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=1e3,g$=60*5*1e3,ew=30*1e3,_$=1.3,v$=3e4,y$="server_kill",tw=3;class ii extends CT{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=ii.nextPersistentConnectionId_++,this.log_=zc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=va,this.maxReconnectDelay_=g$,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!lx())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Mu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(on(s)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ac,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,l=a.s;ii.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&di(e,"w")){const r=Io(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||gO(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ew)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=mO(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+on(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):sp("Unrecognized action received from server: "+on(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=va,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=va,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>v$&&(this.reconnectDelay_=va),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_$)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ii.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(h){oe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?fn("getToken() completed but was canceled"):(fn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new h$(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Wn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(y$)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Wn(h),c())}}}interrupt(e){fn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],K0(this.interruptReasons_)&&(this.reconnectDelay_=va,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Zm(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new wt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){fn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=tw&&(this.reconnectDelay_=ew,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){fn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=tw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+sT.replace(/\./g,"-")]=1,Fm()?e["framework.cordova"]=1:cx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Mu.getInstance().currentlyOnline();return K0(this.interruptReasons_)&&e}}ii.nextPersistentConnectionId_=0;ii.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ge(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ge(Ao,e),i=new Ge(Ao,n);return this.compare(r,i)!==0}minPost(){return Ge.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l;class DT extends Bh{static get __EMPTY_NODE(){return $l}static set __EMPTY_NODE(e){$l=e}compare(e,n){return Yo(e.name,n.name)}isDefinedOn(e){throw qo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ge.MIN}maxPost(){return new Ge(Ts,$l)}makePost(e,n){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new Ge(e,$l)}toString(){return".key"}}const po=new DT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Hn=class Pa{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Pa.RED,this.left=i??Pr.EMPTY_NODE,this.right=s??Pr.EMPTY_NODE}copy(e,n,r,i,s){return new Pa(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Pr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Pa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Pa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Hn.RED=!0;Hn.BLACK=!1;class w${copy(e,n,r,i,s){return this}insert(e,n,r){return new Hn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Pr=class su{constructor(e,n=su.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new su(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Hn.BLACK,null,null))}remove(e){return new su(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Fl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Fl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Fl(this.root_,null,this.comparator_,!0,e)}};Pr.EMPTY_NODE=new w$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t,e){return Yo(t.name,e.name)}function ig(t,e){return Yo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp;function E$(t){cp=t}const OT=function(t){return typeof t=="number"?"number:"+uT(t):"string:"+t},MT=function(t){if(t.isLeafNode()){const e=t.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&di(e,".sv"),"Priority must be a string or number.")}else oe(t===cp||t.isEmpty(),"priority of unexpected type.");oe(t===cp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nw;class zt{constructor(e,n=zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),MT(this.priorityNode_)}static set __childrenNodeConstructor(e){nw=e}static get __childrenNodeConstructor(){return nw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ue(e)?this:Ke(e)===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ke(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(oe(r!==".priority"||Vi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+OT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=uT(this.value_):e+=this.value_,this.lazyHash_=aT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof zt.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=zt.VALUE_TYPE_ORDER.indexOf(n),s=zt.VALUE_TYPE_ORDER.indexOf(r);return oe(i>=0,"Unknown leaf type: "+n),oe(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LT,$T;function x$(t){LT=t}function T$(t){$T=t}class I$ extends Bh{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Yo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ge.MIN}maxPost(){return new Ge(Ts,new zt("[PRIORITY-POST]",$T))}makePost(e,n){const r=LT(e);return new Ge(n,new zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const _n=new I$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=Math.log(2);class A${constructor(e){const n=s=>parseInt(Math.log(s)/C$,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lu=function(t,e,n,r){t.sort(e);const i=function(c,l){const u=l-c;let h,d;if(u===0)return null;if(u===1)return h=t[c],d=n?n(h):h,new Hn(d,h.node,Hn.BLACK,null,null);{const f=parseInt(u/2,10)+c,g=i(c,f),_=i(f+1,l);return h=t[f],d=n?n(h):h,new Hn(d,h.node,Hn.BLACK,g,_)}},s=function(c){let l=null,u=null,h=t.length;const d=function(g,_){const w=h-g,x=h;h-=g;const y=i(w+1,x),b=t[w],E=n?n(b):b;f(new Hn(E,b.node,_,null,y))},f=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){const _=c.nextBitIsOne(),w=Math.pow(2,c.count-(g+1));_?d(w,Hn.BLACK):(d(w,Hn.BLACK),d(w,Hn.RED))}return u},o=new A$(t.length),a=s(o);return new Pr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;const Qs={};class ti{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return oe(Qs&&_n,"ChildrenNode.ts has not been loaded"),mf=mf||new ti({".priority":Qs},{".priority":_n}),mf}get(e){const n=Io(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Pr?n:null}hasIndex(e){return di(this.indexSet_,e.toString())}addIndex(e,n){oe(e!==po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ge.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Lu(r,e.getCompare()):a=Qs;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new ti(u,l)}addToIndexes(e,n){const r=Iu(this.indexes_,(i,s)=>{const o=Io(this.indexSet_,s);if(oe(o,"Missing index implementation for "+s),i===Qs)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Ge.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Lu(a,o.getCompare())}else return Qs;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new Ge(e.name,a))),c.insert(e,e.node)}});return new ti(r,this.indexSet_)}removeFromIndexes(e,n){const r=Iu(this.indexes_,i=>{if(i===Qs)return i;{const s=n.get(e.name);return s?i.remove(new Ge(e.name,s)):i}});return new ti(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya;class at{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&MT(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ya||(ya=new at(new Pr(ig),null,ti.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ya}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ya:n}}getChild(e){const n=Ke(e);return n===null?this:this.getImmediateChild(n).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ge(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ya:this.priorityNode_;return new at(i,o,s)}}updateChild(e,n){const r=Ke(e);if(r===null)return n;{oe(Ke(e)!==".priority"||Vi(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_t(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(_n,(o,a)=>{n[o]=a.val(e),r++,s&&at.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+OT(this.getPriority().val())+":"),this.forEachChild(_n,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":aT(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ge(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ge(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ge(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ge.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ge.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===qc?-1:0}withIndex(e){if(e===po||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===po||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(_n),i=n.getIterator(_n);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===po?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class R$ extends at{constructor(){super(new Pr(ig),at.EMPTY_NODE,ti.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const qc=new R$;Object.defineProperties(Ge,{MIN:{value:new Ge(Ao,at.EMPTY_NODE)},MAX:{value:new Ge(Ts,qc)}});DT.__EMPTY_NODE=at.EMPTY_NODE;zt.__childrenNodeConstructor=at;E$(qc);T$(qc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=!0;function pn(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new zt(n,pn(e))}if(!(t instanceof Array)&&S$){const n=[];let r=!1;if(nr(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=pn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ge(o,c)))}}),n.length===0)return at.EMPTY_NODE;const s=Lu(n,b$,o=>o.name,ig);if(r){const o=Lu(n,_n.getCompare());return new at(s,pn(e),new ti({".priority":o},{".priority":_n}))}else return new at(s,pn(e),ti.Default)}else{let n=at.EMPTY_NODE;return nr(t,(r,i)=>{if(di(t,r)&&r.substring(0,1)!=="."){const s=pn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(pn(e))}}x$(pn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P$ extends Bh{constructor(e){super(),this.indexPath_=e,oe(!Ue(e)&&Ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Yo(e.name,n.name):s}makePost(e,n){const r=pn(e),i=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ge(n,i)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,qc);return new Ge(Ts,e)}toString(){return ST(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k$ extends Bh{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Yo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ge.MIN}maxPost(){return Ge.MAX}makePost(e,n){const r=pn(e);return new Ge(n,r)}toString(){return".value"}}const N$=new k$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(t){return{type:"value",snapshotNode:t}}function O$(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function M$(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function rw(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function L$(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_n}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ao}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_n}copy(){const e=new sg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iw(t){const e={};if(t.isDefault())return e;let n;if(t.index_===_n?n="$priority":t.index_===N$?n="$value":t.index_===po?n="$key":(oe(t.index_ instanceof P$,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=on(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=on(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+on(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=on(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+on(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function sw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==_n&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends CT{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=$u.getListenId_(e,r),a={};this.listens_[o]=a;const c=iw(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(s,h,!1,r),Io(this.listens_,o)===a){let d;l?l===401?d="permission_denied":d="rest_error:"+l:d="ok",i(d,null)}})}unlisten(e,n){const r=$u.getListenId_(e,n);delete this.listens_[r]}get(e){const n=iw(e._queryParams),r=e._path.toString(),i=new ac;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ko(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=cc(a.responseText)}catch{Wn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Wn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(){return{value:null,children:new Map}}function FT(t,e,n){if(Ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ke(e);t.children.has(r)||t.children.set(r,Fu());const i=t.children.get(r);e=_t(e),FT(i,e,n)}}function lp(t,e,n){t.value!==null?n(e,t.value):F$(t,(r,i)=>{const s=new wt(e.toString()+"/"+r);lp(i,s,n)})}function F$(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&nr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=10*1e3,B$=30*1e3,U$=5*60*1e3;class H${constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new V$(e);const r=ow+(B$-ow)*Math.random();Ha(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;nr(e,(i,s)=>{s>0&&di(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ha(this.reportStats_.bind(this),Math.floor(Math.random()*2*U$))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(kr||(kr={}));function VT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function BT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function UT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=kr.ACK_USER_WRITE,this.source=VT()}operationForChild(e){if(Ue(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new wt(e));return new Vu(ft(),n,this.revert)}}else return oe(Ke(this.path)===e,"operationForChild called for unrelated child."),new Vu(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=kr.OVERWRITE}operationForChild(e){return Ue(this.path)?new Is(this.source,ft(),this.snap.getImmediateChild(e)):new Is(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=kr.MERGE}operationForChild(e){if(Ue(this.path)){const n=this.children.subtree(new wt(e));return n.isEmpty()?null:n.value?new Is(this.source,ft(),n.value):new pc(this.source,ft(),n)}else return oe(Ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pc(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function j$(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(L$(o.childName,o.snapshotNode))}),wa(t,i,"child_removed",e,r,n),wa(t,i,"child_added",e,r,n),wa(t,i,"child_moved",s,r,n),wa(t,i,"child_changed",e,r,n),wa(t,i,"value",e,r,n),i}function wa(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>W$(t,a,c)),o.forEach(a=>{const c=z$(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function z$(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function W$(t,e,n){if(e.childName==null||n.childName==null)throw qo("Should only compare child_ events.");const r=new Ge(e.childName,e.snapshotNode),i=new Ge(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e){return{eventCache:t,serverCache:e}}function ja(t,e,n,r){return HT(new og(e,n,r),t.serverCache)}function jT(t,e,n,r){return HT(t.eventCache,new og(e,n,r))}function up(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Cs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf;const q$=()=>(gf||(gf=new Pr(k8)),gf);class mt{constructor(e,n=q$()){this.value=e,this.children=n}static fromObject(e){let n=new mt(null);return nr(e,(r,i)=>{n=n.set(new wt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ft(),value:this.value};if(Ue(e))return null;{const r=Ke(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(_t(e),n);return s!=null?{path:Qt(new wt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ue(e))return this;{const n=Ke(e),r=this.children.get(n);return r!==null?r.subtree(_t(e)):new mt(null)}}set(e,n){if(Ue(e))return new mt(n,this.children);{const r=Ke(e),s=(this.children.get(r)||new mt(null)).set(_t(e),n),o=this.children.insert(r,s);return new mt(this.value,o)}}remove(e){if(Ue(e))return this.children.isEmpty()?new mt(null):new mt(null,this.children);{const n=Ke(e),r=this.children.get(n);if(r){const i=r.remove(_t(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new mt(null):new mt(this.value,s)}else return this}}get(e){if(Ue(e))return this.value;{const n=Ke(e),r=this.children.get(n);return r?r.get(_t(e)):null}}setTree(e,n){if(Ue(e))return n;{const r=Ke(e),s=(this.children.get(r)||new mt(null)).setTree(_t(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new mt(this.value,o)}}fold(e){return this.fold_(ft(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ft(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ue(e))return null;{const s=Ke(e),o=this.children.get(s);return o?o.findOnPath_(_t(e),Qt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ft(),n)}foreachOnPath_(e,n,r){if(Ue(e))return this;{this.value&&r(n,this.value);const i=Ke(e),s=this.children.get(i);return s?s.foreachOnPath_(_t(e),Qt(n,i),r):new mt(null)}}foreach(e){this.foreach_(ft(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.writeTree_=e}static empty(){return new vr(new mt(null))}}function za(t,e,n){if(Ue(e))return new vr(new mt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=er(i,e);return s=s.updateChild(o,n),new vr(t.writeTree_.set(i,s))}else{const i=new mt(n),s=t.writeTree_.setTree(e,i);return new vr(s)}}}function aw(t,e,n){let r=t;return nr(n,(i,s)=>{r=za(r,Qt(e,i),s)}),r}function cw(t,e){if(Ue(e))return vr.empty();{const n=t.writeTree_.setTree(e,new mt(null));return new vr(n)}}function hp(t,e){return Bs(t,e)!=null}function Bs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(er(n.path,e)):null}function lw(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(_n,(r,i)=>{e.push(new Ge(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ge(r,i.value))}),e}function Oi(t,e){if(Ue(e))return t;{const n=Bs(t,e);return n!=null?new vr(new mt(n)):new vr(t.writeTree_.subtree(e))}}function dp(t){return t.writeTree_.isEmpty()}function Ro(t,e){return zT(ft(),t.writeTree_,e)}function zT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(oe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=zT(Qt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){return YT(e,t)}function K$(t,e,n,r,i){oe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=za(t.visibleWrites,e,n)),t.lastWriteId=r}function G$(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Q$(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);oe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Y$(a,r.path)?i=!1:pr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return X$(t),!0;if(r.snap)t.visibleWrites=cw(t.visibleWrites,r.path);else{const a=r.children;nr(a,c=>{t.visibleWrites=cw(t.visibleWrites,Qt(r.path,c))})}return!0}else return!1}function Y$(t,e){if(t.snap)return pr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pr(Qt(t.path,n),e))return!0;return!1}function X$(t){t.visibleWrites=qT(t.allWrites,J$,ft()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function J$(t){return t.visible}function qT(t,e,n){let r=vr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)pr(n,o)?(a=er(n,o),r=za(r,a,s.snap)):pr(o,n)&&(a=er(o,n),r=za(r,ft(),s.snap.getChild(a)));else if(s.children){if(pr(n,o))a=er(n,o),r=aw(r,a,s.children);else if(pr(o,n))if(a=er(o,n),Ue(a))r=aw(r,ft(),s.children);else{const c=Io(s.children,Ke(a));if(c){const l=c.getChild(_t(a));r=za(r,ft(),l)}}}else throw qo("WriteRecord should have .snap or .children")}}return r}function KT(t,e,n,r,i){if(!r&&!i){const s=Bs(t.visibleWrites,e);if(s!=null)return s;{const o=Oi(t.visibleWrites,e);if(dp(o))return n;if(n==null&&!hp(o,ft()))return null;{const a=n||at.EMPTY_NODE;return Ro(o,a)}}}else{const s=Oi(t.visibleWrites,e);if(!i&&dp(s))return n;if(!i&&n==null&&!hp(s,ft()))return null;{const o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(pr(l.path,e)||pr(e,l.path))},a=qT(t.allWrites,o,e),c=n||at.EMPTY_NODE;return Ro(a,c)}}}function Z$(t,e,n){let r=at.EMPTY_NODE;const i=Bs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_n,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Oi(t.visibleWrites,e);return n.forEachChild(_n,(o,a)=>{const c=Ro(Oi(s,new wt(o)),a);r=r.updateImmediateChild(o,c)}),lw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Oi(t.visibleWrites,e);return lw(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function eF(t,e,n,r,i){oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Qt(e,n);if(hp(t.visibleWrites,s))return null;{const o=Oi(t.visibleWrites,s);return dp(o)?i.getChild(n):Ro(o,i.getChild(n))}}function tF(t,e,n,r){const i=Qt(e,n),s=Bs(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Oi(t.visibleWrites,i);return Ro(o,r.getNode().getImmediateChild(n))}else return null}function nF(t,e){return Bs(t.visibleWrites,e)}function rF(t,e,n,r,i,s,o){let a;const c=Oi(t.visibleWrites,e),l=Bs(c,ft());if(l!=null)a=l;else if(n!=null)a=Ro(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function iF(){return{visibleWrites:vr.empty(),allWrites:[],lastWriteId:-1}}function fp(t,e,n,r){return KT(t.writeTree,t.treePath,e,n,r)}function GT(t,e){return Z$(t.writeTree,t.treePath,e)}function uw(t,e,n,r){return eF(t.writeTree,t.treePath,e,n,r)}function Bu(t,e){return nF(t.writeTree,Qt(t.treePath,e))}function sF(t,e,n,r,i,s){return rF(t.writeTree,t.treePath,e,n,r,i,s)}function ag(t,e,n){return tF(t.writeTree,t.treePath,e,n)}function QT(t,e){return YT(Qt(t.treePath,e),t.writeTree)}function YT(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;oe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),oe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,rw(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,M$(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,O$(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,rw(r,e.snapshotNode,i.oldSnap));else throw qo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const XT=new aF;class cg{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new og(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ag(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cs(this.viewCache_),s=sF(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function cF(t,e){oe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function lF(t,e,n,r,i){const s=new oF;let o,a;if(n.type===kr.OVERWRITE){const l=n;l.source.fromUser?o=pp(t,e,l.path,l.snap,r,i,s):(oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ue(l.path),o=Uu(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===kr.MERGE){const l=n;l.source.fromUser?o=hF(t,e,l.path,l.children,r,i,s):(oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=mp(t,e,l.path,l.children,r,i,a,s))}else if(n.type===kr.ACK_USER_WRITE){const l=n;l.revert?o=pF(t,e,l.path,r,i,s):o=dF(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===kr.LISTEN_COMPLETE)o=fF(t,e,n.path,r,s);else throw qo("Unknown operation type: "+n.type);const c=s.getChanges();return uF(e,o,c),{viewCache:o,changes:c}}function uF(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=up(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(D$(up(e)))}}function JT(t,e,n,r,i,s){const o=e.eventCache;if(Bu(r,n)!=null)return e;{let a,c;if(Ue(n))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Cs(e),u=l instanceof at?l:at.EMPTY_NODE,h=GT(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const l=fp(r,Cs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=Ke(n);if(l===".priority"){oe(Vi(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const h=uw(r,n,u,c);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=_t(n);let h;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const d=uw(r,n,o.getNode(),c);d!=null?h=o.getNode().getImmediateChild(l).updateChild(u,d):h=o.getNode().getImmediateChild(l)}else h=ag(r,l,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),l,h,u,i,s):a=o.getNode()}}return ja(e,a,o.isFullyInitialized()||Ue(n),t.filter.filtersNodes())}}function Uu(t,e,n,r,i,s,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Ue(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Ke(n);if(!c.isCompleteForPath(n)&&Vi(n)>1)return e;const g=_t(n),w=c.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,g,XT,null)}const h=jT(e,l,c.isFullyInitialized()||Ue(n),u.filtersNodes()),d=new cg(i,h,s);return JT(t,h,n,i,d,a)}function pp(t,e,n,r,i,s,o){const a=e.eventCache;let c,l;const u=new cg(i,e,s);if(Ue(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=ja(e,l,!0,t.filter.filtersNodes());else{const h=Ke(n);if(h===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=ja(e,l,a.isFullyInitialized(),a.isFiltered());else{const d=_t(n),f=a.getNode().getImmediateChild(h);let g;if(Ue(d))g=r;else{const _=u.getCompleteChild(h);_!=null?RT(d)===".priority"&&_.getChild(PT(d)).isEmpty()?g=_:g=_.updateChild(d,r):g=at.EMPTY_NODE}if(f.equals(g))c=e;else{const _=t.filter.updateChild(a.getNode(),h,g,d,u,o);c=ja(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function hw(t,e){return t.eventCache.isCompleteForChild(e)}function hF(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{const u=Qt(n,c);hw(e,Ke(u))&&(a=pp(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{const u=Qt(n,c);hw(e,Ke(u))||(a=pp(t,a,u,l,i,s,o))}),a}function dw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function mp(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ue(n)?l=r:l=new mt(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),g=dw(t,f,d);c=Uu(t,c,new wt(h),g,i,s,o,a)}}),l.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const g=e.serverCache.getNode().getImmediateChild(h),_=dw(t,g,d);c=Uu(t,c,new wt(h),_,i,s,o,a)}}),c}function dF(t,e,n,r,i,s,o){if(Bu(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ue(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Uu(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Ue(n)){let l=new mt(null);return c.getNode().forEachChild(po,(u,h)=>{l=l.set(new wt(u),h)}),mp(t,e,n,l,i,s,a,o)}else return e}else{let l=new mt(null);return r.foreach((u,h)=>{const d=Qt(n,u);c.isCompleteForPath(d)&&(l=l.set(u,c.getNode().getChild(d)))}),mp(t,e,n,l,i,s,a,o)}}function fF(t,e,n,r,i){const s=e.serverCache,o=jT(e,s.getNode(),s.isFullyInitialized()||Ue(n),s.isFiltered());return JT(t,o,n,r,XT,i)}function pF(t,e,n,r,i,s){let o;if(Bu(r,n)!=null)return e;{const a=new cg(r,e,i),c=e.eventCache.getNode();let l;if(Ue(n)||Ke(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=fp(r,Cs(e));else{const h=e.serverCache.getNode();oe(h instanceof at,"serverChildren would be complete if leaf node"),u=GT(r,h)}u=u,l=t.filter.updateFullNode(c,u,s)}else{const u=Ke(n);let h=ag(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=t.filter.updateChild(c,u,h,_t(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,at.EMPTY_NODE,_t(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=fp(r,Cs(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Bu(r,ft())!=null,ja(e,l,o,t.filter.filtersNodes())}}function mF(t,e){const n=Cs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ue(e)&&!n.getImmediateChild(Ke(e)).isEmpty())?n.getChild(e):null}function fw(t,e,n,r){e.type===kr.MERGE&&e.source.queryId!==null&&(oe(Cs(t.viewCache_),"We should always have a full cache before handling merges"),oe(up(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=lF(t.processor_,i,e,n,r);return cF(t.processor_,s.viewCache),oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,gF(t,s.changes,s.viewCache.eventCache.getNode(),null)}function gF(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return j$(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pw;function _F(t){oe(!pw,"__referenceConstructor has already been defined"),pw=t}function lg(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return oe(s!=null,"SyncTree gave us an op for an invalid query."),fw(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(fw(o,e,n,r));return s}}function ug(t,e){let n=null;for(const r of t.views.values())n=n||mF(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mw;function vF(t){oe(!mw,"__referenceConstructor has already been defined"),mw=t}class gw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mt(null),this.pendingWriteTree_=iF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yF(t,e,n,r,i){return K$(t.pendingWriteTree_,e,n,r,i),i?Hh(t,new Is(VT(),e,n)):[]}function ro(t,e,n=!1){const r=G$(t.pendingWriteTree_,e);if(Q$(t.pendingWriteTree_,e)){let s=new mt(null);return r.snap!=null?s=s.set(ft(),!0):nr(r.children,o=>{s=s.set(new wt(o),!0)}),Hh(t,new Vu(r.path,s,n))}else return[]}function Uh(t,e,n){return Hh(t,new Is(BT(),e,n))}function wF(t,e,n){const r=mt.fromObject(n);return Hh(t,new pc(BT(),e,r))}function bF(t,e,n,r){const i=nI(t,r);if(i!=null){const s=rI(i),o=s.path,a=s.queryId,c=er(o,e),l=new Is(UT(a),c,n);return iI(t,o,l)}else return[]}function EF(t,e,n,r){const i=nI(t,r);if(i){const s=rI(i),o=s.path,a=s.queryId,c=er(o,e),l=mt.fromObject(n),u=new pc(UT(a),c,l);return iI(t,o,u)}else return[]}function ZT(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=er(o,e),l=ug(a,c);if(l)return l});return KT(i,e,s,n,!0)}function Hh(t,e){return eI(e,t.syncPointTree_,null,WT(t.pendingWriteTree_,ft()))}function eI(t,e,n,r){if(Ue(t.path))return tI(t,e,n,r);{const i=e.get(ft());n==null&&i!=null&&(n=ug(i,ft()));let s=[];const o=Ke(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=QT(r,o);s=s.concat(eI(a,c,l,u))}return i&&(s=s.concat(lg(i,t,r,n))),s}}function tI(t,e,n,r){const i=e.get(ft());n==null&&i!=null&&(n=ug(i,ft()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=QT(r,o),u=t.operationForChild(o);u&&(s=s.concat(tI(u,a,c,l)))}),i&&(s=s.concat(lg(i,t,r,n))),s}function nI(t,e){return t.tagToQueryMap.get(e)}function rI(t){const e=t.indexOf("$");return oe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new wt(t.substr(0,e))}}function iI(t,e,n){const r=t.syncPointTree_.get(e);oe(r,"Missing sync point for query tag that we're tracking");const i=WT(t.pendingWriteTree_,e);return lg(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new hg(n)}node(){return this.node_}}class dg{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qt(this.path_,e);return new dg(this.syncTree_,n)}node(){return ZT(this.syncTree_,this.path_)}}const xF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},_w=function(t,e,n){if(!t||typeof t!="object")return t;if(oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return TF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return IF(t[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},TF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:oe(!1,"Unexpected server value: "+t)}},IF=function(t,e,n){t.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&oe(!1,"Unexpected increment value: "+r);const i=e.node();if(oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},CF=function(t,e,n,r){return fg(e,new dg(n,t),r)},AF=function(t,e,n){return fg(t,new hg(e),n)};function fg(t,e,n){const r=t.getPriority().val(),i=_w(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=_w(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new zt(a,pn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new zt(i))),o.forEachChild(_n,(a,c)=>{const l=fg(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function mg(t,e){let n=e instanceof wt?e:new wt(e),r=t,i=Ke(n);for(;i!==null;){const s=Io(r.node.children,i)||{children:{},childCount:0};r=new pg(i,r,s),n=_t(n),i=Ke(n)}return r}function Xo(t){return t.node.value}function sI(t,e){t.node.value=e,gp(t)}function oI(t){return t.node.childCount>0}function RF(t){return Xo(t)===void 0&&!oI(t)}function jh(t,e){nr(t.node.children,(n,r)=>{e(new pg(n,t,r))})}function aI(t,e,n,r){n&&!r&&e(t),jh(t,i=>{aI(i,e,!0,r)}),n&&r&&e(t)}function SF(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Kc(t){return new wt(t.parent===null?t.name:Kc(t.parent)+"/"+t.name)}function gp(t){t.parent!==null&&PF(t.parent,t.name,t)}function PF(t,e,n){const r=RF(n),i=di(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,gp(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,gp(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=/[\[\].#$\/\u0000-\u001F\u007F]/,NF=/[\[\].#$\u0000-\u001F\u007F]/,_f=10*1024*1024,cI=function(t){return typeof t=="string"&&t.length!==0&&!kF.test(t)},DF=function(t){return typeof t=="string"&&t.length!==0&&!NF.test(t)},OF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DF(t)},lI=function(t,e,n){const r=n instanceof wt?new f$(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+is(r));if(typeof e=="function")throw new Error(t+"contains a function "+is(r)+" with contents = "+e.toString());if(cT(e))throw new Error(t+"contains "+e.toString()+" "+is(r));if(typeof e=="string"&&e.length>_f/3&&Dh(e)>_f)throw new Error(t+"contains a string greater than "+_f+" utf8 bytes "+is(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(nr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!cI(o)))throw new Error(t+" contains an invalid key ("+o+") "+is(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);p$(r,o),lI(t,a,r),m$(r)}),i&&s)throw new Error(t+' contains ".value" child '+is(r)+" in addition to actual children.")}},MF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!OF(n))throw new Error(bO(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $F(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!kT(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Us(t,e,n){$F(t,n),FF(t,r=>pr(r,e)||pr(e,r))}function FF(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(VF(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function VF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();vs&&fn("event: "+n.toString()),Wc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="repo_interrupt",UF=25;class HF{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new LF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fu(),this.transactionQueueTree_=new pg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jF(t,e,n){if(t.stats_=tg(t.repoInfo_),t.forceRestClient_||$8())t.server_=new $u(t.repoInfo_,(r,i,s,o)=>{vw(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{on(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ii(t.repoInfo_,e,(r,i,s,o)=>{vw(t,r,i,s,o)},r=>{yw(t,r)},r=>{WF(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=j8(t.repoInfo_,()=>new H$(t.stats_,t.server_)),t.infoData_=new $$,t.infoSyncTree_=new gw({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Uh(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),gg(t,"connected",!1),t.serverSyncTree_=new gw({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const l=o(a,c);Us(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function zF(t){const n=t.infoData_.getNode(new wt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uI(t){return xF({timestamp:zF(t)})}function vw(t,e,n,r,i){t.dataUpdateCount++;const s=new wt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=Iu(n,l=>pn(l));o=EF(t.serverSyncTree_,s,c,i)}else{const c=pn(n);o=bF(t.serverSyncTree_,s,c,i)}else if(r){const c=Iu(n,l=>pn(l));o=wF(t.serverSyncTree_,s,c)}else{const c=pn(n);o=Uh(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=vg(t,s)),Us(t.eventQueue_,a,o)}function yw(t,e){gg(t,"connected",e),e===!1&&KF(t)}function WF(t,e){nr(e,(n,r)=>{gg(t,n,r)})}function gg(t,e,n){const r=new wt("/.info/"+e),i=pn(n);t.infoData_.updateSnapshot(r,i);const s=Uh(t.infoSyncTree_,r,i);Us(t.eventQueue_,r,s)}function qF(t){return t.nextWriteId_++}function KF(t){hI(t,"onDisconnectEvents");const e=uI(t),n=Fu();lp(t.onDisconnect_,ft(),(i,s)=>{const o=CF(i,s,t.serverSyncTree_,e);FT(n,i,o)});let r=[];lp(n,ft(),(i,s)=>{r=r.concat(Uh(t.serverSyncTree_,i,s));const o=XF(t,i);vg(t,o)}),t.onDisconnect_=Fu(),Us(t.eventQueue_,ft(),r)}function GF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(BF)}function hI(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),fn(n,...e)}function dI(t,e,n){return ZT(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function _g(t,e=t.transactionQueueTree_){if(e||zh(t,e),Xo(e)){const n=pI(t,e);oe(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&QF(t,Kc(e),n)}else oI(e)&&jh(e,n=>{_g(t,n)})}function QF(t,e,n){const r=n.map(l=>l.currentWriteId),i=dI(t,e,r);let s=i;const o=i.hash();for(let l=0;l<n.length;l++){const u=n[l];oe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=er(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{hI(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(ro(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();zh(t,mg(t.transactionQueueTree_,e)),_g(t,t.transactionQueueTree_),Us(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Wc(h[d])}else{if(l==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Wn("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=l}vg(t,e)}},o)}function vg(t,e){const n=fI(t,e),r=Kc(n),i=pI(t,n);return YF(t,i,r),r}function YF(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=er(n,c.path);let u=!1,h;if(oe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,i=i.concat(ro(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=UF)u=!0,h="maxretry",i=i.concat(ro(t.serverSyncTree_,c.currentWriteId,!0));else{const d=dI(t,c.path,o);c.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){lI("transaction failed: Data returned ",f,c.path);let g=pn(f);typeof f=="object"&&f!=null&&di(f,".priority")||(g=g.updatePriority(d.getPriority()));const w=c.currentWriteId,x=uI(t),y=AF(g,d,x);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=y,c.currentWriteId=qF(t),o.splice(o.indexOf(w),1),i=i.concat(yF(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally)),i=i.concat(ro(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",i=i.concat(ro(t.serverSyncTree_,c.currentWriteId,!0))}Us(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}zh(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Wc(r[a]);_g(t,t.transactionQueueTree_)}function fI(t,e){let n,r=t.transactionQueueTree_;for(n=Ke(e);n!==null&&Xo(r)===void 0;)r=mg(r,n),e=_t(e),n=Ke(e);return r}function pI(t,e){const n=[];return mI(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mI(t,e,n){const r=Xo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);jh(e,i=>{mI(t,i,n)})}function zh(t,e){const n=Xo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,sI(e,n.length>0?n:void 0)}jh(e,r=>{zh(t,r)})}function XF(t,e){const n=Kc(fI(t,e)),r=mg(t.transactionQueueTree_,e);return SF(r,i=>{vf(t,i)}),vf(t,r),aI(r,i=>{vf(t,i)}),n}function vf(t,e){const n=Xo(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(oe(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(oe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ro(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?sI(e,void 0):n.length=s+1,Us(t.eventQueue_,Kc(e),i);for(let o=0;o<r.length;o++)Wc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function ZF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wn(`Invalid query segment '${n}' in query '${t}'`)}return e}const ww=function(t,e){const n=eV(t),r=n.namespace;n.domain==="firebase.com"&&xs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&xs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||S8();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new B8(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new wt(n.pathString)}},eV=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=JF(t.substring(u,h)));const d=ZF(t.substring(Math.min(t.length,h)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ue(this._path)?null:RT(this._path)}get ref(){return new Jo(this._repo,this._path)}get _queryIdentifier(){const e=sw(this._queryParams),n=Zm(e);return n==="{}"?"default":n}get _queryObject(){return sw(this._queryParams)}isEqual(e){if(e=Ct(e),!(e instanceof yg))return!1;const n=this._repo===e._repo,r=kT(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+d$(this._path)}}class Jo extends yg{constructor(e,n){super(e,n,new sg,!1)}get parent(){const e=PT(this._path);return e===null?null:new Jo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}_F(Jo);vF(Jo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="FIREBASE_DATABASE_EMULATOR_HOST",_p={};let nV=!1;function rV(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||xs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ww(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[tV]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=ww(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const u=i&&c?new op(op.OWNER):new V8(t.name,t.options,e);MF("Invalid Firebase Database URL",o),Ue(o.path)||xs("Database URL must point to the root of a Firebase Database (not including a child path).");const h=sV(a,t,u,new F8(t.name,n));return new oV(h,t)}function iV(t,e){const n=_p[e];(!n||n[t.key]!==t)&&xs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),GF(t),delete n[t.key]}function sV(t,e,n,r){let i=_p[e.name];i||(i={},_p[e.name]=i);let s=i[t.toURLString()];return s&&xs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new HF(t,nV,n,r),i[t.toURLString()]=s,s}class oV{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jo(this._repo,ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&xs("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){T8(qi),Vn(new kn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return rV(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),cn(Uy,Hy,t),cn(Uy,Hy,"esm2017")}ii.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ii.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};aV();var cV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae,wg=wg||{},De=cV||self;function Wh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Gc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function lV(t){return Object.prototype.hasOwnProperty.call(t,yf)&&t[yf]||(t[yf]=++uV)}var yf="closure_uid_"+(1e9*Math.random()>>>0),uV=0;function hV(t,e,n){return t.call.apply(t.bind,arguments)}function dV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function vn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?vn=hV:vn=dV,vn.apply(null,arguments)}function Vl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Zt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Gi(){this.s=this.s,this.o=this.o}var fV=0;Gi.prototype.s=!1;Gi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),fV!=0)&&lV(this)};Gi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function bg(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function bw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Wh(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function yn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}yn.prototype.h=function(){this.defaultPrevented=!0};var pV=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{De.addEventListener("test",()=>{},e),De.removeEventListener("test",()=>{},e)}catch{}return t}();function mc(t){return/^[\s\xa0]*$/.test(t)}function qh(){var t=De.navigator;return t&&(t=t.userAgent)?t:""}function Rr(t){return qh().indexOf(t)!=-1}function Eg(t){return Eg[" "](t),t}Eg[" "]=function(){};function mV(t,e){var n=a6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var gV=Rr("Opera"),So=Rr("Trident")||Rr("MSIE"),_I=Rr("Edge"),vp=_I||So,vI=Rr("Gecko")&&!(qh().toLowerCase().indexOf("webkit")!=-1&&!Rr("Edge"))&&!(Rr("Trident")||Rr("MSIE"))&&!Rr("Edge"),_V=qh().toLowerCase().indexOf("webkit")!=-1&&!Rr("Edge");function yI(){var t=De.document;return t?t.documentMode:void 0}var yp;e:{var wf="",bf=function(){var t=qh();if(vI)return/rv:([^\);]+)(\)|;)/.exec(t);if(_I)return/Edge\/([\d\.]+)/.exec(t);if(So)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(_V)return/WebKit\/(\S+)/.exec(t);if(gV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(bf&&(wf=bf?bf[1]:""),So){var Ef=yI();if(Ef!=null&&Ef>parseFloat(wf)){yp=String(Ef);break e}}yp=wf}var wp;if(De.document&&So){var Ew=yI();wp=Ew||parseInt(yp,10)||void 0}else wp=void 0;var vV=wp;function gc(t,e){if(yn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vI){e:{try{Eg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gc.$.h.call(this)}}Zt(gc,yn);var yV={2:"touch",3:"pen",4:"mouse"};gc.prototype.h=function(){gc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Qc="closure_listenable_"+(1e6*Math.random()|0),wV=0;function bV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++wV,this.fa=this.ia=!1}function Kh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function EV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function wI(t){const e={};for(const n in t)e[n]=t[n];return e}const xw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bI(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<xw.length;s++)n=xw[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Gh(t){this.src=t,this.g={},this.h=0}Gh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Ep(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new bV(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function bp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=gI(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Kh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ep(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Tg="closure_lm_"+(1e6*Math.random()|0),xf={};function EI(t,e,n,r,i){if(r&&r.once)return TI(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)EI(t,e[s],n,r,i);return null}return n=Ag(n),t&&t[Qc]?t.O(e,n,Gc(r)?!!r.capture:!!r,i):xI(t,e,n,!1,r,i)}function xI(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Gc(i)?!!i.capture:!!i,a=Cg(t);if(a||(t[Tg]=a=new Gh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=xV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pV||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(CI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function xV(){function t(n){return e.call(t.src,t.listener,n)}const e=TV;return t}function TI(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)TI(t,e[s],n,r,i);return null}return n=Ag(n),t&&t[Qc]?t.P(e,n,Gc(r)?!!r.capture:!!r,i):xI(t,e,n,!0,r,i)}function II(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)II(t,e[s],n,r,i);else r=Gc(r)?!!r.capture:!!r,n=Ag(n),t&&t[Qc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Ep(s,n,r,i),-1<n&&(Kh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Cg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ep(e,n,r,i)),(n=-1<t?e[t]:null)&&Ig(n))}function Ig(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Qc])bp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(CI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Cg(e))?(bp(n,t),n.h==0&&(n.src=null,e[Tg]=null)):Kh(t)}}}function CI(t){return t in xf?xf[t]:xf[t]="on"+t}function TV(t,e){if(t.fa)t=!0;else{e=new gc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ig(t),t=n.call(r,e)}return t}function Cg(t){return t=t[Tg],t instanceof Gh?t:null}var Tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ag(t){return typeof t=="function"?t:(t[Tf]||(t[Tf]=function(e){return t.handleEvent(e)}),t[Tf])}function Jt(){Gi.call(this),this.i=new Gh(this),this.S=this,this.J=null}Zt(Jt,Gi);Jt.prototype[Qc]=!0;Jt.prototype.removeEventListener=function(t,e,n,r){II(this,t,e,n,r)};function ln(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new yn(e,t);else if(e instanceof yn)e.target=e.target||t;else{var i=e;e=new yn(r,t),bI(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Bl(o,r,!0,e)&&i}if(o=e.g=t,i=Bl(o,r,!0,e)&&i,i=Bl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Bl(o,r,!1,e)&&i}Jt.prototype.N=function(){if(Jt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Kh(n[r]);delete t.g[e],t.h--}}this.J=null};Jt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Jt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Bl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&bp(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Rg=De.JSON.stringify;class IV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function CV(){var t=Sg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class AV{constructor(){this.h=this.g=null}add(e,n){const r=AI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var AI=new IV(()=>new RV,t=>t.reset());class RV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function SV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function PV(t){De.setTimeout(()=>{throw t},0)}let _c,vc=!1,Sg=new AV,RI=()=>{const t=De.Promise.resolve(void 0);_c=()=>{t.then(kV)}};var kV=()=>{for(var t;t=CV();){try{t.h.call(t.g)}catch(n){PV(n)}var e=AI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vc=!1};function Qh(t,e){Jt.call(this),this.h=t||1,this.g=e||De,this.j=vn(this.qb,this),this.l=Date.now()}Zt(Qh,Jt);ae=Qh.prototype;ae.ga=!1;ae.T=null;ae.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ln(this,"tick"),this.ga&&(Pg(this),this.start()))}};ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Pg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ae.N=function(){Qh.$.N.call(this),Pg(this),delete this.g};function kg(t,e,n){if(typeof t=="function")n&&(t=vn(t,n));else if(t&&typeof t.handleEvent=="function")t=vn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:De.setTimeout(t,e||0)}function SI(t){t.g=kg(()=>{t.g=null,t.i&&(t.i=!1,SI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class NV extends Gi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:SI(this)}N(){super.N(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yc(t){Gi.call(this),this.h=t,this.g={}}Zt(yc,Gi);var Tw=[];function PI(t,e,n,r){Array.isArray(n)||(n&&(Tw[0]=n.toString()),n=Tw);for(var i=0;i<n.length;i++){var s=EI(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function kI(t){xg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ig(e)},t),t.g={}}yc.prototype.N=function(){yc.$.N.call(this),kI(this)};yc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yh(){this.g=!0}Yh.prototype.Ea=function(){this.g=!1};function DV(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function OV(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function io(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+LV(t,n)+(r?" "+r:"")})}function MV(t,e){t.info(function(){return"TIMEOUT: "+e})}Yh.prototype.info=function(){};function LV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Rg(n)}catch{return e}}var Hs={},Iw=null;function Xh(){return Iw=Iw||new Jt}Hs.Ta="serverreachability";function NI(t){yn.call(this,Hs.Ta,t)}Zt(NI,yn);function wc(t){const e=Xh();ln(e,new NI(e))}Hs.STAT_EVENT="statevent";function DI(t,e){yn.call(this,Hs.STAT_EVENT,t),this.stat=e}Zt(DI,yn);function Rn(t){const e=Xh();ln(e,new DI(e,t))}Hs.Ua="timingevent";function OI(t,e){yn.call(this,Hs.Ua,t),this.size=e}Zt(OI,yn);function Yc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){t()},e)}var Jh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},MI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ng(){}Ng.prototype.h=null;function Cw(t){return t.h||(t.h=t.i())}function LI(){}var Xc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Dg(){yn.call(this,"d")}Zt(Dg,yn);function Og(){yn.call(this,"c")}Zt(Og,yn);var xp;function Zh(){}Zt(Zh,Ng);Zh.prototype.g=function(){return new XMLHttpRequest};Zh.prototype.i=function(){return{}};xp=new Zh;function Jc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new yc(this),this.P=$V,t=vp?125:void 0,this.V=new Qh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $I}function $I(){this.i=null,this.g="",this.h=!1}var $V=45e3,Tp={},Hu={};ae=Jc.prototype;ae.setTimeout=function(t){this.P=t};function Ip(t,e,n){t.L=1,t.v=td(ai(e)),t.s=n,t.S=!0,FI(t,null)}function FI(t,e){t.G=Date.now(),Zc(t),t.A=ai(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),qI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new $I,t.g=fC(t.l,n?e:null,!t.s),0<t.O&&(t.M=new NV(vn(t.Pa,t,t.g),t.O)),PI(t.U,t.g,"readystatechange",t.nb),e=t.I?wI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),wc(),DV(t.j,t.u,t.A,t.m,t.W,t.s)}ae.nb=function(t){t=t.target;const e=this.M;e&&Nr(t)==3?e.l():this.Pa(t)};ae.Pa=function(t){try{if(t==this.g)e:{const u=Nr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||vp||this.g&&(this.h.h||this.g.ja()||Pw(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?wc(3):wc(2)),ed(this);var n=this.g.da();this.ca=n;t:if(VI(this)){var r=Pw(this.g);t="";var i=r.length,s=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){us(this),Wa(this);var o="";break t}this.h.i=new De.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,OV(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mc(a)){var l=a;break t}}l=null}if(n=l)io(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cp(this,n);else{this.i=!1,this.o=3,Rn(12),us(this),Wa(this);break e}}this.S?(BI(this,u,o),vp&&this.i&&u==3&&(PI(this.U,this.V,"tick",this.mb),this.V.start())):(io(this.j,this.m,o,null),Cp(this,o)),u==4&&us(this),this.i&&!this.J&&(u==4?lC(this.l,this):(this.i=!1,Zc(this)))}else i6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Rn(12)):(this.o=0,Rn(13)),us(this),Wa(this)}}}catch{}finally{}};function VI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function BI(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=FV(t,n),i==Hu){e==4&&(t.o=4,Rn(14),r=!1),io(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Tp){t.o=4,Rn(15),io(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else io(t.j,t.m,i,null),Cp(t,i);VI(t)&&i!=Hu&&i!=Tp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Rn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bg(e),e.M=!0,Rn(11))):(io(t.j,t.m,n,"[Invalid Chunked Response]"),us(t),Wa(t))}ae.mb=function(){if(this.g){var t=Nr(this.g),e=this.g.ja();this.C<e.length&&(ed(this),BI(this,t,e),this.i&&t!=4&&Zc(this))}};function FV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Hu:(n=Number(e.substring(n,r)),isNaN(n)?Tp:(r+=1,r+n>e.length?Hu:(e=e.slice(r,r+n),t.C=r+n,e)))}ae.cancel=function(){this.J=!0,us(this)};function Zc(t){t.Y=Date.now()+t.P,UI(t,t.P)}function UI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Yc(vn(t.lb,t),e)}function ed(t){t.B&&(De.clearTimeout(t.B),t.B=null)}ae.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(MV(this.j,this.A),this.L!=2&&(wc(),Rn(17)),us(this),this.o=2,Wa(this)):UI(this,this.Y-t)};function Wa(t){t.l.H==0||t.J||lC(t.l,t)}function us(t){ed(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Pg(t.V),kI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Cp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ap(n.i,t))){if(!t.K&&Ap(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Wu(n),sd(n);else break e;Vg(n),Rn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Yc(vn(n.ib,n),6e3));if(1>=QI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else hs(n,11)}else if((t.K||n.g==t)&&Wu(n),!mc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Mg(s,s.h),s.h=null))}if(r.F){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,yt(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=dC(r,r.J?r.pa:null,r.Y),o.K){YI(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(ed(a),Zc(a)),r.g=o}else aC(r);0<n.j.length&&od(n)}else l[0]!="stop"&&l[0]!="close"||hs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?hs(n,7):Fg(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}wc(4)}catch{}}function VV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Wh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function BV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Wh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function HI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Wh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=BV(t),r=VV(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var jI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ys(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ys){this.h=t.h,ju(this,t.j),this.s=t.s,this.g=t.g,zu(this,t.m),this.l=t.l;var e=t.i,n=new bc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Aw(this,n),this.o=t.o}else t&&(e=String(t).match(jI))?(this.h=!1,ju(this,e[1]||"",!0),this.s=ka(e[2]||""),this.g=ka(e[3]||"",!0),zu(this,e[4]),this.l=ka(e[5]||"",!0),Aw(this,e[6]||"",!0),this.o=ka(e[7]||"")):(this.h=!1,this.i=new bc(null,this.h))}ys.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Na(e,Rw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Na(e,Rw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Na(n,n.charAt(0)=="/"?zV:jV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Na(n,qV)),t.join("")};function ai(t){return new ys(t)}function ju(t,e,n){t.j=n?ka(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function zu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Aw(t,e,n){e instanceof bc?(t.i=e,KV(t.i,t.h)):(n||(e=Na(e,WV)),t.i=new bc(e,t.h))}function yt(t,e,n){t.i.set(e,n)}function td(t){return yt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ka(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Na(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,HV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function HV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Rw=/[#\/\?@]/g,jV=/[#\?:]/g,zV=/[#\?]/g,WV=/[#\?@]/g,qV=/#/g;function bc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qi(t){t.g||(t.g=new Map,t.h=0,t.i&&UV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ae=bc.prototype;ae.add=function(t,e){Qi(this),this.i=null,t=Zo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function zI(t,e){Qi(t),e=Zo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function WI(t,e){return Qi(t),e=Zo(t,e),t.g.has(e)}ae.forEach=function(t,e){Qi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ae.ta=function(){Qi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ae.Z=function(t){Qi(this);let e=[];if(typeof t=="string")WI(this,t)&&(e=e.concat(this.g.get(Zo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ae.set=function(t,e){return Qi(this),this.i=null,t=Zo(this,t),WI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ae.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function qI(t,e,n){zI(t,e),0<n.length&&(t.i=null,t.g.set(Zo(t,e),bg(n)),t.h+=n.length)}ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Zo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function KV(t,e){e&&!t.j&&(Qi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(zI(this,r),qI(this,i,n))},t)),t.j=e}var GV=class{constructor(t,e){this.g=t,this.map=e}};function KI(t){this.l=t||QV,De.PerformanceNavigationTiming?(t=De.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(De.g&&De.g.Ka&&De.g.Ka()&&De.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var QV=10;function GI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function QI(t){return t.h?1:t.g?t.g.size:0}function Ap(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Mg(t,e){t.g?t.g.add(e):t.h=e}function YI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}KI.prototype.cancel=function(){if(this.i=XI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function XI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return bg(t.i)}var YV=class{stringify(t){return De.JSON.stringify(t,void 0)}parse(t){return De.JSON.parse(t,void 0)}};function XV(){this.g=new YV}function JV(t,e,n){const r=n||"";try{HI(t,function(i,s){let o=i;Gc(i)&&(o=Rg(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ZV(t,e){const n=new Yh;if(De.Image){const r=new Image;r.onload=Vl(Ul,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Vl(Ul,n,r,"TestLoadImage: error",!1,e),r.onabort=Vl(Ul,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vl(Ul,n,r,"TestLoadImage: timeout",!1,e),De.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ul(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function nd(t){this.l=t.fc||null,this.j=t.ob||!1}Zt(nd,Ng);nd.prototype.g=function(){return new rd(this.l,this.j)};nd.prototype.i=function(t){return function(){return t}}({});function rd(t,e){Jt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Lg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zt(rd,Jt);var Lg=0;ae=rd.prototype;ae.open=function(t,e){if(this.readyState!=Lg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ec(this)};ae.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||De).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,el(this)),this.readyState=Lg};ae.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ec(this)),this.g&&(this.readyState=3,Ec(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof De.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function JI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ae.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?el(this):Ec(this),this.readyState==3&&JI(this)}};ae.Za=function(t){this.g&&(this.response=this.responseText=t,el(this))};ae.Ya=function(t){this.g&&(this.response=t,el(this))};ae.ka=function(){this.g&&el(this)};function el(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ec(t)}ae.setRequestHeader=function(t,e){this.v.append(t,e)};ae.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ae.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ec(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var e6=De.JSON.parse;function At(t){Jt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ZI,this.L=this.M=!1}Zt(At,Jt);var ZI="",t6=/^https?$/i,n6=["POST","PUT"];ae=At.prototype;ae.Oa=function(t){this.M=t};ae.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xp.g(),this.C=this.u?Cw(this.u):Cw(xp),this.g.onreadystatechange=vn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Sw(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=De.FormData&&t instanceof De.FormData,!(0<=gI(n6,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nC(this),0<this.B&&((this.L=r6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vn(this.ua,this)):this.A=kg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Sw(this,s)}};function r6(t){return So&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ae.ua=function(){typeof wg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ln(this,"timeout"),this.abort(8))};function Sw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,eC(t),id(t)}function eC(t){t.F||(t.F=!0,ln(t,"complete"),ln(t,"error"))}ae.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ln(this,"complete"),ln(this,"abort"),id(this))};ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),id(this,!0)),At.$.N.call(this)};ae.La=function(){this.s||(this.G||this.v||this.l?tC(this):this.kb())};ae.kb=function(){tC(this)};function tC(t){if(t.h&&typeof wg<"u"&&(!t.C[1]||Nr(t)!=4||t.da()!=2)){if(t.v&&Nr(t)==4)kg(t.La,0,t);else if(ln(t,"readystatechange"),Nr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(jI)[1]||null;!i&&De.self&&De.self.location&&(i=De.self.location.protocol.slice(0,-1)),r=!t6.test(i?i.toLowerCase():"")}n=r}if(n)ln(t,"complete"),ln(t,"success");else{t.m=6;try{var s=2<Nr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",eC(t)}}finally{id(t)}}}}function id(t,e){if(t.g){nC(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ln(t,"ready");try{n.onreadystatechange=r}catch{}}}function nC(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(De.clearTimeout(t.A),t.A=null)}ae.isActive=function(){return!!this.g};function Nr(t){return t.g?t.g.readyState:0}ae.da=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}};ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ae.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),e6(e)}};function Pw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ZI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function i6(t){const e={};t=(t.g&&2<=Nr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(mc(t[r]))continue;var n=SV(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}EV(e,function(r){return r.join(", ")})}ae.Ia=function(){return this.m};ae.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function rC(t){let e="";return xg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function $g(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rC(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):yt(t,e,n))}function ba(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function iC(t){this.Ga=0,this.j=[],this.l=new Yh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ba("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ba("baseRetryDelayMs",5e3,t),this.hb=ba("retryDelaySeedMs",1e4,t),this.eb=ba("forwardChannelMaxRetries",2,t),this.xa=ba("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new KI(t&&t.concurrentRequestLimit),this.Ja=new XV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ae=iC.prototype;ae.ra=8;ae.H=1;function Fg(t){if(sC(t),t.H==3){var e=t.W++,n=ai(t.I);if(yt(n,"SID",t.K),yt(n,"RID",e),yt(n,"TYPE","terminate"),tl(t,n),e=new Jc(t,t.l,e),e.L=2,e.v=td(ai(n)),n=!1,De.navigator&&De.navigator.sendBeacon)try{n=De.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&De.Image&&(new Image().src=e.v,n=!0),n||(e.g=fC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Zc(e)}hC(t)}function sd(t){t.g&&(Bg(t),t.g.cancel(),t.g=null)}function sC(t){sd(t),t.u&&(De.clearTimeout(t.u),t.u=null),Wu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&De.clearTimeout(t.m),t.m=null)}function od(t){if(!GI(t.i)&&!t.m){t.m=!0;var e=t.Na;_c||RI(),vc||(_c(),vc=!0),Sg.add(e,t),t.C=0}}function s6(t,e){return QI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Yc(vn(t.Na,t,e),uC(t,t.C)),t.C++,!0)}ae.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Jc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=wI(s),bI(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=oC(this,i,e),n=ai(this.I),yt(n,"RID",t),yt(n,"CVER",22),this.F&&yt(n,"X-HTTP-Session-Id",this.F),tl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(rC(s)))+"&"+e:this.o&&$g(n,this.o,s)),Mg(this.i,i),this.bb&&yt(n,"TYPE","init"),this.P?(yt(n,"$req",e),yt(n,"SID","null"),i.aa=!0,Ip(i,n,null)):Ip(i,n,e),this.H=2}}else this.H==3&&(t?kw(this,t):this.j.length==0||GI(this.i)||kw(this))};function kw(t,e){var n;e?n=e.m:n=t.W++;const r=ai(t.I);yt(r,"SID",t.K),yt(r,"RID",n),yt(r,"AID",t.V),tl(t,r),t.o&&t.s&&$g(r,t.o,t.s),n=new Jc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=oC(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Mg(t.i,n),Ip(n,r,e)}function tl(t,e){t.na&&xg(t.na,function(n,r){yt(e,r,n)}),t.h&&HI({},function(n,r){yt(e,r,n)})}function oC(t,e,n){n=Math.min(t.j.length,n);var r=t.h?vn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g;const u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{JV(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function aC(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_c||RI(),vc||(_c(),vc=!0),Sg.add(e,t),t.A=0}}function Vg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Yc(vn(t.Ma,t),uC(t,t.A)),t.A++,!0)}ae.Ma=function(){if(this.u=null,cC(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yc(vn(this.jb,this),t)}};ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Rn(10),sd(this),cC(this))};function Bg(t){t.B!=null&&(De.clearTimeout(t.B),t.B=null)}function cC(t){t.g=new Jc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ai(t.wa);yt(e,"RID","rpc"),yt(e,"SID",t.K),yt(e,"AID",t.V),yt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&yt(e,"TO",t.qa),yt(e,"TYPE","xmlhttp"),tl(t,e),t.o&&t.s&&$g(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=td(ai(e)),n.s=null,n.S=!0,FI(n,t)}ae.ib=function(){this.v!=null&&(this.v=null,sd(this),Vg(this),Rn(19))};function Wu(t){t.v!=null&&(De.clearTimeout(t.v),t.v=null)}function lC(t,e){var n=null;if(t.g==e){Wu(t),Bg(t),t.g=null;var r=2}else if(Ap(t.i,e))n=e.F,YI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Xh(),ln(r,new OI(r,n)),od(t)}else aC(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&s6(t,e)||r==2&&Vg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:hs(t,5);break;case 4:hs(t,10);break;case 3:hs(t,6);break;default:hs(t,2)}}}function uC(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function hs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=vn(t.pb,t);n||(n=new ys("//www.google.com/images/cleardot.gif"),De.location&&De.location.protocol=="http"||ju(n,"https"),td(n)),ZV(n.toString(),r)}else Rn(2);t.H=0,t.h&&t.h.za(e),hC(t),sC(t)}ae.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Rn(2)):(this.l.info("Failed to ping google.com"),Rn(1))};function hC(t){if(t.H=0,t.ma=[],t.h){const e=XI(t.i);(e.length!=0||t.j.length!=0)&&(bw(t.ma,e),bw(t.ma,t.j),t.i.i.length=0,bg(t.j),t.j.length=0),t.h.ya()}}function dC(t,e,n){var r=n instanceof ys?ai(n):new ys(n);if(r.g!="")e&&(r.g=e+"."+r.g),zu(r,r.m);else{var i=De.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ys(null);r&&ju(s,r),e&&(s.g=e),i&&zu(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&yt(r,n,e),yt(r,"VER",t.ra),tl(t,r),r}function fC(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new At(new nd({ob:!0})):new At(t.va),e.Oa(t.J),e}ae.isActive=function(){return!!this.h&&this.h.isActive(this)};function pC(){}ae=pC.prototype;ae.Ba=function(){};ae.Aa=function(){};ae.za=function(){};ae.ya=function(){};ae.isActive=function(){return!0};ae.Va=function(){};function qu(){if(So&&!(10<=Number(vV)))throw Error("Environmental error: no available transport.")}qu.prototype.g=function(t,e){return new Gn(t,e)};function Gn(t,e){Jt.call(this),this.g=new iC(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!mc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ea(this)}Zt(Gn,Jt);Gn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Rn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=dC(t,null,t.Y),od(t)};Gn.prototype.close=function(){Fg(this.g)};Gn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Rg(t),t=n);e.j.push(new GV(e.fb++,t)),e.H==3&&od(e)};Gn.prototype.N=function(){this.g.h=null,delete this.j,Fg(this.g),delete this.g,Gn.$.N.call(this)};function mC(t){Dg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Zt(mC,Dg);function gC(){Og.call(this),this.status=1}Zt(gC,Og);function ea(t){this.g=t}Zt(ea,pC);ea.prototype.Ba=function(){ln(this.g,"a")};ea.prototype.Aa=function(t){ln(this.g,new mC(t))};ea.prototype.za=function(t){ln(this.g,new gC)};ea.prototype.ya=function(){ln(this.g,"b")};function o6(){this.blockSize=-1}function Er(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Zt(Er,o6);Er.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function If(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Er.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)If(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){If(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){If(this,r),i=0;break}}this.h=i,this.i+=e};Er.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ut(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var a6={};function Ug(t){return-128<=t&&128>t?mV(t,function(e){return new ut([e|0],0>e?-1:0)}):new ut([t|0],0>t?-1:0)}function Dr(t){if(isNaN(t)||!isFinite(t))return mo;if(0>t)return sn(Dr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Rp;return new ut(e,0)}function _C(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return sn(_C(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Dr(Math.pow(e,8)),r=mo,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Dr(Math.pow(e,s)),r=r.R(s).add(Dr(o))):(r=r.R(n),r=r.add(Dr(o)))}return r}var Rp=4294967296,mo=Ug(0),Sp=Ug(1),Nw=Ug(16777216);ae=ut.prototype;ae.ea=function(){if(Zn(this))return-sn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Rp+r)*e,e*=Rp}return t};ae.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ni(this))return"0";if(Zn(this))return"-"+sn(this).toString(t);for(var e=Dr(Math.pow(t,6)),n=this,r="";;){var i=Gu(n,e).g;n=Ku(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ni(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ae.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ni(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Zn(t){return t.h==-1}ae.X=function(t){return t=Ku(this,t),Zn(t)?-1:ni(t)?0:1};function sn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ut(n,~t.h).add(Sp)}ae.abs=function(){return Zn(this)?sn(this):this};ae.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ut(n,n[n.length-1]&-2147483648?-1:0)};function Ku(t,e){return t.add(sn(e))}ae.R=function(t){if(ni(this)||ni(t))return mo;if(Zn(this))return Zn(t)?sn(this).R(sn(t)):sn(sn(this).R(t));if(Zn(t))return sn(this.R(sn(t)));if(0>this.X(Nw)&&0>t.X(Nw))return Dr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Hl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Hl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Hl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Hl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ut(n,0)};function Hl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ea(t,e){this.g=t,this.h=e}function Gu(t,e){if(ni(e))throw Error("division by zero");if(ni(t))return new Ea(mo,mo);if(Zn(t))return e=Gu(sn(t),e),new Ea(sn(e.g),sn(e.h));if(Zn(e))return e=Gu(t,sn(e)),new Ea(sn(e.g),e.h);if(30<t.g.length){if(Zn(t)||Zn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sp,r=e;0>=r.X(t);)n=Dw(n),r=Dw(r);var i=Ys(n,1),s=Ys(r,1);for(r=Ys(r,2),n=Ys(n,2);!ni(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ys(r,1),n=Ys(n,1)}return e=Ku(t,i.R(e)),new Ea(i,e)}for(i=mo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Dr(n),o=s.R(e);Zn(o)||0<o.X(t);)n-=r,s=Dr(n),o=s.R(e);ni(s)&&(s=Sp),i=i.add(s),t=Ku(t,o)}return new Ea(i,t)}ae.gb=function(t){return Gu(this,t).h};ae.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ut(n,this.h&t.h)};ae.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ut(n,this.h|t.h)};ae.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ut(n,this.h^t.h)};function Dw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ut(n,t.h)}function Ys(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ut(i,t.h)}qu.prototype.createWebChannel=qu.prototype.g;Gn.prototype.send=Gn.prototype.u;Gn.prototype.open=Gn.prototype.m;Gn.prototype.close=Gn.prototype.close;Jh.NO_ERROR=0;Jh.TIMEOUT=8;Jh.HTTP_ERROR=6;MI.COMPLETE="complete";LI.EventType=Xc;Xc.OPEN="a";Xc.CLOSE="b";Xc.ERROR="c";Xc.MESSAGE="d";Jt.prototype.listen=Jt.prototype.O;At.prototype.listenOnce=At.prototype.P;At.prototype.getLastError=At.prototype.Sa;At.prototype.getLastErrorCode=At.prototype.Ia;At.prototype.getStatus=At.prototype.da;At.prototype.getResponseJson=At.prototype.Wa;At.prototype.getResponseText=At.prototype.ja;At.prototype.send=At.prototype.ha;At.prototype.setWithCredentials=At.prototype.Oa;Er.prototype.digest=Er.prototype.l;Er.prototype.reset=Er.prototype.reset;Er.prototype.update=Er.prototype.j;ut.prototype.add=ut.prototype.add;ut.prototype.multiply=ut.prototype.R;ut.prototype.modulo=ut.prototype.gb;ut.prototype.compare=ut.prototype.X;ut.prototype.toNumber=ut.prototype.ea;ut.prototype.toString=ut.prototype.toString;ut.prototype.getBits=ut.prototype.D;ut.fromNumber=Dr;ut.fromString=_C;var c6=function(){return new qu},l6=function(){return Xh()},Cf=Jh,u6=MI,h6=Hs,Ow={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jl=LI,d6=At,f6=Er,go=ut;const Mw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Go("@firebase/firestore");function Lw(){return As.logLevel}function we(t,...e){if(As.logLevel<=et.DEBUG){const n=e.map(Hg);As.debug(`Firestore (${ta}): ${t}`,...n)}}function ci(t,...e){if(As.logLevel<=et.ERROR){const n=e.map(Hg);As.error(`Firestore (${ta}): ${t}`,...n)}}function Po(t,...e){if(As.logLevel<=et.WARN){const n=e.map(Hg);As.warn(`Firestore (${ta}): ${t}`,...n)}}function Hg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+t;throw ci(e),new Error(e)}function lt(t,e){t||Te()}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class m6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g6{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $r,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new vC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new dn(e)}}class _6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class v6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,we("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string"),this.R=n.token,new y6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=b6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function ko(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _e(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Dt(0,0))}static max(){return new Ae(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(),r===void 0?r=e.length-n:r>e.length-n&&Te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xt extends xc{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const E6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends xc{construct(e,n,r){return new gn(e,n,r)}static isValidIdentifier(e){return E6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _e(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new _e(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _e(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _e(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(n)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(xt.fromString(e))}static fromName(e){return new xe(xt.fromString(e).popFirst(5))}static empty(){return new xe(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new xt(e.slice()))}}function x6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new Bi(i,xe.empty(),e)}function T6(t){return new Bi(t.readTime,t.key,-1)}class Bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bi(Ae.min(),xe.empty(),-1)}static max(){return new Bi(Ae.max(),xe.empty(),-1)}}function I6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==C6)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}jg.ae=-1;function il(t){return t==null}function Qu(t){return t===0&&1/t==-1/0}function R6(t){return typeof t=="number"&&Number.isInteger(t)&&!Qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zl(this.root,e,this.comparator,!0)}}class zl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rn.RED,this.left=i??rn.EMPTY,this.right=s??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new rn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fw(this.data.getIterator())}getIteratorFrom(e){return new Fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wn(this.comparator);return n.data=e,n}}class Fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new jn([])}unionWith(e){let n=new wn(gn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ko(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bC("Invalid base64 string: "+s):s}}(e);return new En(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new En(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const S6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(t){if(lt(!!t),typeof t=="string"){let e=0;const n=S6.exec(t);if(lt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rs(t){return typeof t=="string"?En.fromBase64String(t):En.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wg(t){const e=t.mapValue.fields.__previous_value__;return zg(e)?Wg(e):e}function Tc(t){const e=Ui(t.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Ic{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ic("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zg(t)?4:k6(t)?9007199254740991:10:Te()}function Vr(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tc(t).isEqual(Tc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ui(i.timestampValue),a=Ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Rs(i.bytesValue).isEqual(Rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Nt(i.geoPointValue.latitude)===Nt(s.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Nt(i.integerValue)===Nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Nt(i.doubleValue),a=Nt(s.doubleValue);return o===a?Qu(o)===Qu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ko(t.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($w(o)!==$w(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Vr(o[c],a[c])))return!1;return!0}(t,e);default:return Te()}}function Cc(t,e){return(t.values||[]).find(n=>Vr(n,e))!==void 0}function No(t,e){if(t===e)return 0;const n=Ss(t),r=Ss(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Nt(s.integerValue||s.doubleValue),c=Nt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Vw(t.timestampValue,e.timestampValue);case 4:return Vw(Tc(t),Tc(e));case 5:return ot(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Rs(s),c=Rs(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ot(a[l],c[l]);if(u!==0)return u}return ot(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ot(Nt(s.latitude),Nt(o.latitude));return a!==0?a:ot(Nt(s.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=No(a[l],c[l]);if(u)return u}return ot(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Wl.mapValue&&o===Wl.mapValue)return 0;if(s===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const d=ot(c[h],u[h]);if(d!==0)return d;const f=No(a[c[h]],l[u[h]]);if(f!==0)return f}return ot(c.length,u.length)}(t.mapValue,e.mapValue);default:throw Te()}}function Vw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=Ui(t),r=Ui(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function Do(t){return Pp(t)}function Pp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ui(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Pp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Pp(n.fields[o])}`;return i+"}"}(t.mapValue):Te()}function kp(t){return!!t&&"integerValue"in t}function qg(t){return!!t&&"arrayValue"in t}function Bw(t){return!!t&&"nullValue"in t}function Uw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ou(t){return!!t&&"mapValue"in t}function qa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qa(n)}setAll(e){let n=gn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=qa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ou(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){js(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new An(qa(this.value))}}function EC(t){const e=[];return js(t.fields,(n,r)=>{const i=new gn([n]);if(ou(r)){const s=EC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qt(e,0,Ae.min(),Ae.min(),Ae.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new qt(e,1,n,Ae.min(),r,i,0)}static newNoDocument(e,n){return new qt(e,2,n,Ae.min(),Ae.min(),An.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,Ae.min(),Ae.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.position=e,this.inclusive=n}}function Hw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=xe.comparator(xe.fromName(o.referenceValue),n.key):r=No(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n="asc"){this.field=e,this.dir=n}}function N6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{}class Ft extends xC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new O6(e,n,r):n==="array-contains"?new $6(e,r):n==="in"?new F6(e,r):n==="not-in"?new V6(e,r):n==="array-contains-any"?new B6(e,r):new Ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new M6(e,r):new L6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(No(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Br extends xC{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Br(e,n)}matches(e){return TC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function TC(t){return t.op==="and"}function IC(t){return D6(t)&&TC(t)}function D6(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function Np(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Do(t.value);if(IC(t))return t.filters.map(e=>Np(e)).join(",");{const e=t.filters.map(n=>Np(n)).join(",");return`${t.op}(${e})`}}function CC(t,e){return t instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&Vr(r.value,i.value)}(t,e):t instanceof Br?function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CC(o,i.filters[a]),!0):!1}(t,e):void Te()}function AC(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`}(t):t instanceof Br?function(n){return n.op.toString()+" {"+n.getFilters().map(AC).join(" ,")+"}"}(t):"Filter"}class O6 extends Ft{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class M6 extends Ft{constructor(e,n){super(e,"in",n),this.keys=RC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L6 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=RC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function RC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xe.fromName(r.referenceValue))}class $6 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qg(n)&&Cc(n.arrayValue,this.value)}}class F6 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cc(this.value.arrayValue,n)}}class V6 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Cc(this.value.arrayValue,n)}}class B6 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function zw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new U6(t,e,n,r,i,s,o)}function Kg(t){const e=Oe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Np(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),il(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Do(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Do(r)).join(",")),e.he=n}return e.he}function Gg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jw(t.startAt,e.startAt)&&jw(t.endAt,e.endAt)}function Dp(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function H6(t,e,n,r,i,s,o,a){return new ad(t,e,n,r,i,s,o,a)}function cd(t){return new ad(t)}function Ww(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function j6(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function z6(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function W6(t){return t.collectionGroup!==null}function Ga(t){const e=Oe(t);if(e.Pe===null){e.Pe=[];const n=z6(e),r=j6(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ka(n)),e.Pe.push(new Ka(gn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ka(gn.keyField(),s))}}}return e.Pe}function li(t){const e=Oe(t);return e.Ie||(e.Ie=q6(e,Ga(t))),e.Ie}function q6(t,e){if(t.limitType==="F")return zw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ka(i.field,s)});const n=t.endAt?new Yu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yu(t.startAt.position,t.startAt.inclusive):null;return zw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Op(t,e,n){return new ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ld(t,e){return Gg(li(t),li(e))&&t.limitType===e.limitType}function SC(t){return`${Kg(li(t))}|lt:${t.limitType}`}function Mp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AC(i)).join(", ")}]`),il(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Do(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Do(i)).join(",")),`Target(${r})`}(li(t))}; limitType=${t.limitType})`}function ud(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ga(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const l=Hw(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ga(r),i)||r.endAt&&!function(o,a,c){const l=Hw(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ga(r),i))}(t,e)}function K6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PC(t){return(e,n)=>{let r=!1;for(const i of Ga(t)){const s=G6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function G6(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?No(c,l):Te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new It(xe.comparator);function ui(){return Q6}const kC=new It(xe.comparator);function Da(...t){let e=kC;for(const n of t)e=e.insert(n.key,n);return e}function NC(t){let e=kC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ds(){return Qa()}function DC(){return Qa()}function Qa(){return new na(t=>t.toString(),(t,e)=>t.isEqual(e))}const Y6=new It(xe.comparator),X6=new wn(xe.comparator);function Be(...t){let e=X6;for(const n of t)e=e.add(n);return e}const J6=new wn(ot);function Z6(){return J6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qu(e)?"-0":e}}function MC(t){return{integerValue:""+t}}function e3(t,e){return R6(e)?MC(e):OC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function t3(t,e,n){return t instanceof Ac?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zg(s)&&(s=Wg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Rc?$C(t,e):t instanceof Sc?FC(t,e):function(i,s){const o=LC(i,s),a=qw(o)+qw(i.Ee);return kp(o)&&kp(i.Ee)?MC(a):OC(i.serializer,a)}(t,e)}function n3(t,e,n){return t instanceof Rc?$C(t,e):t instanceof Sc?FC(t,e):n}function LC(t,e){return t instanceof Xu?function(r){return kp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ac extends hd{}class Rc extends hd{constructor(e){super(),this.elements=e}}function $C(t,e){const n=VC(e);for(const r of t.elements)n.some(i=>Vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Sc extends hd{constructor(e){super(),this.elements=e}}function FC(t,e){let n=VC(e);for(const r of t.elements)n=n.filter(i=>!Vr(i,r));return{arrayValue:{values:n}}}class Xu extends hd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function qw(t){return Nt(t.integerValue||t.doubleValue)}function VC(t){return qg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.field=e,this.transform=n}}function i3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rc&&i instanceof Rc||r instanceof Sc&&i instanceof Sc?ko(r.elements,i.elements,Vr):r instanceof Xu&&i instanceof Xu?Vr(r.Ee,i.Ee):r instanceof Ac&&i instanceof Ac}(t.transform,e.transform)}class s3{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dd{}function BC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qg(t.key,Ln.none()):new sl(t.key,t.data,Ln.none());{const n=t.data,r=An.empty();let i=new wn(gn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yi(t.key,r,new jn(i.toArray()),Ln.none())}}function o3(t,e,n){t instanceof sl?function(i,s,o){const a=i.value.clone(),c=Gw(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yi?function(i,s,o){if(!au(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Gw(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(UC(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ya(t,e,n,r){return t instanceof sl?function(s,o,a,c){if(!au(s.precondition,o))return a;const l=s.value.clone(),u=Qw(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yi?function(s,o,a,c){if(!au(s.precondition,o))return a;const l=Qw(s.fieldTransforms,c,o),u=o.data;return u.setAll(UC(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return au(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=LC(r.transform,i||null);s!=null&&(n===null&&(n=An.empty()),n.set(r.field,s))}return n||null}function Kw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ko(r,i,(s,o)=>i3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends dd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yi extends dd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function UC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gw(t,e,n){const r=new Map;lt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,n3(o,a,n[i]))}return r}function Qw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,t3(s,o,e))}return r}class Qg extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HC extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&o3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ya(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ya(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=BC(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(n,r)=>Kw(n,r))&&ko(this.baseMutations,e.baseMutations,(n,r)=>Kw(n,r))}}class Yg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){lt(e.mutations.length===r.length);let i=function(){return Y6}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Yg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,qe;function jC(t){switch(t){default:return Te();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function zC(t){if(t===void 0)return ci("GRPC error has no .code"),X.UNKNOWN;switch(t){case kt.OK:return X.OK;case kt.CANCELLED:return X.CANCELLED;case kt.UNKNOWN:return X.UNKNOWN;case kt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case kt.INTERNAL:return X.INTERNAL;case kt.UNAVAILABLE:return X.UNAVAILABLE;case kt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case kt.NOT_FOUND:return X.NOT_FOUND;case kt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case kt.ABORTED:return X.ABORTED;case kt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case kt.DATA_LOSS:return X.DATA_LOSS;default:return Te()}}(qe=kt||(kt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new go([4294967295,4294967295],0);function Yw(t){const e=h3().encode(t),n=new f6;return n.update(e),new Uint8Array(n.digest())}function Xw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new go([n,r],0),new go([i,s],0)]}class Xg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oa(`Invalid padding: ${n}`);if(r<0)throw new Oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=go.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(go.fromNumber(r)));return i.compare(d3)===1&&(i=new go([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Yw(e),[r,i]=Xw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Yw(e),[r,i]=Xw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ol.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fd(Ae.min(),i,new It(ot),ui(),Be())}}class ol{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ol(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class WC{constructor(e,n){this.targetId=e,this.ye=n}}class qC{constructor(e,n,r=En.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Jw{constructor(){this.we=0,this.Se=e1(),this.be=En.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=Be(),n=Be(),r=Be();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Te()}}),new ol(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=e1()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class f3{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=ui(),this.Ue=Zw(),this.We=new It(ot)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:Te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(Dp(s))if(r===0){const o=new xe(s.path);this.je(n,o,qt.newNoDocument(o,Ae.min()))}else lt(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),c=a?this.rt(a,e,o):1;if(c!==0){this.Ze(n);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,l)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Rs(r).toUint8Array()}catch(c){if(c instanceof bC)return Po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xg(o,i,s)}catch(c){return Po(c instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&Dp(a.target)){const c=new xe(a.target.path);this.$e.get(c)!==null||this.ut(o,c)||this.je(o,c,qt.newNoDocument(c,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=Be();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.et(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new fd(e,n,this.We,this.$e,r);return this.$e=ui(),this.Ue=Zw(),this.We=new It(ot),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Jw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new wn(ot),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Jw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Zw(){return new It(xe.comparator)}function e1(){return new It(xe.comparator)}const p3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),m3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),g3=(()=>({and:"AND",or:"OR"}))();class _3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lp(t,e){return t.useProto3Json||il(e)?e:{value:e}}function Ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function v3(t,e){return Ju(t,e.toTimestamp())}function qn(t){return lt(!!t),Ae.fromTimestamp(function(n){const r=Ui(n);return new Dt(r.seconds,r.nanos)}(t))}function Jg(t,e){return function(r){return new xt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function GC(t){const e=xt.fromString(t);return lt(ZC(e)),e}function Zu(t,e){return Jg(t.databaseId,e.path)}function Xa(t,e){const n=GC(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(QC(n))}function $p(t,e){return Jg(t.databaseId,e)}function y3(t){const e=GC(t);return e.length===4?xt.emptyPath():QC(e)}function Pc(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QC(t){return lt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function t1(t,e,n){return{name:Zu(t,e),fields:n.value.mapValue.fields}}function w3(t,e){return"found"in e?function(r,i){lt(!!i.found),i.found.name,i.found.updateTime;const s=Xa(r,i.found.name),o=qn(i.found.updateTime),a=i.found.createTime?qn(i.found.createTime):Ae.min(),c=new An({mapValue:{fields:i.found.fields}});return qt.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){lt(!!i.missing),lt(!!i.readTime);const s=Xa(r,i.missing),o=qn(i.readTime);return qt.newNoDocument(s,o)}(t,e):Te()}function b3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(lt(u===void 0||typeof u=="string"),En.fromBase64String(u||"")):(lt(u===void 0||u instanceof Uint8Array),En.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?X.UNKNOWN:zC(l.code);return new _e(u,l.message||"")}(o);n=new qC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xa(t,r.document.name),s=qn(r.document.updateTime),o=r.document.createTime?qn(r.document.createTime):Ae.min(),a=new An({mapValue:{fields:r.document.fields}}),c=qt.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new cu(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xa(t,r.document),s=r.readTime?qn(r.readTime):Ae.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xa(t,r.document),s=r.removedTargetIds||[];n=new cu([],s,i,null)}else{if(!("filter"in e))return Te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new u3(i,s),a=r.targetId;n=new WC(a,o)}}return n}function YC(t,e){let n;if(e instanceof sl)n={update:t1(t,e.key,e.value)};else if(e instanceof Qg)n={delete:Zu(t,e.key)};else if(e instanceof Yi)n={update:t1(t,e.key,e.data),updateMask:P3(e.fieldMask)};else{if(!(e instanceof HC))return Te();n={verify:Zu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ac)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:v3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te()}(t,e.precondition)),n}function E3(t,e){return t&&t.length>0?(lt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?qn(i.updateTime):qn(s);return o.isEqual(Ae.min())&&(o=qn(s)),new s3(o,i.transformResults||[])}(n,e))):[]}function x3(t,e){return{documents:[$p(t,e.path)]}}function T3(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=$p(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$p(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(c.length!==0)return JC(Br.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:Zs(h.field),direction:A3(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Lp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function I3(t){let e=y3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){lt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=XC(h);return d instanceof Br&&IC(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(g){return new Ka(eo(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,il(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){const d=!!h.before,f=h.values||[];return new Yu(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,f=h.values||[];return new Yu(f,d)}(n.endAt)),H6(e,i,o,s,a,"F",c,l)}function C3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eo(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=eo(n.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=eo(n.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=eo(n.unaryFilter.field);return Ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(eo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Br.create(n.compositeFilter.filters.map(r=>XC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(n.compositeFilter.op))}(t):Te()}function A3(t){return p3[t]}function R3(t){return m3[t]}function S3(t){return g3[t]}function Zs(t){return{fieldPath:t.canonicalString()}}function eo(t){return gn.fromServerFormat(t.fieldPath)}function JC(t){return t instanceof Ft?function(n){if(n.op==="=="){if(Uw(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NAN"}};if(Bw(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uw(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NAN"}};if(Bw(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(n.field),op:R3(n.op),value:n.value}}}(t):t instanceof Br?function(n){const r=n.getFilters().map(i=>JC(i));return r.length===1?r[0]:{compositeFilter:{op:S3(n.op),filters:r}}}(t):Te()}function P3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r,i,s=Ae.min(),o=Ae.min(),a=En.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.ht=e}}function N3(t){const e=I3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this._n=new O3}addToCollectionParentIndex(e,n){return this._n.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Bi.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class O3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new wn(xt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Oo(0)}static Bn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.changes=new na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ya(r.mutation,i,jn.empty(),Dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const i=ds();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Da();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ui();const o=Qa(),a=function(){return Qa()}();return n.forEach((c,l)=>{const u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Yi)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Ya(u.mutation,l,u.mutation.getFieldMask(),Dt.now())):o.set(l.key,jn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new L3(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Qa();let i=new It((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=r.get(c)||jn.empty();u=a.applyToLocalView(l,u),r.set(c,u);const h=(i.get(a.batchId)||Be()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=DC();u.forEach(d=>{if(!s.has(d)){const f=BC(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):W6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ne.resolve(ds());let a=-1,c=s;return o.next(l=>ne.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?ne.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Be())).next(u=>({batchId:a,changes:NC(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(r=>{let i=Da();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Da();return this.indexManager.getCollectionParents(e,i).next(o=>ne.forEach(o,a=>{const c=function(u,h){return new ad(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(l=>{l.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,c)=>{const l=c.getKey();s.get(l)===null&&(s=s.insert(l,qt.newInvalidDocument(l)))});let o=Da();return s.forEach((a,c)=>{const l=i.get(a);l!==void 0&&Ya(l.mutation,c,jn.empty(),Dt.now()),ud(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return ne.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:N3(i.bundledQuery),readTime:qn(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.overlays=new It(xe.comparator),this.hr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ds();return ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=ds(),s=n.length+1,o=new xe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new It((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=ds(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=ds(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return ne.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new l3(n,r));let s=this.hr.get(n);s===void 0&&(s=Be(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.Pr=new wn(Wt.Ir),this.Tr=new wn(Wt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Wt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new xe(new xt([])),r=new Wt(n,e),i=new Wt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new xe(new xt([])),r=new Wt(n,e),i=new Wt(n,e+1);let s=Be();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Wt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return xe.comparator(e.key,n.key)||ot(e.pr,n.pr)}static Er(e,n){return ot(e.pr,n.pr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new wn(Wt.Ir)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new c3(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Wt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),i=new Wt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wn(ot);return n.forEach(i=>{const s=new Wt(i,0),o=new Wt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),ne.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;xe.isDocumentKey(s)||(s=s.child(""));const o=new Wt(new xe(s),0);let a=new wn(ot);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),ne.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){lt(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return ne.forEach(n.mutations,i=>{const s=new Wt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Wt(n,0),i=this.wr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.Cr=e,this.docs=function(){return new It(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=ui();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ui();const o=n.path,a=new xe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||I6(T6(u),r)<=0||(i.has(u.key)||ud(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Te()}Fr(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new H3(this)}getSize(e){return ne.resolve(this.size)}}class H3 extends M3{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.persistence=e,this.Mr=new na(n=>Kg(n),Gg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Zg,this.targetCount=0,this.Br=Oo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),ne.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.qn(n),ne.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n){this.Lr={},this.overlays={},this.kr=new jg(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new j3(this),this.indexManager=new D3,this.remoteDocumentCache=function(i){return new U3(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new k3(n),this.$r=new F3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new V3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new B3(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const i=new W3(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return ne.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class W3 extends A6{constructor(e){super(),this.currentSequenceNumber=e}}class e_{constructor(e){this.persistence=e,this.zr=new Zg,this.jr=null}static Hr(e){return new e_(e)}get Jr(){if(this.jr)return this.jr;throw Te()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),ne.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Jr,r=>{const i=xe.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return ne.or([()=>ne.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Be(),i=Be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(Ww(n))return ne.resolve(null);let r=li(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Op(n,null,"F"),r=li(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Be(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.ji(n,a);return this.Hi(n,l,o,c.readTime)?this.Wi(e,Op(n,null,"F")):this.Ji(e,l,n,c)}))})))}Gi(e,n,r,i){return Ww(n)||i.isEqual(Ae.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(Lw()<=et.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mp(n)),this.Ji(e,o,n,x6(i,-1)))})}ji(e,n){let r=new wn(PC(e));return n.forEach((i,s)=>{ud(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return Lw()<=et.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Mp(n)),this.Ui.getDocumentsMatchingQuery(e,n,Bi.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new It(ot),this.Xi=new na(s=>Kg(s),Gg),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $3(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function G3(t,e,n,r){return new K3(t,e,n,r)}async function eA(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Be();for(const l of i){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of s){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({rs:l,removedBatchIds:o,addedBatchIds:a}))})})}function Q3(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,d=h.keys();let f=ne.resolve();return d.forEach(g=>{f=f.next(()=>u.getEntry(c,g)).next(_=>{const w=l.docVersions.get(g);lt(w!==null),_.version.compareTo(w)<0&&(h.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),u.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Be();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tA(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Y3(t,e){const n=Oe(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(En.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(_,w,x){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=ui(),l=Be();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(X3(s,o,e.documentUpdates).next(u=>{c=u.ss,l=u.os})),!r.isEqual(Ae.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.Zi=i,s))}function X3(t,e,n){let r=Be(),i=Be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ui();return n.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):we("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ss:o,os:i}})}function J3(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z3(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Fp(t,e,n){const r=Oe(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!rl(o))throw o;we("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function n1(t,e,n){const r=Oe(t);let i=Ae.min(),s=Be();return r.persistence.runTransaction("Execute query","readonly",o=>function(c,l,u){const h=Oe(c),d=h.Xi.get(u);return d!==void 0?ne.resolve(h.Zi.get(d)):h.Qr.getTargetData(l,u)}(r,o,li(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:Ae.min(),n?s:Be())).next(a=>(eB(r,K6(e),a),{documents:a,_s:s})))}function eB(t,e,n){let r=t.es.get(e)||Ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class r1{constructor(){this.activeTargetIds=Z6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tB{constructor(){this.Ys=new r1,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new r1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){we("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){we("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Af(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class sB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=Af(),c=this.po(n,r);we("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(l,s,o),this.wo(n,c,l,i).then(u=>(we("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Po("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=rB[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=Af();return new Promise((o,a)=>{const c=new d6;c.setWithCredentials(!0),c.listenOnce(u6.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Cf.NO_ERROR:const u=c.getResponseJson();we(hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Cf.TIMEOUT:we(hn,`RPC '${e}' ${s} timed out`),a(new _e(X.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const h=c.getStatus();if(we(hn,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(x)>=0?x:X.UNKNOWN}(f.status);a(new _e(g,f.message))}else a(new _e(X.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new _e(X.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{we(hn,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);we(hn,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}bo(e,n,r){const i=Af(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=c6(),a=l6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.yo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const u=s.join("");we(hn,`Creating RPC '${e}' stream ${i}: ${u}`,c);const h=o.createWebChannel(u,c);let d=!1,f=!1;const g=new iB({_o:w=>{f?we(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(we(hn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),we(hn,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},ao:()=>h.close()}),_=(w,x,y)=>{w.listen(x,b=>{try{y(b)}catch(E){setTimeout(()=>{throw E},0)}})};return _(h,jl.EventType.OPEN,()=>{f||we(hn,`RPC '${e}' stream ${i} transport opened.`)}),_(h,jl.EventType.CLOSE,()=>{f||(f=!0,we(hn,`RPC '${e}' stream ${i} transport closed`),g.To())}),_(h,jl.EventType.ERROR,w=>{f||(f=!0,Po(hn,`RPC '${e}' stream ${i} transport errored:`,w),g.To(new _e(X.UNAVAILABLE,"The operation could not be completed")))}),_(h,jl.EventType.MESSAGE,w=>{var x;if(!f){const y=w.data[0];lt(!!y);const b=y,E=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(E){we(hn,`RPC '${e}' stream ${i} received error:`,E);const A=E.status;let R=function(q){const P=kt[q];if(P!==void 0)return zC(P)}(A),D=E.message;R===void 0&&(R=X.INTERNAL,D="Unknown error status: "+A+" with message "+E.message),f=!0,g.To(new _e(R,D)),h.close()}else we(hn,`RPC '${e}' stream ${i} received:`,y),g.Eo(y)}}),_(a,h6.STAT_EVENT,w=>{w.stat===Ow.PROXY?we(hn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Ow.NOPROXY&&we(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return new _3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new n_(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new _e(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return we("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(we("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oB extends nA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=b3(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?qn(o.readTime):Ae.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Pc(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=Dp(c)?{documents:x3(s,c)}:{query:T3(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KC(s,o.resumeToken);const l=Lp(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ae.min())>0){a.readTime=Ju(s,o.snapshotVersion.toTimestamp());const l=Lp(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=C3(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Pc(this.serializer),n.removeTarget=e,this.Yo(n)}}class aB extends nA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=E3(e.writeResults,e.commitTime),r=qn(e.commitTime);return this.listener.l_(r,n)}return lt(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Pc(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YC(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new _e(X.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new _e(X.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(X.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class lB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(ci(n),this.R_=!1):we("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{zs(this)&&(we("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Oe(c);l.S_.add(4),await al(l),l.v_.set("Unknown"),l.S_.delete(4),await md(l)}(this))})}),this.v_=new lB(r,i)}}async function md(t){if(zs(t))for(const e of t.b_)await e(!0)}async function al(t){for(const e of t.b_)await e(!1)}function rA(t,e){const n=Oe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),s_(n)?i_(n):ra(n).Go()&&r_(n,e))}function iA(t,e){const n=Oe(t),r=ra(n);n.w_.delete(e),r.Go()&&sA(n,e),n.w_.size===0&&(r.Go()?r.Ho():zs(n)&&n.v_.set("Unknown"))}function r_(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ra(t).o_(e)}function sA(t,e){t.C_.Le(e),ra(t).__(e)}function i_(t){t.C_=new f3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ra(t).start(),t.v_.V_()}function s_(t){return zs(t)&&!ra(t).Wo()&&t.w_.size>0}function zs(t){return Oe(t).S_.size===0}function oA(t){t.C_=void 0}async function hB(t){t.w_.forEach((e,n)=>{r_(t,e)})}async function dB(t,e){oA(t),s_(t)?(t.v_.g_(e),i_(t)):t.v_.set("Unknown")}async function fB(t,e,n){if(t.v_.set("Online"),e instanceof qC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){we("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await eh(t,r)}else if(e instanceof cu?t.C_.Ge(e):e instanceof WC?t.C_.Xe(e):t.C_.He(e),!n.isEqual(Ae.min()))try{const r=await tA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.w_.get(l);u&&s.w_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const u=s.w_.get(c);if(!u)return;s.w_.set(c,u.withResumeToken(En.EMPTY_BYTE_STRING,u.snapshotVersion)),sA(s,c);const h=new Ai(u.target,c,l,u.sequenceNumber);r_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){we("RemoteStore","Failed to raise snapshot:",r),await eh(t,r)}}async function eh(t,e,n){if(!rl(e))throw e;t.S_.add(1),await al(t),t.v_.set("Offline"),n||(n=()=>tA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await md(t)})}function aA(t,e){return e().catch(n=>eh(t,n,e))}async function gd(t){const e=Oe(t),n=Hi(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;pB(e);)try{const i=await J3(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,mB(e,i)}catch(i){await eh(e,i)}cA(e)&&lA(e)}function pB(t){return zs(t)&&t.y_.length<10}function mB(t,e){t.y_.push(e);const n=Hi(t);n.Go()&&n.u_&&n.c_(e.mutations)}function cA(t){return zs(t)&&!Hi(t).Wo()&&t.y_.length>0}function lA(t){Hi(t).start()}async function gB(t){Hi(t).P_()}async function _B(t){const e=Hi(t);for(const n of t.y_)e.c_(n.mutations)}async function vB(t,e,n){const r=t.y_.shift(),i=Yg.from(r,e,n);await aA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gd(t)}async function yB(t,e){e&&Hi(t).u_&&await async function(r,i){if(function(o){return jC(o)&&o!==X.ABORTED}(i.code)){const s=r.y_.shift();Hi(r).jo(),await aA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gd(r)}}(t,e),cA(t)&&lA(t)}async function s1(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),we("RemoteStore","RemoteStore received new credentials");const r=zs(n);n.S_.add(3),await al(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await md(n)}async function wB(t,e){const n=Oe(t);e?(n.S_.delete(2),await md(n)):e||(n.S_.add(2),await al(n),n.v_.set("Unknown"))}function ra(t){return t.F_||(t.F_=function(n,r,i){const s=Oe(n);return s.T_(),new oB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:hB.bind(null,t),lo:dB.bind(null,t),s_:fB.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),s_(t)?i_(t):t.v_.set("Unknown")):(await t.F_.stop(),oA(t))})),t.F_}function Hi(t){return t.M_||(t.M_=function(n,r,i){const s=Oe(n);return s.T_(),new aB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:gB.bind(null,t),lo:yB.bind(null,t),h_:_B.bind(null,t),l_:vB.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await gd(t)):(await t.M_.stop(),t.y_.length>0&&(we("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new o_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a_(t,e){if(ci("AsyncQueue",`${e}: ${t}`),rl(t))return new _e(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=Da(),this.sortedSet=new It(this.comparator)}static emptySet(e){return new _o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.x_=new It(xe.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):Te():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mo{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mo(e,n,_o.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(){this.N_=void 0,this.listeners=[]}}class EB{constructor(){this.queries=new na(e=>SC(e),ld),this.onlineState="Unknown",this.B_=new Set}}async function c_(t,e){const n=Oe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new bB),i)try{s.N_=await n.onListen(r)}catch(o){const a=a_(o,`Initialization of query '${Mp(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&u_(n)}async function l_(t,e){const n=Oe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function xB(t,e){const n=Oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&u_(n)}function TB(t,e,n){const r=Oe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function u_(t){t.B_.forEach(e=>{e.next()})}class h_{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.key=e}}class hA{constructor(e){this.key=e}}class IB{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=Be(),this.mutatedKeys=Be(),this.ia=PC(e),this.sa=new _o(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new o1,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=ud(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?g!==_&&(r.track({type:3,doc:f}),w=!0):this.ua(d,f)||(r.track({type:2,doc:f}),w=!0,(c&&this.ia(f,c)>0||l&&this.ia(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),w=!0):d&&!f&&(r.track({type:1,doc:d}),w=!0,(c||l)&&(a=!0)),w&&(f?(o=o.add(f),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((l,u)=>function(d,f){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return g(d)-g(f)}(l.type,u.type)||this.ia(l.doc,u.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,c=a!==this.na;return this.na=a,s.length!==0||c?{snapshot:new Mo(this.query,e.sa,i,s,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new o1,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=Be(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new hA(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new uA(r))}),n}Ia(e){this.ta=e._s,this.ra=Be();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Mo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class CB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AB{constructor(e){this.key=e,this.Ea=!1}}class RB{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new na(a=>SC(a),ld),this.Ra=new Map,this.Va=new Set,this.ma=new It(xe.comparator),this.fa=new Map,this.ga=new Zg,this.pa={},this.ya=new Map,this.wa=Oo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function SB(t,e){const n=VB(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await Z3(n.localStore,li(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await PB(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&rA(n.remoteStore,o)}return i}async function PB(t,e,n,r,i){t.ba=(h,d,f)=>async function(_,w,x,y){let b=w.view._a(x);b.Hi&&(b=await n1(_.localStore,w.query,!1).then(({documents:R})=>w.view._a(R,b)));const E=y&&y.targetChanges.get(w.targetId),A=w.view.applyChanges(b,_.isPrimaryClient,E);return c1(_,w.targetId,A.ha),A.snapshot}(t,h,d,f);const s=await n1(t.localStore,e,!0),o=new IB(e,s._s),a=o._a(s.documents),c=ol.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);c1(t,n,l.ha);const u=new CB(e,n,o);return t.Aa.set(e,u),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),l.snapshot}async function kB(t,e){const n=Oe(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!ld(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Fp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),iA(n.remoteStore,r.targetId),Vp(n,r.targetId)}).catch(nl)):(Vp(n,r.targetId),await Fp(n.localStore,r.targetId,!0))}async function NB(t,e,n){const r=BB(t);try{const i=await function(o,a){const c=Oe(o),l=Dt.now(),u=a.reduce((f,g)=>f.add(g.key),Be());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=ui(),_=Be();return c.ts.getEntries(f,u).next(w=>{g=w,g.forEach((x,y)=>{y.isValidDocument()||(_=_.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(w=>{h=w;const x=[];for(const y of a){const b=a3(y,h.get(y.key).overlayedDocument);b!=null&&x.push(new Yi(y.key,b,EC(b.value.mapValue),Ln.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,x,a)}).next(w=>{d=w;const x=w.applyToLocalDocumentSet(h,_);return c.documentOverlayCache.saveOverlays(f,w.batchId,x)})}).then(()=>({batchId:d.batchId,changes:NC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.pa[o.currentUser.toKey()];l||(l=new It(ot)),l=l.insert(a,c),o.pa[o.currentUser.toKey()]=l}(r,i.batchId,n),await cl(r,i.changes),await gd(r.remoteStore)}catch(i){const s=a_(i,"Failed to persist write");n.reject(s)}}async function dA(t,e){const n=Oe(t);try{const r=await Y3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?lt(o.Ea):i.removedDocuments.size>0&&(lt(o.Ea),o.Ea=!1))}),await cl(n,r,e)}catch(r){await nl(r)}}function a1(t,e,n){const r=Oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=Oe(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const d of h.listeners)d.L_(a)&&(l=!0)}),l&&u_(c)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DB(t,e,n){const r=Oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new It(xe.comparator);o=o.insert(s,qt.newNoDocument(s,Ae.min()));const a=Be().add(s),c=new fd(Ae.min(),new Map,new It(ot),o,a);await dA(r,c),r.ma=r.ma.remove(s),r.fa.delete(e),d_(r)}else await Fp(r.localStore,e,!1).then(()=>Vp(r,e,n)).catch(nl)}async function OB(t,e){const n=Oe(t),r=e.batch.batchId;try{const i=await Q3(n.localStore,e);pA(n,r,null),fA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cl(n,i)}catch(i){await nl(i)}}async function MB(t,e,n){const r=Oe(t);try{const i=await function(o,a){const c=Oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(lt(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);pA(r,e,n),fA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cl(r,i)}catch(i){await nl(i)}}function fA(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function pA(t,e,n){const r=Oe(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function Vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||mA(t,r)})}function mA(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(iA(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),d_(t))}function c1(t,e,n){for(const r of n)r instanceof uA?(t.ga.addReference(r.key,e),LB(t,r)):r instanceof hA?(we("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||mA(t,r.key)):Te()}function LB(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(we("SyncEngine","New document in limbo: "+n),t.Va.add(r),d_(t))}function d_(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new xe(xt.fromString(e)),r=t.wa.next();t.fa.set(r,new AB(n)),t.ma=t.ma.insert(n,r),rA(t.remoteStore,new Ai(li(cd(n.path)),r,"TargetPurposeLimboResolution",jg.ae))}}async function cl(t,e,n){const r=Oe(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,c)=>{o.push(r.ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const u=t_.Ki(c.targetId,l);s.push(u)}}))}),await Promise.all(o),r.da.s_(i),await async function(c,l){const u=Oe(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ne.forEach(l,d=>ne.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>ne.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!rl(h))throw h;we("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const f=u.Zi.get(d),g=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(g);u.Zi=u.Zi.insert(d,_)}}}(r.localStore,s))}async function $B(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){we("SyncEngine","User change. New user:",e.toKey());const r=await eA(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(c=>{c.reject(new _e(X.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cl(n,r.rs)}}function FB(t,e){const n=Oe(t),r=n.fa.get(e);if(r&&r.Ea)return Be().add(r.key);{let i=Be();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function VB(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DB.bind(null,e),e.da.s_=xB.bind(null,e.eventManager),e.da.Da=TB.bind(null,e.eventManager),e}function BB(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MB.bind(null,e),e}class l1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return G3(this.persistence,new q3,e.initialUser,this.serializer)}createPersistence(e){return new z3(e_.Hr,this.serializer)}createSharedClientState(e){return new tB}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class UB{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$B.bind(null,this.syncEngine),await wB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EB}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),r=function(s){return new sB(s)}(e.databaseInfo);return function(s,o,a,c){return new cB(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new uB(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>a1(this.syncEngine,n,0),function(){return i1.v()?new i1:new nB}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){const h=new RB(i,s,o,a,c,l);return u&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Oe(n);we("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await al(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new _e(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=Oe(i),a=Pc(o.serializer)+"/documents",c={documents:s.map(d=>Zu(o.serializer,d))},l=await o.So("BatchGetDocuments",a,c,s.length),u=new Map;l.forEach(d=>{const f=w3(o.serializer,d);u.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=u.get(d.toString());lt(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=xe.fromPath(r);this.mutations.push(new HC(i,this.precondition(i)))}),await async function(r,i){const s=Oe(r),o=Pc(s.serializer)+"/documents",a={writes:i.map(c=>YC(s.serializer,c))};await s.fo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Te();n=Ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new _e(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ae.min())?Ln.exists(!1):Ln.updateTime(n):Ln.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ae.min()))throw new _e(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ln.updateTime(n)}return Ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ka=r.maxAttempts,this.Uo=new n_(this.asyncQueue,"transaction_retry")}run(){this.Ka-=1,this.$a()}$a(){this.Uo.No(async()=>{const e=new HB(this.datastore),n=this.Ua(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Wa(i)}))}).catch(r=>{this.Wa(r)})})}Ua(e){try{const n=this.updateFunction(e);return!il(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Wa(e){this.Ka>0&&this.Ga(e)?(this.Ka-=1,this.asyncQueue.enqueueAndForget(()=>(this.$a(),Promise.resolve()))):this.deferred.reject(e)}Ga(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!jC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=yC.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{we("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(we("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _e(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=a_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sf(t,e){t.asyncQueue.verifyOperationInProgress(),we("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function u1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qB(t);we("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>s1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>s1(e.remoteStore,s)),t._onlineComponents=e}function WB(t){return t.name==="FirebaseError"?t.code===X.FAILED_PRECONDITION||t.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function qB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!WB(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Sf(t,new l1)}}else we("FirestoreClient","Using default OfflineComponentProvider"),await Sf(t,new l1);return t._offlineComponents}async function p_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we("FirestoreClient","Using user provided OnlineComponentProvider"),await u1(t,t._uninitializedComponentsProvider._online)):(we("FirestoreClient","Using default OnlineComponentProvider"),await u1(t,new UB))),t._onlineComponents}function KB(t){return p_(t).then(e=>e.syncEngine)}function GB(t){return p_(t).then(e=>e.datastore)}async function th(t){const e=await p_(t),n=e.eventManager;return n.onListen=SB.bind(null,e.syncEngine),n.onUnlisten=kB.bind(null,e.syncEngine),n}function QB(t,e,n={}){const r=new $r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new f_({next:d=>{o.enqueueAndForget(()=>l_(s,h));const f=d.docs.has(a);!f&&d.fromCache?l.reject(new _e(X.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&c&&c.source==="server"?l.reject(new _e(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new h_(cd(a.path),u,{includeMetadataChanges:!0,z_:!0});return c_(s,h)}(await th(t),t.asyncQueue,e,n,r)),r.promise}function YB(t,e,n={}){const r=new $r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const u=new f_({next:d=>{o.enqueueAndForget(()=>l_(s,h)),d.fromCache&&c.source==="server"?l.reject(new _e(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new h_(a,u,{includeMetadataChanges:!0,z_:!0});return c_(s,h)}(await th(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e,n){if(!n)throw new _e(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XB(t,e,n,r){if(e===!0&&r===!0)throw new _e(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function d1(t){if(!xe.isDocumentKey(t))throw new _e(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f1(t){if(xe.isDocumentKey(t))throw new _e(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function m_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=m_(t);throw new _e(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _e(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _e(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p6;switch(r.type){case"firstParty":return new v6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=h1.get(n);r&&(we("ComponentProvider","Removing Datastore"),h1.delete(n),r.terminate())}(this),Promise.resolve()}}function JB(t,e,n,r={}){var i;const s=(t=yr(t,_d))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dn.MOCK_USER;else{a=lO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new _e(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dn(l)}t._authCredentials=new m6(new vC(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class Sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class Mi extends ll{constructor(e,n,r){super(e,n,cd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new xe(e))}withConverter(e){return new Mi(this.firestore,e,this._path)}}function pW(t,e,...n){if(t=Ct(t),_A("collection","path",e),t instanceof _d){const r=xt.fromString(e,...n);return f1(r),new Mi(t,null,r)}{if(!(t instanceof Sn||t instanceof Mi))throw new _e(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return f1(r),new Mi(t.firestore,null,r)}}function ri(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=yC.V()),_A("doc","path",e),t instanceof _d){const r=xt.fromString(e,...n);return d1(r),new Sn(t,null,new xe(r))}{if(!(t instanceof Sn||t instanceof Mi))throw new _e(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return d1(r),new Sn(t.firestore,t instanceof Mi?t.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new n_(this,"async_queue_retry"),this.tu=()=>{const n=Rf();n&&we("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Rf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new $r;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!rl(e))throw e;we("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ci("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=o_.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&Te()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}function m1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ps extends _d{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new ZB}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vA(this),this._firestoreClient.terminate()}}function eU(t,e){const n=typeof t=="object"?t:Oh(),r=typeof t=="string"?t:e||"(default)",i=$s(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=cO("firestore");s&&JB(i,...s)}return i}function ul(t){return t._firestoreClient||vA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vA(t){var e,n,r;const i=t._freezeSettings(),s=function(a,c,l,u){return new P6(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,gA(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new zB(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(En.fromBase64String(e))}catch(n){throw new _e(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=/^__.*__$/;class nU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class yA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class g_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new g_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return nh(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(wA(this.lu)&&tU.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class rU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pd(e)}mu(e,n,r,i=!1){return new g_({lu:e,methodName:n,Vu:r,path:gn.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bA(t){const e=t._freezeSettings(),n=pd(t._databaseId);return new rU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EA(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);v_("Data must be an object, but it was:",o,r);const a=xA(r,o);let c,l;if(s.merge)c=new jn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Bp(e,h,n);if(!o.contains(d))throw new _e(X.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);IA(u,d)||u.push(d)}c=new jn(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new nU(new An(a),c,l)}class bd extends yd{_toFieldTransform(e){if(e.lu!==2)throw e.lu===1?e.Au(`${this._methodName}() can only appear at the top level of your update data`):e.Au(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}class __ extends yd{_toFieldTransform(e){return new r3(e.path,new Ac)}isEqual(e){return e instanceof __}}function iU(t,e,n,r){const i=t.mu(1,e,n);v_("Data must be an object, but it was:",i,r);const s=[],o=An.empty();js(r,(c,l)=>{const u=y_(e,c,n);l=Ct(l);const h=i.Eu(u);if(l instanceof bd)s.push(u);else{const d=Ed(l,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new jn(s);return new yA(o,a,i.fieldTransforms)}function sU(t,e,n,r,i,s){const o=t.mu(1,e,n),a=[Bp(e,r,n)],c=[i];if(s.length%2!=0)throw new _e(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Bp(e,s[d])),c.push(s[d+1]);const l=[],u=An.empty();for(let d=a.length-1;d>=0;--d)if(!IA(l,a[d])){const f=a[d];let g=c[d];g=Ct(g);const _=o.Eu(f);if(g instanceof bd)l.push(f);else{const w=Ed(g,_);w!=null&&(l.push(f),u.set(f,w))}}const h=new jn(l);return new yA(u,h,o.fieldTransforms)}function Ed(t,e){if(TA(t=Ct(t)))return v_("Unsupported field value:",e,t),xA(t,e);if(t instanceof yd)return function(r,i){if(!wA(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Ed(a,i.du(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return e3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Dt.fromDate(r);return{timestampValue:Ju(i.serializer,s)}}if(r instanceof Dt){const s=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ju(i.serializer,s)}}if(r instanceof wd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ks)return{bytesValue:KC(i.serializer,r._byteString)};if(r instanceof Sn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${m_(r)}`)}(t,e)}function xA(t,e){const n={};return wC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(t,(r,i)=>{const s=Ed(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof wd||t instanceof ks||t instanceof Sn||t instanceof yd)}function v_(t,e,n){if(!TA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=m_(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function Bp(t,e,n){if((e=Ct(e))instanceof vd)return e._internalPath;if(typeof e=="string")return y_(t,e);throw nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const oU=new RegExp("[~\\*/\\[\\]]");function y_(t,e,n){if(e.search(oU)>=0)throw nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vd(...e.split("."))._internalPath}catch{throw nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new _e(X.INVALID_ARGUMENT,a+t+c)}function IA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(CA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aU extends rh{data(){return super.data()}}function CA(t,e){return typeof e=="string"?y_(t,e):e instanceof vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RA{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return js(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new wd(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const n=Ui(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);lt(ZC(r));const i=new Ic(r.get(1),r.get(3)),s=new xe(r.popFirst(5));return i.isEqual(n)||ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cU extends RA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class w_ extends rh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(CA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lu extends w_{data(e={}){return super.data(e)}}class PA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new so(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lu(this._firestore,this._userDataWriter,r.key,r,new so(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new lu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new lu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:lU(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){t=yr(t,Sn);const e=yr(t.firestore,Ps);return QB(ul(e),t._key).then(n=>NA(e,t,n))}class xd extends RA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function uU(t){t=yr(t,ll);const e=yr(t.firestore,Ps),n=ul(e),r=new xd(e);return AA(t._query),YB(n,t._query).then(i=>new PA(e,r,t,i))}function mW(t,e,n){t=yr(t,Sn);const r=yr(t.firestore,Ps),i=SA(t.converter,e,n);return hU(r,[EA(bA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function b_(t,...e){var n,r,i;t=Ct(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||m1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(m1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(t instanceof Sn)l=yr(t.firestore,Ps),u=cd(t._key.path),c={next:h=>{e[o]&&e[o](NA(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=yr(t,ll);l=yr(h.firestore,Ps),u=h._query;const d=new xd(l);c={next:f=>{e[o]&&e[o](new PA(l,d,h,f))},error:e[o+1],complete:e[o+2]},AA(t._query)}return function(d,f,g,_){const w=new f_(_),x=new h_(f,w,g);return d.asyncQueue.enqueueAndForget(async()=>c_(await th(d),x)),()=>{w.Ma(),d.asyncQueue.enqueueAndForget(async()=>l_(await th(d),x))}}(ul(l),u,a,c)}function hU(t,e){return function(r,i){const s=new $r;return r.asyncQueue.enqueueAndForget(async()=>NB(await KB(r),i,s)),s.promise}(ul(t),e)}function NA(t,e,n){const r=n.docs.get(e._key),i=new xd(t);return new w_(t,i,e._key,r,new so(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU={maxAttempts:5};function xa(t,e){if((t=Ct(t)).firestore!==e)throw new _e(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=bA(n)}get(n){const r=xa(n,this._firestore),i=new cU(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Te();const o=s[0];if(o.isFoundDocument())return new rh(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new rh(this._firestore,i,r._key,null,r.converter);throw Te()})}set(n,r,i){const s=xa(n,this._firestore),o=SA(s.converter,r,i),a=EA(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=xa(n,this._firestore);let a;return a=typeof(r=Ct(r))=="string"||r instanceof vd?sU(this._dataReader,"Transaction.update",o._key,r,i,s):iU(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=xa(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=xa(e,this._firestore),r=new xd(this._firestore);return super.get(e).then(i=>new w_(this._firestore,r,n._key,i._document,new so(!1,!1),n.converter))}}function DA(t,e,n){t=yr(t,Ps);const r=Object.assign(Object.assign({},dU),n);return function(s){if(s.maxAttempts<1)throw new _e(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new $r;return s.asyncQueue.enqueueAndForget(async()=>{const l=await GB(s);new jB(s.asyncQueue,l,a,o,c).run()}),c.promise}(ul(t),i=>e(new fU(t,i)),r)}function ih(){return new __("serverTimestamp")}(function(e,n=!0){(function(i){ta=i})(qi),Vn(new kn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ps(new g6(r.getProvider("auth-internal")),new w6(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _e(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ic(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),cn(Mw,"4.1.2",e),cn(Mw,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firebasestorage.googleapis.com",pU="storageBucket",mU=2*60*1e3,gU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends ir{constructor(e,n,r=0){super(Pf(e),`Firebase Storage: ${n} (${Pf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ur;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ur||(Ur={}));function Pf(t){return"storage/"+t}function _U(){const t="An unknown error occurred, please check the error payload for server response.";return new jr(Ur.UNKNOWN,t)}function vU(){return new jr(Ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yU(){return new jr(Ur.CANCELED,"User canceled the upload/download.")}function wU(t){return new jr(Ur.INVALID_URL,"Invalid URL '"+t+"'.")}function bU(t){return new jr(Ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function g1(t){return new jr(Ur.INVALID_ARGUMENT,t)}function MA(){return new jr(Ur.APP_DELETED,"The Firebase app was deleted.")}function EU(t){return new jr(Ur.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=mr.makeFromUrl(e,n)}catch{return new mr(e,"")}if(r.path==="")return r;throw bU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),g={bucket:1,path:3},_=n===OA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",x=new RegExp(`^https?://${_}/${i}/${w}`,"i"),b=[{regex:a,indices:c,postModify:s},{regex:f,indices:g,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<b.length;E++){const A=b[E],R=A.regex.exec(e);if(R){const D=R[A.indices.bucket];let $=R[A.indices.path];$||($=""),r=new mr(D,$),A.postModify(r);break}}if(r==null)throw wU(e);return r}}class xU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function u(...w){l||(l=!0,e.apply(null,w))}function h(w){i=setTimeout(()=>{i=null,t(f,c())},w)}function d(){s&&clearTimeout(s)}function f(w,...x){if(l){d();return}if(w){d(),u.call(null,w,...x);return}if(c()||o){d(),u.call(null,w,...x);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let g=!1;function _(w){g||(g=!0,d(),!l&&(i!==null?(w||(a=2),clearTimeout(i),h(0)):w||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function IU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(t){return t!==void 0}function _1(t,e,n,r){if(r<e)throw g1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw g1(`Invalid value for '${t}'. Expected ${n} or less.`)}function AU(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(sh||(sh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n,r,i,s,o,a,c,l,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Kl(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===sh.NO_ERROR,c=s.getStatus();if(!a||RU(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===sh.ABORT;r(!1,new Kl(!1,null,u));return}const l=this.successCodes_.indexOf(c)!==-1;r(!0,new Kl(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());CU(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=_U();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?MA():yU();o(c)}else{const c=vU();o(c)}};this.canceled_?n(!1,new Kl(!1,null,!0)):this.backoffId_=TU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function PU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function DU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function OU(t,e,n,r,i,s,o=!0){const a=AU(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return NU(l,e),PU(l,n),kU(l,s),DU(l,r),new SU(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this._service=e,n instanceof mr?this._location=n:this._location=mr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oh(e,n)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LU(this._location.path)}get storage(){return this._service}get parent(){const e=MU(this._location.path);if(e===null)return null;const n=new mr(this._location.bucket,e);return new oh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw EU(e)}}function v1(t,e){const n=e==null?void 0:e[pU];return n==null?null:mr.makeFromBucketSpec(n,t)}class $U{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=OA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mU,this._maxUploadRetryTime=gU,this._requests=new Set,i!=null?this._bucket=mr.makeFromBucketSpec(i,this._host):this._bucket=v1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mr.makeFromBucketSpec(this._url,e):this._bucket=v1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oh(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new xU(MA());{const o=OU(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const y1="@firebase/storage",w1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="storage";function VU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $U(n,r,i,e,qi)}function BU(){Vn(new kn(FU,VU,"PUBLIC").setMultipleInstances(!0)),cn(y1,w1,""),cn(y1,w1,"esm2017")}BU();const kf=new WeakMap;function LA(t,e){return kf.has(e)||kf.set(e,t||{f:{},r:{},s:{},u:{}}),kf.get(e)}function UU(t,e,n,r){if(!t)return n;const[i,s]=$A(t);if(!i)return n;const o=LA(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function HU(t,e,n,r){if(!t)return;const[i,s]=$A(t);if(!i)return;const o=LA(void 0,r)[i],a=e||s;if(a)return n.then(c=>{o[a]=c}).catch(Sr),a}function $A(t){return p8(t)||m8(t)?["f",t.path]:g8(t)?["r",t.toString()]:_8(t)?["s",t.toString()]:[]}const Nf=new WeakMap;function jU(t,e,n){const r=Hc();Nf.has(r)||Nf.set(r,new Map);const i=Nf.get(r),s=HU(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):Sr}const zU={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function Up(t,e,n,r){if(!d8(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,c)=>{const l=n[c];return a[l.path]=l.data(),a},{});function o(a,c,l,u){c=c||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const g=Object.getOwnPropertyDescriptor(a,f);g&&!g.enumerable&&Object.defineProperty(h,f,g)});for(const f in a){const g=a[f];if(g==null||g instanceof Date||g instanceof Dt||g instanceof wd)h[f]=g;else if(Jm(g)){const _=l+f;h[f]=_ in n?c[f]:g.path,d[_]=g.converter?g:g.withConverter(r.converter)}else if(Array.isArray(g)){h[f]=Array(g.length);for(let _=0;_<g.length;_++){const w=g[_];w&&w.path in s&&(h[f][_]=s[w.path])}o(g,c[f]||h[f],l+f+".",[h[f],d])}else Vs(g)?(h[f]={},o(g,c[f],l+f+".",[h[f],d])):h[f]=g}}return o(t,e,"",i),i}const E_={reset:!1,wait:!0,maxRefDepth:2,converter:zU,snapshotOptions:{serverTimestamps:"estimate"}};function ah(t){for(const e in t)t[e].unsub()}function Hp(t,e,n,r,i,s,o,a,c){const[l,u]=Up(r.data(t.snapshotOptions),Xm(e,n),i,t);s.set(e,n,l),jp(t,e,n,i,u,s,o,a,c)}function WU({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const c=Object.create(null);let l=Sr;return a.once?kA(t).then(u=>{u.exists()?Hp(a,e,n,u,c,o,r,i,s):(o.set(e,n,null),i())}).catch(s):l=b_(t,u=>{u.exists()?Hp(a,e,n,u,c,o,r,i,s):(o.set(e,n,null),i())},s),()=>{l(),ah(c)}}function jp(t,e,n,r,i,s,o,a,c){const l=Object.keys(i);if(Object.keys(r).filter(_=>l.indexOf(_)<0).forEach(_=>{r[_].unsub(),delete r[_]}),!l.length||++o>t.maxRefDepth)return a(n);let h=0;const d=l.length,f=Object.create(null);function g(_){_ in f&&++h>=d&&a(n)}l.forEach(_=>{const w=r[_],x=i[_],y=`${n}.${_}`;if(f[y]=!0,w)if(w.path!==x.path)w.unsub();else return;r[_]={data:()=>Xm(e,y),unsub:WU({ref:x,target:e,path:y,depth:o,ops:s,resolve:g.bind(null,y),reject:c},t),path:x.path}})}function qU(t,e,n,r,i,s){const o=Object.assign({},E_,s),{snapshotListenOptions:a,snapshotOptions:c,wait:l,once:u}=o,h="value";let d=dt(l?[]:t.value);l||n.set(t,h,[]);const f=r;let g,_=Sr;const w=[],x={added:({newIndex:b,doc:E})=>{w.splice(b,0,Object.create(null));const A=w[b],[R,D]=Up(E.data(c),void 0,A,o);n.add(St(d),b,R),jp(o,d,`${h}.${b}`,A,D,n,0,r.bind(null,E),i)},modified:({oldIndex:b,newIndex:E,doc:A})=>{const R=St(d),D=w[b],$=R[b],[q,P]=Up(A.data(c),$,D,o);w.splice(E,0,D),n.remove(R,b),n.add(R,E,q),jp(o,d,`${h}.${E}`,D,P,n,0,r,i)},removed:({oldIndex:b})=>{const E=St(d);n.remove(E,b),ah(w.splice(b,1)[0])}};function y(b){const E=b.docChanges(a);if(!g&&E.length){g=!0;let A=0;const R=E.length,D=Object.create(null);for(let $=0;$<R;$++)D[E[$].doc.id]=!0;r=$=>{$&&$.id in D&&++A>=R&&(l&&(n.set(t,h,St(d)),d=t),f(St(d)),r=Sr)}}E.forEach(A=>{x[A.type](A)}),E.length||(l&&(n.set(t,h,St(d)),d=t),r(St(d)))}return u?uU(e).then(y).catch(i):_=b_(e,y,i),b=>{if(_(),b){const E=typeof b=="function"?b():[];n.set(t,h,E)}w.forEach(ah)}}function KU(t,e,n,r,i,s){const o=Object.assign({},E_,s),a="value",c=Object.create(null);r=v8(r,()=>Xm(t,a));let l=Sr;function u(h){h.exists()?Hp(o,t,a,h,c,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?kA(e).then(u).catch(i):l=b_(e,u,i),h=>{if(l(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}ah(c)}}const b1=Symbol();function FA(t,e){let n=Sr;const r=Object.assign({},E_,e),i=St(t),s=r.target||dt();w8()&&(r.once=!0);const o=UU(i,r.ssrKey,b1,Hc()),a=o!==b1;a&&(s.value=o);let c=!a;const l=dt(!1),u=dt(),h=dE(),d=Yb();let f=Sr;function g(){let x=St(t);const y=new Promise((b,E)=>{if(n(r.reset),!x)return n=Sr,b(null);l.value=c,c=!0,x.converter||(x=x.withConverter(r.converter)),n=(Jm(x)?KU:qU)(s,x,GU,b,E,r)}).catch(b=>(h.value===y&&(u.value=b),Promise.reject(b))).finally(()=>{h.value===y&&(l.value=!1)});h.value=y}let _=Sr;Yt(t)&&(_=Or(t,g)),g(),i&&(f=jU(h.value,i,r.ssrKey)),VE()&&IE(()=>h.value),d&&Nk(w);function w(x=r.reset){_(),f(),n(x)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>l},promise:{get:()=>h},stop:{get:()=>w}})}const GU={set:(t,e,n)=>u8(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function _W(t,e){return FA(t,{target:dt([]),...e})}function x_(t,e){return FA(t,e)}function QU(t){return(e,n)=>{const r=b8(e,n).run(()=>dt(t));rT.set(e,r),x8(r,e)}}function vW(t){return l8?Zx(Hc(t)):null}function YU(t,{firebaseApp:e,modules:n=[]}){t.provide(nT,e);for(const r of n)r(e,t)}const XU=rr({__name:"App",setup(t){const e=Vh(),n=JD(),r=ZD();return Or(e,async(i,s)=>{if(!i&&s&&r.meta.requiresAuth)return n.push({name:"login"});if(i&&typeof r.query.redirect=="string")return n.push(r.query.redirect)}),(i,s)=>(pt(),wo(St(ZE)))}}),JU="modulepreload",ZU=function(t){return"/"+t},E1={},x1=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ZU(s),s in E1)return;E1[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":JU,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e5(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var t5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},VA={},Qn={};let T_;const n5=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Qn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Qn.getSymbolTotalCodewords=function(e){return n5[e]};Qn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Qn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');T_=e};Qn.isKanjiModeEnabled=function(){return typeof T_<"u"};Qn.toSJIS=function(e){return T_(e)};var Td={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(Td);function BA(){this.buffer=[],this.length=0}BA.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var r5=BA;function hl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}hl.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};hl.prototype.get=function(t,e){return this.data[t*this.size+e]};hl.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};hl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var i5=hl,UA={};(function(t){const e=Qn.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(UA);var HA={};const s5=Qn.getSymbolSize,T1=7;HA.getPositions=function(e){const n=s5(e);return[[0,0],[n-T1,0],[0,n-T1]]};var jA={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let h=0;h<s;h++){a=c=0,l=u=null;for(let d=0;d<s;d++){let f=i.get(h,d);f===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=f,a=1),f=i.get(d,h),f===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=f,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,n(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(jA);var Id={};const Ri=Td,Gl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ql=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Id.getBlocksCount=function(e,n){switch(n){case Ri.L:return Gl[(e-1)*4+0];case Ri.M:return Gl[(e-1)*4+1];case Ri.Q:return Gl[(e-1)*4+2];case Ri.H:return Gl[(e-1)*4+3];default:return}};Id.getTotalCodewordsCount=function(e,n){switch(n){case Ri.L:return Ql[(e-1)*4+0];case Ri.M:return Ql[(e-1)*4+1];case Ri.Q:return Ql[(e-1)*4+2];case Ri.H:return Ql[(e-1)*4+3];default:return}};var zA={},Cd={};const Ja=new Uint8Array(512),ch=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Ja[n]=e,ch[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Ja[n]=Ja[n-255]})();Cd.log=function(e){if(e<1)throw new Error("log("+e+")");return ch[e]};Cd.exp=function(e){return Ja[e]};Cd.mul=function(e,n){return e===0||n===0?0:Ja[ch[e]+ch[n]]};(function(t){const e=Cd;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(zA);const WA=zA;function I_(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}I_.prototype.initialize=function(e){this.degree=e,this.genPoly=WA.generateECPolynomial(this.degree)};I_.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=WA.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var o5=I_,qA={},Xi={},C_={};C_.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var zr={};const KA="[0-9]+",a5="[A-Z $%*+\\-./:]+";let kc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";kc=kc.replace(/u/g,"\\u");const c5="(?:(?![A-Z0-9 $%*+\\-./:]|"+kc+`)(?:.|[\r
]))+`;zr.KANJI=new RegExp(kc,"g");zr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");zr.BYTE=new RegExp(c5,"g");zr.NUMERIC=new RegExp(KA,"g");zr.ALPHANUMERIC=new RegExp(a5,"g");const l5=new RegExp("^"+kc+"$"),u5=new RegExp("^"+KA+"$"),h5=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");zr.testKanji=function(e){return l5.test(e)};zr.testNumeric=function(e){return u5.test(e)};zr.testAlphanumeric=function(e){return h5.test(e)};(function(t){const e=C_,n=zr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(Xi);(function(t){const e=Qn,n=Id,r=Td,i=Xi,s=C_,o=7973,a=e.getBCHDigit(o);function c(d,f,g){for(let _=1;_<=40;_++)if(f<=t.getCapacity(_,g,d))return _}function l(d,f){return i.getCharCountIndicator(d,f)+4}function u(d,f){let g=0;return d.forEach(function(_){const w=l(_.mode,f);g+=w+_.getBitsLength()}),g}function h(d,f){for(let g=1;g<=40;g++)if(u(d,g)<=t.getCapacity(g,f,i.MIXED))return g}t.from=function(f,g){return s.isValid(f)?parseInt(f,10):g},t.getCapacity=function(f,g,_){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const w=e.getSymbolTotalCodewords(f),x=n.getTotalCodewordsCount(f,g),y=(w-x)*8;if(_===i.MIXED)return y;const b=y-l(_,f);switch(_){case i.NUMERIC:return Math.floor(b/10*3);case i.ALPHANUMERIC:return Math.floor(b/11*2);case i.KANJI:return Math.floor(b/13);case i.BYTE:default:return Math.floor(b/8)}},t.getBestVersionForData=function(f,g){let _;const w=r.from(g,r.M);if(Array.isArray(f)){if(f.length>1)return h(f,w);if(f.length===0)return 1;_=f[0]}else _=f;return c(_.mode,_.getLength(),w)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let g=f<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return f<<12|g}})(qA);var GA={};const zp=Qn,QA=1335,d5=21522,I1=zp.getBCHDigit(QA);GA.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;zp.getBCHDigit(i)-I1>=0;)i^=QA<<zp.getBCHDigit(i)-I1;return(r<<10|i)^d5};var YA={};const f5=Xi;function Lo(t){this.mode=f5.NUMERIC,this.data=t.toString()}Lo.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Lo.prototype.getLength=function(){return this.data.length};Lo.prototype.getBitsLength=function(){return Lo.getBitsLength(this.data.length)};Lo.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var p5=Lo;const m5=Xi,Df=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function $o(t){this.mode=m5.ALPHANUMERIC,this.data=t}$o.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};$o.prototype.getLength=function(){return this.data.length};$o.prototype.getBitsLength=function(){return $o.getBitsLength(this.data.length)};$o.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Df.indexOf(this.data[n])*45;r+=Df.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Df.indexOf(this.data[n]),6)};var g5=$o,_5=function(e){for(var n=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const v5=_5,y5=Xi;function Fo(t){this.mode=y5.BYTE,typeof t=="string"&&(t=v5(t)),this.data=new Uint8Array(t)}Fo.getBitsLength=function(e){return e*8};Fo.prototype.getLength=function(){return this.data.length};Fo.prototype.getBitsLength=function(){return Fo.getBitsLength(this.data.length)};Fo.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var w5=Fo;const b5=Xi,E5=Qn;function Vo(t){this.mode=b5.KANJI,this.data=t}Vo.getBitsLength=function(e){return e*13};Vo.prototype.getLength=function(){return this.data.length};Vo.prototype.getBitsLength=function(){return Vo.getBitsLength(this.data.length)};Vo.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=E5.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var x5=Vo,XA={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,l,u,h,d,f,g,_,w;!a.empty();){c=a.pop(),l=c.value,h=c.cost,d=n[l]||{};for(u in d)d.hasOwnProperty(u)&&(f=d[u],g=h+f,_=o[u],w=typeof o[u]>"u",(w||_>g)&&(o[u]=g,a.push(u,g),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var x=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(x)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(XA);var T5=XA.exports;(function(t){const e=Xi,n=p5,r=g5,i=w5,s=x5,o=zr,a=Qn,c=T5;function l(x){return unescape(encodeURIComponent(x)).length}function u(x,y,b){const E=[];let A;for(;(A=x.exec(b))!==null;)E.push({data:A[0],index:A.index,mode:y,length:A[0].length});return E}function h(x){const y=u(o.NUMERIC,e.NUMERIC,x),b=u(o.ALPHANUMERIC,e.ALPHANUMERIC,x);let E,A;return a.isKanjiModeEnabled()?(E=u(o.BYTE,e.BYTE,x),A=u(o.KANJI,e.KANJI,x)):(E=u(o.BYTE_KANJI,e.BYTE,x),A=[]),y.concat(b,E,A).sort(function(D,$){return D.index-$.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function d(x,y){switch(y){case e.NUMERIC:return n.getBitsLength(x);case e.ALPHANUMERIC:return r.getBitsLength(x);case e.KANJI:return s.getBitsLength(x);case e.BYTE:return i.getBitsLength(x)}}function f(x){return x.reduce(function(y,b){const E=y.length-1>=0?y[y.length-1]:null;return E&&E.mode===b.mode?(y[y.length-1].data+=b.data,y):(y.push(b),y)},[])}function g(x){const y=[];for(let b=0;b<x.length;b++){const E=x[b];switch(E.mode){case e.NUMERIC:y.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:y.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:y.push([E,{data:E.data,mode:e.BYTE,length:l(E.data)}]);break;case e.BYTE:y.push([{data:E.data,mode:e.BYTE,length:l(E.data)}])}}return y}function _(x,y){const b={},E={start:{}};let A=["start"];for(let R=0;R<x.length;R++){const D=x[R],$=[];for(let q=0;q<D.length;q++){const P=D[q],L=""+R+q;$.push(L),b[L]={node:P,lastCount:0},E[L]={};for(let H=0;H<A.length;H++){const U=A[H];b[U]&&b[U].node.mode===P.mode?(E[U][L]=d(b[U].lastCount+P.length,P.mode)-d(b[U].lastCount,P.mode),b[U].lastCount+=P.length):(b[U]&&(b[U].lastCount=P.length),E[U][L]=d(P.length,P.mode)+4+e.getCharCountIndicator(P.mode,y))}}A=$}for(let R=0;R<A.length;R++)E[A[R]].end=0;return{map:E,table:b}}function w(x,y){let b;const E=e.getBestModeForData(x);if(b=e.from(y,E),b!==e.BYTE&&b.bit<E.bit)throw new Error('"'+x+'" cannot be encoded with mode '+e.toString(b)+`.
 Suggested mode is: `+e.toString(E));switch(b===e.KANJI&&!a.isKanjiModeEnabled()&&(b=e.BYTE),b){case e.NUMERIC:return new n(x);case e.ALPHANUMERIC:return new r(x);case e.KANJI:return new s(x);case e.BYTE:return new i(x)}}t.fromArray=function(y){return y.reduce(function(b,E){return typeof E=="string"?b.push(w(E,null)):E.data&&b.push(w(E.data,E.mode)),b},[])},t.fromString=function(y,b){const E=h(y,a.isKanjiModeEnabled()),A=g(E),R=_(A,b),D=c.find_path(R.map,"start","end"),$=[];for(let q=1;q<D.length-1;q++)$.push(R.table[D[q]].node);return t.fromArray(f($))},t.rawSplit=function(y){return t.fromArray(h(y,a.isKanjiModeEnabled()))}})(YA);const Ad=Qn,Of=Td,I5=r5,C5=i5,A5=UA,R5=HA,Wp=jA,qp=Id,S5=o5,lh=qA,P5=GA,k5=Xi,Mf=YA;function N5(t,e){const n=t.size,r=R5.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function D5(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function O5(t,e){const n=A5.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function M5(t,e){const n=t.size,r=lh.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Lf(t,e,n){const r=t.size,i=P5.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function L5(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function $5(t,e,n){const r=new I5;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),k5.getCharCountIndicator(c.mode,t)),c.write(r)});const i=Ad.getSymbolTotalCodewords(t),s=qp.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return F5(r,t,e)}function F5(t,e,n){const r=Ad.getSymbolTotalCodewords(e),i=qp.getTotalCodewordsCount(e,n),s=r-i,o=qp.getBlocksCount(e,n),a=r%o,c=o-a,l=Math.floor(r/o),u=Math.floor(s/o),h=u+1,d=l-u,f=new S5(d);let g=0;const _=new Array(o),w=new Array(o);let x=0;const y=new Uint8Array(t.buffer);for(let D=0;D<o;D++){const $=D<c?u:h;_[D]=y.slice(g,g+$),w[D]=f.encode(_[D]),g+=$,x=Math.max(x,$)}const b=new Uint8Array(r);let E=0,A,R;for(A=0;A<x;A++)for(R=0;R<o;R++)A<_[R].length&&(b[E++]=_[R][A]);for(A=0;A<d;A++)for(R=0;R<o;R++)b[E++]=w[R][A];return b}function V5(t,e,n,r){let i;if(Array.isArray(t))i=Mf.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=Mf.rawSplit(t);l=lh.getBestVersionForData(u,n)}i=Mf.fromString(t,l||40)}else throw new Error("Invalid data");const s=lh.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=$5(e,n,i),a=Ad.getSymbolSize(e),c=new C5(a);return N5(c,e),D5(c),O5(c,e),Lf(c,n,0),e>=7&&M5(c,e),L5(c,o),isNaN(r)&&(r=Wp.getBestMask(c,Lf.bind(null,c,n))),Wp.applyMask(r,c),Lf(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}VA.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Of.M,i,s;return typeof n<"u"&&(r=Of.from(n.errorCorrectionLevel,Of.M),i=lh.from(n.version),s=Wp.from(n.maskPattern),n.toSJISFunc&&Ad.setToSJISFunction(n.toSJISFunc)),V5(e,i,r,s)};var JA={},A_={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,h=[s.color.light,s.color.dark];for(let d=0;d<l;d++)for(let f=0;f<l;f++){let g=(d*l+f)*4,_=s.color.light;if(d>=u&&f>=u&&d<l-u&&f<l-u){const w=Math.floor((d-u)/c),x=Math.floor((f-u)/c);_=h[a[w*o+x]?1:0]}r[g++]=_.r,r[g++]=_.g,r[g++]=_.b,r[g]=_.a}}})(A_);(function(t){const e=A_;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),h=l.getContext("2d"),d=h.createImageData(u,u);return e.qrToImageData(d.data,s,c),n(h,l,u),h.putImageData(d,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",h=c.rendererOpts||{};return l.toDataURL(u,h.quality)}})(JA);var ZA={};const B5=A_;function C1(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function $f(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function U5(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=s?$f("M",c+n,.5+l+n):$f("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(r+=$f("h",o),o=0)):i++}return r}ZA.render=function(e,n,r){const i=B5.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+C1(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+C1(i.color.dark,"stroke")+' d="'+U5(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,d),d};const H5=t5,Kp=VA,eR=JA,j5=ZA;function R_(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!H5())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=Kp.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=Kp.create(n,r);i(null,t(c,e,r))}catch(c){i(c)}}Kp.create;var z5=R_.bind(null,eR.render);R_.bind(null,eR.renderToDataURL);R_.bind(null,function(t,e,n){return j5.render(t,n)});var tR={exports:{}};function W5(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ff={exports:{}};const q5={},K5=Object.freeze(Object.defineProperty({__proto__:null,default:q5},Symbol.toStringTag,{value:"Module"})),G5=e5(K5);var A1;function Qe(){return A1||(A1=1,function(t,e){(function(n,r){t.exports=r()})(Fe,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Fe<"u"&&Fe.crypto&&(s=Fe.crypto),!s&&typeof W5=="function")try{s=G5}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(b){var E;return y.prototype=b,E=new y,y.prototype=null,E}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(y){var b=a(this);return y&&b.mixIn(y),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var b in y)y.hasOwnProperty(b)&&(this[b]=y[b]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=l.WordArray=u.extend({init:function(y,b){y=this.words=y||[],b!=i?this.sigBytes=b:this.sigBytes=y.length*4},toString:function(y){return(y||f).stringify(this)},concat:function(y){var b=this.words,E=y.words,A=this.sigBytes,R=y.sigBytes;if(this.clamp(),A%4)for(var D=0;D<R;D++){var $=E[D>>>2]>>>24-D%4*8&255;b[A+D>>>2]|=$<<24-(A+D)%4*8}else for(var q=0;q<R;q+=4)b[A+q>>>2]=E[q>>>2];return this.sigBytes+=R,this},clamp:function(){var y=this.words,b=this.sigBytes;y[b>>>2]&=4294967295<<32-b%4*8,y.length=r.ceil(b/4)},clone:function(){var y=u.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var b=[],E=0;E<y;E+=4)b.push(o());return new h.init(b,y)}}),d=c.enc={},f=d.Hex={stringify:function(y){for(var b=y.words,E=y.sigBytes,A=[],R=0;R<E;R++){var D=b[R>>>2]>>>24-R%4*8&255;A.push((D>>>4).toString(16)),A.push((D&15).toString(16))}return A.join("")},parse:function(y){for(var b=y.length,E=[],A=0;A<b;A+=2)E[A>>>3]|=parseInt(y.substr(A,2),16)<<24-A%8*4;return new h.init(E,b/2)}},g=d.Latin1={stringify:function(y){for(var b=y.words,E=y.sigBytes,A=[],R=0;R<E;R++){var D=b[R>>>2]>>>24-R%4*8&255;A.push(String.fromCharCode(D))}return A.join("")},parse:function(y){for(var b=y.length,E=[],A=0;A<b;A++)E[A>>>2]|=(y.charCodeAt(A)&255)<<24-A%4*8;return new h.init(E,b)}},_=d.Utf8={stringify:function(y){try{return decodeURIComponent(escape(g.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return g.parse(unescape(encodeURIComponent(y)))}},w=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=_.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var b,E=this._data,A=E.words,R=E.sigBytes,D=this.blockSize,$=D*4,q=R/$;y?q=r.ceil(q):q=r.max((q|0)-this._minBufferSize,0);var P=q*D,L=r.min(P*4,R);if(P){for(var H=0;H<P;H+=D)this._doProcessBlock(A,H);b=A.splice(0,P),E.sigBytes-=L}return new h.init(b,L)},clone:function(){var y=u.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});l.Hasher=w.extend({cfg:u.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(y){return function(b,E){return new y.init(E).finalize(b)}},_createHmacHelper:function(y){return function(b,E){return new x.HMAC.init(y,E).finalize(b)}}});var x=c.algo={};return c}(Math);return n})}(Ff)),Ff.exports}var Vf={exports:{}},R1;function Rd(){return R1||(R1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,c=i.x64={};c.Word=o.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=o.extend({init:function(l,u){l=this.words=l||[],u!=r?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,h=[],d=0;d<u;d++){var f=l[d];h.push(f.high),h.push(f.low)}return a.create(h,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),u=l.words=this.words.slice(0),h=u.length,d=0;d<h;d++)u[d]=u[d].clone();return l}})}(),n})}(Vf)),Vf.exports}var Bf={exports:{}},S1;function Q5(){return S1||(S1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],h=0;h<l;h++)u[h>>>2]|=c[h]<<24-h%4*8;o.call(this,u,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(Bf)),Bf.exports}var Uf={exports:{}},P1;function Y5(){return P1||(P1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,h=[],d=0;d<u;d+=2){var f=l[d>>>2]>>>16-d%4*8&65535;h.push(String.fromCharCode(f))}return h.join("")},parse:function(c){for(var l=c.length,u=[],h=0;h<l;h++)u[h>>>1]|=c.charCodeAt(h)<<16-h%2*16;return s.create(u,l*2)}},o.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,h=[],d=0;d<u;d+=2){var f=a(l[d>>>2]>>>16-d%4*8&65535);h.push(String.fromCharCode(f))}return h.join("")},parse:function(c){for(var l=c.length,u=[],h=0;h<l;h++)u[h>>>1]|=a(c.charCodeAt(h)<<16-h%2*16);return s.create(u,l*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),n.enc.Utf16})}(Uf)),Uf.exports}var Hf={exports:{}},k1;function ia(){return k1||(k1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,h=this._map;c.clamp();for(var d=[],f=0;f<u;f+=3)for(var g=l[f>>>2]>>>24-f%4*8&255,_=l[f+1>>>2]>>>24-(f+1)%4*8&255,w=l[f+2>>>2]>>>24-(f+2)%4*8&255,x=g<<16|_<<8|w,y=0;y<4&&f+y*.75<u;y++)d.push(h.charAt(x>>>6*(3-y)&63));var b=h.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(c){var l=c.length,u=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<u.length;d++)h[u.charCodeAt(d)]=d}var f=u.charAt(64);if(f){var g=c.indexOf(f);g!==-1&&(l=g)}return a(c,l,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var h=[],d=0,f=0;f<l;f++)if(f%4){var g=u[c.charCodeAt(f-1)]<<f%4*2,_=u[c.charCodeAt(f)]>>>6-f%4*2,w=g|_;h[d>>>2]|=w<<24-d%4*8,d++}return s.create(h,d)}}(),n.enc.Base64})}(Hf)),Hf.exports}var jf={exports:{}},N1;function X5(){return N1||(N1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(c,l=!0){var u=c.words,h=c.sigBytes,d=l?this._safe_map:this._map;c.clamp();for(var f=[],g=0;g<h;g+=3)for(var _=u[g>>>2]>>>24-g%4*8&255,w=u[g+1>>>2]>>>24-(g+1)%4*8&255,x=u[g+2>>>2]>>>24-(g+2)%4*8&255,y=_<<16|w<<8|x,b=0;b<4&&g+b*.75<h;b++)f.push(d.charAt(y>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;f.length%4;)f.push(E);return f.join("")},parse:function(c,l=!0){var u=c.length,h=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<h.length;f++)d[h.charCodeAt(f)]=f}var g=h.charAt(64);if(g){var _=c.indexOf(g);_!==-1&&(u=_)}return a(c,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var h=[],d=0,f=0;f<l;f++)if(f%4){var g=u[c.charCodeAt(f-1)]<<f%4*2,_=u[c.charCodeAt(f)]>>>6-f%4*2,w=g|_;h[d>>>2]|=w<<24-d%4*8,d++}return s.create(h,d)}}(),n.enc.Base64url})}(jf)),jf.exports}var zf={exports:{}},D1;function sa(){return D1||(D1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[];(function(){for(var _=0;_<64;_++)l[_]=r.abs(r.sin(_+1))*4294967296|0})();var u=c.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,w){for(var x=0;x<16;x++){var y=w+x,b=_[y];_[y]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,A=_[w+0],R=_[w+1],D=_[w+2],$=_[w+3],q=_[w+4],P=_[w+5],L=_[w+6],H=_[w+7],U=_[w+8],de=_[w+9],ge=_[w+10],he=_[w+11],be=_[w+12],me=_[w+13],$e=_[w+14],Re=_[w+15],B=E[0],W=E[1],J=E[2],G=E[3];B=h(B,W,J,G,A,7,l[0]),G=h(G,B,W,J,R,12,l[1]),J=h(J,G,B,W,D,17,l[2]),W=h(W,J,G,B,$,22,l[3]),B=h(B,W,J,G,q,7,l[4]),G=h(G,B,W,J,P,12,l[5]),J=h(J,G,B,W,L,17,l[6]),W=h(W,J,G,B,H,22,l[7]),B=h(B,W,J,G,U,7,l[8]),G=h(G,B,W,J,de,12,l[9]),J=h(J,G,B,W,ge,17,l[10]),W=h(W,J,G,B,he,22,l[11]),B=h(B,W,J,G,be,7,l[12]),G=h(G,B,W,J,me,12,l[13]),J=h(J,G,B,W,$e,17,l[14]),W=h(W,J,G,B,Re,22,l[15]),B=d(B,W,J,G,R,5,l[16]),G=d(G,B,W,J,L,9,l[17]),J=d(J,G,B,W,he,14,l[18]),W=d(W,J,G,B,A,20,l[19]),B=d(B,W,J,G,P,5,l[20]),G=d(G,B,W,J,ge,9,l[21]),J=d(J,G,B,W,Re,14,l[22]),W=d(W,J,G,B,q,20,l[23]),B=d(B,W,J,G,de,5,l[24]),G=d(G,B,W,J,$e,9,l[25]),J=d(J,G,B,W,$,14,l[26]),W=d(W,J,G,B,U,20,l[27]),B=d(B,W,J,G,me,5,l[28]),G=d(G,B,W,J,D,9,l[29]),J=d(J,G,B,W,H,14,l[30]),W=d(W,J,G,B,be,20,l[31]),B=f(B,W,J,G,P,4,l[32]),G=f(G,B,W,J,U,11,l[33]),J=f(J,G,B,W,he,16,l[34]),W=f(W,J,G,B,$e,23,l[35]),B=f(B,W,J,G,R,4,l[36]),G=f(G,B,W,J,q,11,l[37]),J=f(J,G,B,W,H,16,l[38]),W=f(W,J,G,B,ge,23,l[39]),B=f(B,W,J,G,me,4,l[40]),G=f(G,B,W,J,A,11,l[41]),J=f(J,G,B,W,$,16,l[42]),W=f(W,J,G,B,L,23,l[43]),B=f(B,W,J,G,de,4,l[44]),G=f(G,B,W,J,be,11,l[45]),J=f(J,G,B,W,Re,16,l[46]),W=f(W,J,G,B,D,23,l[47]),B=g(B,W,J,G,A,6,l[48]),G=g(G,B,W,J,H,10,l[49]),J=g(J,G,B,W,$e,15,l[50]),W=g(W,J,G,B,P,21,l[51]),B=g(B,W,J,G,be,6,l[52]),G=g(G,B,W,J,$,10,l[53]),J=g(J,G,B,W,ge,15,l[54]),W=g(W,J,G,B,R,21,l[55]),B=g(B,W,J,G,U,6,l[56]),G=g(G,B,W,J,Re,10,l[57]),J=g(J,G,B,W,L,15,l[58]),W=g(W,J,G,B,me,21,l[59]),B=g(B,W,J,G,q,6,l[60]),G=g(G,B,W,J,he,10,l[61]),J=g(J,G,B,W,D,15,l[62]),W=g(W,J,G,B,de,21,l[63]),E[0]=E[0]+B|0,E[1]=E[1]+W|0,E[2]=E[2]+J|0,E[3]=E[3]+G|0},_doFinalize:function(){var _=this._data,w=_.words,x=this._nDataBytes*8,y=_.sigBytes*8;w[y>>>5]|=128<<24-y%32;var b=r.floor(x/4294967296),E=x;w[(y+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,w[(y+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_.sigBytes=(w.length+1)*4,this._process();for(var A=this._hash,R=A.words,D=0;D<4;D++){var $=R[D];R[D]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return A},clone:function(){var _=a.clone.call(this);return _._hash=this._hash.clone(),_}});function h(_,w,x,y,b,E,A){var R=_+(w&x|~w&y)+b+A;return(R<<E|R>>>32-E)+w}function d(_,w,x,y,b,E,A){var R=_+(w&y|x&~y)+b+A;return(R<<E|R>>>32-E)+w}function f(_,w,x,y,b,E,A){var R=_+(w^x^y)+b+A;return(R<<E|R>>>32-E)+w}function g(_,w,x,y,b,E,A){var R=_+(x^(w|~y))+b+A;return(R<<E|R>>>32-E)+w}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(zf)),zf.exports}var Wf={exports:{}},O1;function S_(){return O1||(O1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,c=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,h){for(var d=this._hash.words,f=d[0],g=d[1],_=d[2],w=d[3],x=d[4],y=0;y<80;y++){if(y<16)c[y]=u[h+y]|0;else{var b=c[y-3]^c[y-8]^c[y-14]^c[y-16];c[y]=b<<1|b>>>31}var E=(f<<5|f>>>27)+x+c[y];y<20?E+=(g&_|~g&w)+1518500249:y<40?E+=(g^_^w)+1859775393:y<60?E+=(g&_|g&w|_&w)-1894007588:E+=(g^_^w)-899497514,x=w,w=_,_=g<<30|g>>>2,g=f,f=E}d[0]=d[0]+f|0,d[1]=d[1]+g|0,d[2]=d[2]+_|0,d[3]=d[3]+w|0,d[4]=d[4]+x|0},_doFinalize:function(){var u=this._data,h=u.words,d=this._nDataBytes*8,f=u.sigBytes*8;return h[f>>>5]|=128<<24-f%32,h[(f+64>>>9<<4)+14]=Math.floor(d/4294967296),h[(f+64>>>9<<4)+15]=d,u.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(Wf)),Wf.exports}var qf={exports:{}},M1;function nR(){return M1||(M1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[],u=[];(function(){function f(x){for(var y=r.sqrt(x),b=2;b<=y;b++)if(!(x%b))return!1;return!0}function g(x){return(x-(x|0))*4294967296|0}for(var _=2,w=0;w<64;)f(_)&&(w<8&&(l[w]=g(r.pow(_,1/2))),u[w]=g(r.pow(_,1/3)),w++),_++})();var h=[],d=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(f,g){for(var _=this._hash.words,w=_[0],x=_[1],y=_[2],b=_[3],E=_[4],A=_[5],R=_[6],D=_[7],$=0;$<64;$++){if($<16)h[$]=f[g+$]|0;else{var q=h[$-15],P=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,L=h[$-2],H=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;h[$]=P+h[$-7]+H+h[$-16]}var U=E&A^~E&R,de=w&x^w&y^x&y,ge=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),he=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),be=D+he+U+u[$]+h[$],me=ge+de;D=R,R=A,A=E,E=b+be|0,b=y,y=x,x=w,w=be+me|0}_[0]=_[0]+w|0,_[1]=_[1]+x|0,_[2]=_[2]+y|0,_[3]=_[3]+b|0,_[4]=_[4]+E|0,_[5]=_[5]+A|0,_[6]=_[6]+R|0,_[7]=_[7]+D|0},_doFinalize:function(){var f=this._data,g=f.words,_=this._nDataBytes*8,w=f.sigBytes*8;return g[w>>>5]|=128<<24-w%32,g[(w+64>>>9<<4)+14]=r.floor(_/4294967296),g[(w+64>>>9<<4)+15]=_,f.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var f=a.clone.call(this);return f._hash=this._hash.clone(),f}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(qf)),qf.exports}var Kf={exports:{}},L1;function J5(){return L1||(L1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),nR())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(c),r.HmacSHA224=a._createHmacHelper(c)}(),n.SHA224})}(Kf)),Kf.exports}var Gf={exports:{}},$1;function rR(){return $1||($1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),Rd())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,c=o.WordArray,l=r.algo;function u(){return a.create.apply(a,arguments)}var h=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],d=[];(function(){for(var g=0;g<80;g++)d[g]=u()})();var f=l.SHA512=s.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(g,_){for(var w=this._hash.words,x=w[0],y=w[1],b=w[2],E=w[3],A=w[4],R=w[5],D=w[6],$=w[7],q=x.high,P=x.low,L=y.high,H=y.low,U=b.high,de=b.low,ge=E.high,he=E.low,be=A.high,me=A.low,$e=R.high,Re=R.low,B=D.high,W=D.low,J=$.high,G=$.low,st=q,Pe=P,F=L,Y=H,ie=U,pe=de,Ve=ge,I=he,C=be,N=me,V=$e,z=Re,K=B,se=W,ee=J,re=G,Q=0;Q<80;Q++){var ue,ce,ve=d[Q];if(Q<16)ce=ve.high=g[_+Q*2]|0,ue=ve.low=g[_+Q*2+1]|0;else{var Ie=d[Q-15],Ne=Ie.high,je=Ie.low,tt=(Ne>>>1|je<<31)^(Ne>>>8|je<<24)^Ne>>>7,ht=(je>>>1|Ne<<31)^(je>>>8|Ne<<24)^(je>>>7|Ne<<25),en=d[Q-2],Mt=en.high,xn=en.low,Tn=(Mt>>>19|xn<<13)^(Mt<<3|xn>>>29)^Mt>>>6,Tr=(xn>>>19|Mt<<13)^(xn<<3|Mt>>>29)^(xn>>>6|Mt<<26),Lt=d[Q-7],tn=Lt.high,Yn=Lt.low,ml=d[Q-16],Md=ml.high,qs=ml.low;ue=ht+Yn,ce=tt+tn+(ue>>>0<ht>>>0?1:0),ue=ue+Tr,ce=ce+Tn+(ue>>>0<Tr>>>0?1:0),ue=ue+qs,ce=ce+Md+(ue>>>0<qs>>>0?1:0),ve.high=ce,ve.low=ue}var Ld=C&V^~C&K,aa=N&z^~N&se,Ut=st&F^st&ie^F&ie,fi=Pe&Y^Pe&pe^Y&pe,ze=(st>>>28|Pe<<4)^(st<<30|Pe>>>2)^(st<<25|Pe>>>7),gl=(Pe>>>28|st<<4)^(Pe<<30|st>>>2)^(Pe<<25|st>>>7),or=(C>>>14|N<<18)^(C>>>18|N<<14)^(C<<23|N>>>9),$d=(N>>>14|C<<18)^(N>>>18|C<<14)^(N<<23|C>>>9),_l=h[Q],Fd=_l.high,Ks=_l.low,nn=re+$d,ar=ee+or+(nn>>>0<re>>>0?1:0),nn=nn+aa,ar=ar+Ld+(nn>>>0<aa>>>0?1:0),nn=nn+Ks,ar=ar+Fd+(nn>>>0<Ks>>>0?1:0),nn=nn+ue,ar=ar+ce+(nn>>>0<ue>>>0?1:0),vl=gl+fi,yl=ze+Ut+(vl>>>0<gl>>>0?1:0);ee=K,re=se,K=V,se=z,V=C,z=N,N=I+nn|0,C=Ve+ar+(N>>>0<I>>>0?1:0)|0,Ve=ie,I=pe,ie=F,pe=Y,F=st,Y=Pe,Pe=nn+vl|0,st=ar+yl+(Pe>>>0<nn>>>0?1:0)|0}P=x.low=P+Pe,x.high=q+st+(P>>>0<Pe>>>0?1:0),H=y.low=H+Y,y.high=L+F+(H>>>0<Y>>>0?1:0),de=b.low=de+pe,b.high=U+ie+(de>>>0<pe>>>0?1:0),he=E.low=he+I,E.high=ge+Ve+(he>>>0<I>>>0?1:0),me=A.low=me+N,A.high=be+C+(me>>>0<N>>>0?1:0),Re=R.low=Re+z,R.high=$e+V+(Re>>>0<z>>>0?1:0),W=D.low=W+se,D.high=B+K+(W>>>0<se>>>0?1:0),G=$.low=G+re,$.high=J+ee+(G>>>0<re>>>0?1:0)},_doFinalize:function(){var g=this._data,_=g.words,w=this._nDataBytes*8,x=g.sigBytes*8;_[x>>>5]|=128<<24-x%32,_[(x+128>>>10<<5)+30]=Math.floor(w/4294967296),_[(x+128>>>10<<5)+31]=w,g.sigBytes=_.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});r.SHA512=s._createHelper(f),r.HmacSHA512=s._createHmacHelper(f)}(),n.SHA512})}(Gf)),Gf.exports}var Qf={exports:{}},F1;function Z5(){return F1||(F1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),Rd(),rR())})(Fe,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l)}(),n.SHA384})}(Qf)),Qf.exports}var Yf={exports:{}},V1;function e9(){return V1||(V1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),Rd())})(Fe,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.x64,l=c.Word,u=i.algo,h=[],d=[],f=[];(function(){for(var w=1,x=0,y=0;y<24;y++){h[w+5*x]=(y+1)*(y+2)/2%64;var b=x%5,E=(2*w+3*x)%5;w=b,x=E}for(var w=0;w<5;w++)for(var x=0;x<5;x++)d[w+5*x]=x+(2*w+3*x)%5*5;for(var A=1,R=0;R<24;R++){for(var D=0,$=0,q=0;q<7;q++){if(A&1){var P=(1<<q)-1;P<32?$^=1<<P:D^=1<<P-32}A&128?A=A<<1^113:A<<=1}f[R]=l.create(D,$)}})();var g=[];(function(){for(var w=0;w<25;w++)g[w]=l.create()})();var _=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],x=0;x<25;x++)w[x]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,x){for(var y=this._state,b=this.blockSize/2,E=0;E<b;E++){var A=w[x+2*E],R=w[x+2*E+1];A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var D=y[E];D.high^=R,D.low^=A}for(var $=0;$<24;$++){for(var q=0;q<5;q++){for(var P=0,L=0,H=0;H<5;H++){var D=y[q+5*H];P^=D.high,L^=D.low}var U=g[q];U.high=P,U.low=L}for(var q=0;q<5;q++)for(var de=g[(q+4)%5],ge=g[(q+1)%5],he=ge.high,be=ge.low,P=de.high^(he<<1|be>>>31),L=de.low^(be<<1|he>>>31),H=0;H<5;H++){var D=y[q+5*H];D.high^=P,D.low^=L}for(var me=1;me<25;me++){var P,L,D=y[me],$e=D.high,Re=D.low,B=h[me];B<32?(P=$e<<B|Re>>>32-B,L=Re<<B|$e>>>32-B):(P=Re<<B-32|$e>>>64-B,L=$e<<B-32|Re>>>64-B);var W=g[d[me]];W.high=P,W.low=L}var J=g[0],G=y[0];J.high=G.high,J.low=G.low;for(var q=0;q<5;q++)for(var H=0;H<5;H++){var me=q+5*H,D=y[me],st=g[me],Pe=g[(q+1)%5+5*H],F=g[(q+2)%5+5*H];D.high=st.high^~Pe.high&F.high,D.low=st.low^~Pe.low&F.low}var D=y[0],Y=f[$];D.high^=Y.high,D.low^=Y.low}},_doFinalize:function(){var w=this._data,x=w.words;this._nDataBytes*8;var y=w.sigBytes*8,b=this.blockSize*32;x[y>>>5]|=1<<24-y%32,x[(r.ceil((y+1)/b)*b>>>5)-1]|=128,w.sigBytes=x.length*4,this._process();for(var E=this._state,A=this.cfg.outputLength/8,R=A/8,D=[],$=0;$<R;$++){var q=E[$],P=q.high,L=q.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,D.push(L),D.push(P)}return new o.init(D,A)},clone:function(){for(var w=a.clone.call(this),x=w._state=this._state.slice(0),y=0;y<25;y++)x[y]=x[y].clone();return w}});i.SHA3=a._createHelper(_),i.HmacSHA3=a._createHmacHelper(_)}(Math),n.SHA3})}(Yf)),Yf.exports}var Xf={exports:{}},B1;function t9(){return B1||(B1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=o.create([0,1518500249,1859775393,2400959708,2840853838]),g=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=c.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,D){for(var $=0;$<16;$++){var q=D+$,P=R[q];R[q]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var L=this._hash.words,H=f.words,U=g.words,de=l.words,ge=u.words,he=h.words,be=d.words,me,$e,Re,B,W,J,G,st,Pe,F;J=me=L[0],G=$e=L[1],st=Re=L[2],Pe=B=L[3],F=W=L[4];for(var Y,$=0;$<80;$+=1)Y=me+R[D+de[$]]|0,$<16?Y+=w($e,Re,B)+H[0]:$<32?Y+=x($e,Re,B)+H[1]:$<48?Y+=y($e,Re,B)+H[2]:$<64?Y+=b($e,Re,B)+H[3]:Y+=E($e,Re,B)+H[4],Y=Y|0,Y=A(Y,he[$]),Y=Y+W|0,me=W,W=B,B=A(Re,10),Re=$e,$e=Y,Y=J+R[D+ge[$]]|0,$<16?Y+=E(G,st,Pe)+U[0]:$<32?Y+=b(G,st,Pe)+U[1]:$<48?Y+=y(G,st,Pe)+U[2]:$<64?Y+=x(G,st,Pe)+U[3]:Y+=w(G,st,Pe)+U[4],Y=Y|0,Y=A(Y,be[$]),Y=Y+F|0,J=F,F=Pe,Pe=A(st,10),st=G,G=Y;Y=L[1]+Re+Pe|0,L[1]=L[2]+B+F|0,L[2]=L[3]+W+J|0,L[3]=L[4]+me+G|0,L[4]=L[0]+$e+st|0,L[0]=Y},_doFinalize:function(){var R=this._data,D=R.words,$=this._nDataBytes*8,q=R.sigBytes*8;D[q>>>5]|=128<<24-q%32,D[(q+64>>>9<<4)+14]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,R.sigBytes=(D.length+1)*4,this._process();for(var P=this._hash,L=P.words,H=0;H<5;H++){var U=L[H];L[H]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}return P},clone:function(){var R=a.clone.call(this);return R._hash=this._hash.clone(),R}});function w(R,D,$){return R^D^$}function x(R,D,$){return R&D|~R&$}function y(R,D,$){return(R|~D)^$}function b(R,D,$){return R&$|D&~$}function E(R,D,$){return R^(D|~$)}function A(R,D){return R<<D|R>>>32-D}i.RIPEMD160=a._createHelper(_),i.HmacRIPEMD160=a._createHmacHelper(_)}(),n.RIPEMD160})}(Xf)),Xf.exports}var Jf={exports:{}},U1;function P_(){return U1||(U1=1,function(t,e){(function(n,r){t.exports=r(Qe())})(Fe,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,c=r.algo;c.HMAC=s.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=a.parse(u));var h=l.blockSize,d=h*4;u.sigBytes>d&&(u=l.finalize(u)),u.clamp();for(var f=this._oKey=u.clone(),g=this._iKey=u.clone(),_=f.words,w=g.words,x=0;x<h;x++)_[x]^=1549556828,w[x]^=909522486;f.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,h=u.finalize(l);u.reset();var d=u.finalize(this._oKey.clone().concat(h));return d}})})()})}(Jf)),Jf.exports}var Zf={exports:{}},H1;function n9(){return H1||(H1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),S_(),P_())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,c=a.SHA1,l=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,d){for(var f=this.cfg,g=l.create(f.hasher,h),_=o.create(),w=o.create([1]),x=_.words,y=w.words,b=f.keySize,E=f.iterations;x.length<b;){var A=g.update(d).finalize(w);g.reset();for(var R=A.words,D=R.length,$=A,q=1;q<E;q++){$=g.finalize($),g.reset();for(var P=$.words,L=0;L<D;L++)R[L]^=P[L]}_.concat(A),y[0]++}return _.sigBytes=b*4,_}});r.PBKDF2=function(h,d,f){return u.create(f).compute(h,d)}}(),n.PBKDF2})}(Zf)),Zf.exports}var e0={exports:{}},j1;function Ws(){return j1||(j1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),S_(),P_())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,c=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,h){for(var d,f=this.cfg,g=f.hasher.create(),_=o.create(),w=_.words,x=f.keySize,y=f.iterations;w.length<x;){d&&g.update(d),d=g.update(u).finalize(h),g.reset();for(var b=1;b<y;b++)d=g.finalize(d),g.reset();_.concat(d)}return _.sigBytes=x*4,_}});r.EvpKDF=function(u,h,d){return l.create(d).compute(u,h)}}(),n.EvpKDF})}(e0)),e0.exports}var t0={exports:{}},z1;function un(){return z1||(z1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),Ws())})(Fe,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,c=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,h=i.algo,d=h.EvpKDF,f=s.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(P,L){return this.create(this._ENC_XFORM_MODE,P,L)},createDecryptor:function(P,L){return this.create(this._DEC_XFORM_MODE,P,L)},init:function(P,L,H){this.cfg=this.cfg.extend(H),this._xformMode=P,this._key=L,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){P&&this._append(P);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function P(L){return typeof L=="string"?q:R}return function(L){return{encrypt:function(H,U,de){return P(U).encrypt(L,H,U,de)},decrypt:function(H,U,de){return P(U).decrypt(L,H,U,de)}}}}()});s.StreamCipher=f.extend({_doFinalize:function(){var P=this._process(!0);return P},blockSize:1});var g=i.mode={},_=s.BlockCipherMode=o.extend({createEncryptor:function(P,L){return this.Encryptor.create(P,L)},createDecryptor:function(P,L){return this.Decryptor.create(P,L)},init:function(P,L){this._cipher=P,this._iv=L}}),w=g.CBC=function(){var P=_.extend();P.Encryptor=P.extend({processBlock:function(H,U){var de=this._cipher,ge=de.blockSize;L.call(this,H,U,ge),de.encryptBlock(H,U),this._prevBlock=H.slice(U,U+ge)}}),P.Decryptor=P.extend({processBlock:function(H,U){var de=this._cipher,ge=de.blockSize,he=H.slice(U,U+ge);de.decryptBlock(H,U),L.call(this,H,U,ge),this._prevBlock=he}});function L(H,U,de){var ge,he=this._iv;he?(ge=he,this._iv=r):ge=this._prevBlock;for(var be=0;be<de;be++)H[U+be]^=ge[be]}return P}(),x=i.pad={},y=x.Pkcs7={pad:function(P,L){for(var H=L*4,U=H-P.sigBytes%H,de=U<<24|U<<16|U<<8|U,ge=[],he=0;he<U;he+=4)ge.push(de);var be=a.create(ge,U);P.concat(be)},unpad:function(P){var L=P.words[P.sigBytes-1>>>2]&255;P.sigBytes-=L}};s.BlockCipher=f.extend({cfg:f.cfg.extend({mode:w,padding:y}),reset:function(){var P;f.reset.call(this);var L=this.cfg,H=L.iv,U=L.mode;this._xformMode==this._ENC_XFORM_MODE?P=U.createEncryptor:(P=U.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==P?this._mode.init(this,H&&H.words):(this._mode=P.call(U,this,H&&H.words),this._mode.__creator=P)},_doProcessBlock:function(P,L){this._mode.processBlock(P,L)},_doFinalize:function(){var P,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),P=this._process(!0)):(P=this._process(!0),L.unpad(P)),P},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),E=i.format={},A=E.OpenSSL={stringify:function(P){var L,H=P.ciphertext,U=P.salt;return U?L=a.create([1398893684,1701076831]).concat(U).concat(H):L=H,L.toString(u)},parse:function(P){var L,H=u.parse(P),U=H.words;return U[0]==1398893684&&U[1]==1701076831&&(L=a.create(U.slice(2,4)),U.splice(0,4),H.sigBytes-=16),b.create({ciphertext:H,salt:L})}},R=s.SerializableCipher=o.extend({cfg:o.extend({format:A}),encrypt:function(P,L,H,U){U=this.cfg.extend(U);var de=P.createEncryptor(H,U),ge=de.finalize(L),he=de.cfg;return b.create({ciphertext:ge,key:H,iv:he.iv,algorithm:P,mode:he.mode,padding:he.padding,blockSize:P.blockSize,formatter:U.format})},decrypt:function(P,L,H,U){U=this.cfg.extend(U),L=this._parse(L,U.format);var de=P.createDecryptor(H,U).finalize(L.ciphertext);return de},_parse:function(P,L){return typeof P=="string"?L.parse(P,this):P}}),D=i.kdf={},$=D.OpenSSL={execute:function(P,L,H,U){U||(U=a.random(64/8));var de=d.create({keySize:L+H}).compute(P,U),ge=a.create(de.words.slice(L),H*4);return de.sigBytes=L*4,b.create({key:de,iv:ge,salt:U})}},q=s.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:$}),encrypt:function(P,L,H,U){U=this.cfg.extend(U);var de=U.kdf.execute(H,P.keySize,P.ivSize);U.iv=de.iv;var ge=R.encrypt.call(this,P,L,de.key,U);return ge.mixIn(de),ge},decrypt:function(P,L,H,U){U=this.cfg.extend(U),L=this._parse(L,U.format);var de=U.kdf.execute(H,P.keySize,P.ivSize,L.salt);U.iv=de.iv;var ge=R.decrypt.call(this,P,L,de.key,U);return ge}})}()})}(t0)),t0.exports}var n0={exports:{}},W1;function r9(){return W1||(W1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize;i.call(this,s,o,c,a),this._prevBlock=s.slice(o,o+c)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=s.slice(o,o+c);i.call(this,s,o,c,a),this._prevBlock=l}});function i(s,o,a,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var h=0;h<a;h++)s[o+h]^=l[h]}return r}(),n.mode.CFB})}(n0)),n0.exports}var r0={exports:{}},q1;function i9(){return q1||(q1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var h=u.slice(0);a.encryptBlock(h,0),u[c-1]=u[c-1]+1|0;for(var d=0;d<c;d++)s[o+d]^=h[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(r0)),r0.exports}var i0={exports:{}},K1;function s9(){return K1||(K1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var c=a>>16&255,l=a>>8&255,u=a&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,a=0,a+=c<<16,a+=l<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,c){var l=this._cipher,u=l.blockSize,h=this._iv,d=this._counter;h&&(d=this._counter=h.slice(0),this._iv=void 0),s(d);var f=d.slice(0);l.encryptBlock(f,0);for(var g=0;g<u;g++)a[c+g]^=f[g]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(i0)),i0.exports}var s0={exports:{}},G1;function o9(){return G1||(G1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var h=0;h<c;h++)s[o+h]^=u[h]}});return r.Decryptor=i,r}(),n.mode.OFB})}(s0)),s0.exports}var o0={exports:{}},Q1;function a9(){return Q1||(Q1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(o0)),o0.exports}var a0={exports:{}},Y1;function c9(){return Y1||(Y1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,c=s+a-1;r.clamp(),r.words[c>>>2]|=a<<24-c%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(a0)),a0.exports}var c0={exports:{}},X1;function l9(){return X1||(X1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(c0)),c0.exports}var l0={exports:{}},J1;function u9(){return J1||(J1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(l0)),l0.exports}var u0={exports:{}},Z1;function h9(){return Z1||(Z1=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(u0)),u0.exports}var h0={exports:{}},eb;function d9(){return eb||(eb=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(h0)),h0.exports}var d0={exports:{}},tb;function f9(){return tb||(tb=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),un())})(Fe,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,c=a.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var h=c.parse(u);return o.create({ciphertext:h})}}}(),n.format.Hex})}(d0)),d0.exports}var f0={exports:{}},nb;function p9(){return nb||(nb=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),ia(),sa(),Ws(),un())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],c=[],l=[],u=[],h=[],d=[],f=[],g=[],_=[],w=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var A=0,R=0,E=0;E<256;E++){var D=R^R<<1^R<<2^R<<3^R<<4;D=D>>>8^D&255^99,a[A]=D,c[D]=A;var $=b[A],q=b[$],P=b[q],L=b[D]*257^D*16843008;l[A]=L<<24|L>>>8,u[A]=L<<16|L>>>16,h[A]=L<<8|L>>>24,d[A]=L;var L=P*16843009^q*65537^$*257^A*16843008;f[D]=L<<24|L>>>8,g[D]=L<<16|L>>>16,_[D]=L<<8|L>>>24,w[D]=L,A?(A=$^b[b[b[P^$]]],R^=b[b[R]]):A=R=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,A=E.words,R=E.sigBytes/4,D=this._nRounds=R+6,$=(D+1)*4,q=this._keySchedule=[],P=0;P<$;P++)P<R?q[P]=A[P]:(b=q[P-1],P%R?R>6&&P%R==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=x[P/R|0]<<24),q[P]=q[P-R]^b);for(var L=this._invKeySchedule=[],H=0;H<$;H++){var P=$-H;if(H%4)var b=q[P];else var b=q[P-4];H<4||P<=4?L[H]=b:L[H]=f[a[b>>>24]]^g[a[b>>>16&255]]^_[a[b>>>8&255]]^w[a[b&255]]}}},encryptBlock:function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,u,h,d,a)},decryptBlock:function(b,E){var A=b[E+1];b[E+1]=b[E+3],b[E+3]=A,this._doCryptBlock(b,E,this._invKeySchedule,f,g,_,w,c);var A=b[E+1];b[E+1]=b[E+3],b[E+3]=A},_doCryptBlock:function(b,E,A,R,D,$,q,P){for(var L=this._nRounds,H=b[E]^A[0],U=b[E+1]^A[1],de=b[E+2]^A[2],ge=b[E+3]^A[3],he=4,be=1;be<L;be++){var me=R[H>>>24]^D[U>>>16&255]^$[de>>>8&255]^q[ge&255]^A[he++],$e=R[U>>>24]^D[de>>>16&255]^$[ge>>>8&255]^q[H&255]^A[he++],Re=R[de>>>24]^D[ge>>>16&255]^$[H>>>8&255]^q[U&255]^A[he++],B=R[ge>>>24]^D[H>>>16&255]^$[U>>>8&255]^q[de&255]^A[he++];H=me,U=$e,de=Re,ge=B}var me=(P[H>>>24]<<24|P[U>>>16&255]<<16|P[de>>>8&255]<<8|P[ge&255])^A[he++],$e=(P[U>>>24]<<24|P[de>>>16&255]<<16|P[ge>>>8&255]<<8|P[H&255])^A[he++],Re=(P[de>>>24]<<24|P[ge>>>16&255]<<16|P[H>>>8&255]<<8|P[U&255])^A[he++],B=(P[ge>>>24]<<24|P[H>>>16&255]<<16|P[U>>>8&255]<<8|P[de&255])^A[he++];b[E]=me,b[E+1]=$e,b[E+2]=Re,b[E+3]=B},keySize:256/32});r.AES=s._createHelper(y)}(),n.AES})}(f0)),f0.exports}var p0={exports:{}},rb;function m9(){return rb||(rb=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),ia(),sa(),Ws(),un())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=a.DES=o.extend({_doReset:function(){for(var x=this._key,y=x.words,b=[],E=0;E<56;E++){var A=c[E]-1;b[E]=y[A>>>5]>>>31-A%32&1}for(var R=this._subKeys=[],D=0;D<16;D++){for(var $=R[D]=[],q=u[D],E=0;E<24;E++)$[E/6|0]|=b[(l[E]-1+q)%28]<<31-E%6,$[4+(E/6|0)]|=b[28+(l[E+24]-1+q)%28]<<31-E%6;$[0]=$[0]<<1|$[0]>>>31;for(var E=1;E<7;E++)$[E]=$[E]>>>(E-1)*4+3;$[7]=$[7]<<5|$[7]>>>27}for(var P=this._invSubKeys=[],E=0;E<16;E++)P[E]=R[15-E]},encryptBlock:function(x,y){this._doCryptBlock(x,y,this._subKeys)},decryptBlock:function(x,y){this._doCryptBlock(x,y,this._invSubKeys)},_doCryptBlock:function(x,y,b){this._lBlock=x[y],this._rBlock=x[y+1],g.call(this,4,252645135),g.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),g.call(this,1,1431655765);for(var E=0;E<16;E++){for(var A=b[E],R=this._lBlock,D=this._rBlock,$=0,q=0;q<8;q++)$|=h[q][((D^A[q])&d[q])>>>0];this._lBlock=D,this._rBlock=R^$}var P=this._lBlock;this._lBlock=this._rBlock,this._rBlock=P,g.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),x[y]=this._lBlock,x[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(x,y){var b=(this._lBlock>>>x^this._rBlock)&y;this._rBlock^=b,this._lBlock^=b<<x}function _(x,y){var b=(this._rBlock>>>x^this._lBlock)&y;this._lBlock^=b,this._rBlock^=b<<x}r.DES=o._createHelper(f);var w=a.TripleDES=o.extend({_doReset:function(){var x=this._key,y=x.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=y.slice(0,2),E=y.length<4?y.slice(0,2):y.slice(2,4),A=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=f.createEncryptor(s.create(b)),this._des2=f.createEncryptor(s.create(E)),this._des3=f.createEncryptor(s.create(A))},encryptBlock:function(x,y){this._des1.encryptBlock(x,y),this._des2.decryptBlock(x,y),this._des3.encryptBlock(x,y)},decryptBlock:function(x,y){this._des3.decryptBlock(x,y),this._des2.encryptBlock(x,y),this._des1.decryptBlock(x,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(w)}(),n.TripleDES})}(p0)),p0.exports}var m0={exports:{}},ib;function g9(){return ib||(ib=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),ia(),sa(),Ws(),un())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var u=this._key,h=u.words,d=u.sigBytes,f=this._S=[],g=0;g<256;g++)f[g]=g;for(var g=0,_=0;g<256;g++){var w=g%d,x=h[w>>>2]>>>24-w%4*8&255;_=(_+f[g]+x)%256;var y=f[g];f[g]=f[_],f[_]=y}this._i=this._j=0},_doProcessBlock:function(u,h){u[h]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,h=this._i,d=this._j,f=0,g=0;g<4;g++){h=(h+1)%256,d=(d+u[h])%256;var _=u[h];u[h]=u[d],u[d]=_,f|=u[(u[h]+u[d])%256]<<24-g*8}return this._i=h,this._j=d,f}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(m0)),m0.exports}var g0={exports:{}},sb;function _9(){return sb||(sb=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),ia(),sa(),Ws(),un())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],c=[],l=[],u=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,f=this.cfg.iv,g=0;g<4;g++)d[g]=(d[g]<<8|d[g]>>>24)&16711935|(d[g]<<24|d[g]>>>8)&4278255360;var _=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],w=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)h.call(this);for(var g=0;g<8;g++)w[g]^=_[g+4&7];if(f){var x=f.words,y=x[0],b=x[1],E=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,A=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,R=E>>>16|A&4294901760,D=A<<16|E&65535;w[0]^=E,w[1]^=R,w[2]^=A,w[3]^=D,w[4]^=E,w[5]^=R,w[6]^=A,w[7]^=D;for(var g=0;g<4;g++)h.call(this)}},_doProcessBlock:function(d,f){var g=this._X;h.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,d[f+_]^=a[_]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,f=this._C,g=0;g<8;g++)c[g]=f[g];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var _=d[g]+f[g],w=_&65535,x=_>>>16,y=((w*w>>>17)+w*x>>>15)+x*x,b=((_&4294901760)*_|0)+((_&65535)*_|0);l[g]=y^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(u)}(),n.Rabbit})}(g0)),g0.exports}var _0={exports:{}},ob;function v9(){return ob||(ob=1,function(t,e){(function(n,r,i){t.exports=r(Qe(),ia(),sa(),Ws(),un())})(Fe,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],c=[],l=[],u=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,f=this.cfg.iv,g=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],_=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var w=0;w<4;w++)h.call(this);for(var w=0;w<8;w++)_[w]^=g[w+4&7];if(f){var x=f.words,y=x[0],b=x[1],E=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,A=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,R=E>>>16|A&4294901760,D=A<<16|E&65535;_[0]^=E,_[1]^=R,_[2]^=A,_[3]^=D,_[4]^=E,_[5]^=R,_[6]^=A,_[7]^=D;for(var w=0;w<4;w++)h.call(this)}},_doProcessBlock:function(d,f){var g=this._X;h.call(this),a[0]=g[0]^g[5]>>>16^g[3]<<16,a[1]=g[2]^g[7]>>>16^g[5]<<16,a[2]=g[4]^g[1]>>>16^g[7]<<16,a[3]=g[6]^g[3]>>>16^g[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,d[f+_]^=a[_]},blockSize:128/32,ivSize:64/32});function h(){for(var d=this._X,f=this._C,g=0;g<8;g++)c[g]=f[g];f[0]=f[0]+1295307597+this._b|0,f[1]=f[1]+3545052371+(f[0]>>>0<c[0]>>>0?1:0)|0,f[2]=f[2]+886263092+(f[1]>>>0<c[1]>>>0?1:0)|0,f[3]=f[3]+1295307597+(f[2]>>>0<c[2]>>>0?1:0)|0,f[4]=f[4]+3545052371+(f[3]>>>0<c[3]>>>0?1:0)|0,f[5]=f[5]+886263092+(f[4]>>>0<c[4]>>>0?1:0)|0,f[6]=f[6]+1295307597+(f[5]>>>0<c[5]>>>0?1:0)|0,f[7]=f[7]+3545052371+(f[6]>>>0<c[6]>>>0?1:0)|0,this._b=f[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var _=d[g]+f[g],w=_&65535,x=_>>>16,y=((w*w>>>17)+w*x>>>15)+x*x,b=((_&4294901760)*_|0)+((_&65535)*_|0);l[g]=y^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(u)}(),n.RabbitLegacy})}(_0)),_0.exports}(function(t,e){(function(n,r,i){t.exports=r(Qe(),Rd(),Q5(),Y5(),ia(),X5(),sa(),S_(),nR(),J5(),rR(),Z5(),e9(),t9(),P_(),n9(),Ws(),un(),r9(),i9(),s9(),o9(),a9(),c9(),l9(),u9(),h9(),d9(),f9(),p9(),m9(),g9(),_9(),v9())})(Fe,function(n){return n})})(tR);var Gp=tR.exports;const y9={class:"qrcode"},w9=rr({__name:"QrCode",props:{codeString:{}},setup(t){const e=t,n=dt(null),r=getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-on-background"),i=getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-background"),s=()=>{const a=Math.floor(Math.random()*1e5).toString(),c=Gp.AES.encrypt(`${e.codeString}|${new Date().getTime()}`,a),l=btoa(`${a}|${c}`);z5(n.value,l,{color:{dark:r,light:i},scale:7})};let o;return Pm(()=>{s(),o=window.setInterval(s,1e3)}),$c(()=>{clearInterval(o)}),(a,c)=>(pt(),Pt("div",y9,[rt("canvas",{ref_key:"canvas",ref:n},null,512)]))}});const iR=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},b9=iR(w9,[["__scopeId","data-v-d8afc0af"]]),E9=(t,e)=>e.some(n=>t instanceof n);let ab,cb;function x9(){return ab||(ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T9(){return cb||(cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sR=new WeakMap,Qp=new WeakMap,oR=new WeakMap,v0=new WeakMap,k_=new WeakMap;function I9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Li(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sR.set(n,t)}).catch(()=>{}),k_.set(e,t),e}function C9(t){if(Qp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qp.set(t,e)}let Yp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function A9(t){Yp=t(Yp)}function R9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(y0(this),e,...n);return oR.set(r,e.sort?e.sort():[e]),Li(r)}:T9().includes(t)?function(...e){return t.apply(y0(this),e),Li(sR.get(this))}:function(...e){return Li(t.apply(y0(this),e))}}function S9(t){return typeof t=="function"?R9(t):(t instanceof IDBTransaction&&C9(t),E9(t,x9())?new Proxy(t,Yp):t)}function Li(t){if(t instanceof IDBRequest)return I9(t);if(v0.has(t))return v0.get(t);const e=S9(t);return e!==t&&(v0.set(t,e),k_.set(e,t)),e}const y0=t=>k_.get(t);function P9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Li(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Li(o.result),c.oldVersion,c.newVersion,Li(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const k9=["get","getKey","getAll","getAllKeys","count"],N9=["put","add","delete","clear"],w0=new Map;function lb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w0.get(e))return w0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=N9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||k9.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&c.done]))[0]};return w0.set(e,s),s}A9(t=>({...t,get:(e,n,r)=>lb(e,n)||t.get(e,n,r),has:(e,n)=>!!lb(e,n)||t.has(e,n)}));const aR="@firebase/installations",N_="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1e4,lR=`w:${N_}`,uR="FIS_v2",D9="https://firebaseinstallations.googleapis.com/v1",O9=60*60*1e3,M9="installations",L9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ns=new Wi(M9,L9,$9);function hR(t){return t instanceof ir&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR({projectId:t}){return`${D9}/projects/${t}/installations`}function fR(t){return{token:t.token,requestStatus:2,expiresIn:V9(t.expiresIn),creationTime:Date.now()}}async function pR(t,e){const r=(await e.json()).error;return Ns.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function mR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function F9(t,{refreshToken:e}){const n=mR(t);return n.append("Authorization",B9(e)),n}async function gR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function V9(t){return Number(t.replace("s","000"))}function B9(t){return`${uR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=dR(t),i=mR(t),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={fid:n,authVersion:uR,appId:t.appId,sdkVersion:lR},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await gR(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:fR(l.authToken)}}else throw await pR("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=/^[cdef][\w-]{21}$/,Xp="";function z9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=W9(t);return j9.test(n)?n:Xp}catch{return Xp}}function W9(t){return H9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new Map;function yR(t,e){const n=Sd(t);wR(n,e),q9(n,e)}function wR(t,e){const n=vR.get(t);if(n)for(const r of n)r(e)}function q9(t,e){const n=K9();n&&n.postMessage({key:t,fid:e}),G9()}let fs=null;function K9(){return!fs&&"BroadcastChannel"in self&&(fs=new BroadcastChannel("[Firebase] FID Change"),fs.onmessage=t=>{wR(t.data.key,t.data.fid)}),fs}function G9(){vR.size===0&&fs&&(fs.close(),fs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="firebase-installations-database",Y9=1,Ds="firebase-installations-store";let b0=null;function D_(){return b0||(b0=P9(Q9,Y9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ds)}}})),b0}async function uh(t,e){const n=Sd(t),i=(await D_()).transaction(Ds,"readwrite"),s=i.objectStore(Ds),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&yR(t,e.fid),e}async function bR(t){const e=Sd(t),r=(await D_()).transaction(Ds,"readwrite");await r.objectStore(Ds).delete(e),await r.done}async function Pd(t,e){const n=Sd(t),i=(await D_()).transaction(Ds,"readwrite"),s=i.objectStore(Ds),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&yR(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O_(t){let e;const n=await Pd(t.appConfig,r=>{const i=X9(r),s=J9(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Xp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function X9(t){const e=t||{fid:z9(),registrationStatus:0};return ER(e)}function J9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ns.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Z9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eH(t)}:{installationEntry:e}}async function Z9(t,e){try{const n=await U9(t,e);return uh(t.appConfig,n)}catch(n){throw hR(n)&&n.customData.serverCode===409?await bR(t.appConfig):await uh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function eH(t){let e=await ub(t.appConfig);for(;e.registrationStatus===1;)await _R(100),e=await ub(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await O_(t);return r||n}return e}function ub(t){return Pd(t,e=>{if(!e)throw Ns.create("installation-not-found");return ER(e)})}function ER(t){return tH(t)?{fid:t.fid,registrationStatus:0}:t}function tH(t){return t.registrationStatus===1&&t.registrationTime+cR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nH({appConfig:t,heartbeatServiceProvider:e},n){const r=rH(t,n),i=F9(t,n),s=e.getImmediate({optional:!0});if(s){const l=await s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const o={installation:{sdkVersion:lR,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await gR(()=>fetch(r,a));if(c.ok){const l=await c.json();return fR(l)}else throw await pR("Generate Auth Token",c)}function rH(t,{fid:e}){return`${dR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(t,e=!1){let n;const r=await Pd(t.appConfig,s=>{if(!xR(s))throw Ns.create("not-registered");const o=s.authToken;if(!e&&oH(o))return s;if(o.requestStatus===1)return n=iH(t,e),s;{if(!navigator.onLine)throw Ns.create("app-offline");const a=cH(s);return n=sH(t,a),a}});return n?await n:r.authToken}async function iH(t,e){let n=await hb(t.appConfig);for(;n.authToken.requestStatus===1;)await _R(100),n=await hb(t.appConfig);const r=n.authToken;return r.requestStatus===0?M_(t,e):r}function hb(t){return Pd(t,e=>{if(!xR(e))throw Ns.create("not-registered");const n=e.authToken;return lH(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function sH(t,e){try{const n=await nH(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await uh(t.appConfig,r),n}catch(n){if(hR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await bR(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await uh(t.appConfig,r)}throw n}}function xR(t){return t!==void 0&&t.registrationStatus===2}function oH(t){return t.requestStatus===2&&!aH(t)}function aH(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+O9}function cH(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function lH(t){return t.requestStatus===1&&t.requestTime+cR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uH(t){const e=t,{installationEntry:n,registrationPromise:r}=await O_(e);return r?r.catch(console.error):M_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hH(t,e=!1){const n=t;return await dH(n),(await M_(n,e)).token}async function dH(t){const{registrationPromise:e}=await O_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t){if(!t||!t.options)throw E0("App Configuration");if(!t.name)throw E0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw E0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function E0(t){return Ns.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="installations",pH="installations-internal",mH=t=>{const e=t.getProvider("app").getImmediate(),n=fH(e),r=$s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},gH=t=>{const e=t.getProvider("app").getImmediate(),n=$s(e,TR).getImmediate();return{getId:()=>uH(n),getToken:i=>hH(n,i)}};function _H(){Vn(new kn(TR,mH,"PUBLIC")),Vn(new kn(pH,gH,"PRIVATE"))}_H();cn(aR,N_);cn(aR,N_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="analytics",vH="firebase_id",yH="origin",wH=60*1e3,bH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",L_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new Go("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kn=new Wi("analytics","Analytics",EH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t){if(!t.startsWith(L_)){const e=Kn.create("invalid-gtag-resource",{gtagURL:t});return $n.warn(e.message),""}return t}function IR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function TH(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function IH(t,e){const n=TH("firebase-js-sdk-policy",{createScriptURL:xH}),r=document.createElement("script"),i=`${L_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function CH(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function AH(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await IR(n)).find(l=>l.measurementId===i);c&&await e[c.appId]}}catch(a){$n.error(a)}t("config",i,s)}async function RH(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await IR(n);for(const c of o){const l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){$n.error(s)}}function SH(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await RH(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await AH(t,e,n,r,a,c)}else if(s==="consent"){const[a]=o;t("consent","update",a)}else if(s==="get"){const[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){$n.error(a)}}return i}function PH(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=SH(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function kH(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(L_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=30,DH=1e3;class OH{constructor(e={},n=DH){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const CR=new OH;function MH(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function LH(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:MH(r)},s=bH.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Kn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function $H(t,e=CR,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Kn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Kn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new BH;return setTimeout(async()=>{a.abort()},n!==void 0?n:wH),AR({appId:r,apiKey:i,measurementId:s},o,a,e)}async function AR(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=CR){var s;const{appId:o,measurementId:a}=t;try{await FH(r,e)}catch(c){if(a)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await LH(t);return i.deleteThrottleMetadata(o),c}catch(c){const l=c;if(!VH(l)){if(i.deleteThrottleMetadata(o),a)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw c}const u=Number((s=l==null?void 0:l.customData)===null||s===void 0?void 0:s.httpStatus)===503?hy(n,i.intervalMillis,NH):hy(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,h),$n.debug(`Calling attemptFetch again in ${u} millis`),AR(t,h,r,i)}}function FH(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function VH(t){if(!(t instanceof ir)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class BH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function UH(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HH(){if(Vm())try{await ux()}catch(t){return $n.warn(Kn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $n.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jH(t,e,n,r,i,s,o){var a;const c=$H(t);c.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>$n.error(f)),e.push(c);const l=HH().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([c,l]);kH(s)||IH(s,u.measurementId),i("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[yH]="firebase",d.update=!0,h!=null&&(d[vH]=h),i("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e){this.app=e}_delete(){return delete Za[this.app.options.appId],Promise.resolve()}}let Za={},db=[];const fb={};let x0="dataLayer",WH="gtag",pb,RR,mb=!1;function qH(){const t=[];if(ax()&&t.push("This is a browser extension environment."),hO()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Kn.create("invalid-analytics-context",{errorInfo:e});$n.warn(n.message)}}function KH(t,e,n){qH();const r=t.options.appId;if(!r)throw Kn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kn.create("no-api-key");if(Za[r]!=null)throw Kn.create("already-exists",{id:r});if(!mb){CH(x0);const{wrappedGtag:s,gtagCore:o}=PH(Za,db,fb,x0,WH);RR=s,pb=o,mb=!0}return Za[r]=jH(t,db,fb,e,pb,x0,n),new zH(t)}function GH(t=Oh()){t=Ct(t);const e=$s(t,hh);return e.isInitialized()?e.getImmediate():QH(t)}function QH(t,e={}){const n=$s(t,hh);if(n.isInitialized()){const i=n.getImmediate();if(lc(e,n.getOptions()))return i;throw Kn.create("already-initialized")}return n.initialize({options:e})}function YH(t,e,n,r){t=Ct(t),UH(RR,Za[t.app.options.appId],e,n,r).catch(i=>$n.error(i))}const gb="@firebase/analytics",_b="0.10.0";function XH(){Vn(new kn(hh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return KH(r,i,n)},"PUBLIC")),Vn(new kn("analytics-internal",t,"PRIVATE")),cn(gb,_b),cn(gb,_b,"esm2017");function t(e){try{const n=e.getProvider(hh).getImmediate();return{logEvent:(r,i,s)=>YH(n,r,i,s)}}catch(n){throw Kn.create("interop-component-reg-failed",{reason:n})}}}XH();const JH={apiKey:"AIzaSyBBi5IzyoAfCGZPdIjY_Unn13awXzMY3QQ",authDomain:"presenzapp.firebaseapp.com",projectId:"presenzapp",storageBucket:"presenzapp.appspot.com",messagingSenderId:"121965141290",appId:"1:121965141290:web:5bda310c5531b4849b9253",measurementId:"G-X4JEPSW9DH"},$_=px(JH),dr=eU($_);GH($_);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xr=t=>e=>typeof e=="function"?((n,r)=>(customElements.define(n,r),r))(t,e):((n,r)=>{const{kind:i,elements:s}=r;return{kind:i,elements:s,finisher(o){customElements.define(n,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ZH=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}},ej=(t,e,n)=>{e.constructor.createProperty(n,t)};function He(t){return(e,n)=>n!==void 0?ej(t,e,n):ZH(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ji(t){return He({...t,state:!0})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const SR=({finisher:t,descriptor:e})=>(n,r)=>{var i;if(r===void 0){const s=(i=n.originalKey)!==null&&i!==void 0?i:n.key,o=e!=null?{kind:"method",placement:"prototype",key:s,descriptor:e(n.key)}:{...n,key:s};return t!=null&&(o.finisher=function(a){t(a,s)}),o}{const s=n.constructor;e!==void 0&&Object.defineProperty(n,r,e(r)),t==null||t(s,r)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function sr(t,e){return SR({descriptor:n=>{const r={get(){var i,s;return(s=(i=this.renderRoot)===null||i===void 0?void 0:i.querySelector(t))!==null&&s!==void 0?s:null},enumerable:!0,configurable:!0};if(e){const i=typeof n=="symbol"?Symbol():"__"+n;r.get=function(){var s,o;return this[i]===void 0&&(this[i]=(o=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(t))!==null&&o!==void 0?o:null),this[i]}}return r}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var T0;const tj=((T0=window.HTMLSlotElement)===null||T0===void 0?void 0:T0.prototype.assignedElements)!=null?(t,e)=>t.assignedElements(e):(t,e)=>t.assignedNodes(e).filter(n=>n.nodeType===Node.ELEMENT_NODE);function nj(t){const{slot:e,selector:n}=t??{};return SR({descriptor:r=>({get(){var i;const s="slot"+(e?`[name=${e}]`:":not([name])"),o=(i=this.renderRoot)===null||i===void 0?void 0:i.querySelector(s),a=o!=null?tj(o,t):[];return n?a.filter(c=>c.matches(n)):a},enumerable:!0,configurable:!0})})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const uu=window,F_=uu.ShadowRoot&&(uu.ShadyCSS===void 0||uu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,V_=Symbol(),vb=new WeakMap;let PR=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==V_)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(F_&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=vb.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&vb.set(n,e))}return e}toString(){return this.cssText}};const rj=t=>new PR(typeof t=="string"?t:t+"",void 0,V_),On=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new PR(n,t,V_)},ij=(t,e)=>{F_?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=uu.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},yb=F_?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return rj(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var I0;const dh=window,wb=dh.trustedTypes,sj=wb?wb.emptyScript:"",bb=dh.reactiveElementPolyfillSupport,Jp={toAttribute(t,e){switch(e){case Boolean:t=t?sj:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},kR=(t,e)=>e!==t&&(e==e||t==t),C0={attribute:!0,type:String,converter:Jp,reflect:!1,hasChanged:kR},Zp="finalized";let to=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=C0){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const s=this[e];this[n]=i,this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||C0}static finalize(){if(this.hasOwnProperty(Zp))return!1;this[Zp]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(yb(i))}else e!==void 0&&n.push(yb(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return ij(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=C0){var i;const s=this.constructor._$Ep(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:Jp).toAttribute(n,r.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?o.converter:Jp;this._$El=s,this[s]=a.fromAttribute(n,o.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||kR)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};to[Zp]=!0,to.elementProperties=new Map,to.elementStyles=[],to.shadowRootOptions={mode:"open"},bb==null||bb({ReactiveElement:to}),((I0=dh.reactiveElementVersions)!==null&&I0!==void 0?I0:dh.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var A0;const fh=window,Bo=fh.trustedTypes,Eb=Bo?Bo.createPolicy("lit-html",{createHTML:t=>t}):void 0,em="$lit$",Ii=`lit$${(Math.random()+"").slice(9)}$`,NR="?"+Ii,oj=`<${NR}>`,Os=document,Nc=()=>Os.createComment(""),Dc=t=>t===null||typeof t!="object"&&typeof t!="function",DR=Array.isArray,aj=t=>DR(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",R0=`[ 	
\f\r]`,Ta=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,xb=/-->/g,Tb=/>/g,ns=RegExp(`>|${R0}(?:([^\\s"'>=/]+)(${R0}*=${R0}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ib=/'/g,Cb=/"/g,OR=/^(?:script|style|textarea|title)$/i,cj=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),vt=cj(1),Ms=Symbol.for("lit-noChange"),Me=Symbol.for("lit-nothing"),Ab=new WeakMap,ps=Os.createTreeWalker(Os,129,null,!1);function MR(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Eb!==void 0?Eb.createHTML(e):e}const lj=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":"",o=Ta;for(let a=0;a<n;a++){const c=t[a];let l,u,h=-1,d=0;for(;d<c.length&&(o.lastIndex=d,u=o.exec(c),u!==null);)d=o.lastIndex,o===Ta?u[1]==="!--"?o=xb:u[1]!==void 0?o=Tb:u[2]!==void 0?(OR.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=ns):u[3]!==void 0&&(o=ns):o===ns?u[0]===">"?(o=i??Ta,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?ns:u[3]==='"'?Cb:Ib):o===Cb||o===Ib?o=ns:o===xb||o===Tb?o=Ta:(o=ns,i=void 0);const f=o===ns&&t[a+1].startsWith("/>")?" ":"";s+=o===Ta?c+oj:h>=0?(r.push(l),c.slice(0,h)+em+c.slice(h)+Ii+f):c+Ii+(h===-2?(r.push(void 0),a):f)}return[MR(t,s+(t[n]||"<?>")+(e===2?"</svg>":"")),r]};class Oc{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=lj(e,n);if(this.el=Oc.createElement(l,r),ps.currentNode=this.el.content,n===2){const h=this.el.content,d=h.firstChild;d.remove(),h.append(...d.childNodes)}for(;(i=ps.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const h=[];for(const d of i.getAttributeNames())if(d.endsWith(em)||d.startsWith(Ii)){const f=u[o++];if(h.push(d),f!==void 0){const g=i.getAttribute(f.toLowerCase()+em).split(Ii),_=/([.?@])?(.*)/.exec(f);c.push({type:1,index:s,name:_[2],strings:g,ctor:_[1]==="."?hj:_[1]==="?"?fj:_[1]==="@"?pj:kd})}else c.push({type:6,index:s})}for(const d of h)i.removeAttribute(d)}if(OR.test(i.tagName)){const h=i.textContent.split(Ii),d=h.length-1;if(d>0){i.textContent=Bo?Bo.emptyScript:"";for(let f=0;f<d;f++)i.append(h[f],Nc()),ps.nextNode(),c.push({type:2,index:++s});i.append(h[d],Nc())}}}else if(i.nodeType===8)if(i.data===NR)c.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Ii,h+1))!==-1;)c.push({type:7,index:s}),h+=Ii.length-1}s++}}static createElement(e,n){const r=Os.createElement("template");return r.innerHTML=e,r}}function Uo(t,e,n=t,r){var i,s,o,a;if(e===Ms)return e;let c=r!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[r]:n._$Cl;const l=Dc(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==l&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,n,r)),r!==void 0?((o=(a=n)._$Co)!==null&&o!==void 0?o:a._$Co=[])[r]=c:n._$Cl=c),c!==void 0&&(e=Uo(t,c._$AS(t,e.values),c,r)),e}class uj{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var n;const{el:{content:r},parts:i}=this._$AD,s=((n=e==null?void 0:e.creationScope)!==null&&n!==void 0?n:Os).importNode(r,!0);ps.currentNode=s;let o=ps.nextNode(),a=0,c=0,l=i[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new dl(o,o.nextSibling,this,e):l.type===1?u=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(u=new mj(o,this,e)),this._$AV.push(u),l=i[++c]}a!==(l==null?void 0:l.index)&&(o=ps.nextNode(),a++)}return ps.currentNode=Os,s}v(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class dl{constructor(e,n,r,i){var s;this.type=2,this._$AH=Me,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Uo(this,e,n),Dc(e)?e===Me||e==null||e===""?(this._$AH!==Me&&this._$AR(),this._$AH=Me):e!==this._$AH&&e!==Ms&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):aj(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Me&&Dc(this._$AH)?this._$AA.nextSibling.data=e:this.$(Os.createTextNode(e)),this._$AH=e}g(e){var n;const{values:r,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Oc.createElement(MR(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.v(r);else{const o=new uj(s,this),a=o.u(this.options);o.v(r),this.$(a),this._$AH=o}}_$AC(e){let n=Ab.get(e.strings);return n===void 0&&Ab.set(e.strings,n=new Oc(e)),n}T(e){DR(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new dl(this.k(Nc()),this.k(Nc()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cp=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class kd{constructor(e,n,r,i,s){this.type=1,this._$AH=Me,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Me}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=Uo(this,e,n,0),o=!Dc(e)||e!==this._$AH&&e!==Ms,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Uo(this,a[r+c],n,c),l===Ms&&(l=this._$AH[c]),o||(o=!Dc(l)||l!==this._$AH[c]),l===Me?e=Me:e!==Me&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Me?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class hj extends kd{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Me?void 0:e}}const dj=Bo?Bo.emptyScript:"";class fj extends kd{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Me?this.element.setAttribute(this.name,dj):this.element.removeAttribute(this.name)}}class pj extends kd{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){var r;if((e=(r=Uo(this,e,n,0))!==null&&r!==void 0?r:Me)===Ms)return;const i=this._$AH,s=e===Me&&i!==Me||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==Me&&(i===Me||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class mj{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Uo(this,e)}}const Rb=fh.litHtmlPolyfillSupport;Rb==null||Rb(Oc,dl),((A0=fh.litHtmlVersions)!==null&&A0!==void 0?A0:fh.litHtmlVersions=[]).push("2.8.0");const gj=(t,e,n)=>{var r,i;const s=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:e;let o=s._$litPart$;if(o===void 0){const a=(i=n==null?void 0:n.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new dl(e.insertBefore(Nc(),a),a,void 0,n??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var S0,P0;let Pn=class extends to{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=gj(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Ms}};Pn.finalized=!0,Pn._$litElement$=!0,(S0=globalThis.litElementHydrateSupport)===null||S0===void 0||S0.call(globalThis,{LitElement:Pn});const Sb=globalThis.litElementPolyfillSupport;Sb==null||Sb({LitElement:Pn});((P0=globalThis.litElementVersions)!==null&&P0!==void 0?P0:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _j extends Pn{render(){return vt`<span class="shadow"></span>`}}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const vj=On`:host{--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000));display:flex;pointer-events:none}:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}/*# sourceMappingURL=elevation-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let tm=class extends _j{};tm.styles=[vj];tm=fe([xr("md-elevation")],tm);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LR=Symbol("attachableController");let hu;hu=new MutationObserver(t=>{var e;for(const n of t)(e=n.target[LR])==null||e.hostConnected()});class $R{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(e){e===null?this.host.removeAttribute("for"):this.host.setAttribute("for",e)}get control(){return this.host.hasAttribute("for")?!this.htmlFor||!this.host.isConnected?null:this.host.getRootNode().querySelector(`#${this.htmlFor}`):this.currentControl||this.host.parentElement}constructor(e,n){this.host=e,this.onControlChange=n,this.currentControl=null,e.addController(this),e[LR]=this,hu==null||hu.observe(e,{attributeFilter:["for"]})}attach(e){e!==this.currentControl&&(this.setCurrentControl(e),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(e){this.onControlChange(this.currentControl,e),this.currentControl=e}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yj=["focusin","focusout","pointerdown"];class B_ extends Pn{constructor(){super(...arguments),this.visible=!1,this.inward=!1,this.attachableController=new $R(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}handleEvent(e){var n;if(!e[Pb]){switch(e.type){default:return;case"focusin":this.visible=((n=this.control)==null?void 0:n.matches(":focus-visible"))??!1;break;case"focusout":case"pointerdown":this.visible=!1;break}e[Pb]=!0}}onControlChange(e,n){for(const r of yj)e==null||e.removeEventListener(r,this),n==null||n.addEventListener(r,this)}update(e){e.has("visible")&&this.dispatchEvent(new Event("visibility-changed")),super.update(e)}}fe([He({type:Boolean,reflect:!0})],B_.prototype,"visible",void 0);fe([He({type:Boolean,reflect:!0})],B_.prototype,"inward",void 0);const Pb=Symbol("handledByFocusRing");/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const wj=On`:host{animation-delay:0s,calc(var(--md-focus-ring-duration, 600ms)*.25);animation-duration:calc(var(--md-focus-ring-duration, 600ms)*.25),calc(var(--md-focus-ring-duration, 600ms)*.75);animation-timing-function:cubic-bezier(0.2, 0, 0, 1);box-sizing:border-box;color:var(--md-focus-ring-color, var(--md-sys-color-secondary, #625b71));display:none;pointer-events:none;position:absolute}:host([visible]){display:flex}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, 9999px)) + var(--md-focus-ring-outward-offset, 2px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, 9999px)) + var(--md-focus-ring-outward-offset, 2px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, 9999px)) + var(--md-focus-ring-outward-offset, 2px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, 9999px)) + var(--md-focus-ring-outward-offset, 2px));inset:calc(-1*var(--md-focus-ring-outward-offset, 2px));outline:var(--md-focus-ring-width, 3px) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, 9999px)) - var(--md-focus-ring-inward-offset, 0px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, 9999px)) - var(--md-focus-ring-inward-offset, 0px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, 9999px)) - var(--md-focus-ring-inward-offset, 0px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, 9999px)) - var(--md-focus-ring-inward-offset, 0px));border:var(--md-focus-ring-width, 3px) solid currentColor;inset:var(--md-focus-ring-inward-offset, 0px)}@keyframes outward-grow{from{outline-width:0}to{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes outward-shrink{from{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-grow{from{border-width:0}to{border-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-shrink{from{border-width:var(--md-focus-ring-active-width, 8px)}}@media(prefers-reduced-motion){:host{animation:none}}/*# sourceMappingURL=focus-ring-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nm=class extends B_{};nm.styles=[wj];nm=fe([xr("md-focus-ring")],nm);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bj={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ej=t=>(...e)=>({_$litDirective$:t,values:e});let xj=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ls=Ej(class extends xj{constructor(t){var e;if(super(t),t.type!==bj.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var n,r;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((n=this.nt)===null||n===void 0)&&n.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((r=this.nt)===null||r===void 0)&&r.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return Ms}});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mc={STANDARD:"cubic-bezier(0.2, 0, 0, 1)",STANDARD_ACCELERATE:"cubic-bezier(.3,0,1,1)",STANDARD_DECELERATE:"cubic-bezier(0,0,0,1)",EMPHASIZED:"cubic-bezier(.3,0,0,1)",EMPHASIZED_ACCELERATE:"cubic-bezier(.3,0,.8,.15)",EMPHASIZED_DECELERATE:"cubic-bezier(.05,.7,.1,1)"};/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tj=450,kb=225,Ij=.2,Cj=10,Aj=75,Rj=.35,Sj="::after",Pj="forwards";var Cn;(function(t){t[t.INACTIVE=0]="INACTIVE",t[t.TOUCH_DELAY=1]="TOUCH_DELAY",t[t.HOLDING=2]="HOLDING",t[t.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"})(Cn||(Cn={}));const kj=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],Nj=150;class fl extends Pn{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=Cn.INACTIVE,this.checkBoundsAfterContextMenu=!1,this.attachableController=new $R(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}render(){const e={hovered:this.hovered,pressed:this.pressed};return vt`<div class="surface ${Ls(e)}"></div>`}update(e){e.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(e)}handlePointerenter(e){this.shouldReactToEvent(e)&&(this.hovered=!0)}handlePointerleave(e){this.shouldReactToEvent(e)&&(this.hovered=!1,this.state!==Cn.INACTIVE&&this.endPressAnimation())}handlePointerup(e){if(this.shouldReactToEvent(e)){if(this.state===Cn.HOLDING){this.state=Cn.WAITING_FOR_CLICK;return}if(this.state===Cn.TOUCH_DELAY){this.state=Cn.WAITING_FOR_CLICK,this.startPressAnimation(this.rippleStartEvent);return}}}async handlePointerdown(e){if(this.shouldReactToEvent(e)){if(this.rippleStartEvent=e,!this.isTouch(e)){this.state=Cn.WAITING_FOR_CLICK,this.startPressAnimation(e);return}this.checkBoundsAfterContextMenu&&!this.inBounds(e)||(this.checkBoundsAfterContextMenu=!1,this.state=Cn.TOUCH_DELAY,await new Promise(n=>{setTimeout(n,Nj)}),this.state===Cn.TOUCH_DELAY&&(this.state=Cn.HOLDING,this.startPressAnimation(e)))}}handleClick(){if(!this.disabled){if(this.state===Cn.WAITING_FOR_CLICK){this.endPressAnimation();return}this.state===Cn.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation())}}handlePointercancel(e){this.shouldReactToEvent(e)&&this.endPressAnimation()}handleContextmenu(){this.disabled||(this.checkBoundsAfterContextMenu=!0,this.endPressAnimation())}determineRippleSize(){const{height:e,width:n}=this.getBoundingClientRect(),r=Math.max(e,n),i=Math.max(Rj*r,Aj),s=Math.floor(r*Ij),a=Math.sqrt(n**2+e**2)+Cj;this.initialSize=s,this.rippleScale=`${(a+i)/s}`,this.rippleSize=`${s}px`}getNormalizedPointerEventCoords(e){const{scrollX:n,scrollY:r}=window,{left:i,top:s}=this.getBoundingClientRect(),o=n+i,a=r+s,{pageX:c,pageY:l}=e;return{x:c-o,y:l-a}}getTranslationCoordinates(e){const{height:n,width:r}=this.getBoundingClientRect(),i={x:(r-this.initialSize)/2,y:(n-this.initialSize)/2};let s;return e instanceof PointerEvent?s=this.getNormalizedPointerEventCoords(e):s={x:r/2,y:n/2},s={x:s.x-this.initialSize/2,y:s.y-this.initialSize/2},{startPoint:s,endPoint:i}}startPressAnimation(e){var o;if(!this.mdRoot)return;this.pressed=!0,(o=this.growAnimation)==null||o.cancel(),this.determineRippleSize();const{startPoint:n,endPoint:r}=this.getTranslationCoordinates(e),i=`${n.x}px, ${n.y}px`,s=`${r.x}px, ${r.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${i}) scale(1)`,`translate(${s}) scale(${this.rippleScale})`]},{pseudoElement:Sj,duration:Tj,easing:Mc.STANDARD,fill:Pj})}async endPressAnimation(){this.state=Cn.INACTIVE;const e=this.growAnimation,n=(e==null?void 0:e.currentTime)??1/0;if(n>=kb){this.pressed=!1;return}await new Promise(r=>{setTimeout(r,kb-n)}),this.growAnimation===e&&(this.pressed=!1)}shouldReactToEvent(e){if(this.disabled||!e.isPrimary||this.rippleStartEvent&&this.rippleStartEvent.pointerId!==e.pointerId)return!1;if(e.type==="pointerenter"||e.type==="pointerleave")return!this.isTouch(e);const n=e.buttons===1;return this.isTouch(e)||n}inBounds({x:e,y:n}){const{top:r,left:i,bottom:s,right:o}=this.getBoundingClientRect();return e>=i&&e<=o&&n>=r&&n<=s}isTouch({pointerType:e}){return e==="touch"}async handleEvent(e){switch(e.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(e);break;case"pointerdown":await this.handlePointerdown(e);break;case"pointerenter":this.handlePointerenter(e);break;case"pointerleave":this.handlePointerleave(e);break;case"pointerup":this.handlePointerup(e);break}}onControlChange(e,n){for(const r of kj)e==null||e.removeEventListener(r,this),n==null||n.addEventListener(r,this)}}fe([He({type:Boolean,reflect:!0})],fl.prototype,"disabled",void 0);fe([Ji()],fl.prototype,"hovered",void 0);fe([Ji()],fl.prototype,"pressed",void 0);fe([sr(".surface")],fl.prototype,"mdRoot",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const Dj=On`:host{--_hover-color: var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-opacity: var(--md-ripple-hover-opacity, 0.08);--_pressed-color: var(--md-ripple-pressed-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-opacity: var(--md-ripple-pressed-opacity, 0.12);display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors: active){:host{display:none}}:host,.surface{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:rgba(0,0,0,0)}.surface::before,.surface::after{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--_hover-color);inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side, var(--_pressed-color) max(100% - 70px, 65%), transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--_hover-color);opacity:var(--_hover-opacity)}.pressed::after{opacity:var(--_pressed-opacity);transition-duration:105ms}/*# sourceMappingURL=ripple-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rm=class extends fl{};rm.styles=[Dj];rm=fe([xr("md-ripple")],rm);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const FR=Symbol.for(""),Oj=t=>{if((t==null?void 0:t.r)===FR)return t==null?void 0:t._$litStatic$},ph=(t,...e)=>({_$litStatic$:e.reduce((n,r,i)=>n+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[i+1],t[0]),r:FR}),Nb=new Map,Mj=t=>(e,...n)=>{const r=n.length;let i,s;const o=[],a=[];let c,l=0,u=!1;for(;l<r;){for(c=e[l];l<r&&(s=n[l],(i=Oj(s))!==void 0);)c+=i+e[++l],u=!0;l!==r&&a.push(s),o.push(c),l++}if(l===r&&o.push(e[r]),u){const h=o.join("$$lit$$");(e=Nb.get(h))===void 0&&(o.raw=o,Nb.set(h,e=o)),n=a}return t(e,...n)},VR=Mj(vt);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BR=["ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText"];BR.map(UR);function UR(t){return t.replace("aria","aria-").replace(/Elements?/g,"").toLowerCase()}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pl(t){for(const e of BR)t.createProperty(e,{attribute:UR(e),reflect:!0});t.addInitializer(e=>{const n={hostConnected(){e.setAttribute("role","presentation")}};e.addController(n)})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ho=Symbol("internals");/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lj(t,e){e.bubbles&&(!t.shadowRoot||e.composed)&&e.stopPropagation();const n=Reflect.construct(e.constructor,[e.type,e]),r=t.dispatchEvent(n);return r||e.preventDefault(),r}function HR(t){const e=new MouseEvent("click",{bubbles:!0});return t.dispatchEvent(e),e}function jR(t){return t.currentTarget!==t.target||t.composedPath()[0]!==t.target||t.target.disabled?!1:!$j(t)}function $j(t){const e=im;return e&&(t.preventDefault(),t.stopImmediatePropagation()),Fj(),e}let im=!1;async function Fj(){im=!0,await null,im=!1}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zR(t){t.addInitializer(e=>{const n=e;n.addEventListener("click",async r=>{const{type:i,[Ho]:s}=n,{form:o}=s;if(!(!o||i==="button")&&(await new Promise(a=>{a()}),!r.defaultPrevented)){if(i==="reset"){o.reset();return}o.addEventListener("submit",a=>{Object.defineProperty(a,"submitter",{configurable:!0,enumerable:!0,get:()=>n})},{capture:!0,once:!0}),s.setFormValue(n.value),o.requestSubmit()}})})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var WR;class Nn extends Pn{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Ho].form}constructor(){super(),this.disabled=!1,this.href="",this.target="",this.trailingIcon=!1,this.hasIcon=!1,this.type="submit",this.value="",this[WR]=this.attachInternals(),this.handleActivationClick=e=>{!jR(e)||!this.buttonElement||(this.focus(),HR(this.buttonElement))},this.addEventListener("click",this.handleActivationClick)}focus(){var e;(e=this.buttonElement)==null||e.focus()}blur(){var e;(e=this.buttonElement)==null||e.blur()}render(){const e=this.disabled&&!this.href,n=this.href?ph`a`:ph`button`,{ariaLabel:r,ariaHasPopup:i,ariaExpanded:s}=this;return VR`
      <${n}
        class="button ${Ls(this.getRenderClasses())}"
        ?disabled=${e}
        aria-label="${r||Me}"
        aria-haspopup="${i||Me}"
        aria-expanded="${s||Me}"
        href=${this.href||Me}
        target=${this.target||Me}
      >${this.renderContent()}</${n}>`}getRenderClasses(){return{"button--icon-leading":!this.trailingIcon&&this.hasIcon,"button--icon-trailing":this.trailingIcon&&this.hasIcon}}renderContent(){var r,i;const e=this.disabled&&!this.href,n=vt`<slot name="icon" @slotchange="${this.handleSlotChange}"></slot>`;return vt`
      ${(r=this.renderElevation)==null?void 0:r.call(this)}
      ${(i=this.renderOutline)==null?void 0:i.call(this)}
      <md-focus-ring part="focus-ring"></md-focus-ring>
      <md-ripple class="button__ripple" ?disabled="${e}"></md-ripple>
      <span class="touch"></span>
      ${this.trailingIcon?Me:n}
      <span class="button__label"><slot></slot></span>
      ${this.trailingIcon?n:Me}
    `}handleSlotChange(){this.hasIcon=this.assignedIcons.length>0}}WR=Ho;pl(Nn),zR(Nn);Nn.formAssociated=!0;Nn.shadowRootOptions={mode:"open",delegatesFocus:!0};fe([He({type:Boolean,reflect:!0})],Nn.prototype,"disabled",void 0);fe([He()],Nn.prototype,"href",void 0);fe([He()],Nn.prototype,"target",void 0);fe([He({type:Boolean,attribute:"trailing-icon"})],Nn.prototype,"trailingIcon",void 0);fe([He({type:Boolean,attribute:"has-icon"})],Nn.prototype,"hasIcon",void 0);fe([He()],Nn.prototype,"type",void 0);fe([He()],Nn.prototype,"value",void 0);fe([sr(".button")],Nn.prototype,"buttonElement",void 0);fe([nj({slot:"icon",flatten:!0})],Nn.prototype,"assignedIcons",void 0);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vj extends Nn{renderElevation(){return vt`<md-elevation></md-elevation>`}}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const Bj=On`:host{--_container-color: var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation: var(--md-filled-tonal-button-container-elevation, 0);--_container-height: var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color: var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_container-shape: var(--md-filled-tonal-button-container-shape, 9999px);--_disabled-container-color: var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation: var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color: var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity: var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-type: var(--md-filled-tonal-button-label-text-type, var(--md-sys-typescale-label-large, 500 0.875rem / 1.25rem var(--md-ref-typeface-plain, Roboto)));--_pressed-container-elevation: var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color: var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity: var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color: var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color: var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size: var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_leading-space: var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space: var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px);--_container-shape-start-start: var( --md-filled-tonal-button-container-shape-start-start, var(--_container-shape) );--_container-shape-start-end: var( --md-filled-tonal-button-container-shape-start-end, var(--_container-shape) );--_container-shape-end-end: var( --md-filled-tonal-button-container-shape-end-end, var(--_container-shape) );--_container-shape-end-start: var( --md-filled-tonal-button-container-shape-end-start, var(--_container-shape) )}/*# sourceMappingURL=filled-tonal-styles.css.map */
`;/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const Uj=On`md-elevation{transition-duration:280ms}.button{--md-elevation-level: var(--_container-elevation);--md-elevation-shadow-color: var(--_container-shadow-color)}.button:focus{--md-elevation-level: var(--_focus-container-elevation)}.button:hover{--md-elevation-level: var(--_hover-container-elevation)}.button:active{--md-elevation-level: var(--_pressed-container-elevation)}.button:disabled{--md-elevation-level: var(--_disabled-container-elevation)}/*# sourceMappingURL=shared-elevation-styles.css.map */
`;/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const qR=On`:host{display:inline-flex;height:var(--_container-height);outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);vertical-align:top;--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) 0}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){cursor:default;pointer-events:none}.button{display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-inline-size:64px;border:none;outline:none;user-select:none;-webkit-appearance:none;vertical-align:middle;background:rgba(0,0,0,0);text-decoration:none;inline-size:100%;position:relative;z-index:0;height:100%;font:var(--_label-text-type);color:var(--_label-text-color);padding-inline-start:var(--_leading-space);padding-inline-end:var(--_trailing-space);gap:8px}.button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute}.button::-moz-focus-inner{padding:0;border:0}.button:hover{color:var(--_hover-label-text-color);cursor:pointer}.button:focus{color:var(--_focus-label-text-color)}.button:active{color:var(--_pressed-label-text-color);outline:none}.button:disabled .button__label{color:var(--_disabled-label-text-color);opacity:var(--_disabled-label-text-opacity)}.button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}@media(forced-colors: active){.button::before{content:"";box-sizing:border-box;border:1px solid CanvasText;border-radius:inherit;inset:0;pointer-events:none;position:absolute}.button:disabled{--_disabled-icon-opacity: 1;--_disabled-container-opacity: 1;--_disabled-label-text-opacity: 1}}.button,.button__ripple{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.button::after,.button::before,md-elevation,.button__ripple{z-index:-1}.button--icon-leading{padding-inline-start:var(--_with-leading-icon-leading-space);padding-inline-end:var(--_with-leading-icon-trailing-space)}.button--icon-trailing{padding-inline-start:var(--_with-trailing-icon-leading-space);padding-inline-end:var(--_with-trailing-icon-trailing-space)}.link-button-wrapper{inline-size:100%}.button ::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;color:var(--_icon-color);font-size:var(--_icon-size);inline-size:var(--_icon-size);block-size:var(--_icon-size)}.button:hover ::slotted([slot=icon]){color:var(--_hover-icon-color)}.button:focus ::slotted([slot=icon]){color:var(--_focus-icon-color)}.button:active ::slotted([slot=icon]){color:var(--_pressed-icon-color)}.button:disabled ::slotted([slot=icon]){color:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}:host([touch-target=none]) .touch{display:none}/*# sourceMappingURL=shared-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sm=class extends Vj{};sm.styles=[qR,Uj,Bj];sm=fe([xr("md-filled-tonal-button")],sm);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oa extends Pn{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return vt`
      <div class="progress ${Ls(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${e||Me}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?Me:this.value}
      >${this.renderIndicator()}</div>
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}pl(oa);fe([He({type:Number})],oa.prototype,"value",void 0);fe([He({type:Number})],oa.prototype,"max",void 0);fe([He({type:Boolean})],oa.prototype,"indeterminate",void 0);fe([He({type:Boolean,attribute:"four-color"})],oa.prototype,"fourColor",void 0);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hj extends oa{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=(1-this.value/this.max)*100;return vt`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle class="active-track" pathLength="100"
          stroke-dashoffset=${e}></circle>
      </svg>
    `}renderIndeterminateContainer(){return vt`
      <div class="spinner">
        <div class="left">
          <div class="circle"></div>
        </div>
        <div class="right">
          <div class="circle"></div>
        </div>
      </div>`}}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const jj=On`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 8.3333333333);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;min-block-size:var(--_size);min-inline-size:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}/*# sourceMappingURL=circular-progress-styles.css.map */
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let om=class extends Hj{};om.styles=[jj];om=fe([xr("md-circular-progress")],om);const zj={id:"remote"},Wj={key:0,indeterminate:""},qj=rr({__name:"RemoteCode",props:{codeString:{}},setup(t){var a;const e=t,n=dt(!1),r=dt(!1);dt();const i=Vh(),s=x_(ri(dr,`users/${(a=i.value)==null?void 0:a.uid}`));async function o(){n.value=!0,await DA(dr,async c=>{var l,u,h;c.set(ri(dr,`scans/${new Date().getTime()}`),{code:e.codeString,timestamp:ih(),username:(l=s.value)==null?void 0:l.username,userRef:ri(dr,`users/${(u=i.value)==null?void 0:u.uid}`)}),c.update(ri(dr,`users/${(h=i.value)==null?void 0:h.uid}`),{lastPunchTime:ih()})}),n.value=!1,r.value=!0}return(c,l)=>(pt(),Pt("div",zj,[n.value?(pt(),Pt("md-circular-progress",Wj)):(pt(),Pt("md-filled-tonal-button",{key:1,onClick:o}," Timbra "))]))}});var KR=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Kj=(t,e,n)=>(KR(t,e,"read from private field"),n?n.call(t):e.get(t)),Gj=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Qj=(t,e,n,r)=>(KR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);const Db=["aztec","code_128","code_39","code_93","codabar","data_matrix","ean_13","ean_8","itf","pdf417","qr_code","upc_a","upc_e","unknown"];function Yj(t){if(GR(t))return{width:t.naturalWidth,height:t.naturalHeight};if(QR(t))return{width:t.width.baseVal.value,height:t.height.baseVal.value};if(YR(t))return{width:t.videoWidth,height:t.videoHeight};if(Xj(t))return{width:t.width,height:t.height};if(XR(t))return{width:t.width,height:t.height};if(Jj(t))return{width:t.width,height:t.height};if(JR(t))return{width:t.displayWidth,height:t.displayHeight};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function GR(t){try{return t instanceof HTMLImageElement}catch{return!1}}function QR(t){try{return t instanceof SVGImageElement}catch{return!1}}function YR(t){try{return t instanceof HTMLVideoElement}catch{return!1}}function Xj(t){try{return t instanceof HTMLCanvasElement}catch{return!1}}function XR(t){try{return t instanceof ImageBitmap}catch{return!1}}function Jj(t){try{return t instanceof OffscreenCanvas}catch{return!1}}function JR(t){try{return t instanceof VideoFrame}catch{return!1}}function Zj(t){try{return t instanceof Blob}catch{return!1}}function ez(t){try{return t instanceof ImageData}catch{return!1}}function tz(t,e){try{const n=new OffscreenCanvas(t,e);if(n.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return n;throw void 0}catch{const r=document.createElement("canvas");return r.width=t,r.height=e,r}}async function ZR(t){if(GR(t)&&!await iz(t))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(QR(t)&&!await sz(t))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(JR(t)&&oz(t))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(YR(t)&&(t.readyState===0||t.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(XR(t)&&cz(t))throw new DOMException("The image source is detached.","InvalidStateError");const{width:e,height:n}=Yj(t);if(e===0||n===0)return null;const r=tz(e,n).getContext("2d");r.drawImage(t,0,0);try{return r.getImageData(0,0,e,n)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function nz(t){let e;try{e=await createImageBitmap(t)}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await ZR(e)}async function rz(t){if(Zj(t))return await nz(t);if(ez(t)){if(az(t))throw new DOMException("The image data has been detached.","InvalidStateError");return t}return await ZR(t)}async function iz(t){try{return await t.decode(),!0}catch{return!1}}async function sz(t){var e;try{return await((e=t.decode)==null?void 0:e.call(t)),!0}catch{return!1}}function oz(t){return t.format===null}function az(t){return t.data.buffer.byteLength===0}function cz(t){return t.width===0&&t.height===0}function Ob(t,e){return t instanceof DOMException?new DOMException(`${e}: ${t.message}`,t.name):t instanceof Error?new t.constructor(`${e}: ${t.message}`):new Error(`${e}: ${t}`)}const Mb=t=>{let e;const n=new Set,r=(o,a)=>{const c=typeof o=="function"?o(e):o;if(!Object.is(c,e)){const l=e;e=a??typeof c!="object"?c:Object.assign({},e,c),n.forEach(u=>u(e,l))}},i=()=>e,s={setState:r,getState:i,subscribe:o=>(n.add(o),()=>n.delete(o)),destroy:()=>{n.clear()}};return e=t(r,i,s),s},lz=t=>t?Mb(t):Mb,uz={locateFile:(t,e)=>{var n;const r=(n=t.match(/_(.+?)\.wasm$/))==null?void 0:n[1];return r?`https://cdn.jsdelivr.net/npm/@sec-ant/zxing-wasm@2.1.3/dist/${r}/${t}`:e+t}},Ma=lz()(()=>({zxingModuleWeakMap:new WeakMap,zxingModuleOverrides:uz}));function eS(t,e=Ma.getState().zxingModuleOverrides){const{zxingModuleWeakMap:n}=Ma.getState(),r=n.get(t);if(r&&Object.is(e,Ma.getState().zxingModuleOverrides))return r;{Ma.setState({zxingModuleOverrides:e});const i=t(e);return n.set(t,i),i}}const Lb=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","UPC-A","UPC-E"],Si={tryHarder:!0,formats:[],maxSymbols:255};async function hz(t,{tryHarder:e=Si.tryHarder,formats:n=Si.formats,maxSymbols:r=Si.maxSymbols}=Si,i){const s=await eS(i,Ma.getState().zxingModuleOverrides),{data:o,width:a,height:c,data:{byteLength:l}}=t,u=s._malloc(l);s.HEAP8.set(o,u);const h=s.readBarcodesFromPixmap(u,a,c,e,dz(n),r);s._free(u);const d=[];for(let f=0;f<h.size();++f){const g=h.get(f);d.push({...g,format:fz(g.format)})}return d}function dz(t){return t.join("|")}function fz(t){const e=$b(t);let n=0,r=Lb.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=Lb[i],o=$b(s);if(o===e)return s;o<e?n=i+1:r=i-1}return"None"}function $b(t){return t.toLowerCase().replace(/_-\[\]/g,"")}var tS=(()=>{var t=import.meta.url;return function(e={}){var n=e,r,i;n.ready=new Promise((p,m)=>{r=p,i=m});var s=Object.assign({},n),o="./this.program",a=typeof window=="object",c=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var l="";function u(p){return n.locateFile?n.locateFile(p,l):l+p}var h;(a||c)&&(c?l=self.location.href:typeof document<"u"&&document.currentScript&&(l=document.currentScript.src),t&&(l=t),l.indexOf("blob:")!==0?l=l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1):l="",c&&(h=p=>{var m=new XMLHttpRequest;return m.open("GET",p,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)})),n.print||console.log.bind(console);var d=n.printErr||console.error.bind(console);Object.assign(n,s),s=null,n.arguments&&n.arguments,n.thisProgram&&(o=n.thisProgram),n.quit&&n.quit;var f;n.wasmBinary&&(f=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&G("no native wasm support detected");var g,_,w=!1,x,y,b,E,A,R,D,$;function q(){var p=g.buffer;n.HEAP8=x=new Int8Array(p),n.HEAP16=b=new Int16Array(p),n.HEAP32=A=new Int32Array(p),n.HEAPU8=y=new Uint8Array(p),n.HEAPU16=E=new Uint16Array(p),n.HEAPU32=R=new Uint32Array(p),n.HEAPF32=D=new Float32Array(p),n.HEAPF64=$=new Float64Array(p)}var P,L=[],H=[],U=[];function de(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)be(n.preRun.shift());C(L)}function ge(){C(H)}function he(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)$e(n.postRun.shift());C(U)}function be(p){L.unshift(p)}function me(p){H.unshift(p)}function $e(p){U.unshift(p)}var Re=0,B=null;function W(p){Re++,n.monitorRunDependencies&&n.monitorRunDependencies(Re)}function J(p){if(Re--,n.monitorRunDependencies&&n.monitorRunDependencies(Re),Re==0&&B){var m=B;B=null,m()}}function G(p){n.onAbort&&n.onAbort(p),p="Aborted("+p+")",d(p),w=!0,p+=". Build with -sASSERTIONS for more info.";var m=new WebAssembly.RuntimeError(p);throw i(m),m}var st="data:application/octet-stream;base64,";function Pe(p){return p.startsWith(st)}var F;n.locateFile?(F="zxing_reader.wasm",Pe(F)||(F=u(F))):F=new URL("/reader/zxing_reader.wasm",self.location).href;function Y(p){if(p==F&&f)return new Uint8Array(f);if(h)return h(p);throw"both async and sync fetching of the wasm failed"}function ie(p){return!f&&(a||c)&&typeof fetch=="function"?fetch(p,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw"failed to load wasm binary file at '"+p+"'";return m.arrayBuffer()}).catch(()=>Y(p)):Promise.resolve().then(()=>Y(p))}function pe(p,m,v){return ie(p).then(T=>WebAssembly.instantiate(T,m)).then(T=>T).then(v,T=>{d("failed to asynchronously prepare wasm: "+T),G(T)})}function Ve(p,m,v,T){return!p&&typeof WebAssembly.instantiateStreaming=="function"&&!Pe(m)&&typeof fetch=="function"?fetch(m,{credentials:"same-origin"}).then(S=>{var k=WebAssembly.instantiateStreaming(S,v);return k.then(T,function(O){return d("wasm streaming compile failed: "+O),d("falling back to ArrayBuffer instantiation"),pe(m,v,T)})}):pe(m,v,T)}function I(){var p={a:BP};function m(T,S){var k=T.exports;return _=k,g=_.qa,q(),P=_.ua,me(_.ra),J(),k}W();function v(T){m(T.instance)}if(n.instantiateWasm)try{return n.instantiateWasm(p,m)}catch(T){d("Module.instantiateWasm callback failed with error: "+T),i(T)}return Ve(f,F,p,v).catch(i),{}}var C=p=>{for(;p.length>0;)p.shift()(n)},N=[],V=0;function z(p){var m=new ee(p);return m.get_caught()||(m.set_caught(!0),V--),m.set_rethrown(!1),N.push(m),lv(m.excPtr),m.get_exception_ptr()}var K=0;function se(){We(0,0);var p=N.pop();cv(p.excPtr),K=0}function ee(p){this.excPtr=p,this.ptr=p-24,this.set_type=function(m){R[this.ptr+4>>2]=m},this.get_type=function(){return R[this.ptr+4>>2]},this.set_destructor=function(m){R[this.ptr+8>>2]=m},this.get_destructor=function(){return R[this.ptr+8>>2]},this.set_caught=function(m){m=m?1:0,x[this.ptr+12>>0]=m},this.get_caught=function(){return x[this.ptr+12>>0]!=0},this.set_rethrown=function(m){m=m?1:0,x[this.ptr+13>>0]=m},this.get_rethrown=function(){return x[this.ptr+13>>0]!=0},this.init=function(m,v){this.set_adjusted_ptr(0),this.set_type(m),this.set_destructor(v)},this.set_adjusted_ptr=function(m){R[this.ptr+16>>2]=m},this.get_adjusted_ptr=function(){return R[this.ptr+16>>2]},this.get_exception_ptr=function(){var m=hv(this.get_type());if(m)return R[this.excPtr>>2];var v=this.get_adjusted_ptr();return v!==0?v:this.excPtr}}function re(p){throw K||(K=p),K}var Q=p=>{var m=K;if(!m)return fa(0),0;var v=new ee(m);v.set_adjusted_ptr(m);var T=v.get_type();if(!T)return fa(0),m;for(var S in p){var k=p[S];if(k===0||k===T)break;var O=v.ptr+16;if(uv(k,T,O))return fa(k),m}return fa(T),m},ue=()=>Q([]),ce=p=>Q([p]),ve=(p,m)=>Q([p,m]);function Ie(p){var m=new ee(p).get_exception_ptr();return m}function Ne(){var p=N.pop();p||G("no exception to throw");var m=p.excPtr;throw p.get_rethrown()||(N.push(p),p.set_rethrown(!0),p.set_caught(!1),V++),K=m,K}function je(p,m,v){var T=new ee(p);throw T.init(m,v),K=p,V++,K}function tt(){return V}var ht={};function en(p){for(;p.length;){var m=p.pop(),v=p.pop();v(m)}}function Mt(p){return this.fromWireType(A[p>>2])}var xn={},Tn={},Tr={},Lt=void 0;function tn(p){throw new Lt(p)}function Yn(p,m,v){p.forEach(function(M){Tr[M]=m});function T(M){var j=v(M);j.length!==p.length&&tn("Mismatched type converter count");for(var Z=0;Z<p.length;++Z)or(p[Z],j[Z])}var S=new Array(m.length),k=[],O=0;m.forEach((M,j)=>{Tn.hasOwnProperty(M)?S[j]=Tn[M]:(k.push(M),xn.hasOwnProperty(M)||(xn[M]=[]),xn[M].push(()=>{S[j]=Tn[M],++O,O===k.length&&T(S)}))}),k.length===0&&T(S)}var ml=function(p){var m=ht[p];delete ht[p];var v=m.rawConstructor,T=m.rawDestructor,S=m.fields,k=S.map(O=>O.getterReturnType).concat(S.map(O=>O.setterArgumentType));Yn([p],k,O=>{var M={};return S.forEach((j,Z)=>{var le=j.fieldName,Ee=O[Z],Ce=j.getter,Je=j.getterContext,bt=O[Z+S.length],Ht=j.setter,Et=j.setterContext;M[le]={read:jt=>Ee.fromWireType(Ce(Je,jt)),write:(jt,te)=>{var ye=[];Ht(Et,jt,bt.toWireType(ye,te)),en(ye)}}}),[{name:m.name,fromWireType:function(j){var Z={};for(var le in M)Z[le]=M[le].read(j);return T(j),Z},toWireType:function(j,Z){for(var le in M)if(!(le in Z))throw new TypeError(`Missing field: "${le}"`);var Ee=v();for(le in M)M[le].write(Ee,Z[le]);return j!==null&&j.push(T,Ee),Ee},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:T}]})};function Md(p,m,v,T,S){}function qs(p){switch(p){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${p}`)}}function Ld(){for(var p=new Array(256),m=0;m<256;++m)p[m]=String.fromCharCode(m);aa=p}var aa=void 0;function Ut(p){for(var m="",v=p;y[v];)m+=aa[y[v++]];return m}var fi=void 0;function ze(p){throw new fi(p)}function gl(p,m,v={}){var T=m.name;if(p||ze(`type "${T}" must have a positive integer typeid pointer`),Tn.hasOwnProperty(p)){if(v.ignoreDuplicateRegistrations)return;ze(`Cannot register type '${T}' twice`)}if(Tn[p]=m,delete Tr[p],xn.hasOwnProperty(p)){var S=xn[p];delete xn[p],S.forEach(k=>k())}}function or(p,m,v={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return gl(p,m,v)}function $d(p,m,v,T,S){var k=qs(v);m=Ut(m),or(p,{name:m,fromWireType:function(O){return!!O},toWireType:function(O,M){return M?T:S},argPackAdvance:8,readValueFromPointer:function(O){var M;if(v===1)M=x;else if(v===2)M=b;else if(v===4)M=A;else throw new TypeError("Unknown boolean type size: "+m);return this.fromWireType(M[O>>k])},destructorFunction:null})}function _l(p){if(!(this instanceof pi)||!(p instanceof pi))return!1;for(var m=this.$$.ptrType.registeredClass,v=this.$$.ptr,T=p.$$.ptrType.registeredClass,S=p.$$.ptr;m.baseClass;)v=m.upcast(v),m=m.baseClass;for(;T.baseClass;)S=T.upcast(S),T=T.baseClass;return m===T&&v===S}function Fd(p){return{count:p.count,deleteScheduled:p.deleteScheduled,preservePointerOnDelete:p.preservePointerOnDelete,ptr:p.ptr,ptrType:p.ptrType,smartPtr:p.smartPtr,smartPtrType:p.smartPtrType}}function Ks(p){function m(v){return v.$$.ptrType.registeredClass.name}ze(m(p)+" instance already deleted")}var nn=!1;function ar(p){}function vl(p){p.smartPtr?p.smartPtrType.rawDestructor(p.smartPtr):p.ptrType.registeredClass.rawDestructor(p.ptr)}function yl(p){p.count.value-=1;var m=p.count.value===0;m&&vl(p)}function U_(p,m,v){if(m===v)return p;if(v.baseClass===void 0)return null;var T=U_(p,m,v.baseClass);return T===null?null:v.downcast(T)}var H_={};function yS(){return Object.keys(ua).length}function wS(){var p=[];for(var m in ua)ua.hasOwnProperty(m)&&p.push(ua[m]);return p}var ca=[];function Vd(){for(;ca.length;){var p=ca.pop();p.$$.deleteScheduled=!1,p.delete()}}var la=void 0;function bS(p){la=p,ca.length&&la&&la(Vd)}function ES(){n.getInheritedInstanceCount=yS,n.getLiveInheritedInstances=wS,n.flushPendingDeletes=Vd,n.setDelayFunction=bS}var ua={};function xS(p,m){for(m===void 0&&ze("ptr should not be undefined");p.baseClass;)m=p.upcast(m),p=p.baseClass;return m}function TS(p,m){return m=xS(p,m),ua[m]}function wl(p,m){(!m.ptrType||!m.ptr)&&tn("makeClassHandle requires ptr and ptrType");var v=!!m.smartPtrType,T=!!m.smartPtr;return v!==T&&tn("Both smartPtrType and smartPtr must be specified"),m.count={value:1},ha(Object.create(p,{$$:{value:m}}))}function IS(p){var m=this.getPointee(p);if(!m)return this.destructor(p),null;var v=TS(this.registeredClass,m);if(v!==void 0){if(v.$$.count.value===0)return v.$$.ptr=m,v.$$.smartPtr=p,v.clone();var T=v.clone();return this.destructor(p),T}function S(){return this.isSmartPointer?wl(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:m,smartPtrType:this,smartPtr:p}):wl(this.registeredClass.instancePrototype,{ptrType:this,ptr:p})}var k=this.registeredClass.getActualType(m),O=H_[k];if(!O)return S.call(this);var M;this.isConst?M=O.constPointerType:M=O.pointerType;var j=U_(m,this.registeredClass,M.registeredClass);return j===null?S.call(this):this.isSmartPointer?wl(M.registeredClass.instancePrototype,{ptrType:M,ptr:j,smartPtrType:this,smartPtr:p}):wl(M.registeredClass.instancePrototype,{ptrType:M,ptr:j})}var ha=function(p){return typeof FinalizationRegistry>"u"?(ha=m=>m,p):(nn=new FinalizationRegistry(m=>{yl(m.$$)}),ha=m=>{var v=m.$$,T=!!v.smartPtr;if(T){var S={$$:v};nn.register(m,S,m)}return m},ar=m=>nn.unregister(m),ha(p))};function CS(){if(this.$$.ptr||Ks(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var p=ha(Object.create(Object.getPrototypeOf(this),{$$:{value:Fd(this.$$)}}));return p.$$.count.value+=1,p.$$.deleteScheduled=!1,p}function AS(){this.$$.ptr||Ks(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),ar(this),yl(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function RS(){return!this.$$.ptr}function SS(){return this.$$.ptr||Ks(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),ca.push(this),ca.length===1&&la&&la(Vd),this.$$.deleteScheduled=!0,this}function PS(){pi.prototype.isAliasOf=_l,pi.prototype.clone=CS,pi.prototype.delete=AS,pi.prototype.isDeleted=RS,pi.prototype.deleteLater=SS}function pi(){}var kS=48,NS=57;function j_(p){if(p===void 0)return"_unknown";p=p.replace(/[^a-zA-Z0-9_]/g,"$");var m=p.charCodeAt(0);return m>=kS&&m<=NS?`_${p}`:p}function z_(p,m){return p=j_(p),{[p]:function(){return m.apply(this,arguments)}}[p]}function W_(p,m,v){if(p[m].overloadTable===void 0){var T=p[m];p[m]=function(){return p[m].overloadTable.hasOwnProperty(arguments.length)||ze(`Function '${v}' called with an invalid number of arguments (${arguments.length}) - expects one of (${p[m].overloadTable})!`),p[m].overloadTable[arguments.length].apply(this,arguments)},p[m].overloadTable=[],p[m].overloadTable[T.argCount]=T}}function q_(p,m,v){n.hasOwnProperty(p)?((v===void 0||n[p].overloadTable!==void 0&&n[p].overloadTable[v]!==void 0)&&ze(`Cannot register public name '${p}' twice`),W_(n,p,p),n.hasOwnProperty(v)&&ze(`Cannot register multiple overloads of a function with the same number of arguments (${v})!`),n[p].overloadTable[v]=m):(n[p]=m,v!==void 0&&(n[p].numArguments=v))}function DS(p,m,v,T,S,k,O,M){this.name=p,this.constructor=m,this.instancePrototype=v,this.rawDestructor=T,this.baseClass=S,this.getActualType=k,this.upcast=O,this.downcast=M,this.pureVirtualFunctions=[]}function Bd(p,m,v){for(;m!==v;)m.upcast||ze(`Expected null or instance of ${v.name}, got an instance of ${m.name}`),p=m.upcast(p),m=m.baseClass;return p}function OS(p,m){if(m===null)return this.isReference&&ze(`null is not a valid ${this.name}`),0;m.$$||ze(`Cannot pass "${jd(m)}" as a ${this.name}`),m.$$.ptr||ze(`Cannot pass deleted object as a pointer of type ${this.name}`);var v=m.$$.ptrType.registeredClass,T=Bd(m.$$.ptr,v,this.registeredClass);return T}function MS(p,m){var v;if(m===null)return this.isReference&&ze(`null is not a valid ${this.name}`),this.isSmartPointer?(v=this.rawConstructor(),p!==null&&p.push(this.rawDestructor,v),v):0;m.$$||ze(`Cannot pass "${jd(m)}" as a ${this.name}`),m.$$.ptr||ze(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&m.$$.ptrType.isConst&&ze(`Cannot convert argument of type ${m.$$.smartPtrType?m.$$.smartPtrType.name:m.$$.ptrType.name} to parameter type ${this.name}`);var T=m.$$.ptrType.registeredClass;if(v=Bd(m.$$.ptr,T,this.registeredClass),this.isSmartPointer)switch(m.$$.smartPtr===void 0&&ze("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:m.$$.smartPtrType===this?v=m.$$.smartPtr:ze(`Cannot convert argument of type ${m.$$.smartPtrType?m.$$.smartPtrType.name:m.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:v=m.$$.smartPtr;break;case 2:if(m.$$.smartPtrType===this)v=m.$$.smartPtr;else{var S=m.clone();v=this.rawShare(v,mi.toHandle(function(){S.delete()})),p!==null&&p.push(this.rawDestructor,v)}break;default:ze("Unsupporting sharing policy")}return v}function LS(p,m){if(m===null)return this.isReference&&ze(`null is not a valid ${this.name}`),0;m.$$||ze(`Cannot pass "${jd(m)}" as a ${this.name}`),m.$$.ptr||ze(`Cannot pass deleted object as a pointer of type ${this.name}`),m.$$.ptrType.isConst&&ze(`Cannot convert argument of type ${m.$$.ptrType.name} to parameter type ${this.name}`);var v=m.$$.ptrType.registeredClass,T=Bd(m.$$.ptr,v,this.registeredClass);return T}function $S(p){return this.rawGetPointee&&(p=this.rawGetPointee(p)),p}function FS(p){this.rawDestructor&&this.rawDestructor(p)}function VS(p){p!==null&&p.delete()}function BS(){Kr.prototype.getPointee=$S,Kr.prototype.destructor=FS,Kr.prototype.argPackAdvance=8,Kr.prototype.readValueFromPointer=Mt,Kr.prototype.deleteObject=VS,Kr.prototype.fromWireType=IS}function Kr(p,m,v,T,S,k,O,M,j,Z,le){this.name=p,this.registeredClass=m,this.isReference=v,this.isConst=T,this.isSmartPointer=S,this.pointeeType=k,this.sharingPolicy=O,this.rawGetPointee=M,this.rawConstructor=j,this.rawShare=Z,this.rawDestructor=le,!S&&m.baseClass===void 0?T?(this.toWireType=OS,this.destructorFunction=null):(this.toWireType=LS,this.destructorFunction=null):this.toWireType=MS}function K_(p,m,v){n.hasOwnProperty(p)||tn("Replacing nonexistant public symbol"),n[p].overloadTable!==void 0&&v!==void 0?n[p].overloadTable[v]=m:(n[p]=m,n[p].argCount=v)}var US=(p,m,v)=>{var T=n["dynCall_"+p];return v&&v.length?T.apply(null,[m].concat(v)):T.call(null,m)},bl=[],nt=p=>{var m=bl[p];return m||(p>=bl.length&&(bl.length=p+1),bl[p]=m=P.get(p)),m},HS=(p,m,v)=>{if(p.includes("j"))return US(p,m,v);var T=nt(m).apply(null,v);return T},jS=(p,m)=>{var v=[];return function(){return v.length=0,Object.assign(v,arguments),HS(p,m,v)}};function cr(p,m){p=Ut(p);function v(){return p.includes("j")?jS(p,m):nt(m)}var T=v();return typeof T!="function"&&ze(`unknown function pointer with signature ${p}: ${m}`),T}function zS(p,m){var v=z_(m,function(T){this.name=m,this.message=T;var S=new Error(T).stack;S!==void 0&&(this.stack=this.toString()+`
`+S.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(p.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},v}var G_=void 0;function Q_(p){var m=av(p),v=Ut(m);return Gr(m),v}function El(p,m){var v=[],T={};function S(k){if(!T[k]&&!Tn[k]){if(Tr[k]){Tr[k].forEach(S);return}v.push(k),T[k]=!0}}throw m.forEach(S),new G_(`${p}: `+v.map(Q_).join([", "]))}function WS(p,m,v,T,S,k,O,M,j,Z,le,Ee,Ce){le=Ut(le),k=cr(S,k),M&&(M=cr(O,M)),Z&&(Z=cr(j,Z)),Ce=cr(Ee,Ce);var Je=j_(le);q_(Je,function(){El(`Cannot construct ${le} due to unbound types`,[T])}),Yn([p,m,v],T?[T]:[],function(bt){bt=bt[0];var Ht,Et;T?(Ht=bt.registeredClass,Et=Ht.instancePrototype):Et=pi.prototype;var jt=z_(Je,function(){if(Object.getPrototypeOf(this)!==te)throw new fi("Use 'new' to construct "+le);if(ye.constructor_body===void 0)throw new fi(le+" has no accessible constructor");var Il=ye.constructor_body[arguments.length];if(Il===void 0)throw new fi(`Tried to invoke ctor of ${le} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(ye.constructor_body).toString()}) parameters instead!`);return Il.apply(this,arguments)}),te=Object.create(Et,{constructor:{value:jt}});jt.prototype=te;var ye=new DS(le,jt,te,Ce,Ht,k,M,Z);ye.baseClass&&(ye.baseClass.__derivedClasses===void 0&&(ye.baseClass.__derivedClasses=[]),ye.baseClass.__derivedClasses.push(ye));var Rt=new Kr(le,ye,!0,!1,!1),$t=new Kr(le+"*",ye,!1,!1,!1),Zi=new Kr(le+" const*",ye,!1,!0,!1);return H_[p]={pointerType:$t,constPointerType:Zi},K_(Je,jt),[Rt,$t,Zi]})}function Ud(p,m){for(var v=[],T=0;T<p;T++)v.push(R[m+T*4>>2]);return v}function Hd(p,m,v,T,S,k){var O=m.length;O<2&&ze("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var M=m[1]!==null&&v!==null,j=!1,Z=1;Z<m.length;++Z)if(m[Z]!==null&&m[Z].destructorFunction===void 0){j=!0;break}var le=m[0].name!=="void",Ee=O-2,Ce=new Array(Ee),Je=[],bt=[];return function(){arguments.length!==Ee&&ze(`function ${p} called with ${arguments.length} arguments, expected ${Ee} args!`),bt.length=0;var Ht;Je.length=M?2:1,Je[0]=S,M&&(Ht=m[1].toWireType(bt,this),Je[1]=Ht);for(var Et=0;Et<Ee;++Et)Ce[Et]=m[Et+2].toWireType(bt,arguments[Et]),Je.push(Ce[Et]);var jt=T.apply(null,Je);function te(ye){if(j)en(bt);else for(var Rt=M?1:2;Rt<m.length;Rt++){var $t=Rt===1?Ht:Ce[Rt-2];m[Rt].destructorFunction!==null&&m[Rt].destructorFunction($t)}if(le)return m[0].fromWireType(ye)}return te(jt)}}function qS(p,m,v,T,S,k){var O=Ud(m,v);S=cr(T,S),Yn([],[p],function(M){M=M[0];var j=`constructor ${M.name}`;if(M.registeredClass.constructor_body===void 0&&(M.registeredClass.constructor_body=[]),M.registeredClass.constructor_body[m-1]!==void 0)throw new fi(`Cannot register multiple constructors with identical number of parameters (${m-1}) for class '${M.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return M.registeredClass.constructor_body[m-1]=()=>{El(`Cannot construct ${M.name} due to unbound types`,O)},Yn([],O,function(Z){return Z.splice(1,0,null),M.registeredClass.constructor_body[m-1]=Hd(j,Z,null,S,k),[]}),[]})}function KS(p,m,v,T,S,k,O,M,j){var Z=Ud(v,T);m=Ut(m),k=cr(S,k),Yn([],[p],function(le){le=le[0];var Ee=`${le.name}.${m}`;m.startsWith("@@")&&(m=Symbol[m.substring(2)]),M&&le.registeredClass.pureVirtualFunctions.push(m);function Ce(){El(`Cannot call ${Ee} due to unbound types`,Z)}var Je=le.registeredClass.instancePrototype,bt=Je[m];return bt===void 0||bt.overloadTable===void 0&&bt.className!==le.name&&bt.argCount===v-2?(Ce.argCount=v-2,Ce.className=le.name,Je[m]=Ce):(W_(Je,m,Ee),Je[m].overloadTable[v-2]=Ce),Yn([],Z,function(Ht){var Et=Hd(Ee,Ht,le,k,O);return Je[m].overloadTable===void 0?(Et.argCount=v-2,Je[m]=Et):Je[m].overloadTable[v-2]=Et,[]}),[]})}function GS(){Object.assign(Y_.prototype,{get(p){return this.allocated[p]},has(p){return this.allocated[p]!==void 0},allocate(p){var m=this.freelist.pop()||this.allocated.length;return this.allocated[m]=p,m},free(p){this.allocated[p]=void 0,this.freelist.push(p)}})}function Y_(){this.allocated=[void 0],this.freelist=[]}var Xn=new Y_;function X_(p){p>=Xn.reserved&&--Xn.get(p).refcount===0&&Xn.free(p)}function QS(){for(var p=0,m=Xn.reserved;m<Xn.allocated.length;++m)Xn.allocated[m]!==void 0&&++p;return p}function YS(){Xn.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Xn.reserved=Xn.allocated.length,n.count_emval_handles=QS}var mi={toValue:p=>(p||ze("Cannot use deleted val. handle = "+p),Xn.get(p).value),toHandle:p=>{switch(p){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Xn.allocate({refcount:1,value:p})}}};function XS(p,m){m=Ut(m),or(p,{name:m,fromWireType:function(v){var T=mi.toValue(v);return X_(v),T},toWireType:function(v,T){return mi.toHandle(T)},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:null})}function jd(p){if(p===null)return"null";var m=typeof p;return m==="object"||m==="array"||m==="function"?p.toString():""+p}function JS(p,m){switch(m){case 2:return function(v){return this.fromWireType(D[v>>2])};case 3:return function(v){return this.fromWireType($[v>>3])};default:throw new TypeError("Unknown float type: "+p)}}function ZS(p,m,v){var T=qs(v);m=Ut(m),or(p,{name:m,fromWireType:function(S){return S},toWireType:function(S,k){return k},argPackAdvance:8,readValueFromPointer:JS(m,T),destructorFunction:null})}function eP(p,m,v,T,S,k,O){var M=Ud(m,v);p=Ut(p),S=cr(T,S),q_(p,function(){El(`Cannot call ${p} due to unbound types`,M)},m-1),Yn([],M,function(j){var Z=[j[0],null].concat(j.slice(1));return K_(p,Hd(p,Z,null,S,k),m-1),[]})}function tP(p,m,v){switch(m){case 0:return v?function(T){return x[T]}:function(T){return y[T]};case 1:return v?function(T){return b[T>>1]}:function(T){return E[T>>1]};case 2:return v?function(T){return A[T>>2]}:function(T){return R[T>>2]};default:throw new TypeError("Unknown integer type: "+p)}}function nP(p,m,v,T,S){m=Ut(m);var k=qs(v),O=Ee=>Ee;if(T===0){var M=32-8*v;O=Ee=>Ee<<M>>>M}var j=m.includes("unsigned"),Z=(Ee,Ce)=>{},le;j?le=function(Ee,Ce){return Z(Ce,this.name),Ce>>>0}:le=function(Ee,Ce){return Z(Ce,this.name),Ce},or(p,{name:m,fromWireType:O,toWireType:le,argPackAdvance:8,readValueFromPointer:tP(m,k,T!==0),destructorFunction:null})}function rP(p,m,v){var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],S=T[m];function k(O){O=O>>2;var M=R,j=M[O],Z=M[O+1];return new S(M.buffer,Z,j)}v=Ut(v),or(p,{name:v,fromWireType:k,argPackAdvance:8,readValueFromPointer:k},{ignoreDuplicateRegistrations:!0})}var J_=(p,m,v,T)=>{if(!(T>0))return 0;for(var S=v,k=v+T-1,O=0;O<p.length;++O){var M=p.charCodeAt(O);if(M>=55296&&M<=57343){var j=p.charCodeAt(++O);M=65536+((M&1023)<<10)|j&1023}if(M<=127){if(v>=k)break;m[v++]=M}else if(M<=2047){if(v+1>=k)break;m[v++]=192|M>>6,m[v++]=128|M&63}else if(M<=65535){if(v+2>=k)break;m[v++]=224|M>>12,m[v++]=128|M>>6&63,m[v++]=128|M&63}else{if(v+3>=k)break;m[v++]=240|M>>18,m[v++]=128|M>>12&63,m[v++]=128|M>>6&63,m[v++]=128|M&63}}return m[v]=0,v-S},iP=(p,m,v)=>J_(p,y,m,v),Z_=p=>{for(var m=0,v=0;v<p.length;++v){var T=p.charCodeAt(v);T<=127?m++:T<=2047?m+=2:T>=55296&&T<=57343?(m+=4,++v):m+=3}return m},ev=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,sP=(p,m,v)=>{for(var T=m+v,S=m;p[S]&&!(S>=T);)++S;if(S-m>16&&p.buffer&&ev)return ev.decode(p.subarray(m,S));for(var k="";m<S;){var O=p[m++];if(!(O&128)){k+=String.fromCharCode(O);continue}var M=p[m++]&63;if((O&224)==192){k+=String.fromCharCode((O&31)<<6|M);continue}var j=p[m++]&63;if((O&240)==224?O=(O&15)<<12|M<<6|j:O=(O&7)<<18|M<<12|j<<6|p[m++]&63,O<65536)k+=String.fromCharCode(O);else{var Z=O-65536;k+=String.fromCharCode(55296|Z>>10,56320|Z&1023)}}return k},zd=(p,m)=>p?sP(y,p,m):"";function oP(p,m){m=Ut(m);var v=m==="std::string";or(p,{name:m,fromWireType:function(T){var S=R[T>>2],k=T+4,O;if(v)for(var M=k,j=0;j<=S;++j){var Z=k+j;if(j==S||y[Z]==0){var le=Z-M,Ee=zd(M,le);O===void 0?O=Ee:(O+=String.fromCharCode(0),O+=Ee),M=Z+1}}else{for(var Ce=new Array(S),j=0;j<S;++j)Ce[j]=String.fromCharCode(y[k+j]);O=Ce.join("")}return Gr(T),O},toWireType:function(T,S){S instanceof ArrayBuffer&&(S=new Uint8Array(S));var k,O=typeof S=="string";O||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int8Array||ze("Cannot pass non-string to std::string"),v&&O?k=Z_(S):k=S.length;var M=qd(4+k+1),j=M+4;if(R[M>>2]=k,v&&O)iP(S,j,k+1);else if(O)for(var Z=0;Z<k;++Z){var le=S.charCodeAt(Z);le>255&&(Gr(j),ze("String has UTF-16 code units that do not fit in 8 bits")),y[j+Z]=le}else for(var Z=0;Z<k;++Z)y[j+Z]=S[Z];return T!==null&&T.push(Gr,M),M},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:function(T){Gr(T)}})}var tv=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,aP=(p,m)=>{for(var v=p,T=v>>1,S=T+m/2;!(T>=S)&&E[T];)++T;if(v=T<<1,v-p>32&&tv)return tv.decode(y.subarray(p,v));for(var k="",O=0;!(O>=m/2);++O){var M=b[p+O*2>>1];if(M==0)break;k+=String.fromCharCode(M)}return k},cP=(p,m,v)=>{if(v===void 0&&(v=2147483647),v<2)return 0;v-=2;for(var T=m,S=v<p.length*2?v/2:p.length,k=0;k<S;++k){var O=p.charCodeAt(k);b[m>>1]=O,m+=2}return b[m>>1]=0,m-T},lP=p=>p.length*2,uP=(p,m)=>{for(var v=0,T="";!(v>=m/4);){var S=A[p+v*4>>2];if(S==0)break;if(++v,S>=65536){var k=S-65536;T+=String.fromCharCode(55296|k>>10,56320|k&1023)}else T+=String.fromCharCode(S)}return T},hP=(p,m,v)=>{if(v===void 0&&(v=2147483647),v<4)return 0;for(var T=m,S=T+v-4,k=0;k<p.length;++k){var O=p.charCodeAt(k);if(O>=55296&&O<=57343){var M=p.charCodeAt(++k);O=65536+((O&1023)<<10)|M&1023}if(A[m>>2]=O,m+=4,m+4>S)break}return A[m>>2]=0,m-T},dP=p=>{for(var m=0,v=0;v<p.length;++v){var T=p.charCodeAt(v);T>=55296&&T<=57343&&++v,m+=4}return m},fP=function(p,m,v){v=Ut(v);var T,S,k,O,M;m===2?(T=aP,S=cP,O=lP,k=()=>E,M=1):m===4&&(T=uP,S=hP,O=dP,k=()=>R,M=2),or(p,{name:v,fromWireType:function(j){for(var Z=R[j>>2],le=k(),Ee,Ce=j+4,Je=0;Je<=Z;++Je){var bt=j+4+Je*m;if(Je==Z||le[bt>>M]==0){var Ht=bt-Ce,Et=T(Ce,Ht);Ee===void 0?Ee=Et:(Ee+=String.fromCharCode(0),Ee+=Et),Ce=bt+m}}return Gr(j),Ee},toWireType:function(j,Z){typeof Z!="string"&&ze(`Cannot pass non-string to C++ string type ${v}`);var le=O(Z),Ee=qd(4+le+m);return R[Ee>>2]=le>>M,S(Z,Ee+4,le+m),j!==null&&j.push(Gr,Ee),Ee},argPackAdvance:8,readValueFromPointer:Mt,destructorFunction:function(j){Gr(j)}})};function pP(p,m,v,T,S,k){ht[p]={name:Ut(m),rawConstructor:cr(v,T),rawDestructor:cr(S,k),fields:[]}}function mP(p,m,v,T,S,k,O,M,j,Z){ht[p].fields.push({fieldName:Ut(m),getterReturnType:v,getter:cr(T,S),getterContext:k,setterArgumentType:O,setter:cr(M,j),setterContext:Z})}function gP(p,m){m=Ut(m),or(p,{isVoid:!0,name:m,argPackAdvance:0,fromWireType:function(){},toWireType:function(v,T){}})}var _P={};function vP(p){var m=_P[p];return m===void 0?Ut(p):m}function nv(){if(typeof globalThis=="object")return globalThis;function p(m){m.$$$embind_global$$$=m;var v=typeof $$$embind_global$$$=="object"&&m.$$$embind_global$$$==m;return v||delete m.$$$embind_global$$$,v}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&p(global)?$$$embind_global$$$=global:typeof self=="object"&&p(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")}function yP(p){return p===0?mi.toHandle(nv()):(p=vP(p),mi.toHandle(nv()[p]))}function wP(p){p>4&&(Xn.get(p).refcount+=1)}function rv(p,m){var v=Tn[p];return v===void 0&&ze(m+" has unknown type "+Q_(p)),v}function bP(p){var m=new Array(p+1);return function(v,T,S){m[0]=v;for(var k=0;k<p;++k){var O=rv(R[T+k*4>>2],"parameter "+k);m[k+1]=O.readValueFromPointer(S),S+=O.argPackAdvance}var M=new(v.bind.apply(v,m));return mi.toHandle(M)}}var iv={};function EP(p,m,v,T){p=mi.toValue(p);var S=iv[m];return S||(S=bP(m),iv[m]=S),S(p,v,T)}function xP(p,m){p=rv(p,"_emval_take_value");var v=p.readValueFromPointer(m);return mi.toHandle(v)}var TP=()=>{G("")},IP=(p,m,v)=>y.copyWithin(p,m,m+v),CP=()=>2147483648,AP=p=>{var m=g.buffer,v=p-m.byteLength+65535>>>16;try{return g.grow(v),q(),1}catch{}},RP=p=>{var m=y.length;p>>>=0;var v=CP();if(p>v)return!1;for(var T=(j,Z)=>j+(Z-j%Z)%Z,S=1;S<=4;S*=2){var k=m*(1+.2/S);k=Math.min(k,p+100663296);var O=Math.min(v,T(Math.max(p,k),65536)),M=AP(O);if(M)return!0}return!1},Wd={},SP=()=>o||"./this.program",da=()=>{if(!da.strings){var p=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:p,_:SP()};for(var v in Wd)Wd[v]===void 0?delete m[v]:m[v]=Wd[v];var T=[];for(var v in m)T.push(`${v}=${m[v]}`);da.strings=T}return da.strings},PP=(p,m)=>{for(var v=0;v<p.length;++v)x[m++>>0]=p.charCodeAt(v);x[m>>0]=0},kP=(p,m)=>{var v=0;return da().forEach(function(T,S){var k=m+v;R[p+S*4>>2]=k,PP(T,k),v+=T.length+1}),0},NP=(p,m)=>{var v=da();R[p>>2]=v.length;var T=0;return v.forEach(function(S){T+=S.length+1}),R[m>>2]=T,0};function DP(p){return p}var xl=p=>p%4===0&&(p%100!==0||p%400===0),OP=(p,m)=>{for(var v=0,T=0;T<=m;v+=p[T++]);return v},sv=[31,29,31,30,31,30,31,31,30,31,30,31],ov=[31,28,31,30,31,30,31,31,30,31,30,31],MP=(p,m)=>{for(var v=new Date(p.getTime());m>0;){var T=xl(v.getFullYear()),S=v.getMonth(),k=(T?sv:ov)[S];if(m>k-v.getDate())m-=k-v.getDate()+1,v.setDate(1),S<11?v.setMonth(S+1):(v.setMonth(0),v.setFullYear(v.getFullYear()+1));else return v.setDate(v.getDate()+m),v}return v};function LP(p,m,v){var T=v>0?v:Z_(p)+1,S=new Array(T),k=J_(p,S,0,S.length);return m&&(S.length=k),S}var $P=(p,m)=>{x.set(p,m)},FP=(p,m,v,T)=>{var S=A[T+40>>2],k={tm_sec:A[T>>2],tm_min:A[T+4>>2],tm_hour:A[T+8>>2],tm_mday:A[T+12>>2],tm_mon:A[T+16>>2],tm_year:A[T+20>>2],tm_wday:A[T+24>>2],tm_yday:A[T+28>>2],tm_isdst:A[T+32>>2],tm_gmtoff:A[T+36>>2],tm_zone:S?zd(S):""},O=zd(v),M={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var j in M)O=O.replace(new RegExp(j,"g"),M[j]);var Z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],le=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ee(te,ye,Rt){for(var $t=typeof te=="number"?te.toString():te||"";$t.length<ye;)$t=Rt[0]+$t;return $t}function Ce(te,ye){return Ee(te,ye,"0")}function Je(te,ye){function Rt(Zi){return Zi<0?-1:Zi>0?1:0}var $t;return($t=Rt(te.getFullYear()-ye.getFullYear()))===0&&($t=Rt(te.getMonth()-ye.getMonth()))===0&&($t=Rt(te.getDate()-ye.getDate())),$t}function bt(te){switch(te.getDay()){case 0:return new Date(te.getFullYear()-1,11,29);case 1:return te;case 2:return new Date(te.getFullYear(),0,3);case 3:return new Date(te.getFullYear(),0,2);case 4:return new Date(te.getFullYear(),0,1);case 5:return new Date(te.getFullYear()-1,11,31);case 6:return new Date(te.getFullYear()-1,11,30)}}function Ht(te){var ye=MP(new Date(te.tm_year+1900,0,1),te.tm_yday),Rt=new Date(ye.getFullYear(),0,4),$t=new Date(ye.getFullYear()+1,0,4),Zi=bt(Rt),Il=bt($t);return Je(Zi,ye)<=0?Je(Il,ye)<=0?ye.getFullYear()+1:ye.getFullYear():ye.getFullYear()-1}var Et={"%a":te=>Z[te.tm_wday].substring(0,3),"%A":te=>Z[te.tm_wday],"%b":te=>le[te.tm_mon].substring(0,3),"%B":te=>le[te.tm_mon],"%C":te=>{var ye=te.tm_year+1900;return Ce(ye/100|0,2)},"%d":te=>Ce(te.tm_mday,2),"%e":te=>Ee(te.tm_mday,2," "),"%g":te=>Ht(te).toString().substring(2),"%G":te=>Ht(te),"%H":te=>Ce(te.tm_hour,2),"%I":te=>{var ye=te.tm_hour;return ye==0?ye=12:ye>12&&(ye-=12),Ce(ye,2)},"%j":te=>Ce(te.tm_mday+OP(xl(te.tm_year+1900)?sv:ov,te.tm_mon-1),3),"%m":te=>Ce(te.tm_mon+1,2),"%M":te=>Ce(te.tm_min,2),"%n":()=>`
`,"%p":te=>te.tm_hour>=0&&te.tm_hour<12?"AM":"PM","%S":te=>Ce(te.tm_sec,2),"%t":()=>"	","%u":te=>te.tm_wday||7,"%U":te=>{var ye=te.tm_yday+7-te.tm_wday;return Ce(Math.floor(ye/7),2)},"%V":te=>{var ye=Math.floor((te.tm_yday+7-(te.tm_wday+6)%7)/7);if((te.tm_wday+371-te.tm_yday-2)%7<=2&&ye++,ye){if(ye==53){var Rt=(te.tm_wday+371-te.tm_yday)%7;Rt!=4&&(Rt!=3||!xl(te.tm_year))&&(ye=1)}}else{ye=52;var $t=(te.tm_wday+7-te.tm_yday-1)%7;($t==4||$t==5&&xl(te.tm_year%400-1))&&ye++}return Ce(ye,2)},"%w":te=>te.tm_wday,"%W":te=>{var ye=te.tm_yday+7-(te.tm_wday+6)%7;return Ce(Math.floor(ye/7),2)},"%y":te=>(te.tm_year+1900).toString().substring(2),"%Y":te=>te.tm_year+1900,"%z":te=>{var ye=te.tm_gmtoff,Rt=ye>=0;return ye=Math.abs(ye)/60,ye=ye/60*100+ye%60,(Rt?"+":"-")+("0000"+ye).slice(-4)},"%Z":te=>te.tm_zone,"%%":()=>"%"};O=O.replace(/%%/g,"\0\0");for(var j in Et)O.includes(j)&&(O=O.replace(new RegExp(j,"g"),Et[j](k)));O=O.replace(/\0\0/g,"%");var jt=LP(O,!1);return jt.length>m?0:($P(jt,p),jt.length-1)},VP=(p,m,v,T,S)=>FP(p,m,v,T);Lt=n.InternalError=class extends Error{constructor(p){super(p),this.name="InternalError"}},Ld(),fi=n.BindingError=class extends Error{constructor(p){super(p),this.name="BindingError"}},PS(),ES(),BS(),G_=n.UnboundTypeError=zS(Error,"UnboundTypeError"),GS(),YS();var BP={q:z,u:se,a:ue,h:ce,l:ve,I:Ie,P:Ne,n:je,ba:tt,d:re,oa:ml,Y:Md,fa:$d,na:WS,ma:qS,D:KS,ea:XS,W:ZS,J:eP,w:nP,s:rP,V:oP,L:fP,Q:pP,pa:mP,ga:gP,U:X_,la:yP,R:wP,ia:EP,ka:xP,K:TP,da:IP,ca:RP,$:kP,aa:NP,H:sk,T:pk,B:ak,p:nk,b:UP,C:ik,ha:lk,c:qP,j:GP,i:zP,x:ok,O:rk,v:ek,G:hk,N:dk,A:ck,F:mk,Z:_k,X:vk,k:KP,f:WP,e:jP,g:HP,M:fk,m:ZP,o:QP,S:YP,t:JP,ja:tk,y:uk,r:XP,E:gk,z:DP,_:VP};I();var Gr=n._free=p=>(Gr=n._free=_.sa)(p),qd=n._malloc=p=>(qd=n._malloc=_.ta)(p),av=p=>(av=_.va)(p);n.__embind_initialize_bindings=()=>(n.__embind_initialize_bindings=_.wa)();var We=(p,m)=>(We=_.xa)(p,m),fa=p=>(fa=_.ya)(p),Ye=()=>(Ye=_.za)(),Xe=p=>(Xe=_.Aa)(p),cv=p=>(cv=_.Ba)(p),lv=p=>(lv=_.Ca)(p),uv=(p,m,v)=>(uv=_.Da)(p,m,v),hv=p=>(hv=_.Ea)(p);n.dynCall_viijii=(p,m,v,T,S,k,O)=>(n.dynCall_viijii=_.Fa)(p,m,v,T,S,k,O);var dv=n.dynCall_jiii=(p,m,v,T)=>(dv=n.dynCall_jiii=_.Ga)(p,m,v,T),fv=n.dynCall_jiiii=(p,m,v,T,S)=>(fv=n.dynCall_jiiii=_.Ha)(p,m,v,T,S);n.dynCall_iiiiij=(p,m,v,T,S,k,O)=>(n.dynCall_iiiiij=_.Ia)(p,m,v,T,S,k,O),n.dynCall_iiiiijj=(p,m,v,T,S,k,O,M,j)=>(n.dynCall_iiiiijj=_.Ja)(p,m,v,T,S,k,O,M,j),n.dynCall_iiiiiijj=(p,m,v,T,S,k,O,M,j,Z)=>(n.dynCall_iiiiiijj=_.Ka)(p,m,v,T,S,k,O,M,j,Z);function UP(p,m){var v=Ye();try{return nt(p)(m)}catch(T){if(Xe(v),T!==T+0)throw T;We(1,0)}}function HP(p,m,v,T){var S=Ye();try{nt(p)(m,v,T)}catch(k){if(Xe(S),k!==k+0)throw k;We(1,0)}}function jP(p,m,v){var T=Ye();try{nt(p)(m,v)}catch(S){if(Xe(T),S!==S+0)throw S;We(1,0)}}function zP(p,m,v,T,S){var k=Ye();try{return nt(p)(m,v,T,S)}catch(O){if(Xe(k),O!==O+0)throw O;We(1,0)}}function WP(p,m){var v=Ye();try{nt(p)(m)}catch(T){if(Xe(v),T!==T+0)throw T;We(1,0)}}function qP(p,m,v){var T=Ye();try{return nt(p)(m,v)}catch(S){if(Xe(T),S!==S+0)throw S;We(1,0)}}function KP(p){var m=Ye();try{nt(p)()}catch(v){if(Xe(m),v!==v+0)throw v;We(1,0)}}function GP(p,m,v,T){var S=Ye();try{return nt(p)(m,v,T)}catch(k){if(Xe(S),k!==k+0)throw k;We(1,0)}}function QP(p,m,v,T,S,k){var O=Ye();try{nt(p)(m,v,T,S,k)}catch(M){if(Xe(O),M!==M+0)throw M;We(1,0)}}function YP(p,m,v,T,S,k,O){var M=Ye();try{nt(p)(m,v,T,S,k,O)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function XP(p,m,v,T,S,k,O,M,j,Z,le){var Ee=Ye();try{nt(p)(m,v,T,S,k,O,M,j,Z,le)}catch(Ce){if(Xe(Ee),Ce!==Ce+0)throw Ce;We(1,0)}}function JP(p,m,v,T,S,k,O,M){var j=Ye();try{nt(p)(m,v,T,S,k,O,M)}catch(Z){if(Xe(j),Z!==Z+0)throw Z;We(1,0)}}function ZP(p,m,v,T,S){var k=Ye();try{nt(p)(m,v,T,S)}catch(O){if(Xe(k),O!==O+0)throw O;We(1,0)}}function ek(p,m,v,T,S,k,O){var M=Ye();try{return nt(p)(m,v,T,S,k,O)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function tk(p,m,v,T,S,k,O,M,j){var Z=Ye();try{nt(p)(m,v,T,S,k,O,M,j)}catch(le){if(Xe(Z),le!==le+0)throw le;We(1,0)}}function nk(p){var m=Ye();try{return nt(p)()}catch(v){if(Xe(m),v!==v+0)throw v;We(1,0)}}function rk(p,m,v,T,S,k,O){var M=Ye();try{return nt(p)(m,v,T,S,k,O)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function ik(p,m,v,T){var S=Ye();try{return nt(p)(m,v,T)}catch(k){if(Xe(S),k!==k+0)throw k;We(1,0)}}function sk(p,m,v,T){var S=Ye();try{return nt(p)(m,v,T)}catch(k){if(Xe(S),k!==k+0)throw k;We(1,0)}}function ok(p,m,v,T,S,k){var O=Ye();try{return nt(p)(m,v,T,S,k)}catch(M){if(Xe(O),M!==M+0)throw M;We(1,0)}}function ak(p,m,v,T,S,k){var O=Ye();try{return nt(p)(m,v,T,S,k)}catch(M){if(Xe(O),M!==M+0)throw M;We(1,0)}}function ck(p,m,v,T,S,k,O,M,j,Z){var le=Ye();try{return nt(p)(m,v,T,S,k,O,M,j,Z)}catch(Ee){if(Xe(le),Ee!==Ee+0)throw Ee;We(1,0)}}function lk(p,m,v){var T=Ye();try{return nt(p)(m,v)}catch(S){if(Xe(T),S!==S+0)throw S;We(1,0)}}function uk(p,m,v,T,S,k,O,M,j,Z){var le=Ye();try{nt(p)(m,v,T,S,k,O,M,j,Z)}catch(Ee){if(Xe(le),Ee!==Ee+0)throw Ee;We(1,0)}}function hk(p,m,v,T,S,k,O,M){var j=Ye();try{return nt(p)(m,v,T,S,k,O,M)}catch(Z){if(Xe(j),Z!==Z+0)throw Z;We(1,0)}}function dk(p,m,v,T,S,k,O,M,j){var Z=Ye();try{return nt(p)(m,v,T,S,k,O,M,j)}catch(le){if(Xe(Z),le!==le+0)throw le;We(1,0)}}function fk(p,m,v,T,S,k,O){var M=Ye();try{nt(p)(m,v,T,S,k,O)}catch(j){if(Xe(M),j!==j+0)throw j;We(1,0)}}function pk(p,m,v,T){var S=Ye();try{return nt(p)(m,v,T)}catch(k){if(Xe(S),k!==k+0)throw k;We(1,0)}}function mk(p,m,v,T,S,k,O,M,j,Z,le,Ee){var Ce=Ye();try{return nt(p)(m,v,T,S,k,O,M,j,Z,le,Ee)}catch(Je){if(Xe(Ce),Je!==Je+0)throw Je;We(1,0)}}function gk(p,m,v,T,S,k,O,M,j,Z,le,Ee,Ce,Je,bt,Ht){var Et=Ye();try{nt(p)(m,v,T,S,k,O,M,j,Z,le,Ee,Ce,Je,bt,Ht)}catch(jt){if(Xe(Et),jt!==jt+0)throw jt;We(1,0)}}function _k(p,m,v,T){var S=Ye();try{return dv(p,m,v,T)}catch(k){if(Xe(S),k!==k+0)throw k;We(1,0)}}function vk(p,m,v,T,S){var k=Ye();try{return fv(p,m,v,T,S)}catch(O){if(Xe(k),O!==O+0)throw O;We(1,0)}}var Tl;B=function p(){Tl||pv(),Tl||(B=p)};function pv(){if(Re>0||(de(),Re>0))return;function p(){Tl||(Tl=!0,n.calledRun=!0,!w&&(ge(),r(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),he()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),p()},1)):p()}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return pv(),e.ready}})();function pz(t){return eS(tS,t)}async function mz(t,{tryHarder:e=Si.tryHarder,formats:n=Si.formats,maxSymbols:r=Si.maxSymbols}=Si){return hz(t,{tryHarder:e,formats:n,maxSymbols:r},tS)}const nS=new Map([["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["data_matrix","DataMatrix"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["pdf417","PDF417"],["qr_code","QRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"]]);function gz(t){for(const[e,n]of nS)if(t===n)return e;return"unknown"}var du;class Nd{constructor(e={}){Gj(this,du,void 0);var n;try{const r=(n=e==null?void 0:e.formats)==null?void 0:n.filter(i=>i!=="unknown");if((r==null?void 0:r.length)===0)throw new TypeError("Hint option provided, but is empty.");r==null||r.forEach(i=>{if(!Db.includes(i))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${i}' is not a valid enum value of type BarcodeFormat.`)}),pz().catch(()=>{}),Qj(this,du,r??[])}catch(r){throw Ob(r,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Db.filter(e=>e!=="unknown")}async detect(e){try{const n=await rz(e);if(n===null)return[];let r;try{r=await mz(n,{tryHarder:!0,formats:Kj(this,du).map(i=>nS.get(i))})}catch{throw new DOMException("Barcode detection service unavailable. Use 'setZXingModuleOverrides' in offline or strict CSP environments.","NotSupportedError")}return r.map(i=>{const{topLeft:{x:s,y:o},topRight:{x:a,y:c},bottomLeft:{x:l,y:u},bottomRight:{x:h,y:d}}=i.position,f=Math.min(s,a,l,h),g=Math.min(o,c,u,d),_=Math.max(s,a,l,h),w=Math.max(o,c,u,d);return{boundingBox:new DOMRectReadOnly(f,g,_-f,w-g),rawValue:new TextDecoder().decode(i.bytes),format:gz(i.format),cornerPoints:[{x:s,y:o},{x:a,y:c},{x:h,y:d},{x:l,y:u}]}})}catch(n){throw Ob(n,"Failed to execute 'detect' on 'BarcodeDetector'")}}}du=new WeakMap;const rS=(t,e,n="error")=>{let r,i;const s=new Promise((o,a)=>{r=o,i=a,t.addEventListener(e,r),t.addEventListener(n,i)});return s.finally(()=>{t.removeEventListener(e,r),t.removeEventListener(n,i)}),s},Fb=t=>new Promise(e=>setTimeout(e,t));class _z extends Error{constructor(){super("can't process cross-origin image"),this.name="DropImageFetchError"}}class iS extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class vz extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class yz extends Error{constructor(){super("Loading camera stream timed out after 3 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let am;const wz=t=>{am=new Nd({formats:t})},bz=async(t,{detectHandler:e,locateHandler:n,minDelay:r,formats:i})=>{am=new Nd({formats:i});const s=o=>async a=>{if(t.readyState>1){const{lastScanned:c,contentBefore:l,lastScanHadContent:u}=o;if(a-c<r)window.requestAnimationFrame(s(o));else{const h=await am.detect(t),d=h.some(_=>!l.includes(_.rawValue));d&&e(h);const f=h.length>0;f&&n(h),!f&&u&&n(h);const g={lastScanned:a,lastScanHadContent:f,contentBefore:d?h.map(_=>_.rawValue):l};window.requestAnimationFrame(s(g))}}};s({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())},Ez=async t=>{if(t.startsWith("http")&&t.includes(location.host)===!1)throw new _z;const e=document.createElement("img");return e.src=t,await rS(e,"load"),e},sS=async(t,e=["qr_code"])=>await new Nd({formats:e}).detect(t),xz=async(t,e=["qr_code"])=>{const n=new Nd({formats:e}),r=await Ez(t);return await n.detect(r)};var oS={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.compactObject=lS;Bn.deprecated=Nz;var Tz=Bn.detectBrowser=Dz;Bn.disableLog=Sz;Bn.disableWarnings=Pz;Bn.extractVersion=fu;Bn.filterStats=Oz;Bn.log=kz;Bn.walkStats=mh;Bn.wrapPeerConnectionEvent=Rz;function Iz(t,e,n){return e=Cz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cz(t){var e=Az(t,"string");return ji(e)==="symbol"?e:String(e)}function Az(t,e){if(ji(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ji(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ji(t){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(t)}var aS=!0,cS=!0;function fu(t,e,n){var r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Rz(t,e,n){if(t.RTCPeerConnection){var r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);var c=function(l){var u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};var s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);var c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get:function(){return this["_on"+e]},set:function(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}}function Sz(t){return typeof t!="boolean"?new Error("Argument type: "+ji(t)+". Please use a boolean."):(aS=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Pz(t){return typeof t!="boolean"?new Error("Argument type: "+ji(t)+". Please use a boolean."):(cS=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function kz(){if((typeof window>"u"?"undefined":ji(window))==="object"){if(aS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Nz(t,e){cS&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Dz(t){var e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;var n=t.navigator;if(n.mozGetUserMedia)e.browser="firefox",e.version=fu(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=fu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=fu(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Vb(t){return Object.prototype.toString.call(t)==="[object Object]"}function lS(t){return Vb(t)?Object.keys(t).reduce(function(e,n){var r=Vb(t[n]),i=r?lS(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,Iz({},n,i))},{}):t}function mh(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(function(r){r.endsWith("Id")?mh(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(function(i){mh(t,t.get(i),n)})}))}function Oz(t,e,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;var s=[];return t.forEach(function(o){o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(function(o){t.forEach(function(a){a.type===r&&a.trackId===o.id&&mh(t,a,i)})}),i}Object.defineProperty(oS,"__esModule",{value:!0});var Mz=oS.shimGetUserMedia=Fz,Lz=$z(Bn);function uS(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(uS=function(r){return r?n:e})(t)}function $z(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||Ci(t)!=="object"&&typeof t!="function")return{default:t};var n=uS(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Ci(t){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(t)}var Bb=Lz.log;function Fz(t,e){var n=t&&t.navigator;if(n.mediaDevices){var r=function(c){if(Ci(c)!=="object"||c.mandatory||c.optional)return c;var l={};return Object.keys(c).forEach(function(u){if(!(u==="require"||u==="advanced"||u==="mediaSource")){var h=Ci(c[u])==="object"?c[u]:{ideal:c[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);var d=function(g,_){return g?g+_.charAt(0).toUpperCase()+_.slice(1):_==="deviceId"?"sourceId":_};if(h.ideal!==void 0){l.optional=l.optional||[];var f={};typeof h.ideal=="number"?(f[d("min",u)]=h.ideal,l.optional.push(f),f={},f[d("max",u)]=h.ideal,l.optional.push(f)):(f[d("",u)]=h.ideal,l.optional.push(f))}h.exact!==void 0&&typeof h.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",u)]=h.exact):["min","max"].forEach(function(g){h[g]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(g,u)]=h[g])})}}),c.advanced&&(l.optional=(l.optional||[]).concat(c.advanced)),l},i=function(c,l){if(e.version>=61)return l(c);if(c=JSON.parse(JSON.stringify(c)),c&&Ci(c.audio)==="object"){var u=function(g,_,w){_ in g&&!(w in g)&&(g[w]=g[_],delete g[_])};c=JSON.parse(JSON.stringify(c)),u(c.audio,"autoGainControl","googAutoGainControl"),u(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=r(c.audio)}if(c&&Ci(c.video)==="object"){var h=c.video.facingMode;h=h&&(Ci(h)==="object"?h:{ideal:h});var d=e.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete c.video.facingMode;var f;if(h.exact==="environment"||h.ideal==="environment"?f=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(function(g){g=g.filter(function(w){return w.kind==="videoinput"});var _=g.find(function(w){return f.some(function(x){return w.label.toLowerCase().includes(x)})});return!_&&g.length&&f.includes("back")&&(_=g[g.length-1]),_&&(c.video.deviceId=h.exact?{exact:_.deviceId}:{ideal:_.deviceId}),c.video=r(c.video),Bb("chrome: "+JSON.stringify(c)),l(c)})}c.video=r(c.video)}return Bb("chrome: "+JSON.stringify(c)),l(c)},s=function(c){return e.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(c,l,u){i(c,function(h){n.webkitGetUserMedia(h,l,function(d){u&&u(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,function(l){return a(l).then(function(u){if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(function(h){h.stop()}),new DOMException("","NotFoundError");return u},function(u){return Promise.reject(s(u))})})}}}}var hS={};Object.defineProperty(hS,"__esModule",{value:!0});var Vz=hS.shimGetUserMedia=Hz,Bz=Uz(Bn);function dS(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(dS=function(r){return r?n:e})(t)}function Uz(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||vo(t)!=="object"&&typeof t!="function")return{default:t};var n=dS(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function vo(t){"@babel/helpers - typeof";return vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(t)}function Hz(t,e){var n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(c,l,u){Bz.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(c).then(l,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(c,l,u){l in c&&!(u in c)&&(c[u]=c[l],delete c[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return vo(c)==="object"&&vo(c.audio)==="object"&&(c=JSON.parse(JSON.stringify(c)),i(c.audio,"autoGainControl","mozAutoGainControl"),i(c.audio,"noiseSuppression","mozNoiseSuppression")),s(c)},r&&r.prototype.getSettings){var o=r.prototype.getSettings;r.prototype.getSettings=function(){var c=o.apply(this,arguments);return i(c,"mozAutoGainControl","autoGainControl"),i(c,"mozNoiseSuppression","noiseSuppression"),c}}if(r&&r.prototype.applyConstraints){var a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(c){return this.kind==="audio"&&vo(c)==="object"&&(c=JSON.parse(JSON.stringify(c)),i(c,"autoGainControl","mozAutoGainControl"),i(c,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[c])}}}}var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.shimAudioContext=Jz;Wr.shimCallbacksAPI=Kz;Wr.shimConstraints=mS;Wr.shimCreateOfferLegacy=Xz;var jz=Wr.shimGetUserMedia=Gz;Wr.shimLocalStreamsAPI=Wz;Wr.shimRTCIceServerUrls=Qz;Wr.shimRemoteStreamsAPI=qz;Wr.shimTrackEventTransceiver=Yz;var fS=zz(Bn);function pS(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(pS=function(r){return r?n:e})(t)}function zz(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||zi(t)!=="object"&&typeof t!="function")return{default:t};var n=pS(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function zi(t){"@babel/helpers - typeof";return zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(t)}function Wz(t){if(!(zi(t)!=="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(function(i){return e.call(r,i,n)}),n.getVideoTracks().forEach(function(i){return e.call(r,i,n)})},t.RTCPeerConnection.prototype.addTrack=function(n){for(var r=this,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(function(a){r._localStreams?r._localStreams.includes(a)||r._localStreams.push(a):r._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){var r=this;this._localStreams||(this._localStreams=[]);var i=this._localStreams.indexOf(n);if(i!==-1){this._localStreams.splice(i,1);var s=n.getTracks();this.getSenders().forEach(function(o){s.includes(o.track)&&r.removeTrack(o)})}})}}function qz(t){if(!(zi(t)!=="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var r=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(function(s){if(r._remoteStreams||(r._remoteStreams=[]),!r._remoteStreams.includes(s)){r._remoteStreams.push(s);var o=new Event("addstream");o.stream=s,r.dispatchEvent(o)}})})}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(function(i){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(i)>=0)){n._remoteStreams.push(i);var s=new Event("addstream");s.stream=i,n.dispatchEvent(s)}})}),e.apply(n,arguments)}}}function Kz(t){if(!(zi(t)!=="object"||!t.RTCPeerConnection)){var e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,l){var u=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[u]);return l?(h.then(c,l),Promise.resolve()):h},e.createAnswer=function(c,l){var u=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[u]);return l?(h.then(c,l),Promise.resolve()):h};var a=function(c,l,u){var h=i.apply(this,[c]);return u?(h.then(l,u),Promise.resolve()):h};e.setLocalDescription=a,a=function(c,l,u){var h=s.apply(this,[c]);return u?(h.then(l,u),Promise.resolve()):h},e.setRemoteDescription=a,a=function(c,l,u){var h=o.apply(this,[c]);return u?(h.then(l,u),Promise.resolve()):h},e.addIceCandidate=a}}function Gz(t){var e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){var n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=function(i){return r(mS(i))}}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,s,o){e.mediaDevices.getUserMedia(i).then(s,o)}).bind(e))}function mS(t){return t&&t.video!==void 0?Object.assign({},t,{video:fS.compactObject(t.video)}):t}function Qz(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,r){if(n&&n.iceServers){for(var i=[],s=0;s<n.iceServers.length;s++){var o=n.iceServers[s];o.urls===void 0&&o.url?(fS.deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,i.push(o)):i.push(n.iceServers[s])}n.iceServers=i}return new e(n,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})}}function Yz(t){zi(t)==="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Xz(t){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);var r=this.getTransceivers().find(function(s){return s.receiver.track.kind==="audio"});n.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);var i=this.getTransceivers().find(function(s){return s.receiver.track.kind==="video"});n.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function Jz(t){zi(t)!=="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Zz=t=>{let e=!1,n;return(...r)=>(e||(n=t(r),e=!0),n)};function Yr(t,e){if(t===!1)throw new Error(e??"assertion failure")}const e7=Zz(()=>{const t=Tz(window);switch(t.browser){case"chrome":Mz(window,t);break;case"firefox":Vz(window,t);break;case"safari":jz(window,t);break;default:throw new iS}});let Jr={isActive:!1};function k0(){if(Jr.isActive){Jr.videoEl.src="",Jr.videoEl.srcObject=null,Jr.videoEl.load();for(const t of Jr.stream.getTracks())Jr.stream.removeTrack(t),t.stop();Jr={isActive:!1}}}async function t7(t,{constraints:e,torch:n}){var r,i;if(window.isSecureContext!==!0)throw new vz;if(((r=navigator==null?void 0:navigator.mediaDevices)==null?void 0:r.getUserMedia)===void 0)throw new iS;e7();const s=await navigator.mediaDevices.getUserMedia({audio:!1,video:e});if(t.srcObject!==void 0?t.srcObject=s:t.mozSrcObject!==void 0?t.mozSrcObject=s:window.URL.createObjectURL?t.src=window.URL.createObjectURL(s):window.webkitURL?t.src=window.webkitURL.createObjectURL(s):t.src=s.id,await Promise.race([rS(t,"loadeddata"),Fb(3e3).then(()=>{throw new yz})]),await Fb(500),n){const[a]=s.getVideoTracks();a.getCapabilities().torch?a.applyConstraints({advanced:[{torch:!0}]}):console.warn("device does not support torch capability")}Jr={videoEl:t,stream:s,isActive:!0};const[o]=Jr.stream.getVideoTracks();return((i=o==null?void 0:o.getCapabilities)==null?void 0:i.call(o))??{}}const n7={class:"qrcode-stream-wrapper"},r7={class:"qrcode-stream-overlay"},i7=rr({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(t,{emit:e}){const n=t,r=dt(),i=dt(),s=dt(),o=dt(!1),a=dt(!1);Pm(()=>{a.value=!0}),$c(()=>{k0()});const c=Gt(()=>({torch:n.torch,constraints:n.constraints,shouldStream:a.value&&!n.paused}));Or(c,async f=>{const g=s.value;Yr(g!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const _=r.value;Yr(_!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const w=_.getContext("2d");if(Yr(w!==null,"if cavnas is defined, canvas 2d context should also be non-null"),f.shouldStream)try{const x=await t7(g,f);a.value?(o.value=!0,e("camera-on",x)):k0()}catch(x){e("error",x)}else _.width=g.videoWidth,_.height=g.videoHeight,w.drawImage(g,0,0,g.videoWidth,g.videoHeight),k0(),o.value=!1,e("camera-off")},{deep:!0});const{formats:l}=c2(n);Or(l,f=>{a.value&&wz(f)});const u=Gt(()=>c.value.shouldStream&&o.value);Or(u,f=>{if(f){Yr(r.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),h(r.value),Yr(i.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),h(i.value);const g=()=>n.track===void 0?500:40;Yr(s.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),bz(s.value,{detectHandler:_=>e("detect",_),formats:n.formats,locateHandler:d,minDelay:g()})}});const h=f=>{const g=f.getContext("2d");Yr(g!==null,"canvas 2d context should always be non-null"),g.clearRect(0,0,f.width,f.height)},d=f=>{const g=i.value;Yr(g!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const _=s.value;if(Yr(_!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),f.length===0||n.track===void 0)h(g);else{const w=_.offsetWidth,x=_.offsetHeight,y=_.videoWidth,b=_.videoHeight,E=Math.max(w/y,x/b),A=y*E,R=b*E,D=A/y,$=R/b,q=(w-A)/2,P=(x-R)/2,L=({x:ge,y:he})=>({x:Math.floor(ge*D),y:Math.floor(he*$)}),H=({x:ge,y:he})=>({x:Math.floor(ge+q),y:Math.floor(he+P)}),U=f.map(ge=>{const{boundingBox:he,cornerPoints:be}=ge,{x:me,y:$e}=H(L({x:he.x,y:he.y})),{x:Re,y:B}=L({x:he.width,y:he.height});return{...ge,cornerPoints:be.map(W=>H(L(W))),boundingBox:DOMRectReadOnly.fromRect({x:me,y:$e,width:Re,height:B})}});g.width=_.offsetWidth,g.height=_.offsetHeight;const de=g.getContext("2d");n.track(U,de)}};return(f,g)=>(pt(),Pt("div",n7,[rt("video",{ref_key:"videoRef",ref:s,class:Lc([{"qrcode-stream-camera--hidden":!u.value},"qrcode-stream-camera"]),autoplay:"",muted:"",playsinline:""},null,2),R2(rt("canvas",{ref_key:"pauseFrameRef",ref:r,class:"qrcode-stream-camera"},null,512),[[UN,!u.value]]),rt("canvas",{ref_key:"trackingLayerRef",ref:i,class:"qrcode-stream-overlay"},null,512),rt("div",r7,[AE(f.$slots,"default",{},void 0,!0)])]))}}),s7=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},gS=s7(i7,[["__scopeId","data-v-dfa4038c"]]),o7=rr({__name:"QrcodeCapture",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect"],setup(t,{emit:e}){const n=t,r=i=>{if(!(!(i.target instanceof HTMLInputElement)||!i.target.files))for(const s of Array.from(i.target.files))sS(s,n.formats).then(o=>{e("detect",o)})};return(i,s)=>(pt(),Pt("input",{onChange:r,type:"file",name:"image",accept:"image/*",capture:"environment",multiple:""},null,32))}}),a7=["onDrop"],c7=rr({__name:"QrcodeDropZone",props:{formats:{type:Array,default:()=>["qr_code"]}},emits:["detect","dragover","error"],setup(t,{emit:e}){const n=t,r=async o=>{try{const a=await o;e("detect",a)}catch(a){e("error",a)}},i=o=>{e("dragover",o)},s=({dataTransfer:o})=>{if(!o)return;i(!1);const a=[...Array.from(o.files)],c=o.getData("text/uri-list");a.forEach(l=>{r(sS(l))}),c!==""&&r(xz(c,n.formats))};return(o,a)=>(pt(),Pt("div",{onDrop:Nl(s,["prevent","stop"]),onDragenter:a[0]||(a[0]=Nl(c=>i(!0),["prevent","stop"])),onDragleave:a[1]||(a[1]=Nl(c=>i(!1),["prevent","stop"])),onDragover:a[2]||(a[2]=Nl(()=>{},["prevent","stop"]))},[AE(o.$slots,"default")],40,a7))}});function l7(t){t.component("qrcode-stream",gS),t.component("qrcode-capture",o7),t.component("qrcode-drop-zone",c7)}const u7={install:l7};let gh=null;typeof window<"u"?gh=window.Vue:typeof global<"u"&&(gh=global.Vue);gh&&gh.use(u7);/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h7 extends Pn{render(){return vt`<slot></slot>`}connectedCallback(){if(super.connectedCallback(),this.getAttribute("aria-hidden")==="false"){this.removeAttribute("aria-hidden");return}this.setAttribute("aria-hidden","true")}}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const d7=On`:host{font-size:24px;width:24px;height:24px;color:inherit;font-variation-settings:inherit;font-weight:400;font-family:var(--md-icon-font, Material Symbols Outlined);display:inline-flex;font-style:normal;line-height:1;overflow:hidden;letter-spacing:normal;text-transform:none;user-select:none;white-space:nowrap;word-wrap:normal;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale}::slotted(svg){fill:currentColor}::slotted(*){height:100%;width:100%}/*# sourceMappingURL=icon-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cm=class extends h7{};cm.styles=[d7];cm=fe([xr("md-icon")],cm);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const f7=On`:host{--_container-color: var(--md-filled-icon-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-shape: var(--md-filled-icon-button-container-shape, 9999px);--_container-size: var(--md-filled-icon-button-container-size, 40px);--_disabled-container-color: var(--md-filled-icon-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-icon-button-disabled-container-opacity, 0.12);--_disabled-icon-color: var(--md-filled-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-icon-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-icon-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color: var(--md-filled-icon-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color: var(--md-filled-icon-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity: var(--md-filled-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-filled-icon-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size: var(--md-filled-icon-button-icon-size, 24px);--_pressed-icon-color: var(--md-filled-icon-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color: var(--md-filled-icon-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity: var(--md-filled-icon-button-pressed-state-layer-opacity, 0.12);--_selected-container-color: var(--md-filled-icon-button-selected-container-color, var(--md-sys-color-primary, #6750a4));--_toggle-selected-focus-icon-color: var(--md-filled-icon-button-toggle-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-icon-color: var(--md-filled-icon-button-toggle-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-hover-state-layer-color: var(--md-filled-icon-button-toggle-selected-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-icon-color: var(--md-filled-icon-button-toggle-selected-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-icon-color: var(--md-filled-icon-button-toggle-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_toggle-selected-pressed-state-layer-color: var(--md-filled-icon-button-toggle-selected-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_unselected-container-color: var(--md-filled-icon-button-unselected-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_toggle-focus-icon-color: var(--md-filled-icon-button-toggle-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-icon-color: var(--md-filled-icon-button-toggle-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-hover-state-layer-color: var(--md-filled-icon-button-toggle-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_toggle-icon-color: var(--md-filled-icon-button-toggle-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-icon-color: var(--md-filled-icon-button-toggle-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_toggle-pressed-state-layer-color: var(--md-filled-icon-button-toggle-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var( --md-filled-icon-button-container-shape-start-start, var(--_container-shape) );--_container-shape-start-end: var( --md-filled-icon-button-container-shape-start-end, var(--_container-shape) );--_container-shape-end-end: var( --md-filled-icon-button-container-shape-end-end, var(--_container-shape) );--_container-shape-end-start: var( --md-filled-icon-button-container-shape-end-start, var(--_container-shape) )}.icon-button{color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.icon-button:hover{color:var(--_hover-icon-color)}.icon-button:focus{color:var(--_focus-icon-color)}.icon-button:active{color:var(--_pressed-icon-color)}.icon-button:disabled{color:var(--_disabled-icon-color)}.icon-button::before{background-color:var(--_container-color);border-radius:inherit;content:"";inset:0;position:absolute;z-index:-1}.icon-button:disabled::before{background-color:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.icon-button:disabled .icon{opacity:var(--_disabled-icon-opacity)}.toggle-filled{--md-ripple-hover-color: var(--_toggle-hover-state-layer-color);--md-ripple-pressed-color: var(--_toggle-pressed-state-layer-color)}.toggle-filled:not(:disabled){color:var(--_toggle-icon-color)}.toggle-filled:not(:disabled):hover{color:var(--_toggle-hover-icon-color)}.toggle-filled:not(:disabled):focus{color:var(--_toggle-focus-icon-color)}.toggle-filled:not(:disabled):active{color:var(--_toggle-pressed-icon-color)}.toggle-filled:not(:disabled)::before{background-color:var(--_unselected-container-color)}.selected{--md-ripple-hover-color: var(--_toggle-selected-hover-state-layer-color);--md-ripple-pressed-color: var(--_toggle-selected-pressed-state-layer-color)}.selected:not(:disabled){color:var(--_toggle-selected-icon-color)}.selected:not(:disabled):hover{color:var(--_toggle-selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_toggle-selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_toggle-selected-pressed-icon-color)}.selected:not(:disabled)::before{background-color:var(--_selected-container-color)}/*# sourceMappingURL=filled-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ub(t,e=!0){return e&&getComputedStyle(t).getPropertyValue("direction").trim()==="rtl"}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _S;class Dn extends Pn{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Ub(this,this.flipIconInRtl),this[_S]=this.attachInternals()}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Ho].form}get labels(){return this[Ho].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const e=this.href?ph`div`:ph`button`,{ariaLabel:n,ariaHasPopup:r,ariaExpanded:i}=this,s=n&&this.ariaLabelSelected,o=s?Me:this.selected;let a=Me;return this.href||(a=s&&this.selected?this.ariaLabelSelected:n),VR`<${e}
        class="icon-button ${Ls(this.getRenderClasses())}"
        id="button"
        aria-label="${a||Me}"
        aria-haspopup="${!this.href&&r||Me}"
        aria-expanded="${!this.href&&i||Me}"
        aria-pressed="${o}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?Me:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():Me}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return vt`
      <a class="link"
        id="link"
        href="${this.href}"
        target="${this.target||Me}"
        aria-label="${e||Me}"
      ></a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return vt`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return vt`<span class="icon icon--selected"><slot name="selectedIcon"><slot></slot></slot></span>`}renderTouchTarget(){return vt`<span class="touch"></span>`}renderFocusRing(){return vt`<md-focus-ring part="focus-ring" for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){return vt`<md-ripple
      for=${this.href?"link":Me}
      ?disabled="${!this.href&&this.disabled}"
    ></md-ripple>`}connectedCallback(){this.flipIcon=Ub(this,this.flipIconInRtl),super.connectedCallback()}handleClick(){!this.toggle||this.disabled||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}_S=Ho;pl(Dn),zR(Dn);Dn.formAssociated=!0;Dn.shadowRootOptions={mode:"open",delegatesFocus:!0};fe([He({type:Boolean,reflect:!0})],Dn.prototype,"disabled",void 0);fe([He({type:Boolean,attribute:"flip-icon-in-rtl"})],Dn.prototype,"flipIconInRtl",void 0);fe([He()],Dn.prototype,"href",void 0);fe([He()],Dn.prototype,"target",void 0);fe([He({attribute:"aria-label-selected"})],Dn.prototype,"ariaLabelSelected",void 0);fe([He({type:Boolean})],Dn.prototype,"toggle",void 0);fe([He({type:Boolean,reflect:!0})],Dn.prototype,"selected",void 0);fe([He()],Dn.prototype,"type",void 0);fe([He()],Dn.prototype,"value",void 0);fe([Ji()],Dn.prototype,"flipIcon",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const p7=On`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-size);width:var(--_container-size);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-size))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{align-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;justify-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:none;position:absolute;width:100%}.touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}:host([touch-target=none]) .touch{display:none}/*# sourceMappingURL=shared-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lm=class extends Dn{getRenderClasses(){return{...super.getRenderClasses(),filled:!0,"toggle-filled":this.toggle}}};lm.styles=[p7,f7];lm=fe([xr("md-filled-icon-button")],lm);const m7={class:"qrScanner"},g7=rt("md-icon",null," replay ",-1),_7=[g7],v7=rr({__name:"ScanQr",emits:["codeFound","badCodeFound"],setup(t,{emit:e}){const n=dt(!0),r=dt(!1);dt();const i="vibrate"in navigator;function s(c){const l=atob(c),[u,h]=l.split("|"),d=Gp.AES.decrypt(h,u).toString(Gp.enc.Utf8),[f,g]=d.split("|"),_=+g;return[f,_]}function o(c){if(c.length>=1){i&&navigator.vibrate(200),r.value=!0;const l=new Date().getTime(),[u,h]=s(c[0].rawValue);l-h<=3e3?e("codeFound",u):(r.value=!1,e("badCodeFound",u))}}function a(){n.value=!1}return(c,l)=>(pt(),Pt("div",m7,[Vt(St(gS),{onDetect:o,constraints:{facingMode:"environment"},onCameraOn:a,paused:r.value},{default:vu(()=>[n.value?(pt(),Pt("div",{key:0,class:"loading-indicator","on:cameraOn":a},"Caricamento...",32)):lr("",!0)]),_:1},8,["paused"]),r.value?(pt(),Pt("md-filled-icon-button",{key:0,class:"restartButton",onClick:l[0]||(l[0]=u=>r.value=!1)},_7)):lr("",!0)]))}});/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dd extends Pn{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}fe([He({type:Boolean,reflect:!0})],Dd.prototype,"inset",void 0);fe([He({type:Boolean,reflect:!0,attribute:"inset-start"})],Dd.prototype,"insetStart",void 0);fe([He({type:Boolean,reflect:!0,attribute:"inset-end"})],Dd.prototype,"insetEnd",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const y7=On`:host{--_color: var(--md-divider-color, var(--md-sys-color-outline-variant, #cac4d0));--_thickness: var(--md-divider-thickness, 1px);box-sizing:border-box;color:var(--_color);display:flex;height:var(--_thickness);width:100%}:host([inset]),:host([inset-start]){padding-inline-start:16px}:host([inset]),:host([inset-end]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors: active){:host::before{background:CanvasText}}/*# sourceMappingURL=divider-styles.css.map */
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let um=class extends Dd{};um.styles=[y7];um=fe([xr("md-divider")],um);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w7={dialog:[[[{transform:"translateY(-50px)"},{transform:"translateY(0)"}],{duration:500,easing:Mc.EMPHASIZED}]],scrim:[[[{opacity:0},{opacity:.32}],{duration:500,easing:"linear"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}],[[{height:"35%"},{height:"100%"}],{duration:500,easing:Mc.EMPHASIZED,pseudoElement:"::before"}]],headline:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],content:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:0},{opacity:0,offset:.5},{opacity:1}],{duration:300,easing:"linear",fill:"forwards"}]]},b7={dialog:[[[{transform:"translateY(0)"},{transform:"translateY(-50px)"}],{duration:150,easing:Mc.EMPHASIZED_ACCELERATE}]],scrim:[[[{opacity:.32},{opacity:0}],{duration:150,easing:"linear"}]],container:[[[{height:"100%"},{height:"35%"}],{duration:150,easing:Mc.EMPHASIZED_ACCELERATE,pseudoElement:"::before"}],[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]],headline:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],content:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]]};/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ot extends Pn{get open(){return this.isOpen}set open(e){e!==this.isOpen&&(this.isOpen=e,e?(this.setAttribute("open",""),this.show()):(this.removeAttribute("open"),this.close()))}constructor(){super(),this.returnValue="",this.getOpenAnimation=()=>w7,this.getCloseAnimation=()=>b7,this.isOpen=!1,this.isAtScrollTop=!1,this.isAtScrollBottom=!1,this.nextClickIsFromContent=!1,this.hasHeadline=!1,this.hasActions=!1,this.hasIcon=!1,this.addEventListener("submit",this.handleSubmit)}async show(){var i;const{dialog:e,container:n}=this;if(!e||!n||e.open)return;if(!this.dispatchEvent(new Event("open",{cancelable:!0}))){this.open=!1;return}e.showModal(),this.open=!0,this.scroller&&(this.scroller.scrollTop=0),(i=this.querySelector("[autofocus]"))==null||i.focus(),await this.animateDialog(this.getOpenAnimation()),this.dispatchEvent(new Event("opened"))}async close(e=this.returnValue){const{dialog:n,container:r}=this;if(!n||!r||!n.open)return;const i=this.returnValue;if(this.returnValue=e,!this.dispatchEvent(new Event("close",{cancelable:!0}))){this.returnValue=i;return}await this.animateDialog(this.getCloseAnimation()),n.close(e),this.open=!1,this.dispatchEvent(new Event("closed"))}render(){const e=this.open&&!(this.isAtScrollTop&&this.isAtScrollBottom),n={"has-headline":this.hasHeadline,"has-actions":this.hasActions,"has-icon":this.hasIcon,scrollable:e,"show-top-divider":e&&!this.isAtScrollTop,"show-bottom-divider":e&&!this.isAtScrollBottom},{ariaLabel:r}=this;return vt`
      <div class="scrim"></div>
      <dialog
        class=${Ls(n)}
        aria-label=${r||Me}
        aria-labelledby=${this.hasHeadline?"headline":Me}
        role=${this.type==="alert"?"alertdialog":Me}
        @cancel=${this.handleCancel}
        @click=${this.handleDialogClick}
        .returnValue=${this.returnValue||Me}
      >
        <div class="container"
          @click=${this.handleContentClick}
        >
          <div class="headline">
            <div class="icon" aria-hidden="true">
              <slot name="icon" @slotchange=${this.handleIconChange}></slot>
            </div>
            <h2 id="headline" aria-hidden=${!this.hasHeadline||Me}>
              <slot name="headline"
                  @slotchange=${this.handleHeadlineChange}></slot>
            </h2>
            <md-divider></md-divider>
          </div>
          <div class="scroller">
            <div class="content">
              <div class="top anchor"></div>
              <slot name="content"></slot>
              <div class="bottom anchor"></div>
            </div>
          </div>
          <div class="actions">
            <md-divider></md-divider>
            <slot name="actions"
              @slotchange=${this.handleActionsChange}></slot>
          </div>
        </div>
      </dialog>
    `}firstUpdated(){this.intersectionObserver=new IntersectionObserver(e=>{for(const n of e)this.handleAnchorIntersection(n)},{root:this.scroller}),this.intersectionObserver.observe(this.topAnchor),this.intersectionObserver.observe(this.bottomAnchor)}handleDialogClick(){if(this.nextClickIsFromContent){this.nextClickIsFromContent=!1;return}this.dispatchEvent(new Event("cancel",{cancelable:!0}))&&this.close()}handleContentClick(){this.nextClickIsFromContent=!0}handleSubmit(e){const n=e.target,{submitter:r}=e;n.method!=="dialog"||!r||this.close(r.getAttribute("value")??this.returnValue)}handleCancel(e){if(e.target!==this.dialog)return;const n=!Lj(this,e);e.preventDefault(),!n&&this.close()}async animateDialog(e){const{dialog:n,scrim:r,container:i,headline:s,content:o,actions:a}=this;if(!n||!r||!i||!s||!o||!a)return;const{container:c,dialog:l,scrim:u,headline:h,content:d,actions:f}=e,g=[[n,l??[]],[r,u??[]],[i,c??[]],[s,h??[]],[o,d??[]],[a,f??[]]],_=[];for(const[w,x]of g)for(const y of x)_.push(w.animate(...y));await Promise.all(_.map(w=>w.finished))}handleHeadlineChange(e){const n=e.target;this.hasHeadline=n.assignedElements().length>0}handleActionsChange(e){const n=e.target;this.hasActions=n.assignedElements().length>0}handleIconChange(e){const n=e.target;this.hasIcon=n.assignedElements().length>0}handleAnchorIntersection(e){const{target:n,isIntersecting:r}=e;n===this.topAnchor&&(this.isAtScrollTop=r),n===this.bottomAnchor&&(this.isAtScrollBottom=r)}}pl(Ot);Ot.shadowRootOptions={...Pn.shadowRootOptions,delegatesFocus:!0};fe([He({type:Boolean})],Ot.prototype,"open",null);fe([He({attribute:!1})],Ot.prototype,"returnValue",void 0);fe([He()],Ot.prototype,"type",void 0);fe([sr("dialog")],Ot.prototype,"dialog",void 0);fe([sr(".scrim")],Ot.prototype,"scrim",void 0);fe([sr(".container")],Ot.prototype,"container",void 0);fe([sr(".headline")],Ot.prototype,"headline",void 0);fe([sr(".content")],Ot.prototype,"content",void 0);fe([sr(".actions")],Ot.prototype,"actions",void 0);fe([Ji()],Ot.prototype,"isAtScrollTop",void 0);fe([Ji()],Ot.prototype,"isAtScrollBottom",void 0);fe([sr(".scroller")],Ot.prototype,"scroller",void 0);fe([sr(".top.anchor")],Ot.prototype,"topAnchor",void 0);fe([sr(".bottom.anchor")],Ot.prototype,"bottomAnchor",void 0);fe([Ji()],Ot.prototype,"hasHeadline",void 0);fe([Ji()],Ot.prototype,"hasActions",void 0);fe([Ji()],Ot.prototype,"hasIcon",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const E7=On`:host{--_container-color: var(--md-dialog-container-color, var(--md-sys-color-surface-container-high, #ece6f0));--_container-shape: var(--md-dialog-container-shape, 28px);--_headline-color: var(--md-dialog-headline-color, var(--md-sys-color-on-surface, #1d1b20));--_headline-type: var(--md-dialog-headline-type, var(--md-sys-typescale-headline-small, 400 1.5rem / 2rem var(--md-ref-typeface-brand, Roboto)));--_supporting-text-color: var(--md-dialog-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-type: var(--md-dialog-supporting-text-type, 400 0.875rem / 1.25rem var(--md-ref-typeface-plain, Roboto));--_icon-color: var(--md-dialog-icon-color, var(--md-sys-color-secondary, #625b71));--_icon-size: var(--md-dialog-icon-size, 24px);--_container-shape-start-start: var( --md-dialog-container-shape-start-start, var(--_container-shape) );--_container-shape-start-end: var( --md-dialog-container-shape-start-end, var(--_container-shape) );--_container-shape-end-end: var( --md-dialog-container-shape-end-end, var(--_container-shape) );--_container-shape-end-start: var( --md-dialog-container-shape-end-start, var(--_container-shape) );border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:contents;margin:auto;max-height:min(560px,100% - 48px);max-width:min(560px,100% - 48px);min-height:140px;min-width:280px;position:fixed;height:fit-content;width:fit-content}dialog{background:rgba(0,0,0,0);border:none;border-radius:inherit;flex-direction:column;height:inherit;margin:inherit;max-height:inherit;max-width:inherit;min-height:inherit;min-width:inherit;outline:none;overflow:visible;padding:0;width:inherit}dialog[open]{display:flex}::backdrop{background:none}.scrim{background:var(--md-sys-color-scrim, #000);display:none;inset:0;opacity:32%;pointer-events:none;position:fixed;z-index:1}:host([open]) .scrim{display:flex}h2{all:unset;align-self:stretch}.headline{align-items:center;color:var(--_headline-color);display:flex;flex-direction:column;font:var(--_headline-type);position:relative}slot[name=headline]::slotted(*){align-items:center;align-self:stretch;display:flex;gap:8px;margin:24px 24px 0}.icon{display:flex}slot[name=icon]::slotted(*){color:var(--_icon-color);fill:currentColor;font-size:var(--_icon-size);margin-top:24px;height:var(--_icon-size);width:var(--_icon-size)}.has-icon slot[name=headline]::slotted(*){justify-content:center;margin-top:16px}.scrollable slot[name=headline]::slotted(*){margin-bottom:16px}.scrollable.has-headline slot[name=content]::slotted(*){margin-top:8px}.container{border-radius:inherit;display:flex;flex:1;flex-direction:column;overflow:hidden;position:relative;transform-origin:top}.container::before{background:var(--_container-color);content:"";inset:0;position:absolute}.scroller{flex:1;overflow:hidden;z-index:0}.scrollable .scroller{overflow-y:scroll}.content{color:var(--_supporting-text-color);font:var(--_supporting-text-type);position:relative}slot[name=content]::slotted(*){margin:24px}.anchor{position:absolute}.top.anchor{top:0}.bottom.anchor{bottom:0}.actions{position:relative}slot[name=actions]::slotted(*){display:flex;gap:8px;justify-content:flex-end;margin:16px 24px 24px}.has-actions slot[name=content]::slotted(*){margin-bottom:8px}md-divider{display:none;position:absolute}.has-headline.show-top-divider .headline md-divider,.has-actions.show-bottom-divider .actions md-divider{display:flex}.headline md-divider{bottom:0}.actions md-divider{top:0}@media(forced-colors: active){dialog{outline:2px solid WindowText}}/*# sourceMappingURL=dialog-styles.css.map */
`;/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hm=class extends Ot{};hm.styles=[E7];hm=fe([xr("md-dialog")],hm);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x7 extends Nn{}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const T7=On`:host{--_container-height: var(--md-text-button-container-height, 40px);--_container-shape: var(--md-text-button-container-shape, 9999px);--_disabled-label-text-color: var(--md-text-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-text-button-disabled-label-text-opacity, 0.38);--_focus-label-text-color: var(--md-text-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color: var(--md-text-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color: var(--md-text-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity: var(--md-text-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-text-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-type: var(--md-text-button-label-text-type, var(--md-sys-typescale-label-large, 500 0.875rem / 1.25rem var(--md-ref-typeface-plain, Roboto)));--_pressed-label-text-color: var(--md-text-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color: var(--md-text-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-text-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-text-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-text-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-text-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color: var(--md-text-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color: var(--md-text-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-text-button-icon-size, 18px);--_pressed-icon-color: var(--md-text-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_leading-space: var(--md-text-button-leading-space, 12px);--_trailing-space: var(--md-text-button-trailing-space, 12px);--_with-leading-icon-leading-space: var(--md-text-button-with-leading-icon-leading-space, 12px);--_with-leading-icon-trailing-space: var(--md-text-button-with-leading-icon-trailing-space, 16px);--_with-trailing-icon-leading-space: var(--md-text-button-with-trailing-icon-leading-space, 16px);--_with-trailing-icon-trailing-space: var(--md-text-button-with-trailing-icon-trailing-space, 12px);--_container-color: none;--_disabled-container-color: none;--_disabled-container-opacity: 0;--_container-shape-start-start: var( --md-text-button-container-shape-start-start, var(--_container-shape) );--_container-shape-start-end: var( --md-text-button-container-shape-start-end, var(--_container-shape) );--_container-shape-end-end: var( --md-text-button-container-shape-end-end, var(--_container-shape) );--_container-shape-end-start: var( --md-text-button-container-shape-end-start, var(--_container-shape) )}/*# sourceMappingURL=text-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dm=class extends x7{};dm.styles=[qR,T7];dm=fe([xr("md-text-button")],dm);const I7=["open"],C7=rt("div",{slot:"headline"},"Conferma identità",-1),A7={key:0,slot:"content",id:"form-id",method:"dialog"},R7=["open"],S7=rt("div",{slot:"headline"},"Codice non trovato",-1),P7={key:0,slot:"content",id:"form-id",method:"dialog"},k7={slot:"actions"},N7=["open"],D7=rt("div",{slot:"headline"},"Codice errato",-1),O7={key:0,slot:"content",id:"form-id",method:"dialog"},M7={slot:"actions"},L7=rr({__name:"Scanner",setup(t){const e=dt(),n=dt(),r=dt(!1),i=dt(!1),s=dt(!1);async function o(u){n.value=u;const h=await x_(ri(dr,`codes/${u}`),{once:!0}).promise.value;if(!h){i.value=!0;return}e.value=Gt(()=>h.user),r.value=!0}async function a(u){n.value=u,s.value=!0}async function c(){r.value=!1;const u=e.value.value;await DA(dr,async h=>{h.set(ri(dr,`scans/${new Date().getTime()}`),{code:n.value,timestamp:ih(),username:u.username,userRef:ri(dr,`users/${u.id}`)}),h.update(ri(dr,`users/${u.id}`),{lastPunchTime:ih()})})}function l(){r.value=!1}return(u,h)=>(pt(),Pt(Jn,null,[Vt(v7,{onCodeFound:o,onBadCodeFound:a}),rt("md-dialog",{onClose:h[0]||(h[0]=d=>r.value=!1),class:"removeDialog",type:"alert",open:r.value},[C7,e.value&&e.value.value?(pt(),Pt("form",A7,[rt("div",null," Il codice corrisponde a: "+Jl(e.value.value.username),1)])):lr("",!0),rt("div",{slot:"actions"},[rt("md-text-button",{form:"form-id",value:"cancel",onClick:l},"Annulla"),rt("md-text-button",{form:"form-id",value:"confirm",onClick:c},"Conferma")])],40,I7),rt("md-dialog",{onClose:h[2]||(h[2]=d=>i.value=!1),class:"removeDialog",type:"alert",open:i.value},[S7,n.value?(pt(),Pt("form",P7,[rt("div",null," Il codice non corrisponde a nessun utente. Contatta gli sviluppatori con il seguente codice: "+Jl(n.value),1)])):lr("",!0),rt("div",k7,[rt("md-text-button",{form:"form-id",value:"congirm",onClick:h[1]||(h[1]=d=>i.value=!1)},"Ok")])],40,R7),rt("md-dialog",{onClose:h[4]||(h[4]=d=>s.value=!1),class:"removeDialog",type:"alert",open:s.value},[D7,n.value?(pt(),Pt("form",O7,[rt("div",null," Il codice non è ben formattato. Controlla che l'ora e la data dei dispositivi siano corretti. Contatta gli sviluppatori e comunica il seguente codice: "+Jl(n.value),1)])):lr("",!0),rt("div",M7,[rt("md-text-button",{form:"form-id",value:"congirm",onClick:h[3]||(h[3]=d=>s.value=!1)},"Ok")])],40,N7)],64))}}),$7=t=>(y2("data-v-cb6d17e7"),t=t(),w2(),t),F7=["src"],V7=$7(()=>rt("img",{class:"accountImage",src:"https://images.crunchbase.com/image/upload/c_thumb,h_170,w_170,f_auto,g_faces,z_0.7,b_white,q_auto:eco,dpr_1/llwijg0ncg0pyknjcmnk",alt:""},null,-1)),B7=rr({__name:"AccountImage",setup(t){var r;const e=Vh(),n=dt((r=e.value)==null?void 0:r.providerData[0].photoURL);return(i,s)=>{const o=V2("RouterLink");return pt(),Pt("div",null,[n.value?(pt(),wo(o,{key:0,to:"/myAccount"},{default:vu(()=>[rt("img",{class:"accountImage",src:n.value,referrerpolicy:"no-referrer",alt:""},null,8,F7)]),_:1})):(pt(),wo(o,{key:1,to:"/myAccount"},{default:vu(()=>[V7]),_:1}))])}}});const U7=iR(B7,[["__scopeId","data-v-cb6d17e7"]]);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const H7=On`@media(forced-colors: active){:host{--md-switch-disabled-selected-icon-color: GrayText;--md-switch-disabled-selected-icon-opacity: 1;--md-switch-disabled-selected-track-color: GrayText;--md-switch-disabled-track-opacity: 1;--md-switch-disabled-handle-color: GrayText;--md-switch-disabled-handle-opacity: 1;--md-switch-disabled-icon-color: Canvas;--md-switch-disabled-icon-opacity: 1;--md-switch-selected-focus-track-color: ButtonText;--md-switch-selected-hover-track-color: ButtonText;--md-switch-selected-icon-color: ButtonText;--md-switch-selected-hover-icon-color: ButtonText;--md-switch-selected-focus-icon-color: ButtonText;--md-switch-selected-pressed-icon-color: ButtonText;--md-switch-selected-pressed-track-color: ButtonText;--md-switch-selected-track-color: ButtonText;--md-switch-focus-handle-color: ButtonText;--md-switch-handle-color: ButtonText;--md-switch-hover-handle-color: ButtonText;--md-switch-icon-color: Canvas;--md-switch-hover-icon-color: Canvas;--md-switch-focus-icon-color: Canvas;--md-switch-pressed-icon-color: Canvas;--md-switch-pressed-handle-color: ButtonText}}/*# sourceMappingURL=forced-colors-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qr extends Pn{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this.internals.form}get labels(){return this.internals.labels}constructor(){super(),this.disabled=!1,this.selected=!1,this.icons=!1,this.showOnlySelectedIcon=!1,this.value="on",this.internals=this.attachInternals(),this.addEventListener("click",e=>{var n;jR(e)&&((n=this.button)==null||n.focus(),this.button!=null&&HR(this.button))})}update(e){const n=String(this.selected);this.internals.setFormValue(this.selected?this.value:null,n),super.update(e)}render(){return vt`
      <button
        id="switch"
        type="button"
        class="switch ${Ls(this.getRenderClasses())}"
        role="switch"
        aria-checked="${this.selected}"
        aria-label=${this.ariaLabel||Me}
        ?disabled=${this.disabled}
        @click=${this.handleClick}
      >
        <md-focus-ring part="focus-ring"></md-focus-ring>
        <span class="track">
          ${this.renderHandle()}
        </span>
      </button>
    `}getRenderClasses(){return{"switch--selected":this.selected,"switch--unselected":!this.selected}}renderHandle(){const e={"with-icon":this.showOnlySelectedIcon?this.selected:this.icons};return vt`
      ${this.renderTouchTarget()}
      <span class="handle-container">
        <md-ripple for="switch" ?disabled="${this.disabled}"></md-ripple>
        <span class="handle ${Ls(e)}">
          ${this.shouldShowIcons()?this.renderIcons():vt``}
        </span>
      </span>
    `}renderIcons(){return vt`
      <div class="icons">
        ${this.renderOnIcon()}
        ${this.showOnlySelectedIcon?vt``:this.renderOffIcon()}
      </div>
    `}renderOnIcon(){return vt`
      <svg class="icon icon--on" viewBox="0 0 24 24">
        <path d="M9.55 18.2 3.65 12.3 5.275 10.675 9.55 14.95 18.725 5.775 20.35 7.4Z"/>
      </svg>
    `}renderOffIcon(){return vt`
      <svg class="icon icon--off" viewBox="0 0 24 24">
        <path d="M6.4 19.2 4.8 17.6 10.4 12 4.8 6.4 6.4 4.8 12 10.4 17.6 4.8 19.2 6.4 13.6 12 19.2 17.6 17.6 19.2 12 13.6Z"/>
      </svg>
    `}renderTouchTarget(){return vt`<span class="touch"></span>`}shouldShowIcons(){return this.icons||this.showOnlySelectedIcon}handleClick(){this.disabled||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}formResetCallback(){this.selected=this.hasAttribute("selected")}formStateRestoreCallback(e){this.selected=e==="true"}}pl(qr);qr.shadowRootOptions={mode:"open",delegatesFocus:!0};qr.formAssociated=!0;fe([He({type:Boolean,reflect:!0})],qr.prototype,"disabled",void 0);fe([He({type:Boolean})],qr.prototype,"selected",void 0);fe([He({type:Boolean})],qr.prototype,"icons",void 0);fe([He({type:Boolean,attribute:"show-only-selected-icon"})],qr.prototype,"showOnlySelectedIcon",void 0);fe([sr("button")],qr.prototype,"button",void 0);fe([He()],qr.prototype,"value",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const j7=On`:host{--_disabled-selected-handle-color: var(--md-switch-disabled-selected-handle-color, var(--md-sys-color-surface, #fef7ff));--_disabled-selected-handle-opacity: var(--md-switch-disabled-selected-handle-opacity, 1);--_disabled-selected-icon-color: var(--md-switch-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-icon-opacity: var(--md-switch-disabled-selected-icon-opacity, 0.38);--_disabled-selected-track-color: var(--md-switch-disabled-selected-track-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-track-opacity: var(--md-switch-disabled-track-opacity, 0.12);--_handle-shape: var(--md-switch-handle-shape, 9999px);--_pressed-handle-height: var(--md-switch-pressed-handle-height, 28px);--_pressed-handle-width: var(--md-switch-pressed-handle-width, 28px);--_selected-focus-handle-color: var(--md-switch-selected-focus-handle-color, var(--md-sys-color-primary-container, #eaddff));--_selected-focus-icon-color: var(--md-switch-selected-focus-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_selected-focus-track-color: var(--md-switch-selected-focus-track-color, var(--md-sys-color-primary, #6750a4));--_selected-handle-color: var(--md-switch-selected-handle-color, var(--md-sys-color-on-primary, #fff));--_selected-handle-height: var(--md-switch-selected-handle-height, 24px);--_selected-handle-width: var(--md-switch-selected-handle-width, 24px);--_selected-hover-handle-color: var(--md-switch-selected-hover-handle-color, var(--md-sys-color-primary-container, #eaddff));--_selected-hover-icon-color: var(--md-switch-selected-hover-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_selected-hover-state-layer-color: var(--md-switch-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-switch-selected-hover-state-layer-opacity, 0.08);--_selected-hover-track-color: var(--md-switch-selected-hover-track-color, var(--md-sys-color-primary, #6750a4));--_selected-icon-color: var(--md-switch-selected-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_selected-icon-size: var(--md-switch-selected-icon-size, 16px);--_selected-pressed-handle-color: var(--md-switch-selected-pressed-handle-color, var(--md-sys-color-primary-container, #eaddff));--_selected-pressed-icon-color: var(--md-switch-selected-pressed-icon-color, var(--md-sys-color-on-primary-container, #21005d));--_selected-pressed-state-layer-color: var(--md-switch-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-switch-selected-pressed-state-layer-opacity, 0.12);--_selected-pressed-track-color: var(--md-switch-selected-pressed-track-color, var(--md-sys-color-primary, #6750a4));--_selected-track-color: var(--md-switch-selected-track-color, var(--md-sys-color-primary, #6750a4));--_state-layer-shape: var(--md-switch-state-layer-shape, 9999px);--_state-layer-size: var(--md-switch-state-layer-size, 40px);--_track-height: var(--md-switch-track-height, 32px);--_track-outline-width: var(--md-switch-track-outline-width, 2px);--_track-shape: var(--md-switch-track-shape, 9999px);--_track-width: var(--md-switch-track-width, 52px);--_with-icon-handle-height: var(--md-switch-with-icon-handle-height, 24px);--_with-icon-handle-width: var(--md-switch-with-icon-handle-width, 24px);--_disabled-handle-color: var(--md-switch-disabled-handle-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-handle-opacity: var(--md-switch-disabled-handle-opacity, 0.38);--_disabled-icon-color: var(--md-switch-disabled-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-icon-opacity: var(--md-switch-disabled-icon-opacity, 0.38);--_disabled-track-color: var(--md-switch-disabled-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-track-outline-color: var(--md-switch-disabled-track-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-handle-color: var(--md-switch-focus-handle-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-icon-color: var(--md-switch-focus-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_focus-track-color: var(--md-switch-focus-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_focus-track-outline-color: var(--md-switch-focus-track-outline-color, var(--md-sys-color-outline, #79747e));--_handle-color: var(--md-switch-handle-color, var(--md-sys-color-outline, #79747e));--_handle-height: var(--md-switch-handle-height, 16px);--_handle-width: var(--md-switch-handle-width, 16px);--_hover-handle-color: var(--md-switch-hover-handle-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-switch-hover-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_hover-state-layer-color: var(--md-switch-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-switch-hover-state-layer-opacity, 0.08);--_hover-track-color: var(--md-switch-hover-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_hover-track-outline-color: var(--md-switch-hover-track-outline-color, var(--md-sys-color-outline, #79747e));--_icon-color: var(--md-switch-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_icon-size: var(--md-switch-icon-size, 16px);--_pressed-handle-color: var(--md-switch-pressed-handle-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-switch-pressed-icon-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_pressed-state-layer-color: var(--md-switch-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-opacity: var(--md-switch-pressed-state-layer-opacity, 0.12);--_pressed-track-color: var(--md-switch-pressed-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_pressed-track-outline-color: var(--md-switch-pressed-track-outline-color, var(--md-sys-color-outline, #79747e));--_track-color: var(--md-switch-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_track-outline-color: var(--md-switch-track-outline-color, var(--md-sys-color-outline, #79747e));--_handle-shape-start-start: var( --md-switch-handle-shape-start-start, var(--_handle-shape) );--_handle-shape-start-end: var( --md-switch-handle-shape-start-end, var(--_handle-shape) );--_handle-shape-end-end: var( --md-switch-handle-shape-end-end, var(--_handle-shape) );--_handle-shape-end-start: var( --md-switch-handle-shape-end-start, var(--_handle-shape) );--_track-shape-start-start: var( --md-switch-track-shape-start-start, var(--_track-shape) );--_track-shape-start-end: var( --md-switch-track-shape-start-end, var(--_track-shape) );--_track-shape-end-end: var( --md-switch-track-shape-end-end, var(--_track-shape) );--_track-shape-end-start: var( --md-switch-track-shape-end-start, var(--_track-shape) );display:inline-flex;outline:none;vertical-align:top;-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_track-height))/2) 0px}md-focus-ring{--md-focus-ring-shape-start-start: var(--_track-shape-start-start);--md-focus-ring-shape-start-end: var(--_track-shape-start-end);--md-focus-ring-shape-end-end: var(--_track-shape-end-end);--md-focus-ring-shape-end-start: var(--_track-shape-end-start)}.switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;padding:0;position:relative;width:var(--_track-width);height:var(--_track-height);border-start-start-radius:var(--_track-shape-start-start);border-start-end-radius:var(--_track-shape-start-end);border-end-end-radius:var(--_track-shape-end-end);border-end-start-radius:var(--_track-shape-end-start)}.touch{position:absolute;height:48px;width:100%}:host([touch-target=none]) .touch{display:none}.switch:disabled{cursor:default;pointer-events:none}.switch:disabled .track{background-color:rgba(0,0,0,0);border-color:rgba(0,0,0,0)}.switch:disabled .track::before{background-clip:content-box}.switch--selected:disabled .track{background-clip:border-box}.track{position:absolute;width:100%;height:100%;box-sizing:border-box;border-radius:inherit;display:flex;justify-content:center;align-items:center}.track::before{content:"";display:flex;position:absolute;height:100%;width:100%;border-radius:inherit;box-sizing:border-box;transition-property:opacity,background-color;transition-timing-function:linear;transition-duration:67ms}.switch:disabled .track::before,.switch:disabled .track::after{transition:none;opacity:var(--_disabled-track-opacity)}.switch--selected .track::before{background-color:var(--_selected-track-color)}.switch--selected:hover .track::before{background-color:var(--_selected-hover-track-color)}.switch--selected:focus-within .track::before{background-color:var(--_selected-focus-track-color)}.switch--selected:active .track::before{background-color:var(--_selected-pressed-track-color)}.switch--selected:disabled .track::before{background-color:var(--_disabled-selected-track-color)}.switch--unselected .track::before{background-color:var(--_track-color);border-color:var(--_track-outline-color);border-style:solid;border-width:var(--_track-outline-width)}.switch--unselected:hover .track::before{background-color:var(--_hover-track-color);border-color:var(--_hover-track-outline-color)}.switch--unselected:focus-visible .track::before{background-color:var(--_focus-track-color);border-color:var(--_focus-track-outline-color)}.switch--unselected:active .track::before{background-color:var(--_pressed-track-color);border-color:var(--_pressed-track-outline-color)}.switch--unselected:disabled .track::before{background-color:var(--_disabled-track-color);border-color:var(--_disabled-track-outline-color)}.handle-container{display:grid;place-items:center;position:relative;transition:margin 300ms cubic-bezier(0.175, 0.885, 0.32, 1.275)}.switch--selected .handle-container{margin-inline-start:calc(var(--_track-width) - var(--_track-height))}.switch--unselected .handle-container{margin-inline-end:calc(var(--_track-width) - var(--_track-height))}.switch:disabled .handle-container{transition:none}.handle{border-start-start-radius:var(--_handle-shape-start-start);border-start-end-radius:var(--_handle-shape-start-end);border-end-end-radius:var(--_handle-shape-end-end);border-end-start-radius:var(--_handle-shape-end-start);height:var(--_handle-height);width:var(--_handle-width);transform-origin:center;transition-property:height,width;transition-duration:250ms,250ms;transition-timing-function:cubic-bezier(0.2, 0, 0, 1),cubic-bezier(0.2, 0, 0, 1);z-index:0}.handle::before{content:"";display:flex;inset:0;position:absolute;border-radius:inherit;box-sizing:border-box;transition:background-color 67ms linear}.switch:disabled .handle,.switch:disabled .handle::before{transition:none}.switch--selected .handle{height:var(--_selected-handle-height);width:var(--_selected-handle-width)}.handle.with-icon{height:var(--_with-icon-handle-height);width:var(--_with-icon-handle-width)}.switch--selected:enabled:active .handle,.switch--unselected:enabled:active .handle{height:var(--_pressed-handle-height);width:var(--_pressed-handle-width);transition-timing-function:linear;transition-duration:100ms}.switch--selected .handle::before{background-color:var(--_selected-handle-color)}.switch--selected:hover .handle::before{background-color:var(--_selected-hover-handle-color)}.switch--selected:focus-within .handle::before{background-color:var(--_selected-focus-handle-color)}.switch--selected:active .handle::before{background-color:var(--_selected-pressed-handle-color)}.switch--selected:disabled .handle::before{background-color:var(--_disabled-selected-handle-color);opacity:var(--_disabled-selected-handle-opacity)}.switch--unselected .handle::before{background-color:var(--_handle-color)}.switch--unselected:hover .handle::before{background-color:var(--_hover-handle-color)}.switch--unselected:focus-within .handle::before{background-color:var(--_focus-handle-color)}.switch--unselected:active .handle::before{background-color:var(--_pressed-handle-color)}.switch--unselected:disabled .handle::before{background-color:var(--_disabled-handle-color);opacity:var(--_disabled-handle-opacity)}md-ripple{border-radius:var(--_state-layer-shape);height:var(--_state-layer-size);inset:unset;width:var(--_state-layer-size)}.switch--selected md-ripple{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}.switch--unselected md-ripple{--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.icons{position:relative;height:100%;width:100%}.icon{position:absolute;inset:0;margin:auto;transition:fill 67ms linear,opacity 33ms linear,transform 167ms cubic-bezier(0.2, 0, 0, 1);opacity:0}.switch:disabled .icon{transition:none}.switch--selected .icon--on,.switch--unselected .icon--off{opacity:1}.switch--unselected .handle:not(.with-icon) .icon--on{transform:rotate(-45deg)}.icon--off{width:var(--_icon-size);height:var(--_icon-size);fill:var(--_icon-color)}.switch--unselected:hover .icon--off{fill:var(--_hover-icon-color)}.switch--unselected:focus-within .icon--off{fill:var(--_focus-icon-color)}.switch--unselected:active .icon--off{fill:var(--_pressed-icon-color)}.switch--unselected:disabled .icon--off{fill:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.icon--on{width:var(--_selected-icon-size);height:var(--_selected-icon-size);fill:var(--_selected-icon-color)}.switch--selected:hover .icon--on{fill:var(--_selected-hover-icon-color)}.switch--selected:focus-within .icon--on{fill:var(--_selected-focus-icon-color)}.switch--selected:active .icon--on{fill:var(--_selected-pressed-icon-color)}.switch--selected:disabled .icon--on{fill:var(--_disabled-selected-icon-color);opacity:var(--_disabled-selected-icon-opacity)}/*# sourceMappingURL=switch-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fm=class extends qr{};fm.styles=[j7,H7];fm=fe([xr("md-switch")],fm);const z7={key:1,class:"section"},W7={key:2,class:"section"},q7={class:"scanner"},K7=rt("div",{class:"text"}," Scansiona un codice e conferma l'identità per timbrare ",-1),G7={key:3,class:"section"},Q7=rt("div",{class:"text"}," Questo è il tuo codice, mostralo per timbrare ",-1),Y7={class:"code"},X7={key:4,class:"section"},J7={class:"remote"},Z7=rt("div",{class:"text"}," Clicca sul bottone per timbrare il cartellino ",-1),eW=rr({__name:"HomeView",setup(t){var d;const e=Vh(),n=x_(ri(dr,`users/${(d=e.value)==null?void 0:d.uid}`)),r=Gt(()=>{var f;return((f=n.value)==null?void 0:f.role)==="scanner"}),i=Gt(()=>{var f;return((f=n.value)==null?void 0:f.role)==="scanned"}),s=Gt(()=>{var f;return((f=n.value)==null?void 0:f.role)==="remote"}),o=Gt(()=>{var f;return(f=n.value)==null?void 0:f.actualCode}),a=dt(window.innerWidth),c=()=>a.value=window.innerWidth;window.addEventListener("resize",c),$c(()=>window.removeEventListener("resize",c));function l(f){const g=f.getHours().toString().padStart(2,"0"),_=f.getMinutes().toString().padStart(2,"0");return`${g}:${_}`}const u=dt(!1);function h(){u.value=!0,setTimeout(()=>{u.value=!1},2e3)}return Or(n,(f,g)=>{g&&f&&g.lastPunchTime.toDate()!=f.lastPunchTime.toDate()&&(console.log("Diverso"),h(),"vibrate"in navigator&&navigator.vibrate(200))}),(f,g)=>(pt(),Pt("main",null,[a.value<900||!St(e)?(pt(),wo(U7,{key:0})):lr("",!0),!r.value&&!i.value&&!s.value?(pt(),Pt("div",z7," Aspetta qualche istante. Vedrai qui il tuo codice ")):lr("",!0),r.value?(pt(),Pt("div",W7,[rt("div",q7,[Vt(L7)]),K7])):lr("",!0),i.value&&o.value?(pt(),Pt("div",G7,[Q7,rt("div",Y7,[Vt(b9,{codeString:o.value},null,8,["codeString"])])])):lr("",!0),s.value&&o.value?(pt(),Pt("div",X7,[rt("div",J7,[Z7,Vt(qj,{class:"remoteBtn",codeString:o.value},null,8,["codeString"])])])):lr("",!0),St(n)&&(i.value||s.value)&&St(n).lastPunchTime?(pt(),Pt("div",{key:5,class:Lc({highlight:u.value,lastPunchTime:!0,"display-small":!0})}," Ultima timbratura: "+Jl(l(St(n).lastPunchTime.toDate())),3)):lr("",!0)]))}});const vS=YD({history:fD("/"),routes:[{path:"/",name:"home",meta:{requiresAuth:!0},component:eW},{path:"/login",name:"login",component:()=>x1(()=>import("./LoginView-00812830.js"),["assets/LoginView-00812830.js","assets/filled-button-9cb4e4fd.js","assets/LoginView-82260fdb.css"])},{path:"/myAccount",name:"myAccount",meta:{requiresAuth:!0},component:()=>x1(()=>import("./UserView-e9d3de7e.js"),["assets/UserView-e9d3de7e.js","assets/filled-button-9cb4e4fd.js","assets/UserView-ee7b9601.css"])}]});vS.beforeEach(async t=>{if(t.meta.requiresAuth&&!await E8())return{path:"/login",query:{redirect:t.fullPath}}});const Od=zN(XU);Od.use(GN());Od.use(vS);Od.use(YU,{firebaseApp:$_,modules:[QU()]});Od.mount("#app");export{tW as $,Me as A,pt as B,y2 as C,gj as D,Mc as E,w2 as F,rW as G,sW as H,mW as I,ri as J,dr as K,iW as L,iR as M,Ei as N,Pm as O,lW as P,cN as Q,aW as R,cW as S,Ms as T,Vh as U,St as V,Vt as W,Nn as X,qR as Y,Jn as Z,fe as _,On as a,x_ as a0,_W as a1,pW as a2,wo as a3,oW as a4,Uj as a5,Ej as b,xj as c,bj as d,xr as e,VR as f,Lj as g,ph as h,sr as i,rr as j,dt as k,nj as l,Pt as m,He as n,Ls as o,rt as p,Nl as q,pl as r,Pn as s,Ji as t,vW as u,nW as v,R2 as w,vt as x,Jl as y,lr as z};
